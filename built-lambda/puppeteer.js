!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=136)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGuid=t.calculateSha1=t.monotonicTime=t.headersArrayToObject=t.headersObjectToArray=t.mkdirIfNeeded=t.getAsBooleanFromENV=t.getFromENV=t.isUnderTest=t.setUnderTest=t.isDebugMode=t.isError=t.isObject=t.isRegExp=t.isString=t.debugAssert=t.assert=t.makeWaitForNextTask=void 0;const i=n(3),r=n(1),s=n(2),o=n(41),a=s.promisify(r.mkdir.bind(r));t.makeWaitForNextTask=function(){if(parseInt(process.versions.node,10)>=11)return setImmediate;let e=!1;const t=[],n=()=>{const i=t.shift();i?(setImmediate(n),i()):e=!1};return i=>{t.push(i),e||(e=!0,setImmediate(n))}},t.assert=function(e,t){if(!e)throw new Error(t)},t.debugAssert=function(e,t){if(d()&&!e)throw new Error(t)},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isRegExp=function(e){return e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isError=function(e){return e instanceof Error||e&&e.__proto__&&"Error"===e.__proto__.name};const c=!!u("PWDEBUG");t.isDebugMode=function(){return c};let l=!1;function d(){return l}function u(e){let t=process.env[e];return t=void 0===t?process.env["npm_config_"+e.toLowerCase()]:t,t=void 0===t?process.env["npm_package_config_"+e.toLowerCase()]:t,t}t.setUnderTest=function(){l=!0},t.isUnderTest=d,t.getFromENV=u,t.getAsBooleanFromENV=function(e){const t=u(e);return!!t&&"false"!==t&&"0"!==t},t.mkdirIfNeeded=async function(e){await a(i.dirname(e),{recursive:!0}).catch(()=>{})},t.headersObjectToArray=function(e){const t=[];for(const n in e)Object.is(e[n],void 0)||t.push({name:n,value:e[n]});return t},t.headersArrayToObject=function(e,t){const n={};for(const{name:i,value:r}of e)n[t?i.toLowerCase():i]=r;return n},t.monotonicTime=function(){const[e,t]=process.hrtime();return 1e3*e+(t/1e3|0)/1e3},t.calculateSha1=function(e){const t=o.createHash("sha1");return t.update(e),t.digest("hex")},t.createGuid=function(){return o.randomBytes(16).toString("hex")}},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.helper=void 0;const i=n(85),r=n(2),s=n(10),o=r.promisify(i);t.helper=class{static addEventListener(e,t,n){return e.on(t,n),{emitter:e,eventName:t,handler:n}}static removeEventListeners(e){for(const t of e)t.emitter.removeListener(t.eventName,t.handler);e.splice(0,e.length)}static completeUserURL(e){return(e.startsWith("localhost")||e.startsWith("127.0.0.1"))&&(e="http://"+e),e}static enclosingIntRect(e){const t=Math.floor(e.x+.001),n=Math.floor(e.y+.001);return{x:t,y:n,width:Math.ceil(e.x+e.width-.001)-t,height:Math.ceil(e.y+e.height-.001)-n}}static enclosingIntSize(e){return{width:Math.floor(e.width+.001),height:Math.floor(e.height+.001)}}static getViewportSizeFromWindowFeatures(e){const t=e.find(e=>e.startsWith("width=")),n=e.find(e=>e.startsWith("height=")),i=t?parseInt(t.substring(6),10):NaN,r=n?parseInt(n.substring(7),10):NaN;return Number.isNaN(i)||Number.isNaN(r)?null:{width:i,height:r}}static async removeFolders(e){await Promise.all(e.map(e=>o(e).catch(e=>console.error(e))))}static waitForEvent(e,n,i,r){const s=[],o=new Promise((e,o)=>{s.push(t.helper.addEventListener(n,i,n=>{try{if(r&&!r(n))return;t.helper.removeEventListeners(s),e(n)}catch(e){t.helper.removeEventListeners(s),o(e)}}))}),a=()=>t.helper.removeEventListeners(s);return e&&e.cleanupWhenAborted(a),{promise:o,dispose:a}}static secondsToRoundishMillis(e){return(1e6*e|0)/1e3}static millisToRoundishMillis(e){return(1e3*e|0)/1e3}static debugProtocolLogger(e){return(t,n)=>{e&&e(t,n),s.debugLogger.isEnabled("protocol")&&s.debugLogger.log("protocol",("send"===t?"SEND â–º ":"â—€ RECV ")+JSON.stringify(n))}}static formatBrowserLogs(e){return e.length?"\n"+"=".repeat(20)+" Browser output: "+"=".repeat(20)+"\n"+e.join("\n"):""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DispatcherConnection=t.Dispatcher=t.lookupNullableDispatcher=t.existingDispatcher=t.lookupDispatcher=t.dispatcherSymbol=void 0;const i=n(6),r=n(20),s=n(74),o=n(0),a=n(53),c=n(16);function l(e){const n=e[t.dispatcherSymbol];return o.debugAssert(n),n}t.dispatcherSymbol=Symbol("dispatcher"),t.lookupDispatcher=l,t.existingDispatcher=function(e){return e[t.dispatcherSymbol]},t.lookupNullableDispatcher=function(e){return e?l(e):void 0};class d extends i.EventEmitter{constructor(e,n,i,r,s,a=i+"@"+o.createGuid()){super(),this._dispatchers=new Map,this._disposed=!1,this._connection=e instanceof h?e:e._connection,this._isScope=!!s,this._parent=e instanceof h?void 0:e,this._scope=s?this:this._parent,o.assert(!this._connection._dispatchers.has(a)),this._connection._dispatchers.set(a,this),this._parent&&(o.assert(!this._parent._dispatchers.has(a)),this._parent._dispatchers.set(a,this)),this._type=i,this._guid=a,this._object=n,n[t.dispatcherSymbol]=this,this._parent&&this._connection.sendMessageToClient(this._parent._guid,"__create__",{type:i,initializer:r,guid:a})}_dispatchEvent(e,t={}){if(this._disposed){if(o.isUnderTest())throw new Error(`${this._guid} is sending "${e}" event after being disposed`)}else this._connection.sendMessageToClient(this._guid,e,t)}_dispose(){o.assert(!this._disposed),this._parent&&this._parent._dispatchers.delete(this._guid),this._connection._dispatchers.delete(this._guid);for(const e of[...this._dispatchers.values()])e._dispose();this._dispatchers.clear(),this._isScope&&this._connection.sendMessageToClient(this._guid,"__dispose__",{})}_debugScopeState(){return{_guid:this._guid,objects:Array.from(this._dispatchers.values()).map(e=>e._debugScopeState())}}}t.Dispatcher=d;class u extends d{constructor(e){super(e,{},"",{},!0,"")}}class h{constructor(){this._dispatchers=new Map,this.onmessage=e=>{},this._rootDispatcher=new u(this);const e=s.createScheme(e=>(t,n)=>{if(t&&"object"==typeof t&&"string"==typeof t.guid){const i=t.guid,r=this._dispatchers.get(i);if(!r)throw new s.ValidationError(`${n}: no object with guid ${i}`);if("*"!==e&&r._type!==e)throw new s.ValidationError(`${n}: object with guid ${i} has type ${r._type}, expected ${e}`);return r}throw new s.ValidationError(`${n}: expected ${e}`)});this._validateParams=(t,n,i)=>{const r=t+n[0].toUpperCase()+n.substring(1)+"Params";if(!e[r])throw new s.ValidationError(`Unknown scheme for ${t}.${n}`);return e[r](i,"")},this._validateMetadata=t=>a.tOptional(e.Metadata)(t,"")}sendMessageToClient(e,t,n){this.onmessage({guid:e,method:t,params:this._replaceDispatchersWithGuids(n)})}rootDispatcher(){return this._rootDispatcher}async dispatch(e){const{id:t,guid:n,method:i,params:s,metadata:o}=e,a=this._dispatchers.get(n);if(a)if("debugScopeState"!==i)try{const e=this._validateParams(a._type,i,s);if("function"!=typeof a[i])throw new Error(`Mismatching dispatcher: "${a._type}" does not implement "${i}"`);const n=await a[i](e,this._validateMetadata(o));this.onmessage({id:t,result:this._replaceDispatchersWithGuids(n)})}catch(e){this.onmessage({id:t,error:r.serializeError(e)})}else this.onmessage({id:t,result:this._rootDispatcher._debugScopeState()});else this.onmessage({id:t,error:r.serializeError(new Error(c.kBrowserOrContextClosedError))})}_replaceDispatchersWithGuids(e){if(!e)return e;if(e instanceof d)return{guid:e._guid};if(Array.isArray(e))return e.map(e=>this._replaceDispatchersWithGuids(e));if("object"==typeof e){const t={};for(const n of Object.keys(e))t[n]=this._replaceDispatchersWithGuids(e[n]);return t}return e}}t.DispatcherConnection=h},function(e,t){e.exports=require("events")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelOwner=void 0;const i=n(6),r=n(10),s=n(11),o=n(74);class a extends i.EventEmitter{constructor(e,t,n,r){super(),this._objects=new Map,this._connection=e instanceof a?e._connection:e,this._type=t,this._guid=n,this._parent=e instanceof a?e:void 0,this._connection._objects.set(n,this),this._parent&&(this._parent._objects.set(n,this),this._logger=this._parent._logger);const s=new i.EventEmitter;this._channel=new Proxy(s,{get:(e,i)=>{if("debugScopeState"===i)return e=>this._connection.sendMessageToServer(n,i,e);if("string"==typeof i){const e=l[function(e,t){return e+t[0].toUpperCase()+t.substring(1)+"Params"}(t,i)];if(e)return t=>this._connection.sendMessageToServer(n,i,e(t,""))}return e[i]}}),this._channel._object=this,this._initializer=r}_dispose(){this._parent&&this._parent._objects.delete(this._guid),this._connection._objects.delete(this._guid);for(const e of[...this._objects.values()])e._dispose();this._objects.clear()}_debugScopeState(){return{_guid:this._guid,objects:Array.from(this._objects.values()).map(e=>e._debugScopeState())}}async _wrapApiCall(e,t,n){n=n||this._logger;try{c(n,`=> ${e} started`);const i=await t();return c(n,`<= ${e} succeeded`),i}catch(t){throw c(n,`<= ${e} failed`),s.rewriteErrorMessage(t,e+": "+t.message),t}}toJSON(){return{_type:this._type,_guid:this._guid}}}function c(e,t){e&&e.isEnabled("api","info")&&e.log("api","info",t,[],{color:"cyan"}),r.debugLogger.log("api",t)}t.ChannelOwner=a;const l=o.createScheme(e=>(t,n)=>{if(t._object instanceof a&&("*"===e||t._object._type===e))return{guid:t._object._guid};throw new o.ValidationError(`${n}: expected ${e}`)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeProxySettings=t.verifyGeolocation=t.validateBrowserContextOptions=t.assertBrowserContextIsNotOwned=t.BrowserContext=t.contextListeners=t.runAction=t.Video=void 0;const i=n(6),r=n(12),s=n(0),o=n(4),a=n(13),c=n(9),l=n(17),d=n(59),u=n(3);t.Video=class{constructor(e,t,n){this._finishCallback=()=>{},this._videoId=t,this._path=n,this._relativePath=u.relative(e._options.recordVideo.dir,n),this._context=e,this._finishedPromise=new Promise(e=>this._finishCallback=e)}async _finish(){this._callbackOnFinish&&await this._callbackOnFinish(),this._finishCallback()}_waitForCallbackOnFinish(e){this._callbackOnFinish=e}},t.runAction=async function(e,t){const n=new l.ProgressController;return n.setListener(async e=>{for(const n of t.page._browserContext._actionListeners)await n.onAfterAction(e,t)}),await e(n)},t.contextListeners=new Set;class h extends i.EventEmitter{constructor(e,t,n){super(),this._timeoutSettings=new r.TimeoutSettings,this._pageBindings=new Map,this._closedStatus="open",this._permissions=new Map,this._downloads=new Set,this._actionListeners=new Set,this._origins=new Set,this._browser=e,this._options=t,this._browserContextId=n,this._isPersistentContext=!n,this._closePromise=new Promise(e=>this._closePromiseFulfill=e)}_setSelectors(e){this._selectors=e}selectors(){return this._selectors||d.serverSelectors}async _initialize(){for(const e of t.contextListeners)await e.onContextCreated(this)}async _ensureVideosPath(){this._options.recordVideo&&await s.mkdirIfNeeded(u.join(this._options.recordVideo.dir,"dummy"))}_browserClosed(){for(const e of this.pages())e._didClose();this._didCloseInternal()}_didCloseInternal(){"closed"!==this._closedStatus&&(this._closedStatus="closed",this._downloads.clear(),this._closePromiseFulfill(new Error("Context closed")),this.emit(h.Events.Close))}async cookies(e=[]){return e&&!Array.isArray(e)&&(e=[e]),await this._doCookies(e)}setHTTPCredentials(e){return this._doSetHTTPCredentials(e)}async exposeBinding(e,t,n){const i=c.PageBinding.identifier(e,"main");if(this._pageBindings.has(i))throw new Error(`Function "${e}" has been already registered`);for(const t of this.pages())if(t.getBinding(e,"main"))throw new Error(`Function "${e}" has been already registered in one of the pages`);const r=new c.PageBinding(e,n,t,"main");this._pageBindings.set(i,r),this._doExposeBinding(r)}async grantPermissions(e,t){let n="*";if(t){n=new URL(t).origin}const i=new Set(this._permissions.get(n)||[]);e.forEach(e=>i.add(e));const r=[...i.values()];this._permissions.set(n,r),await this._doGrantPermissions(n,r)}async clearPermissions(){this._permissions.clear(),await this._doClearPermissions()}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}async _loadDefaultContextAsIs(e){if(!this.pages().length){const t=o.helper.waitForEvent(e,this,h.Events.Page);e.cleanupWhenAborted(()=>t.dispose),await t.promise}const t=this.pages();return await t[0].mainFrame()._waitForLoadState(e,"load"),t}async _loadDefaultContext(e){const t=await this._loadDefaultContextAsIs(e);if(1!==t.length||"about:blank"!==t[0].mainFrame().url())throw new Error(`Arguments can not specify page to be opened (first url is ${t[0].mainFrame().url()})`);if(this._options.isMobile||this._options.locale){const e=t[0];await this.newPage(),await e.close()}}_authenticateProxyViaHeader(){const e=this._options.proxy||this._browser._options.proxy||{username:void 0,password:void 0},{username:t,password:n}=e;if(t){this._options.httpCredentials={username:t,password:n};const e=Buffer.from(`${t}:${n}`).toString("base64");this._options.extraHTTPHeaders=a.mergeHeaders([this._options.extraHTTPHeaders,a.singleHeader("Proxy-Authorization","Basic "+e)])}}_authenticateProxyViaCredentials(){const e=this._options.proxy||this._browser._options.proxy;if(!e)return;const{username:t,password:n}=e;t&&(this._options.httpCredentials={username:t,password:n||""})}async _setRequestInterceptor(e){this._requestInterceptor=e,await this._doUpdateRequestInterception()}isClosingOrClosed(){return"open"!==this._closedStatus}async close(){if("open"===this._closedStatus){this._closedStatus="closing";for(const e of t.contextListeners)await e.onContextWillDestroy(this);const e=[];for(const t of this._downloads)e.push(t.delete());for(const t of this._browser._idToVideo.values())t._context===this&&e.push(t._finishedPromise);this._isPersistentContext?await Promise.all(this.pages().map(e=>e.close())):await this._doClose(),await Promise.all(e),this._isPersistentContext&&await this._browser.close();for(const e of t.contextListeners)await e.onContextDidDestroy(this);this._didCloseInternal()}await this._closePromise}async newPage(){const e=await this.newPageDelegate(),t=await e.pageOrError();if(t instanceof c.Page){if(t.isClosed())throw new Error("Page has been closed.");return t}throw t}addVisitedOrigin(e){this._origins.add(e)}async storageState(){const e={cookies:(await this.cookies()).filter(e=>""!==e.value),origins:[]};if(this._origins.size){const t=await this.newPage();await t._setServerRequestInterceptor(e=>{e.fulfill({body:"<html></html>"}).catch(()=>{})});for(const n of this._origins){const i={origin:n,localStorage:[]};e.origins.push(i);const r=t.mainFrame();await r.goto(new l.ProgressController,n);const s=await r._evaluateExpression("({\n          localStorage: Object.keys(localStorage).map(name => ({ name, value: localStorage.getItem(name) })),\n        })",!1,void 0,"utility");i.localStorage=s.localStorage}await t.close()}return e}async setStorageState(e){if(e.cookies&&await this.addCookies(e.cookies),e.origins&&e.origins.length){const t=await this.newPage();await t._setServerRequestInterceptor(e=>{e.fulfill({body:"<html></html>"}).catch(()=>{})});for(const n of e.origins){const e=t.mainFrame();await e.goto(new l.ProgressController,n.origin),await e._evaluateExpression("\n          originState => {\n            for (const { name, value } of (originState.localStorage || []))\n              localStorage.setItem(name, value);\n          }",!0,n,"utility")}await t.close()}}async extendInjectedScript(e,t){const n=n=>n.extendInjectedScript(e,t).catch(e=>{}),i=e=>(e.on(c.Page.Events.InternalFrameNavigatedToNewDocument,n),Promise.all(e.frames().map(n)));return this.on(h.Events.Page,i),Promise.all(this.pages().map(i))}}function p(e){if(!e)return;e.accuracy=e.accuracy||0;const{longitude:t,latitude:n,accuracy:i}=e;if(t<-180||t>180)throw new Error("geolocation.longitude: precondition -180 <= LONGITUDE <= 180 failed.");if(n<-90||n>90)throw new Error("geolocation.latitude: precondition -90 <= LATITUDE <= 90 failed.");if(i<0)throw new Error("geolocation.accuracy: precondition 0 <= ACCURACY failed.")}function m(e){let t,{server:n,bypass:i}=e;try{t=new URL(n),t.host&&t.protocol||(t=new URL("http://"+n))}catch(e){t=new URL("http://"+n)}return n=t.protocol+"//"+t.host,i&&(i=i.split(",").map(e=>e.trim()).join(",")),{...e,server:n,bypass:i}}t.BrowserContext=h,h.Events={Close:"close",Page:"page",VideoStarted:"videostarted"},t.assertBrowserContextIsNotOwned=function(e){for(const t of e.pages())if(t._ownedContext)throw new Error("Please use browser.newContext() for multi-page scripts that share the context.")},t.validateBrowserContextOptions=function(e,t){if(e.noDefaultViewport&&void 0!==e.deviceScaleFactor)throw new Error('"deviceScaleFactor" option is not supported with null "viewport"');if(e.noDefaultViewport&&void 0!==e.isMobile)throw new Error('"isMobile" option is not supported with null "viewport"');if(e.viewport||e.noDefaultViewport||(e.viewport={width:1280,height:720}),e.proxy){if(!t.proxy)throw new Error("Browser needs to be launched with the global proxy. If all contexts override the proxy, global proxy will be never used and can be any string, for example \"launch({ proxy: { server: 'per-context' } })\"");e.proxy=m(e.proxy)}p(e.geolocation)},t.verifyGeolocation=p,t.normalizeProxySettings=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageBinding=t.Worker=t.Page=void 0;const i=n(57),r=n(58),s=n(22),o=n(92),a=n(12),c=n(91),l=n(8),d=n(93),u=n(164),h=n(6),p=n(165),m=n(17),f=n(0),_=n(10);class g extends h.EventEmitter{constructor(e,t){super(),this._closedState="open",this._disconnected=!1,this._pageBindings=new Map,this._evaluateOnNewDocumentSources=[],this._workers=new Map,this._video=null,this.setMaxListeners(0),this._delegate=e,this._closedCallback=()=>{},this._closedPromise=new Promise(e=>this._closedCallback=e),this._disconnectedCallback=()=>{},this._disconnectedPromise=new Promise(e=>this._disconnectedCallback=e),this._crashedCallback=()=>{},this._crashedPromise=new Promise(e=>this._crashedCallback=e),this._browserContext=t,this._state={viewportSize:t._options.viewport||null,mediaType:null,colorScheme:null,extraHTTPHeaders:null},this.accessibility=new u.Accessibility(e.getAccessibilityTree.bind(e)),this.keyboard=new r.Keyboard(e.rawKeyboard,this),this.mouse=new r.Mouse(e.rawMouse,this),this.touchscreen=new r.Touchscreen(e.rawTouchscreen,this),this._timeoutSettings=new a.TimeoutSettings(t._timeoutSettings),this._screenshotter=new o.Screenshotter(this),this._frameManager=new i.FrameManager(this),e.pdf&&(this.pdf=e.pdf.bind(e)),this.coverage=e.coverage?e.coverage():null,this.selectors=t.selectors()}async reportAsNew(){if(await this._delegate.pageOrError()instanceof Error){if(this._browserContext.isClosingOrClosed())return;this._setIsError()}this._browserContext.emit(l.BrowserContext.Events.Page,this);const e=this._delegate.openerDelegate();e&&e.pageOrError().then(e=>{e instanceof g&&!e.isClosed()&&e.emit(g.Events.Popup,this)})}async _doSlowMo(){const e=this._browserContext._browser._options.slowMo;e&&await new Promise(t=>setTimeout(t,e))}_didClose(){this._frameManager.dispose(),f.assert("closed"!==this._closedState,"Page closed twice"),this._closedState="closed",this.emit(g.Events.Close),this._closedCallback()}_didCrash(){this._frameManager.dispose(),this.emit(g.Events.Crash),this._crashedCallback(new Error("Page crashed"))}_didDisconnect(){this._frameManager.dispose(),f.assert(!this._disconnected,"Page disconnected twice"),this._disconnected=!0,this._disconnectedCallback(new Error("Page closed"))}async _onFileChooserOpened(e){const t=await e.evaluate(e=>!!e.multiple);if(!this.listenerCount(g.Events.FileChooser))return void e.dispose();const n=new p.FileChooser(this,e,t);this.emit(g.Events.FileChooser,n)}context(){return this._browserContext}async opener(){return await this._delegate.opener()}mainFrame(){return this._frameManager.mainFrame()}frames(){return this._frameManager.frames()}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}async exposeBinding(e,t,n,i="main"){const r=b.identifier(e,i);if(this._pageBindings.has(r))throw new Error(`Function "${e}" has been already registered`);if(this._browserContext._pageBindings.has(r))throw new Error(`Function "${e}" has been already registered in the browser context`);const s=new b(e,n,t,i);this._pageBindings.set(r,s),await this._delegate.exposeBinding(s)}setExtraHTTPHeaders(e){return this._state.extraHTTPHeaders=e,this._delegate.updateExtraHTTPHeaders()}async _onBindingCalled(e,t){this._disconnected||"closed"===this._closedState||await b.dispatch(this,e,t)}_addConsoleMessage(e,t,n,i){const r=new d.ConsoleMessage(e,i,t,n);this._frameManager.interceptConsoleMessage(r)||!this.listenerCount(g.Events.Console)?t.forEach(e=>e.dispose()):this.emit(g.Events.Console,r)}async reload(e,t){this.mainFrame().setupNavigationProgressController(e);const n=await e.run(async e=>{const[n]=await Promise.all([this.mainFrame()._waitForNavigation(e,t),this._delegate.reload()]);return n},this._timeoutSettings.navigationTimeout(t));return await this._doSlowMo(),n}async goBack(e,t){this.mainFrame().setupNavigationProgressController(e);const n=await e.run(async e=>{let n;const i=this.mainFrame()._waitForNavigation(e,t).catch(e=>(n=e,null));if(!await this._delegate.goBack())return null;const r=await i;if(n)throw n;return r},this._timeoutSettings.navigationTimeout(t));return await this._doSlowMo(),n}async goForward(e,t){this.mainFrame().setupNavigationProgressController(e);const n=await e.run(async e=>{let n;const i=this.mainFrame()._waitForNavigation(e,t).catch(e=>(n=e,null));if(!await this._delegate.goForward())return null;const r=await i;if(n)throw n;return r},this._timeoutSettings.navigationTimeout(t));return await this._doSlowMo(),n}async emulateMedia(e){void 0!==e.media&&f.assert(null===e.media||c.mediaTypes.has(e.media),"media: expected one of (screen|print|null)"),void 0!==e.colorScheme&&f.assert(null===e.colorScheme||c.colorSchemes.has(e.colorScheme),"colorScheme: expected one of (dark|light|no-preference|null)"),void 0!==e.media&&(this._state.mediaType=e.media),void 0!==e.colorScheme&&(this._state.colorScheme=e.colorScheme),await this._delegate.updateEmulateMedia(),await this._doSlowMo()}async setViewportSize(e){this._state.viewportSize={...e},await this._delegate.setViewportSize(this._state.viewportSize),await this._doSlowMo()}viewportSize(){return this._state.viewportSize}async bringToFront(){await this._delegate.bringToFront()}async _addInitScriptExpression(e){this._evaluateOnNewDocumentSources.push(e),await this._delegate.evaluateOnNewDocument(e)}_needsRequestInterception(){return!!this._clientRequestInterceptor||!!this._serverRequestInterceptor||!!this._browserContext._requestInterceptor}async _setClientRequestInterceptor(e){this._clientRequestInterceptor=e,await this._delegate.updateRequestInterception()}async _setServerRequestInterceptor(e){this._serverRequestInterceptor=e,await this._delegate.updateRequestInterception()}_requestStarted(e){this.emit(g.Events.Request,e);const t=e._route();t&&(this._serverRequestInterceptor?this._serverRequestInterceptor(t,e):this._clientRequestInterceptor?this._clientRequestInterceptor(t,e):this._browserContext._requestInterceptor?this._browserContext._requestInterceptor(t,e):t.continue())}async screenshot(e={}){return m.runAbortableTask(t=>this._screenshotter.screenshotPage(t,e),this._timeoutSettings.timeout(e))}async close(e){if("closed"===this._closedState)return;const t=!!e&&!!e.runBeforeUnload;"closing"!==this._closedState&&(this._closedState="closing",f.assert(!this._disconnected,"Protocol error: Connection closed. Most likely the page has been closed."),await this._delegate.closePage(t).catch(e=>_.debugLogger.log("error",e))),t||await this._closedPromise,this._ownedContext&&await this._ownedContext.close()}_setIsError(){this._frameManager.mainFrame()||this._frameManager.frameAttached("<dummy>",null)}isClosed(){return"closed"===this._closedState}_addWorker(e,t){this._workers.set(e,t),this.emit(g.Events.Worker,t)}_removeWorker(e){const t=this._workers.get(e);t&&(t.emit(w.Events.Close,t),this._workers.delete(e))}_clearWorkers(){for(const[e,t]of this._workers)t.emit(w.Events.Close,t),this._workers.delete(e)}async _setFileChooserIntercepted(e){await this._delegate.setFileChooserIntercepted(e)}videoStarted(e){this._video=e,this.emit(g.Events.VideoStarted,e)}frameNavigatedToNewDocument(e){this.emit(g.Events.InternalFrameNavigatedToNewDocument,e);const t=e.url();t.startsWith("http")&&this._browserContext.addVisitedOrigin(new URL(t).origin)}allBindings(){return[...this._browserContext._pageBindings.values(),...this._pageBindings.values()]}getBinding(e,t){const n=b.identifier(e,t);return this._pageBindings.get(n)||this._browserContext._pageBindings.get(n)}}t.Page=g,g.Events={Close:"close",Crash:"crash",Console:"console",Dialog:"dialog",InternalDialogClosed:"internaldialogclosed",Download:"download",FileChooser:"filechooser",DOMContentLoaded:"domcontentloaded",PageError:"pageerror",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished",FrameAttached:"frameattached",FrameDetached:"framedetached",InternalFrameNavigatedToNewDocument:"internalframenavigatedtonewdocument",Load:"load",Popup:"popup",WebSocket:"websocket",Worker:"worker",VideoStarted:"videostarted"};class w extends h.EventEmitter{constructor(e){super(),this._existingExecutionContext=null,this._url=e,this._executionContextCallback=()=>{},this._executionContextPromise=new Promise(e=>this._executionContextCallback=e)}_createExecutionContext(e){this._existingExecutionContext=new s.ExecutionContext(e),this._executionContextCallback(this._existingExecutionContext)}url(){return this._url}async _evaluateExpression(e,t,n){return s.evaluateExpression(await this._executionContextPromise,!0,e,t,n)}async _evaluateExpressionHandle(e,t,n){return s.evaluateExpression(await this._executionContextPromise,!1,e,t,n)}}t.Worker=w,w.Events={Close:"close"};class b{constructor(e,t,n,i){this.name=e,this.playwrightFunction=t,this.source=`(${y.toString()})(${JSON.stringify(e)}, ${n})`,this.needsHandle=n,this.world=i}static identifier(e,t){return t+":"+e}static async dispatch(e,t,n){const{name:i,seq:r,args:s}=JSON.parse(t);try{f.assert(n.world);const t=e.getBinding(i,n.world);let o;if(t.needsHandle){const s=await n.evaluateHandleInternal((function(e){const t=window[e.name].handles.get(e.seq);return window[e.name].handles.delete(e.seq),t}),{name:i,seq:r}).catch(e=>null);o=await t.playwrightFunction({frame:n.frame,page:e,context:e._browserContext},s)}else o=await t.playwrightFunction({frame:n.frame,page:e,context:e._browserContext},...s);n.evaluateInternal((function(e){window[e.name].callbacks.get(e.seq).resolve(e.result),window[e.name].callbacks.delete(e.seq)}),{name:i,seq:r,result:o}).catch(e=>_.debugLogger.log("error",e))}catch(e){f.isError(e)?n.evaluateInternal((function(e){const t=new Error(e.message);t.stack=e.stack,window[e.name].callbacks.get(e.seq).reject(t),window[e.name].callbacks.delete(e.seq)}),{name:i,seq:r,message:e.message,stack:e.stack}).catch(e=>_.debugLogger.log("error",e)):n.evaluateInternal((function(e){window[e.name].callbacks.get(e.seq).reject(e.error),window[e.name].callbacks.delete(e.seq)}),{name:i,seq:r,error:e}).catch(e=>_.debugLogger.log("error",e))}}}function y(e,t){const n=window[e];n.__installed||(window[e]=(...i)=>{const r=window[e];if(t&&i.slice(1).some(e=>void 0!==e))throw new Error(`exposeBindingHandle supports a single argument, ${i.length} received`);let s=r.callbacks;s||(s=new Map,r.callbacks=s);const o=(r.lastSeq||0)+1;r.lastSeq=o;let a=r.handles;a||(a=new Map,r.handles=a);const c=new Promise((e,t)=>s.set(o,{resolve:e,reject:t}));return t?(a.set(o,i[0]),n(JSON.stringify({name:e,seq:o}))):n(JSON.stringify({name:e,seq:o,args:i})),c},window[e].__installed=!0)}t.PageBinding=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecentLogsCollector=t.debugLogger=void 0;const i=n(54),r=n(1),s={api:45,protocol:34,browser:0,error:160,"channel:command":33,"channel:response":202,"channel:event":207};t.debugLogger=new class{constructor(){if(this._debuggers=new Map,process.env.DEBUG_FILE){const e=new RegExp(["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|"),"g"),t=r.createWriteStream(process.env.DEBUG_FILE);i.log=n=>{t.write(n.replace(e,"")),t.write("\n")}}}log(e,t){let n=this._debuggers.get(e);n||(n=i("pw:"+e),this._debuggers.set(e,n),n.color=s[e]),n(t)}isEnabled(e){return i.enabled("pw:"+e)}};t.RecentLogsCollector=class{constructor(){this._logs=[]}log(e){this._logs.push(e),100===this._logs.length&&this._logs.splice(0,50)}recentLogs(){return this._logs.length>50?this._logs.slice(-50):this._logs}}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.rewriteErrorMessage=t.getCallerFilePath=void 0;const i=n(3),r=i.normalize(i.join(e,".."));function s(e){if(!(e=e.trim()).startsWith("at "))return null;let t,n;if((e=e.substring("at ".length)).startsWith("async ")&&(e=e.substring("async ".length)),e.endsWith(")")){const i=e.indexOf("(");t=e.substring(i+1,e.length-1),n=e.substring(0,i).trim()}else t=e,n="";const i=t.match(/^(?:async )?([^(]*):(\d+):(\d+)$/);if(!i)return null;return{filePath:i[1],functionName:n}}t.getCallerFilePath=function(e=r){const t=((new Error).stack||"").split("\n").slice(2);for(const n of t){const t=s(n);if(!t)return null;if(!t.filePath.startsWith(e))return t.filePath}return null},t.rewriteErrorMessage=function(e,t){if(e.stack){const n=e.stack.indexOf(e.message);-1!==n&&(e.stack=e.stack.substring(0,n)+t+e.stack.substring(n+e.message.length))}return e.message=t,e}}).call(this,"/")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutSettings=t.DEFAULT_TIMEOUT=void 0;const i=n(0);t.DEFAULT_TIMEOUT=3e4;const r=i.isDebugMode()?0:t.DEFAULT_TIMEOUT;t.TimeoutSettings=class{constructor(e){this._defaultTimeout=null,this._defaultNavigationTimeout=null,this._parent=e}setDefaultTimeout(e){this._defaultTimeout=e}setDefaultNavigationTimeout(e){this._defaultNavigationTimeout=e}navigationTimeout(e){return"number"==typeof e.timeout?e.timeout:null!==this._defaultNavigationTimeout?this._defaultNavigationTimeout:null!==this._defaultTimeout?this._defaultTimeout:this._parent?this._parent.navigationTimeout(e):r}timeout(e){return"number"==typeof e.timeout?e.timeout:null!==this._defaultTimeout?this._defaultTimeout:this._parent?this._parent.timeout(e):r}static timeout(e){return"number"==typeof e.timeout?e.timeout:r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeHeaders=t.singleHeader=t.STATUS_TEXTS=t.WebSocket=t.Response=t.Route=t.Request=t.rewriteCookies=t.filterCookies=void 0;const i=n(0),r=n(6);t.filterCookies=function(e,t){const n=t.map(e=>new URL(e));return e.filter(e=>{if(!n.length)return!0;for(const t of n){let n=e.domain;if(n.startsWith(".")||(n="."+n),("."+t.hostname).endsWith(n)&&t.pathname.startsWith(e.path)&&"https:"===t.protocol===e.secure)return!0}return!1})},t.rewriteCookies=function(e){return e.map(e=>{i.assert(e.name,"Cookie should have a name"),i.assert(e.value,"Cookie should have a value"),i.assert(e.url||e.domain&&e.path,"Cookie should have a url or a domain/path pair"),i.assert(!(e.url&&e.domain),"Cookie should have either url or domain"),i.assert(!(e.url&&e.path),"Cookie should have either url or domain");const t={...e};if(t.url){i.assert("about:blank"!==t.url,`Blank page can not have cookie "${e.name}"`),i.assert(!t.url.startsWith("data:"),`Data URL page can not have cookie "${e.name}"`);const n=new URL(t.url);t.domain=n.hostname,t.path=n.pathname.substring(0,n.pathname.lastIndexOf("/")+1),t.secure="https:"===n.protocol}return t})};t.Request=class{constructor(e,t,n,r,s,o,a,c,l){this._response=null,this._redirectedTo=null,this._failureText=null,this._headersMap=new Map,this._waitForResponsePromiseCallback=()=>{},this._responseEndTiming=-1,i.assert(!s.startsWith("data:"),"Data urls should not fire requests"),i.assert(!(e&&n),"Should not be able to intercept redirects"),this._routeDelegate=e,this._frame=t,this._redirectedFrom=n,n&&(n._redirectedTo=this),this._documentId=r,this._url=function(e){if(!e.indexOf("#"))return e;const t=new URL(e);return t.hash="",t.href}(s),this._resourceType=o,this._method=a,this._postData=c,this._headers=l;for(const{name:e,value:t}of this._headers)this._headersMap.set(e.toLowerCase(),t);this._waitForResponsePromise=new Promise(e=>this._waitForResponsePromiseCallback=e),this._isFavicon=s.endsWith("/favicon.ico")}_setFailureText(e){this._failureText=e,this._waitForResponsePromiseCallback(null)}url(){return this._url}resourceType(){return this._resourceType}method(){return this._method}postDataBuffer(){return this._postData}headers(){return this._headers}headerValue(e){return this._headersMap.get(e)}response(){return this._waitForResponsePromise}_existingResponse(){return this._response}_setResponse(e){this._response=e,this._waitForResponsePromiseCallback(e)}_finalRequest(){return this._redirectedTo?this._redirectedTo._finalRequest():this}frame(){return this._frame}isNavigationRequest(){return!!this._documentId}redirectedFrom(){return this._redirectedFrom}failure(){return null===this._failureText?null:{errorText:this._failureText}}_route(){return this._routeDelegate?new s(this,this._routeDelegate):null}updateWithRawHeaders(e){this._headers=e,this._headersMap.clear();for(const{name:e,value:t}of this._headers)this._headersMap.set(e.toLowerCase(),t);if(!this._headersMap.has("host")){const e=new URL(this._url).host;this._headers.push({name:"host",value:e}),this._headersMap.set("host",e)}}};class s{constructor(e,t){this._handled=!1,this._request=e,this._delegate=t}request(){return this._request}async abort(e="failed"){i.assert(!this._handled,"Route is already handled!"),this._handled=!0,await this._delegate.abort(e)}async fulfill(e){i.assert(!this._handled,"Route is already handled!"),this._handled=!0,await this._delegate.fulfill({status:void 0===e.status?200:e.status,headers:e.headers||[],body:e.body||"",isBase64:e.isBase64||!1})}async continue(e={}){if(i.assert(!this._handled,"Route is already handled!"),e.url){const t=new URL(e.url);if(new URL(this._request.url()).protocol!==t.protocol)throw new Error("New URL must have same protocol as overriden URL")}await this._delegate.continue(e)}}t.Route=s;t.Response=class{constructor(e,t,n,i,r,s){this._contentPromise=null,this._finishedPromiseCallback=()=>{},this._headersMap=new Map,this._request=e,this._timing=r,this._status=t,this._statusText=n,this._url=e.url(),this._headers=i;for(const{name:e,value:t}of this._headers)this._headersMap.set(e.toLowerCase(),t);this._getResponseBodyCallback=s,this._finishedPromise=new Promise(e=>{this._finishedPromiseCallback=e}),this._request._setResponse(this)}_requestFinished(e,t){this._request._responseEndTiming=Math.max(e,this._timing.responseStart),this._finishedPromiseCallback({error:t})}url(){return this._url}status(){return this._status}statusText(){return this._statusText}headers(){return this._headers}headerValue(e){return this._headersMap.get(e)}finished(){return this._finishedPromise.then(({error:e})=>e?new Error(e):null)}timing(){return this._timing}body(){return this._contentPromise||(this._contentPromise=this._finishedPromise.then(async({error:e})=>{if(e)throw new Error(e);return this._getResponseBodyCallback()})),this._contentPromise}request(){return this._request}frame(){return this._request.frame()}};class o extends r.EventEmitter{constructor(e){super(),this._url=e}url(){return this._url}frameSent(e,t){this.emit(o.Events.FrameSent,{opcode:e,data:t})}frameReceived(e,t){this.emit(o.Events.FrameReceived,{opcode:e,data:t})}error(e){this.emit(o.Events.SocketError,e)}closed(){this.emit(o.Events.Close)}}t.WebSocket=o,o.Events={Close:"close",SocketError:"socketerror",FrameReceived:"framereceived",FrameSent:"framesent"},t.STATUS_TEXTS={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"},t.singleHeader=function(e,t){return[{name:e,value:t}]},t.mergeHeaders=function(e){const t=new Map,n=new Map;for(const i of e)if(i)for(const{name:e,value:r}of i){const i=e.toLowerCase();n.set(i,e),t.set(i,r)}const i=[];for(const[e,r]of t)i.push({name:n.get(e),value:r});return i}},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0,t.Events={AndroidDevice:{WebView:"webview",Close:"close"},AndroidSocket:{Data:"data",Close:"close"},AndroidWebView:{Close:"close"},Browser:{Disconnected:"disconnected"},BrowserContext:{Close:"close",Page:"page"},BrowserServer:{Close:"close"},Page:{Close:"close",Crash:"crash",Console:"console",Dialog:"dialog",Download:"download",FileChooser:"filechooser",DOMContentLoaded:"domcontentloaded",PageError:"pageerror",Request:"request",Response:"response",RequestFailed:"requestfailed",RequestFinished:"requestfinished",FrameAttached:"frameattached",FrameDetached:"framedetached",FrameNavigated:"framenavigated",Load:"load",Popup:"popup",WebSocket:"websocket",Worker:"worker"},WebSocket:{Close:"close",Error:"socketerror",FrameReceived:"framereceived",FrameSent:"framesent"},Worker:{Close:"close"},ChromiumBrowserContext:{BackgroundPage:"backgroundpage",ServiceWorker:"serviceworker"},ElectronApplication:{Close:"close",Window:"window"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSafeCloseError=t.kBrowserOrContextClosedError=t.kBrowserClosedError=t.TimeoutError=void 0;class i extends Error{constructor(e){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}t.TimeoutError=class extends i{},t.kBrowserClosedError="Browser has been closed",t.kBrowserOrContextClosedError="Target page, context or browser has been closed",t.isSafeCloseError=function(e){return e.message.endsWith(t.kBrowserClosedError)||e.message.endsWith(t.kBrowserOrContextClosedError)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressController=t.runAbortableTask=void 0;const i=n(16),r=n(0),s=n(11),o=n(10);t.runAbortableTask=async function(e,t){return(new a).run(e,t)};class a{constructor(){this._forceAbort=()=>{},this._aborted=()=>{},this._cleanups=[],this._logName="api",this._state="before",this._deadline=0,this._timeout=0,this._logRecording=[],this._forceAbortPromise=new Promise((e,t)=>this._forceAbort=t),this._forceAbortPromise.catch(e=>null),this._abortedPromise=new Promise(e=>this._aborted=e)}setLogName(e){this._logName=e}setListener(e){this._listener=e}async run(e,t){t&&(this._timeout=t,this._deadline=t?r.monotonicTime()+t:0),r.assert("before"===this._state),this._state="running";const n={aborted:this._abortedPromise,log:e=>{"running"===this._state&&this._logRecording.push(e),o.debugLogger.log(this._logName,e)},timeUntilDeadline:()=>this._deadline?this._deadline-r.monotonicTime():2147483647,isRunning:()=>"running"===this._state,cleanupWhenAborted:e=>{"running"===this._state?this._cleanups.push(e):c(e)},throwIfAborted:()=>{if("aborted"===this._state)throw new d}},a=new i.TimeoutError(`Timeout ${this._timeout}ms exceeded.`),u=setTimeout(()=>this._forceAbort(a),n.timeUntilDeadline()),h=r.monotonicTime();try{const t=e(n),i=await Promise.race([t,this._forceAbortPromise]);return clearTimeout(u),this._state="finished",this._listener&&await this._listener({startTime:h,endTime:r.monotonicTime(),logs:this._logRecording}),this._logRecording=[],i}catch(e){throw this._aborted(),clearTimeout(u),this._state="aborted",await Promise.all(this._cleanups.splice(0).map(e=>c(e))),this._listener&&await this._listener({startTime:h,endTime:r.monotonicTime(),logs:this._logRecording,error:e}),s.rewriteErrorMessage(e,e.message+function(e){if(!e.length)return"";const t=(60-" logs ".length)/2,n=60-" logs ".length-t;return`\n${"=".repeat(t)} logs ${"=".repeat(n)}\n${e.join("\n")}\n${"=".repeat(60)}`}(this._logRecording)+l),this._logRecording=[],e}}abort(e){this._forceAbort(e)}}async function c(e){try{await e()}catch(e){}}t.ProgressController=a;const l="\nNote: use DEBUG=pw:api environment variable and rerun to capture Playwright logs.";class d extends Error{}},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertMaxArguments=t.parseResult=t.serializeArgument=t.JSHandle=void 0;const i=n(7),r=n(20);class s extends i.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._preview=this._initializer.preview,this._channel.on("previewUpdated",({preview:e})=>this._preview=e)}static from(e){return e._object}async evaluate(e,t){return a((await this._channel.evaluateExpression({expression:String(e),isFunction:"function"==typeof e,arg:o(t)})).value)}async evaluateHandle(e,t){const n=await this._channel.evaluateExpressionHandle({expression:String(e),isFunction:"function"==typeof e,arg:o(t)});return s.from(n.handle)}async getProperty(e){const t=await this._channel.getProperty({name:e});return s.from(t.handle)}async getProperties(){const e=new Map;for(const{name:t,value:n}of(await this._channel.getPropertyList()).properties)e.set(t,s.from(n));return e}async jsonValue(){return a((await this._channel.jsonValue()).value)}asElement(){return null}async dispose(){return await this._channel.dispose()}toString(){return this._preview}}function o(e){const t=[];return{value:r.serializeValue(e,e=>{return e instanceof s?{h:(n=e._channel,t.push(n),t.length-1)}:{fallThrough:e};var n},new Set),handles:t}}function a(e){return r.parseSerializedValue(e,void 0)}t.JSHandle=s,t.serializeArgument=o,t.parseResult=a,t.assertMaxArguments=function(e,t){if(e>t)throw new Error("Too many arguments. If you need to pass more than 1 argument to the function wrap them in an object.")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeValue=t.parseSerializedValue=t.parseError=t.serializeError=void 0;const i=n(16);function r(e,t){if(void 0!==e.n)return e.n;if(void 0!==e.s)return e.s;if(void 0!==e.b)return e.b;if(void 0!==e.v){if("undefined"===e.v)return;if("null"===e.v)return null;if("NaN"===e.v)return NaN;if("Infinity"===e.v)return 1/0;if("-Infinity"===e.v)return-1/0;if("-0"===e.v)return-0}if(void 0!==e.d)return new Date(e.d);if(void 0!==e.r)return new RegExp(e.r.p,e.r.f);if(void 0!==e.a)return e.a.map(e=>r(e,t));if(void 0!==e.o){const n={};for(const{k:i,v:s}of e.o)n[i]=r(s,t);return n}if(void 0!==e.h){if(void 0===t)throw new Error("Unexpected handle");return t[e.h]}throw new Error("Unexpected value")}function s(e,t,n){const i=t(e);if(!("fallThrough"in i))return i;if(e=i.fallThrough,n.has(e))throw new Error("Argument is a circular structure");if("symbol"==typeof e)return{v:"undefined"};if(Object.is(e,void 0))return{v:"undefined"};if(Object.is(e,null))return{v:"null"};if(Object.is(e,NaN))return{v:"NaN"};if(Object.is(e,1/0))return{v:"Infinity"};if(Object.is(e,-1/0))return{v:"-Infinity"};if(Object.is(e,-0))return{v:"-0"};if("boolean"==typeof e)return{b:e};if("number"==typeof e)return{n:e};if("string"==typeof e)return{s:e};if(o(e)){const t=e;return"captureStackTrace"in global.Error?{s:t.stack||""}:{s:`${t.name}: ${t.message}\n${t.stack}`}}if((r=e)instanceof Date||"[object Date]"===Object.prototype.toString.call(r))return{d:e.toJSON()};var r;if(function(e){return e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e)}(e))return{r:{p:e.source,f:e.flags}};if(Array.isArray(e)){const i=[];n.add(e);for(let r=0;r<e.length;++r)i.push(s(e[r],t,n));return n.delete(e),{a:i}}if("object"==typeof e){const i=[];n.add(e);for(const r of Object.keys(e))i.push({k:r,v:s(e[r],t,n)});return n.delete(e),{o:i}}throw new Error("Unexpected value")}function o(e){return e instanceof Error||e&&e.__proto__&&"Error"===e.__proto__.name}t.serializeError=function(e){return o(e)?{error:{message:e.message,stack:e.stack,name:e.name}}:{value:s(e,e=>({fallThrough:e}),new Set)}},t.parseError=function(e){if(!e.error){if(void 0===e.value)throw new Error("Serialized error must have either an error or a value");return r(e.value,void 0)}if("TimeoutError"===e.error.name){const t=new i.TimeoutError(e.error.message);return t.stack=e.error.stack||"",t}const t=new Error(e.error.message);return t.stack=e.error.stack||"",t},t.parseSerializedValue=r,t.serializeValue=s},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseUnserializableValue=t.evaluateExpression=t.evaluate=t.JSHandle=t.ExecutionContext=void 0;const i=n(162),r=n(34),s=n(45);t.ExecutionContext=class{constructor(e){this._delegate=e}adoptIfNeeded(e){return null}utilityScript(){if(!this._utilityScriptPromise){const e=`\n      (() => {\n        ${i.source}\n        return new pwExport();\n      })();`;this._utilityScriptPromise=this._delegate.rawEvaluate(e).then(e=>new o(this,"object",e))}return this._utilityScriptPromise}createHandle(e){return this._delegate.createHandle(this,e)}async doSlowMo(){}};class o{constructor(e,t,n,i){this._disposed=!1,this._context=e,this._objectId=n,this._value=i,this._objectType=t,this._objectId&&(this._value="JSHandle@"+this._objectType),this._preview="JSHandle@"+String(this._objectId?this._objectType:this._value)}async evaluate(e,t){return a(this._context,!0,e,this,t)}async evaluateHandle(e,t){return a(this._context,!1,e,this,t)}async _evaluateExpression(e,t,n,i){const r=await c(this._context,n,e,t,this,i);return await this._context.doSlowMo(),r}async getProperty(e){const t=await this.evaluateHandle((e,t)=>{const n={__proto__:null};return n[t]=e[t],n},e),n=(await t.getProperties()).get(e);return t.dispose(),n}getProperties(){return this._context._delegate.getProperties(this)}async jsonValue(){if(!this._objectId)return this._value;const e=await this._context.utilityScript(),t="(utilityScript, ...args) => utilityScript.jsonValue(...args)"+r.generateSourceUrl();return this._context._delegate.evaluateWithArguments(t,!0,e,[!0],[this._objectId])}asElement(){return null}async dispose(){this._disposed||(this._disposed=!0,await this._context._delegate.releaseHandle(this))}toString(){return this._preview}_setPreviewCallback(e){this._previewCallback=e}_setPreview(e){this._preview=e,this._previewCallback&&this._previewCallback(e)}}async function a(e,t,n,...i){return c(e,t,String(n),"function"==typeof n,...i)}async function c(e,t,n,i,...a){const c=await e.utilityScript();if(!i){const i="(utilityScript, ...args) => utilityScript.evaluate(...args)"+r.generateSourceUrl();return e._delegate.evaluateWithArguments(i,t,c,[t,r.ensureSourceUrl(n)],[])}let l=n;try{new Function("("+l+")")}catch(e){l=l.startsWith("async ")?"async function "+l.substring("async ".length):"function "+l;try{new Function("("+l+")")}catch(e){throw new Error("Passed function is not well-serializable!")}}const d=[],u=[],h=e=>(d.push(e),d.length-1);a=a.map(t=>s.serializeAsCallArgument(t,t=>{if(t instanceof o){if(!t._objectId)return{fallThrough:t._value};if(t._disposed)throw new Error("JSHandle is disposed!");const n=e.adoptIfNeeded(t);return null===n?{h:h(Promise.resolve(t))}:(u.push(n),{h:h(n)})}return{fallThrough:t}}));const p=[];for(const t of await Promise.all(d)){if(t._context!==e)throw new Error("JSHandles can be evaluated only in the context they were created!");p.push(t._objectId)}l+=await r.generateSourceMapUrl(n,l);const m=[t,l,a.length,...a],f="(utilityScript, ...args) => utilityScript.callFunction(...args)"+r.generateSourceUrl();try{return await e._delegate.evaluateWithArguments(f,t,c,m,p)}finally{u.map(e=>e.then(e=>e.dispose()))}}t.JSHandle=o,t.evaluate=a,t.evaluateExpression=c,t.parseUnserializableValue=function(e){return"NaN"===e?NaN:"Infinity"===e?1/0:"-Infinity"===e?-1/0:"-0"===e?-0:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globToRegex=t.urlMatches=t.evaluationScript=t.envObjectToArray=t.deprecate=void 0;const i=n(1),r=n(2),s=n(0),o=new Set;t.deprecate=function(e,t){o.has(e)||(o.add(e),console.warn(t))},t.envObjectToArray=function(e){const t=[];for(const n in e)Object.is(e[n],void 0)||t.push({name:n,value:String(e[n])});return t},t.evaluationScript=async function(e,t,n=!0){if("function"==typeof e){return`(${e.toString()})(${Object.is(t,void 0)?"undefined":JSON.stringify(t)})`}if(void 0!==t)throw new Error("Cannot evaluate a string with arguments");if(s.isString(e))return e;if(void 0!==e.content)return e.content;if(void 0!==e.path){let t=await r.promisify(i.readFile)(e.path,"utf8");return n&&(t+="//# sourceURL="+e.path.replace(/\n/g,"")),t}throw new Error("Either path or content property must be present")},t.urlMatches=function(e,t){if(void 0===t||""===t)return!0;if(s.isString(t)&&(t=c(t)),s.isRegExp(t))return t.test(e);if("string"==typeof t&&t===e)return!0;const n=new URL(e);if("string"==typeof t)return n.pathname===t;if("function"!=typeof t)throw new Error("url parameter should be string, RegExp or function");return t(n)};const a=new Set(["/","$","^","+",".","(",")","=","!","|"]);function c(e){const t=["^"];let n;for(let i=0;i<e.length;++i){const r=e[i];if(a.has(r))t.push("\\"+r);else if("*"!==r)switch(r){case"?":t.push(".");break;case"{":n=!0,t.push("(");break;case"}":n=!1,t.push(")");break;case",":if(n){t.push("|");break}t.push("\\"+r);break;default:t.push(r)}else{const n=e[i-1];let r=1;for(;"*"===e[i+1];)r++,i++;const s=e[i+1];r>1&&("/"===n||void 0===n)&&("/"===s||void 0===s)?(t.push("((?:[^/]*(?:/|$))*)"),i++):t.push("([^/]*)")}}return t.push("$"),new RegExp(t.join(""))}t.globToRegex=c},function(e,t,n){"use strict";const i=n(77);i.createWebSocketStream=n(151),i.Server=n(152),i.Receiver=n(81),i.Sender=n(83),e.exports=i},function(e,t,n){"use strict";e.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},function(e,t){e.exports=require("buffer")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=void 0;const i=n(28),r=n(7),s=n(15),o=n(16);class a extends r.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._contexts=new Set,this._isConnected=!0,this._isRemote=!1,this._channel.on("close",()=>this._didClose()),this._closedPromise=new Promise(e=>this.once(s.Events.Browser.Disconnected,e))}static from(e){return e._object}static fromNullable(e){return e?a.from(e):null}async newContext(e={}){return this._wrapApiCall("browser.newContext",async()=>{if(this._isRemote&&e._tracePath)throw new Error('"_tracePath" is not supported in connected browser');const t=await i.prepareBrowserContextOptions(e),n=i.BrowserContext.from((await this._channel.newContext(t)).context);return n._options=t,this._contexts.add(n),n._logger=e.logger||this._logger,n})}contexts(){return[...this._contexts]}version(){return this._initializer.version}async newPage(e={}){const t=await this.newContext(e),n=await t.newPage();return n._ownedContext=t,t._ownerPage=n,n}isConnected(){return this._isConnected}async close(){try{await this._wrapApiCall("browser.close",async()=>{await this._channel.close(),await this._closedPromise})}catch(e){if(o.isSafeCloseError(e))return;throw e}}_didClose(){this._isConnected=!1,this.emit(s.Events.Browser.Disconnected)}}t.Browser=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareBrowserContextOptions=t.BrowserContext=void 0;const i=n(50),r=n(52),s=n(2),o=n(1),a=n(7),c=n(23),l=n(27),d=n(15),u=n(12),h=n(29),p=n(0),m=n(16),f=n(19),_=s.promisify(o.writeFile.bind(o)),g=s.promisify(o.readFile.bind(o));class w extends a.ChannelOwner{constructor(e,t,n,s){super(e,t,n,s),this._pages=new Set,this._routes=[],this._browser=null,this._bindings=new Map,this._timeoutSettings=new u.TimeoutSettings,this._options={},e instanceof l.Browser&&(this._browser=e),this._channel.on("bindingCall",({binding:e})=>this._onBinding(i.BindingCall.from(e))),this._channel.on("close",()=>this._onClose()),this._channel.on("page",({page:e})=>this._onPage(i.Page.from(e))),this._channel.on("route",({route:e,request:t})=>this._onRoute(r.Route.from(e),r.Request.from(t))),this._closedPromise=new Promise(e=>this.once(d.Events.BrowserContext.Close,e))}static from(e){return e._object}static fromNullable(e){return e?w.from(e):null}_onPage(e){this._pages.add(e),this.emit(d.Events.BrowserContext.Page,e)}_onRoute(e,t){for(const{url:n,handler:i}of this._routes)if(c.urlMatches(t.url(),n))return void i(e,t);e.continue()}async _onBinding(e){const t=this._bindings.get(e._initializer.name);t&&e.call(t)}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e),this._channel.setDefaultNavigationTimeoutNoReply({timeout:e})}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}browser(){return this._browser}pages(){return[...this._pages]}async newPage(){return this._wrapApiCall("browserContext.newPage",async()=>{if(this._ownerPage)throw new Error("Please use browser.newContext()");return i.Page.from((await this._channel.newPage()).page)})}async cookies(e){return e||(e=[]),e&&"string"==typeof e&&(e=[e]),this._wrapApiCall("browserContext.cookies",async()=>(await this._channel.cookies({urls:e})).cookies)}async addCookies(e){return this._wrapApiCall("browserContext.addCookies",async()=>{await this._channel.addCookies({cookies:e})})}async clearCookies(){return this._wrapApiCall("browserContext.clearCookies",async()=>{await this._channel.clearCookies()})}async grantPermissions(e,t){return this._wrapApiCall("browserContext.grantPermissions",async()=>{await this._channel.grantPermissions({permissions:e,...t})})}async clearPermissions(){return this._wrapApiCall("browserContext.clearPermissions",async()=>{await this._channel.clearPermissions()})}async setGeolocation(e){return this._wrapApiCall("browserContext.setGeolocation",async()=>{await this._channel.setGeolocation({geolocation:e||void 0})})}async setExtraHTTPHeaders(e){return this._wrapApiCall("browserContext.setExtraHTTPHeaders",async()=>{r.validateHeaders(e),await this._channel.setExtraHTTPHeaders({headers:p.headersObjectToArray(e)})})}async setOffline(e){return this._wrapApiCall("browserContext.setOffline",async()=>{await this._channel.setOffline({offline:e})})}async setHTTPCredentials(e){return p.isUnderTest()||c.deprecate("context.setHTTPCredentials","warning: method |context.setHTTPCredentials()| is deprecated. Instead of changing credentials, create another browser context with new credentials."),this._wrapApiCall("browserContext.setHTTPCredentials",async()=>{await this._channel.setHTTPCredentials({httpCredentials:e||void 0})})}async addInitScript(e,t){return this._wrapApiCall("browserContext.addInitScript",async()=>{const n=await c.evaluationScript(e,t);await this._channel.addInitScript({source:n})})}async exposeBinding(e,t,n={}){return this._wrapApiCall("browserContext.exposeBinding",async()=>{await this._channel.exposeBinding({name:e,needsHandle:n.handle}),this._bindings.set(e,t)})}async exposeFunction(e,t){return this._wrapApiCall("browserContext.exposeFunction",async()=>{await this._channel.exposeBinding({name:e});this._bindings.set(e,(e,...n)=>t(...n))})}async route(e,t){return this._wrapApiCall("browserContext.route",async()=>{this._routes.push({url:e,handler:t}),1===this._routes.length&&await this._channel.setNetworkInterceptionEnabled({enabled:!0})})}async unroute(e,t){return this._wrapApiCall("browserContext.unroute",async()=>{this._routes=this._routes.filter(n=>n.url!==e||t&&n.handler!==t),0===this._routes.length&&await this._channel.setNetworkInterceptionEnabled({enabled:!1})})}async waitForEvent(e,t={}){const n=this._timeoutSettings.timeout("function"==typeof t?{}:t),i="function"==typeof t?t:t.predicate,r=new h.Waiter;r.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==d.Events.BrowserContext.Close&&r.rejectOnEvent(this,d.Events.BrowserContext.Close,new Error("Context closed"));const s=await r.waitForEvent(this,e,i);return r.dispose(),s}async storageState(e={}){return await this._wrapApiCall("browserContext.storageState",async()=>{const t=await this._channel.storageState();return e.path&&(await p.mkdirIfNeeded(e.path),await _(e.path,JSON.stringify(t),"utf8")),t})}async _onClose(){this._browser&&this._browser._contexts.delete(this),this.emit(d.Events.BrowserContext.Close)}async close(){try{await this._wrapApiCall("browserContext.close",async()=>{await this._channel.close(),await this._closedPromise})}catch(e){if(m.isSafeCloseError(e))return;throw e}}async _extendInjectedScript(e,t){await this._channel.extendInjectedScript({source:e,arg:f.serializeArgument(t)})}}t.BrowserContext=w,t.prepareBrowserContextOptions=async function(e){if(e.videoSize&&!e.videosPath)throw new Error('"videoSize" option requires "videosPath" to be specified');e.extraHTTPHeaders&&r.validateHeaders(e.extraHTTPHeaders);const t={...e,viewport:null===e.viewport?void 0:e.viewport,noDefaultViewport:null===e.viewport,extraHTTPHeaders:e.extraHTTPHeaders?p.headersObjectToArray(e.extraHTTPHeaders):void 0,storageState:"string"==typeof e.storageState?JSON.parse(await g(e.storageState,"utf8")):e.storageState};return!t.recordVideo&&e.videosPath&&(t.recordVideo={dir:e.videosPath,size:e.videoSize}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Waiter=void 0;const i=n(11),r=n(16);function s(e,t,n){let i;return{promise:new Promise((r,s)=>{i=o=>{try{if(n&&!n(o))return;e.removeListener(t,i),r(o)}catch(n){e.removeListener(t,i),s(n)}},e.addListener(t,i)}),dispose:()=>e.removeListener(t,i)}}t.Waiter=class{constructor(){this._dispose=[],this._failures=[],this._logs=[]}async waitForEvent(e,t,n){const{promise:i,dispose:r}=s(e,t,n);return this.waitForPromise(i,r)}rejectOnEvent(e,t,n,i){const{promise:r,dispose:o}=s(e,t,i);this._rejectOn(r.then(()=>{throw n}),o)}rejectOnTimeout(e,t){if(!e)return;const{promise:n,dispose:i}=function(e){let t;const n=new Promise(n=>t=setTimeout(n,e));return{promise:n,dispose:()=>clearTimeout(t)}}(e);this._rejectOn(n.then(()=>{throw new r.TimeoutError(t)}),i)}dispose(){for(const e of this._dispose)e()}async waitForPromise(e,t){try{const n=await Promise.race([e,...this._failures]);return t&&t(),n}catch(e){throw t&&t(),this.dispose(),i.rewriteErrorMessage(e,e.message+function(e){if(!e.length)return"";const t=(60-" logs ".length)/2,n=60-" logs ".length-t;return`\n${"=".repeat(t)} logs ${"=".repeat(n)}\n${e.join("\n")}\n${"=".repeat(60)}`}(this._logs)+o),e}}log(e){this._logs.push(e)}_rejectOn(e,t){this._failures.push(e),t&&this._dispose.push(t)}};const o="\nNote: use DEBUG=pw:api environment variable and rerun to capture Playwright logs."},function(e,t,n){"use strict";const i={};function r(e,t,n){n||(n=Error);class r extends n{constructor(e,n,i){super(function(e,n,i){return"string"==typeof t?t:t(e,n,i)}(e,n,i))}}r.prototype.name=n.name,r.prototype.code=e,i[e]=r}function s(e,t){if(Array.isArray(e)){const n=e.length;return e=e.map(e=>String(e)),n>2?`one of ${t} ${e.slice(0,n-1).join(", ")}, or `+e[n-1]:2===n?`one of ${t} ${e[0]} or ${e[1]}`:`of ${t} ${e[0]}`}return`of ${t} ${String(e)}`}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,n){let i;var r,o;let a;if("string"==typeof t&&(r="not ",t.substr(!o||o<0?0:+o,r.length)===r)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a=`The ${e} ${i} ${s(t,"type")}`;else{a=`The "${e}" ${function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument"} ${i} ${s(t,"type")}`}return a+=". Received type "+typeof n,a}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=i},function(e,t,n){try{var i=n(2);if("function"!=typeof i.inherits)throw"";e.exports=i.inherits}catch(t){e.exports=n(258)}},function(e,t,n){"use strict";var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=l;var r=n(125),s=n(129);n(31)(l,r);for(var o=i(s.prototype),a=0;a<o.length;a++){var c=o[a];l.prototype[c]||(l.prototype[c]=s.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);r.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||process.nextTick(u,this)}function u(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},function(e,t){e.exports=require("assert")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSourceUrl=t.generateSourceMapUrl=t.ensureSourceUrl=void 0;const i=n(1),r=n(2),s=n(11),o=n(0);let a=0;const c=/^[\040\t]*\/\/[@#] sourceURL=\s*(\S*?)\s*$/m;function l(){return o.isDebugMode()?`\n//# sourceURL=__playwright_evaluation_script__${a++}\n`:""}t.ensureSourceUrl=function(e){return c.test(e)?e:e+l()},t.generateSourceMapUrl=async function(e,t){return o.isDebugMode()?await async function(e,t){const n=s.getCallerFilePath();if(!n)return;try{const s=t.indexOf(e);if(-1===s)return;const o=u(t,s),a=await r.promisify(i.readFile)(n,"utf8"),c=a.indexOf(e);if(-1===c)return;const l=u(a,c),p=u(e,e.length),m=function(e,t,n,i){const r=[];let s={line:0,column:0},o={line:0,column:0};for(let e=0;e<i.line;e++){const i=h(t,{line:e,column:0}),a=h(n,{line:e,column:0});for(;s.line<a.line;)r.push(";"),s.line++,s.column=0;r.push(d(a.column-s.column)),r.push(d(0)),r.push(d(i.line-o.line)),r.push(d(i.column-o.column)),s=a,o=i}return JSON.stringify({version:3,sources:["file://"+e],names:[],mappings:r.join("")})}(n,l,o,p);return`\n//# sourceMappingURL=data:application/json;base64,${Buffer.from(m).toString("base64")}\n`}catch(e){}}(e,t)||l():""},t.generateSourceUrl=l;function d(e){e<0?e=-e<<1|1:e<<=1;let t="";do{let n=31&e;(e>>>=5)>0&&(n|=32),t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}while(e>0);return t}function u(e,t){const n={line:0,column:0};let i=0;for(;;){const r=e.indexOf("\n",i);if(-1===r||r>=t)break;n.line++,i=r+1}return n.column=t-i,n}function h(e,t){return{line:e.line+t.line,column:t.column+(t.line?0:e.column)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRSession=t.CRSessionEvents=t.CRConnection=t.kBrowserCloseMessageId=t.ConnectionEvents=void 0;const i=n(0),r=n(6),s=n(11),o=n(10),a=n(4);t.ConnectionEvents={Disconnected:Symbol("ConnectionEvents.Disconnected")},t.kBrowserCloseMessageId=-9999;class c extends r.EventEmitter{constructor(e,t,n){super(),this._lastId=0,this._sessions=new Map,this._closed=!1,this._transport=e,this._protocolLogger=t,this._browserLogsCollector=n,this._transport.onmessage=this._onMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this.rootSession=new l(this,"","browser",""),this._sessions.set("",this.rootSession)}static fromSession(e){return e._connection}session(e){return this._sessions.get(e)||null}_rawSend(e,t,n){const i=++this._lastId,r={id:i,method:t,params:n};return e&&(r.sessionId=e),this._protocolLogger("send",r),this._transport.send(r),i}async _onMessage(e){if(this._protocolLogger("receive",e),e.id===t.kBrowserCloseMessageId)return;if("Target.attachedToTarget"===e.method){const t=e.params.sessionId,n=e.sessionId||"",i=new l(this,n,e.params.targetInfo.type,t);this._sessions.set(t,i)}else if("Target.detachedFromTarget"===e.method){const t=this._sessions.get(e.params.sessionId);t&&(t._onClosed(void 0),this._sessions.delete(e.params.sessionId))}const n=this._sessions.get(e.sessionId||"");n&&n._onMessage(e)}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0;const e=a.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs());for(const t of this._sessions.values())t._onClosed(e);this._sessions.clear(),Promise.resolve().then(()=>this.emit(t.ConnectionEvents.Disconnected))}close(){this._closed||this._transport.close()}async createSession(e){const{sessionId:t}=await this.rootSession.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0});return this._sessions.get(t)}async createBrowserSession(){const{sessionId:e}=await this.rootSession.send("Target.attachToBrowserTarget");return this._sessions.get(e)}}t.CRConnection=c,t.CRSessionEvents={Disconnected:Symbol("Events.CDPSession.Disconnected")};class l extends r.EventEmitter{constructor(e,t,n,i){super(),this._callbacks=new Map,this._crashed=!1,this._connection=e,this._rootSessionId=t,this._targetType=n,this._sessionId=i,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}_markAsCrashed(){this._crashed=!0}async send(e,t){if(this._crashed)throw new Error("Target crashed");if(void 0!==this._browserDisconnectedLogs)throw new Error(`Protocol error (${e}): Browser closed.`+this._browserDisconnectedLogs);if(!this._connection)throw new Error(`Protocol error (${e}): Session closed. Most likely the ${this._targetType} has been closed.`);const n=this._connection._rawSend(this._sessionId,e,t);return new Promise((t,i)=>{this._callbacks.set(n,{resolve:t,reject:i,error:new Error,method:e})})}_sendMayFail(e,t){return this.send(e,t).catch(e=>o.debugLogger.log("error",e))}_onMessage(e){if(e.id&&this._callbacks.has(e.id)){const t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(function(e,t,n){let i=`Protocol error (${t}): ${n.message}`;"data"in n&&(i+=" "+n.data);return s.rewriteErrorMessage(e,i)}(t.error,t.method,e.error)):t.resolve(e.result)}else i.assert(!e.id),Promise.resolve().then(()=>{this._eventListener&&this._eventListener(e.method,e.params),this.emit(e.method,e.params)})}async detach(){if(!this._connection)throw new Error(`Session already detached. Most likely the ${this._targetType} has been closed.`);const e=this._connection.session(this._rootSessionId);if(!e)throw new Error("Root session has been closed");await e.send("Target.detachFromTarget",{sessionId:this._sessionId})}_onClosed(e){this._browserDisconnectedLogs=e;const n=void 0!==e?"Browser closed."+e:"Target closed.";for(const e of this._callbacks.values())e.reject(s.rewriteErrorMessage(e.error,`Protocol error (${e.method}): `+n));this._callbacks.clear(),this._connection=null,Promise.resolve().then(()=>this.emit(t.CRSessionEvents.Disconnected))}}t.CRSession=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSwappedOutError=t.createProtocolError=t.WKSession=t.WKConnection=t.kPageProxyMessageReceived=t.kBrowserCloseMessageId=void 0;const i=n(6),r=n(0),s=n(11),o=n(10),a=n(4);t.kBrowserCloseMessageId=-9999,t.kPageProxyMessageReceived="kPageProxyMessageReceived";t.WKConnection=class{constructor(e,t,n,i){this._lastId=0,this._closed=!1,this._transport=e,this._transport.onmessage=this._dispatchMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this._onDisconnect=t,this._protocolLogger=n,this._browserLogsCollector=i,this.browserSession=new c(this,"","Browser has been closed.",e=>{this.rawSend(e)})}nextMessageId(){return++this._lastId}rawSend(e){this._protocolLogger("send",e),this._transport.send(e)}_dispatchMessage(e){if(this._protocolLogger("receive",e),e.id!==t.kBrowserCloseMessageId)if(e.pageProxyId){const n={message:e,pageProxyId:e.pageProxyId};this.browserSession.dispatchMessage({method:t.kPageProxyMessageReceived,params:n})}else this.browserSession.dispatchMessage(e)}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0,this.browserSession.dispose(!0),this._onDisconnect()}isClosed(){return this._closed}close(){this._closed||this._transport.close()}};class c extends i.EventEmitter{constructor(e,t,n,i){super(),this._disposed=!1,this._callbacks=new Map,this._crashed=!1,this.connection=e,this.sessionId=t,this._rawSend=i,this.errorText=n,this.on=super.on,this.off=super.removeListener,this.addListener=super.addListener,this.removeListener=super.removeListener,this.once=super.once}async send(e,t){if(this._crashed)throw new Error("Target crashed");if(this._disposed)throw new Error(`Protocol error (${e}): ${this.errorText}`);const n=this.connection.nextMessageId(),i={id:n,method:e,params:t};return this._rawSend(i),new Promise((t,i)=>{this._callbacks.set(n,{resolve:t,reject:i,error:new Error,method:e})})}sendMayFail(e,t){return this.send(e,t).catch(e=>o.debugLogger.log("error",e))}markAsCrashed(){this._crashed=!0}isDisposed(){return this._disposed}dispose(e){e&&(this.errorText="Browser closed."+a.helper.formatBrowserLogs(this.connection._browserLogsCollector.recentLogs()));for(const e of this._callbacks.values())e.reject(s.rewriteErrorMessage(e.error,`Protocol error (${e.method}): ${this.errorText}`));this._callbacks.clear(),this._disposed=!0}dispatchMessage(e){if(e.id&&this._callbacks.has(e.id)){const t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(l(t.error,t.method,e.error)):t.resolve(e.result)}else e.id&&!e.error?r.assert(this.isDisposed()):Promise.resolve().then(()=>this.emit(e.method,e.params))}}function l(e,t,n){let i=`Protocol error (${t}): ${n.message}`;return"data"in n&&(i+=" "+JSON.stringify(n.data)),s.rewriteErrorMessage(e,i)}t.WKSession=c,t.createProtocolError=l,t.isSwappedOutError=function(e){return e.message.includes("Target was swapped out.")}},function(e,t,n){"use strict";e.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElementHandleDispatcher=t.createHandle=void 0;const i=n(5),r=n(39),s=n(8);t.createHandle=function(e,t){return t.asElement()?new o(e,t.asElement()):new r.JSHandleDispatcher(e,t)};class o extends r.JSHandleDispatcher{constructor(e,t){super(e,t),this._elementHandle=t}static createNullable(e,t){if(t)return new o(e,t)}async ownerFrame(){return{frame:i.lookupNullableDispatcher(await this._elementHandle.ownerFrame())}}async contentFrame(){return{frame:i.lookupNullableDispatcher(await this._elementHandle.contentFrame())}}async getAttribute(e){const t=await this._elementHandle.getAttribute(e.name);return{value:null===t?void 0:t}}async textContent(){const e=await this._elementHandle.textContent();return{value:null===e?void 0:e}}async innerText(){return{value:await this._elementHandle.innerText()}}async innerHTML(){return{value:await this._elementHandle.innerHTML()}}async isChecked(){return{value:await this._elementHandle.isChecked()}}async isDisabled(){return{value:await this._elementHandle.isDisabled()}}async isEditable(){return{value:await this._elementHandle.isEditable()}}async isEnabled(){return{value:await this._elementHandle.isEnabled()}}async isHidden(){return{value:await this._elementHandle.isHidden()}}async isVisible(){return{value:await this._elementHandle.isVisible()}}async dispatchEvent(e){await this._elementHandle.dispatchEvent(e.type,r.parseArgument(e.eventInit))}async scrollIntoViewIfNeeded(e){await this._elementHandle.scrollIntoViewIfNeeded(e)}async hover(e,t){return s.runAction(async t=>await this._elementHandle.hover(t,e),{...t,type:"hover",target:this._elementHandle,page:this._elementHandle._page})}async click(e,t){return s.runAction(async t=>await this._elementHandle.click(t,e),{...t,type:"click",target:this._elementHandle,page:this._elementHandle._page})}async dblclick(e,t){return s.runAction(async t=>await this._elementHandle.dblclick(t,e),{...t,type:"dblclick",target:this._elementHandle,page:this._elementHandle._page})}async tap(e,t){return s.runAction(async t=>await this._elementHandle.tap(t,e),{...t,type:"tap",target:this._elementHandle,page:this._elementHandle._page})}async selectOption(e,t){return s.runAction(async t=>{const n=(e.elements||[]).map(e=>e._elementHandle);return{values:await this._elementHandle.selectOption(t,n,e.options||[],e)}},{...t,type:"selectOption",target:this._elementHandle,page:this._elementHandle._page})}async fill(e,t){return s.runAction(async t=>await this._elementHandle.fill(t,e.value,e),{...t,type:"fill",value:e.value,target:this._elementHandle,page:this._elementHandle._page})}async selectText(e){await this._elementHandle.selectText(e)}async setInputFiles(e,t){return s.runAction(async t=>await this._elementHandle.setInputFiles(t,e.files,e),{...t,type:"setInputFiles",target:this._elementHandle,page:this._elementHandle._page})}async focus(){await this._elementHandle.focus()}async type(e,t){return s.runAction(async t=>await this._elementHandle.type(t,e.text,e),{...t,type:"type",value:e.text,target:this._elementHandle,page:this._elementHandle._page})}async press(e,t){return s.runAction(async t=>await this._elementHandle.press(t,e.key,e),{...t,type:"press",value:e.key,target:this._elementHandle,page:this._elementHandle._page})}async check(e,t){return s.runAction(async t=>await this._elementHandle.check(t,e),{...t,type:"check",target:this._elementHandle,page:this._elementHandle._page})}async uncheck(e,t){return s.runAction(async t=>await this._elementHandle.uncheck(t,e),{...t,type:"uncheck",target:this._elementHandle,page:this._elementHandle._page})}async boundingBox(){return{value:await this._elementHandle.boundingBox()||void 0}}async screenshot(e){return{binary:(await this._elementHandle.screenshot(e)).toString("base64")}}async querySelector(e){const t=await this._elementHandle.$(e.selector);return{element:t?new o(this._scope,t):void 0}}async querySelectorAll(e){return{elements:(await this._elementHandle.$$(e.selector)).map(e=>new o(this._scope,e))}}async evalOnSelector(e){return{value:r.serializeResult(await this._elementHandle._$evalExpression(e.selector,e.expression,e.isFunction,r.parseArgument(e.arg)))}}async evalOnSelectorAll(e){return{value:r.serializeResult(await this._elementHandle._$$evalExpression(e.selector,e.expression,e.isFunction,r.parseArgument(e.arg)))}}async waitForElementState(e){await this._elementHandle.waitForElementState(e.state,e)}async waitForSelector(e){return{element:o.createNullable(this._scope,await this._elementHandle.waitForSelector(e.selector,e))}}}t.ElementHandleDispatcher=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeResult=t.parseValue=t.parseArgument=t.JSHandleDispatcher=void 0;const i=n(5),r=n(38),s=n(20);class o extends i.Dispatcher{constructor(e,t){super(e,t,t.asElement()?"ElementHandle":"JSHandle",{preview:t.toString()}),t._setPreviewCallback(e=>this._dispatchEvent("previewUpdated",{preview:e}))}async evaluateExpression(e){return{value:c(await this._object._evaluateExpression(e.expression,e.isFunction,!0,a(e.arg)))}}async evaluateExpressionHandle(e){const t=await this._object._evaluateExpression(e.expression,e.isFunction,!1,a(e.arg));return{handle:r.createHandle(this._scope,t)}}async getProperty(e){const t=await this._object.getProperty(e.name);return{handle:r.createHandle(this._scope,t)}}async getPropertyList(){const e=await this._object.getProperties(),t=[];for(const[n,i]of e)t.push({name:n,value:r.createHandle(this._scope,i)});return{properties:t}}async jsonValue(){return{value:c(await this._object.jsonValue())}}async dispose(){await this._object.dispose()}}function a(e){return s.parseSerializedValue(e.value,e.handles.map(e=>e._object))}function c(e){return s.serializeValue(e,e=>({fallThrough:e}),new Set)}t.JSHandleDispatcher=o,t.parseArgument=a,t.parseValue=function(e){return s.parseSerializedValue(e,[])},t.serializeResult=c},function(e,t,n){var i=n(18);"disable"===process.env.READABLE_STREAM&&i?(e.exports=i.Readable,Object.assign(e.exports,i),e.exports.Stream=i):((t=e.exports=n(125)).Stream=i||t,t.Readable=t,t.Writable=n(129),t.Duplex=n(32),t.Transform=n(131),t.PassThrough=n(262),t.finished=n(72),t.pipeline=n(263))},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";const i=n(21),r=n(43),s=n(149),{kStatusCode:o,NOOP:a}=n(25),c=Buffer.from([0,0,255,255]),l=Symbol("permessage-deflate"),d=Symbol("total-length"),u=Symbol("callback"),h=Symbol("buffers"),p=Symbol("error");let m;function f(e){this[h].push(e),this[d]+=e.length}function _(e){this[d]+=e.length,this[l]._maxPayload<1||this[d]<=this[l]._maxPayload?this[h].push(e):(this[p]=new RangeError("Max payload size exceeded"),this[p][o]=1009,this.removeListener("data",_),this.reset())}function g(e){this[l]._inflate=null,e[o]=1007,this[u](e)}e.exports=class{constructor(e,t,n){if(this._maxPayload=0|n,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!m){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;m=new s(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[u];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,n=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n})}),e}decompress(e,t,n){m.add(i=>{this._decompress(e,t,(e,t)=>{i(),n(e,t)})})}compress(e,t,n){m.add(i=>{this._compress(e,t,(e,t)=>{i(),n(e,t)})})}_decompress(e,t,n){const s=this._isServer?"client":"server";if(!this._inflate){const e=s+"_max_window_bits",t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._inflate=i.createInflateRaw({...this._options.zlibInflateOptions,windowBits:t}),this._inflate[l]=this,this._inflate[d]=0,this._inflate[h]=[],this._inflate.on("error",g),this._inflate.on("data",_)}this._inflate[u]=n,this._inflate.write(e),t&&this._inflate.write(c),this._inflate.flush(()=>{const e=this._inflate[p];if(e)return this._inflate.close(),this._inflate=null,void n(e);const i=r.concat(this._inflate[h],this._inflate[d]);this._inflate[d]=0,this._inflate[h]=[],t&&this.params[s+"_no_context_takeover"]&&this._inflate.reset(),n(null,i)})}_compress(e,t,n){const s=this._isServer?"server":"client";if(!this._deflate){const e=s+"_max_window_bits",t="number"!=typeof this.params[e]?i.Z_DEFAULT_WINDOWBITS:this.params[e];this._deflate=i.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:t}),this._deflate[d]=0,this._deflate[h]=[],this._deflate.on("error",a),this._deflate.on("data",f)}this._deflate[u]=n,this._deflate.write(e),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=r.concat(this._deflate[h],this._deflate[d]);t&&(e=e.slice(0,e.length-4)),this._deflate[u]=null,this._deflate[d]=0,this._deflate[h]=[],t&&this.params[s+"_no_context_takeover"]&&this._deflate.reset(),n(null,e)})}}},function(e,t,n){"use strict";const{EMPTY_BUFFER:i}=n(25);function r(e,t){if(0===e.length)return i;if(1===e.length)return e[0];const n=Buffer.allocUnsafe(t);let r=0;for(let t=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return r<t?n.slice(0,r):n}function s(e,t,n,i,r){for(let s=0;s<r;s++)n[i+s]=e[s]^t[3&s]}function o(e,t){const n=e.length;for(let i=0;i<n;i++)e[i]^=t[3&i]}function a(e){return e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}function c(e){if(c.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=Buffer.from(e):ArrayBuffer.isView(e)?t=Buffer.from(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),c.readOnly=!1),t}try{const t=n(!function(){var e=new Error("Cannot find module 'bufferutil'");throw e.code="MODULE_NOT_FOUND",e}()),i=t.BufferUtil||t;e.exports={concat:r,mask(e,t,n,r,o){o<48?s(e,t,n,r,o):i.mask(e,t,n,r,o)},toArrayBuffer:a,toBuffer:c,unmask(e,t){e.length<32?o(e,t):i.unmask(e,t)}}}catch(t){e.exports={concat:r,mask:s,toArrayBuffer:a,toBuffer:c,unmask:o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkedTask=t.editableTask=t.disabledTask=t.visibleTask=t.getAttributeTask=t.innerHTMLTask=t.innerTextTask=t.textContentTask=t.dispatchEventTask=t.waitForSelectorTask=t.assertDone=t.throwFatalDOMError=t.InjectedScriptPollHandler=t.ElementHandle=t.FrameExecutionContext=void 0;const i=n(0),r=n(161),s=n(22),o=n(17);class a extends s.ExecutionContext{constructor(e,t,n){super(e),this.frame=t,this.world=n}adoptIfNeeded(e){return e instanceof c&&e._context!==this?this.frame._page._delegate.adoptElementHandle(e,this):null}async evaluateInternal(e,...t){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>s.evaluate(this,!0,e,...t))}async evaluateExpressionInternal(e,t,...n){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>s.evaluateExpression(this,!0,e,t,...n))}async evaluateHandleInternal(e,...t){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>s.evaluate(this,!1,e,...t))}async evaluateExpressionHandleInternal(e,t,...n){return await this.frame._page._frameManager.waitForSignalsCreatedBy(null,!1,async()=>s.evaluateExpression(this,!1,e,t,...n))}createHandle(e){return this.frame._page._delegate.isElementHandle(e)?new c(this,e.objectId):super.createHandle(e)}injectedScript(){if(!this._injectedScriptPromise){const e=[];for(const[t,{source:n}]of this.frame._page.selectors._engines)e.push(`{ name: '${t}', engine: (${n}) }`);const t=`\n        (() => {\n        ${r.source}\n        return new pwExport([\n          ${e.join(",\n")}\n        ]);\n        })();\n      `;this._injectedScriptPromise=this._delegate.rawEvaluate(t).then(e=>new s.JSHandle(this,"object",e))}return this._injectedScriptPromise}async doSlowMo(){return this.frame._page._doSlowMo()}}t.FrameExecutionContext=a;class c extends s.JSHandle{constructor(e,t){super(e,"node",t),this._objectId=t,this._context=e,this._page=e.frame._page,this._initializePreview().catch(e=>{})}async _initializePreview(){const e=await this._context.injectedScript();this._setPreview(await e.evaluate((e,t)=>"JSHandle@"+e.previewNode(t),this))}asElement(){return this}async _evaluateInMain(e,t){const n=await this._context.frame._mainContext();return n.evaluateInternal(e,[await n.injectedScript(),this,t])}async _evaluateInUtility(e,t){const n=await this._context.frame._utilityContext();return n.evaluateInternal(e,[await n.injectedScript(),this,t])}async _evaluateHandleInUtility(e,t){const n=await this._context.frame._utilityContext();return n.evaluateHandleInternal(e,[await n.injectedScript(),this,t])}async ownerFrame(){const e=await this._page._delegate.getOwnerFrame(this);if(!e)return null;const t=this._page._frameManager.frame(e);if(t)return t;for(const t of this._page._browserContext.pages()){const n=t._frameManager.frame(e);if(n)return n}return null}async contentFrame(){return await this._evaluateInUtility(([e,t])=>t&&("IFRAME"===t.nodeName||"FRAME"===t.nodeName),{})?this._page._delegate.getContentFrame(this):null}async getAttribute(e){return d(await this._evaluateInUtility(([e,t,n])=>{if(t.nodeType!==Node.ELEMENT_NODE)return"error:notelement";return{value:t.getAttribute(n)}},e)).value}async textContent(){return this._evaluateInUtility(([e,t])=>t.textContent,{})}async innerText(){return d(await this._evaluateInUtility(([e,t])=>{if(t.nodeType!==Node.ELEMENT_NODE)return"error:notelement";if("http://www.w3.org/1999/xhtml"!==t.namespaceURI)return"error:nothtmlelement";return{value:t.innerText}},{})).value}async innerHTML(){return d(await this._evaluateInUtility(([e,t])=>{if(t.nodeType!==Node.ELEMENT_NODE)return"error:notelement";return{value:t.innerHTML}},{})).value}async dispatchEvent(e,t={}){await this._evaluateInMain(([e,t,{type:n,eventInit:i}])=>e.dispatchEvent(t,n,i),{type:e,eventInit:t}),await this._page._doSlowMo()}async _scrollRectIntoViewIfNeeded(e){return await this._page._delegate.scrollRectIntoViewIfNeeded(this,e)}async _waitAndScrollIntoViewIfNeeded(e){for(;e.isRunning();){u(await this._waitForDisplayedAtStablePosition(e,!1)),e.throwIfAborted();const t=u(await this._scrollRectIntoViewIfNeeded());if("error:notvisible"!==t)return}}async scrollIntoViewIfNeeded(e={}){return o.runAbortableTask(e=>this._waitAndScrollIntoViewIfNeeded(e),this._page._timeoutSettings.timeout(e))}async _clickablePoint(){const[e,t]=await Promise.all([this._page._delegate.getContentQuads(this),this._page.mainFrame()._utilityContext().then(e=>e.evaluateInternal(()=>({width:innerWidth,height:innerHeight})))]);if(!e||!e.length)return"error:notvisible";const n=e.map(e=>(e=>e.map(e=>({x:Math.min(Math.max(e.x,0),t.width),y:Math.min(Math.max(e.y,0),t.height)})))(e)).filter(e=>(e=>{let t=0;for(let n=0;n<e.length;++n){const i=e[n],r=e[(n+1)%e.length];t+=(i.x*r.y-r.x*i.y)/2}return Math.abs(t)})(e)>.99);if(!n.length)return"error:notinviewport";const i={x:0,y:0};for(const e of n[0])i.x+=e.x/4,i.y+=e.y/4;return function(e){const t=e.x-Math.floor(e.x);t>.49&&t<.51&&(e.x-=.02);const n=e.y-Math.floor(e.y);n>.49&&n<.51&&(e.y-=.02)}(i),i}async _offsetPoint(e){const[t,n]=await Promise.all([this.boundingBox(),this._evaluateInUtility(([e,t])=>e.getElementBorderWidth(t),{}).catch(e=>{})]);return t&&n?{x:t.x+n.left+e.x,y:t.y+n.top+e.y}:"error:notvisible"}async _retryPointerAction(e,t,n,i,r){let s=0;const o=[0,20,100,100,500],a=[void 0,{block:"end",inline:"end"},{block:"center",inline:"center"},{block:"start",inline:"start"}];for(;e.isRunning();){if(s){e.log(`retrying ${t} action, attempt #${s}`);const n=o[Math.min(s-1,o.length-1)];n&&(e.log(`  waiting ${n}ms`),await this._evaluateInUtility(([e,t,n])=>new Promise(e=>setTimeout(e,n)),n))}else e.log(`attempting ${t} action`);const c=a[s%a.length],l=await this._performPointerAction(e,t,n,i,c,r);if(++s,"error:notvisible"!==l)if("error:notinviewport"!==l){if("object"!=typeof l||!("hitTargetDescription"in l))return l;if(r.force)throw new Error(`Element does not receive pointer events, ${l.hitTargetDescription} intercepts them`);e.log(`  ${l.hitTargetDescription} intercepts pointer events`)}else{if(r.force)throw new Error("Element is outside of the viewport");e.log("  element is outside of the viewport")}else{if(r.force)throw new Error("Element is not visible");e.log("  element is not visible")}}return"done"}async _performPointerAction(e,t,n,i,r,s){const{force:o=!1,position:a}=s;if(s.__testHookBeforeStable&&await s.__testHookBeforeStable(),!o){const t=await this._waitForDisplayedAtStablePosition(e,n);if("done"!==t)return t}if(s.__testHookAfterStable&&await s.__testHookAfterStable(),e.log("  scrolling into view if needed"),e.throwIfAborted(),r)await this._evaluateInUtility(([e,t,n])=>{1===t.nodeType&&t.scrollIntoView(n)},r);else{const e=await this._scrollRectIntoViewIfNeeded(a?{x:a.x,y:a.y,width:0,height:0}:void 0);if("done"!==e)return e}e.log("  done scrolling");const c=a?await this._offsetPoint(a):await this._clickablePoint();if("string"==typeof c)return c;const l=function(e){return{x:(100*e.x|0)/100,y:(100*e.y|0)/100}}(c);if(!o){s.__testHookBeforeHitTarget&&await s.__testHookBeforeHitTarget(),e.log(`  checking that element receives pointer events at (${l.x},${l.y})`);const t=await this._checkHitTargetAt(l);if("done"!==t)return t;e.log("  element does receive pointer events")}return await this._page._frameManager.waitForSignalsCreatedBy(e,s.noWaitAfter,async()=>{let n;s.__testHookBeforePointerAction&&await s.__testHookBeforePointerAction(),e.throwIfAborted(),s&&s.modifiers&&(n=await this._page.keyboard._ensureModifiers(s.modifiers)),e.log(`  performing ${t} action`),await i(l),e.log(`  ${t} action done`),e.log("  waiting for scheduled navigations to finish"),s.__testHookAfterPointerAction&&await s.__testHookAfterPointerAction(),n&&await this._page.keyboard._ensureModifiers(n)},"input"),e.log("  navigations have finished"),"done"}async hover(e,t){return e.run(async e=>{u(await this._hover(e,t))},this._page._timeoutSettings.timeout(t))}_hover(e,t){return this._retryPointerAction(e,"hover",!1,e=>this._page.mouse.move(e.x,e.y),t)}async click(e,t={}){return e.run(async e=>{u(await this._click(e,t))},this._page._timeoutSettings.timeout(t))}_click(e,t){return this._retryPointerAction(e,"click",!0,e=>this._page.mouse.click(e.x,e.y,t),t)}async dblclick(e,t){return e.run(async e=>{u(await this._dblclick(e,t))},this._page._timeoutSettings.timeout(t))}_dblclick(e,t){return this._retryPointerAction(e,"dblclick",!0,e=>this._page.mouse.dblclick(e.x,e.y,t),t)}async tap(e,t={}){return e.run(async e=>{u(await this._tap(e,t))},this._page._timeoutSettings.timeout(t))}_tap(e,t){return this._retryPointerAction(e,"tap",!0,e=>this._page.touchscreen.tap(e.x,e.y),t)}async selectOption(e,t,n,i){return e.run(async e=>u(await this._selectOption(e,t,n,i)),this._page._timeoutSettings.timeout(i))}async _selectOption(e,t,n,i){const r=[...t,...n];return this._page._frameManager.waitForSignalsCreatedBy(e,i.noWaitAfter,async()=>{e.throwIfAborted(),e.log("  selecting specified option(s)");const t=await this._evaluateHandleInUtility(([e,t,n])=>e.waitForOptionsAndSelect(t,n),r),n=new l(e,t),i=d(await n.finish());return await this._page._doSlowMo(),i})}async fill(e,t,n={}){return e.run(async e=>{u(await this._fill(e,t,n))},this._page._timeoutSettings.timeout(n))}async _fill(e,t,n){return e.log(`elementHandle.fill("${t}")`),this._page._frameManager.waitForSignalsCreatedBy(e,n.noWaitAfter,async()=>{e.log("  waiting for element to be visible, enabled and editable");const n=await this._evaluateHandleInUtility(([e,t,n])=>e.waitForEnabledAndFill(t,n),t),i=new l(e,n),r=d(await i.finish());return e.throwIfAborted(),"error:notconnected"===r?r:(e.log("  element is visible, enabled and editable"),"needsinput"===r&&(e.throwIfAborted(),t?await this._page.keyboard.insertText(t):await this._page.keyboard.press("Delete")),"done")},"input")}async selectText(e={}){return o.runAbortableTask(async e=>{e.throwIfAborted();const t=await this._evaluateHandleInUtility(([e,t])=>e.waitForVisibleAndSelectText(t),{}),n=new l(e,t);u(d(await n.finish()))},this._page._timeoutSettings.timeout(e))}async setInputFiles(e,t,n){return e.run(async e=>{u(await this._setInputFiles(e,t,n))},this._page._timeoutSettings.timeout(n))}async _setInputFiles(e,t,n){const r=d(await this._evaluateInUtility(([e,t])=>{if(t.nodeType!==Node.ELEMENT_NODE||"INPUT"!==t.tagName)return"error:notinput";if(!t.isConnected)return"error:notconnected";return t.multiple},{}));return"string"==typeof r?r:(i.assert(r||t.length<=1,"Non-multiple file input can only accept single file!"),await this._page._frameManager.waitForSignalsCreatedBy(e,n.noWaitAfter,async()=>{e.throwIfAborted(),await this._page._delegate.setInputFiles(this,t)}),await this._page._doSlowMo(),"done")}async focus(){await o.runAbortableTask(async e=>{const t=await this._focus(e);await this._page._doSlowMo(),u(t)},0)}async _focus(e,t){e.throwIfAborted();return d(await this._evaluateInUtility(([e,t,n])=>e.focusNode(t,n),t))}async type(e,t,n){return e.run(async e=>{u(await this._type(e,t,n))},this._page._timeoutSettings.timeout(n))}async _type(e,t,n){return e.log(`elementHandle.type("${t}")`),this._page._frameManager.waitForSignalsCreatedBy(e,n.noWaitAfter,async()=>{const i=await this._focus(e,!0);return"done"!==i?i:(e.throwIfAborted(),await this._page.keyboard.type(t,n),"done")},"input")}async press(e,t,n){return e.run(async e=>{u(await this._press(e,t,n))},this._page._timeoutSettings.timeout(n))}async _press(e,t,n){return e.log(`elementHandle.press("${t}")`),this._page._frameManager.waitForSignalsCreatedBy(e,n.noWaitAfter,async()=>{const i=await this._focus(e,!0);return"done"!==i?i:(e.throwIfAborted(),await this._page.keyboard.press(t,n),"done")},"input")}async check(e,t){return e.run(async e=>{u(await this._setChecked(e,!0,t))},this._page._timeoutSettings.timeout(t))}async uncheck(e,t){return e.run(async e=>{u(await this._setChecked(e,!1,t))},this._page._timeoutSettings.timeout(t))}async _setChecked(e,t,n){if(await this._evaluateInUtility(([e,t])=>e.isCheckboxChecked(t),{})===t)return"done";const i=await this._click(e,n);if("done"!==i)return i;if(await this._evaluateInUtility(([e,t])=>e.isCheckboxChecked(t),{})!==t)throw new Error("Unable to click checkbox");return"done"}async boundingBox(){return this._page._delegate.getBoundingBox(this)}async screenshot(e={}){return o.runAbortableTask(t=>this._page._screenshotter.screenshotElement(t,this,e),this._page._timeoutSettings.timeout(e))}async $(e){return this._page.selectors._query(this._context.frame,e,this)}async $$(e){return this._page.selectors._queryAll(this._context.frame,e,this,!0)}async _$evalExpression(e,t,n,i){const r=await this._page.selectors._query(this._context.frame,e,this);if(!r)throw new Error(`Error: failed to find element matching selector "${e}"`);const s=await r._evaluateExpression(t,n,!0,i);return r.dispose(),s}async _$$evalExpression(e,t,n,i){const r=await this._page.selectors._queryArray(this._context.frame,e,this),s=await r._evaluateExpression(t,n,!0,i);return r.dispose(),s}async isVisible(){return this._evaluateInUtility(([e,t])=>{const n=t.nodeType===Node.ELEMENT_NODE?t:t.parentElement;return!!n&&e.isVisible(n)},{})}async isHidden(){return!await this.isVisible()}async isEnabled(){return!await this.isDisabled()}async isDisabled(){return this._evaluateInUtility(([e,t])=>{const n=t.nodeType===Node.ELEMENT_NODE?t:t.parentElement;return!!n&&e.isElementDisabled(n)},{})}async isEditable(){return this._evaluateInUtility(([e,t])=>{const n=t.nodeType===Node.ELEMENT_NODE?t:t.parentElement;return!!n&&(!e.isElementDisabled(n)&&!e.isElementReadOnly(n))},{})}async isChecked(){return this._evaluateInUtility(([e,t])=>e.isCheckboxChecked(t),{})}async waitForElementState(e,t={}){return o.runAbortableTask(async t=>{if(t.log("  waiting for element to be "+e),"visible"!==e)if("hidden"!==e)if("enabled"!==e)if("disabled"!==e)if("editable"!==e){if("stable"!==e)throw new Error("state: expected one of (visible|hidden|stable|enabled|disabled|editable)");{const e=this._page._delegate.rafCountForStablePosition(),n=await this._evaluateHandleInUtility(([e,t,n])=>e.waitForDisplayedAtStablePosition(t,n,!1),{rafCount:e,useTimeout:!!process.env.PW_USE_TIMEOUT_FOR_RAF}),i=new l(t,n);u(await i.finish())}}else{const e=await this._evaluateHandleInUtility(([e,t])=>e.waitForNodeEnabled(t,!0),{}),n=new l(t,e);u(await n.finish())}else{const e=await this._evaluateHandleInUtility(([e,t])=>e.waitForNodeDisabled(t),{}),n=new l(t,e);u(await n.finish())}else{const e=await this._evaluateHandleInUtility(([e,t])=>e.waitForNodeEnabled(t),{}),n=new l(t,e);u(await n.finish())}else{const e=await this._evaluateHandleInUtility(([e,t])=>e.waitForNodeHidden(t),{}),n=new l(t,e);await n.finish()}else{const e=await this._evaluateHandleInUtility(([e,t])=>e.waitForNodeVisible(t),{}),n=new l(t,e);u(await n.finish())}},this._page._timeoutSettings.timeout(t))}async waitForSelector(e,t={}){const{state:n="visible"}=t;if(!["attached","detached","visible","hidden"].includes(n))throw new Error("state: expected one of (attached|detached|visible|hidden)");const i=this._page.selectors._parseSelector(e),r=p(i,n,this);return o.runAbortableTask(async t=>{t.log(`waiting for selector "${e}"${"attached"===n?"":" to be "+n}`);const s=await this._context.frame._context(i.world),o=await s.injectedScript(),a=new l(t,await r(o)),c=await a.finishHandle();if(!c.asElement())return c.dispose(),null;return c.asElement()._adoptTo(await this._context.frame._mainContext())},this._page._timeoutSettings.timeout(t))}async _adoptTo(e){if(this._context!==e){const t=await this._page._delegate.adoptElementHandle(this,e);return this.dispose(),t}return this}async _waitForDisplayedAtStablePosition(e,t){t?e.log("  waiting for element to be visible, enabled and not moving"):e.log("  waiting for element to be visible and not moving");const n=this._page._delegate.rafCountForStablePosition(),i=this._evaluateHandleInUtility(([e,t,{rafOptions:n,waitForEnabled:i}])=>e.waitForDisplayedAtStablePosition(t,n,i),{rafOptions:{rafCount:n,useTimeout:!!process.env.PW_USE_TIMEOUT_FOR_RAF},waitForEnabled:t}),r=new l(e,await i),s=await r.finish();return t?e.log("  element is visible, enabled and does not move"):e.log("  element is visible and does not move"),s}async _checkHitTargetAt(e){const t=await this.ownerFrame();if(t&&t.parentFrame()){const n=await t.frameElement(),i=await n.boundingBox();if(!i)return"error:notconnected";e={x:e.x-i.x,y:e.y-i.y}}return this._evaluateInUtility(([e,t,n])=>e.checkHitTargetAt(t,n),e)}}t.ElementHandle=c;class l{constructor(e,t){this._progress=e,this._poll=t,this._progress.cleanupWhenAborted(()=>this.cancel()),this._streamLogs()}async _streamLogs(){for(;this._poll&&this._progress.isRunning();){const e=await this._poll.evaluate(e=>e.takeNextLogs()).catch(e=>[]);if(!this._poll||!this._progress.isRunning())return;for(const t of e)this._progress.log(t)}}async finishHandle(){try{const e=await this._poll.evaluateHandle(e=>e.run());return await this._finishInternal(),e}finally{await this.cancel()}}async finish(){try{const e=await this._poll.evaluate(e=>e.run());return await this._finishInternal(),e}finally{await this.cancel()}}async _finishInternal(){if(!this._poll)return;const e=await this._poll.evaluate(e=>e.takeLastLogs()).catch(e=>[]);for(const t of e)this._progress.log(t)}async cancel(){if(!this._poll)return;const e=this._poll;this._poll=null,await e.evaluate(e=>e.cancel()).catch(e=>{}),e.dispose()}}function d(e){if("error:notelement"===e)throw new Error("Node is not an element");if("error:nothtmlelement"===e)throw new Error("Not an HTMLElement");if("error:notfillableelement"===e)throw new Error("Element is not an <input>, <textarea> or [contenteditable] element");if("error:notfillableinputtype"===e)throw new Error("Input of this type cannot be filled");if("error:notfillablenumberinput"===e)throw new Error("Cannot type text into input[type=number]");if("error:notvaliddate"===e)throw new Error("Malformed value");if("error:notinput"===e)throw new Error("Node is not an HTMLInputElement");if("error:notselect"===e)throw new Error("Element is not a <select> element.");return e}function u(e){if("error:notconnected"===e)throw new Error("Element is not attached to the DOM");return e}function h(e){}function p(e,t,n){return i=>i.evaluateHandle((e,{parsed:t,state:n,root:i})=>{let r;return e.pollRaf((s,o)=>{const a=e.querySelector(t,i||document),c=!!a&&e.isVisible(a);switch(r!==a&&(r=a,a?s.log(`  selector resolved to ${c?"visible":"hidden"} ${e.previewNode(a)}`):s.log("  selector did not resolve to any element")),n){case"attached":return a||o;case"detached":return a?o:void 0;case"visible":return c?a:o;case"hidden":return c?o:void 0}})},{parsed:e.parsed,state:t,root:n})}t.InjectedScriptPollHandler=l,t.throwFatalDOMError=d,t.assertDone=h,t.waitForSelectorTask=p,t.dispatchEventTask=function(e,t,n){return i=>i.evaluateHandle((e,{parsed:t,type:n,eventInit:i})=>e.pollRaf((r,s)=>{const o=e.querySelector(t,document);if(!o)return s;r.log("  selector resolved to "+e.previewNode(o)),e.dispatchEvent(o,n,i)}),{parsed:e.parsed,type:t,eventInit:n})},t.textContentTask=function(e){return t=>t.evaluateHandle((e,t)=>e.pollRaf((n,i)=>{const r=e.querySelector(t,document);return r?(n.log("  selector resolved to "+e.previewNode(r)),r.textContent):i}),e.parsed)},t.innerTextTask=function(e){return t=>t.evaluateHandle((e,t)=>e.pollRaf((n,i)=>{const r=e.querySelector(t,document);return r?(n.log("  selector resolved to "+e.previewNode(r)),"http://www.w3.org/1999/xhtml"!==r.namespaceURI?"error:nothtmlelement":{innerText:r.innerText}):i}),e.parsed)},t.innerHTMLTask=function(e){return t=>t.evaluateHandle((e,t)=>e.pollRaf((n,i)=>{const r=e.querySelector(t,document);return r?(n.log("  selector resolved to "+e.previewNode(r)),r.innerHTML):i}),e.parsed)},t.getAttributeTask=function(e,t){return n=>n.evaluateHandle((e,{parsed:t,name:n})=>e.pollRaf((i,r)=>{const s=e.querySelector(t,document);return s?(i.log("  selector resolved to "+e.previewNode(s)),s.getAttribute(n)):r}),{parsed:e.parsed,name:t})},t.visibleTask=function(e){return t=>t.evaluateHandle((e,t)=>e.pollRaf((n,i)=>{const r=e.querySelector(t,document);return r?(n.log("  selector resolved to "+e.previewNode(r)),e.isVisible(r)):i}),e.parsed)},t.disabledTask=function(e){return t=>t.evaluateHandle((e,t)=>e.pollRaf((n,i)=>{const r=e.querySelector(t,document);return r?(n.log("  selector resolved to "+e.previewNode(r)),e.isElementDisabled(r)):i}),e.parsed)},t.editableTask=function(e){return t=>t.evaluateHandle((e,t)=>e.pollRaf((n,i)=>{const r=e.querySelector(t,document);return r?(n.log("  selector resolved to "+e.previewNode(r)),!e.isElementDisabled(r)&&!e.isElementReadOnly(r)):i}),e.parsed)},t.checkedTask=function(e){return t=>t.evaluateHandle((e,t)=>e.pollRaf((n,i)=>{const r=e.querySelector(t,document);return r?(n.log("  selector resolved to "+e.previewNode(r)),e.isCheckboxChecked(r)):i}),e.parsed)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeAsCallArgument=t.parseEvaluationResultValue=void 0,t.parseEvaluationResultValue=function e(t,n=[]){if(!Object.is(t,void 0)){if("object"==typeof t&&t){if("v"in t){if("undefined"===t.v)return;return"null"===t.v?null:"NaN"===t.v?NaN:"Infinity"===t.v?1/0:"-Infinity"===t.v?-1/0:"-0"===t.v?-0:void 0}if("d"in t)return new Date(t.d);if("r"in t)return new RegExp(t.r.p,t.r.f);if("a"in t)return t.a.map(t=>e(t,n));if("o"in t){const i={};for(const{k:r,v:s}of t.o)i[r]=e(s,n);return i}if("h"in t)return n[t.h]}return t}},t.serializeAsCallArgument=function(e,t){return function e(t,n,i){const r=n(t);if(!("fallThrough"in r))return r;t=r.fallThrough;if(i.has(t))throw new Error("Argument is a circular structure");if("symbol"==typeof t)return{v:"undefined"};if(Object.is(t,void 0))return{v:"undefined"};if(Object.is(t,null))return{v:"null"};if(Object.is(t,NaN))return{v:"NaN"};if(Object.is(t,1/0))return{v:"Infinity"};if(Object.is(t,-1/0))return{v:"-Infinity"};if(Object.is(t,-0))return{v:"-0"};if("boolean"==typeof t)return t;if("number"==typeof t)return t;if("string"==typeof t)return t;if(s=t,s instanceof Error||s&&s.__proto__&&"Error"===s.__proto__.name){const e=t;return"captureStackTrace"in global.Error?e.stack||"":`${e.name}: ${e.message}\n${e.stack}`}var s;if(function(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}(t))return{d:t.toJSON()};if(function(e){return e instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(e)}(t))return{r:{p:t.source,f:t.flags}};if(Array.isArray(t)){const r=[];i.add(t);for(let s=0;s<t.length;++s)r.push(e(t[s],n,i));return i.delete(t),{a:r}}if("object"==typeof t){const r=[];i.add(t);for(const s of Object.keys(t)){let o;try{o=t[s]}catch(e){continue}"toJSON"===s&&"function"==typeof o?r.push({k:s,v:{o:[]}}):r.push({k:s,v:e(o,n,i)})}return i.delete(t),{o:r}}}(e,t,new Set)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRBrowserContext=t.CRBrowser=void 0;const i=n(47),r=n(8),s=n(0),o=n(13),a=n(9),c=n(35),l=n(170),d=n(48),u=n(60);class h extends i.Browser{constructor(e,t){super(t),this._clientRootSessionPromise=null,this._contexts=new Map,this._crPages=new Map,this._backgroundPages=new Map,this._serviceWorkers=new Map,this._isMac=!1,this._version="",this._tracingRecording=!1,this._tracingPath="",this._connection=e,this._session=this._connection.rootSession,this._connection.on(c.ConnectionEvents.Disconnected,()=>this._didClose()),this._session.on("Target.attachedToTarget",this._onAttachedToTarget.bind(this)),this._session.on("Target.detachedFromTarget",this._onDetachedFromTarget.bind(this))}static async connect(e,t,n){const i=new c.CRConnection(e,t.protocolLogger,t.browserLogsCollector),r=new h(i,t);r._devtools=n;const s=i.rootSession,o=await s.send("Browser.getVersion");if(r._isMac=o.userAgent.includes("Macintosh"),r._version=o.product.substring(o.product.indexOf("/")+1),!t.persistent)return await s.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),r;r._defaultContext=new m(r,void 0,t.persistent);const a=[];function l({targetInfo:e}){"page"!==e.type&&"background_page"!==e.type&&"service_worker"!==e.type||a.push(s.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0}))}s.on("Target.targetCreated",l);const d=s.send("Target.setDiscoverTargets",{discover:!0}),u=s.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}).then(()=>(s.off("Target.targetCreated",l),s.send("Target.setDiscoverTargets",{discover:!1})));return await Promise.all([d,u,r._defaultContext._initialize()]),await Promise.all(a),r}async newContext(e={}){r.validateBrowserContextOptions(e,this._options);const{browserContextId:t}=await this._session.send("Target.createBrowserContext",{disposeOnDetach:!0,proxyServer:e.proxy?e.proxy.server:void 0,proxyBypassList:e.proxy?e.proxy.bypass:void 0}),n=new m(this,t,e);return await n._initialize(),this._contexts.set(t,n),n}contexts(){return Array.from(this._contexts.values())}version(){return this._version}isClank(){return"clank"===this._options.name}_onAttachedToTarget({targetInfo:e,sessionId:t,waitingForDebugger:n}){if("browser"===e.type)return;const i=this._connection.session(t);s.assert(e.browserContextId,"targetInfo: "+JSON.stringify(e,null,2));let r=this._contexts.get(e.browserContextId)||null;if(r||(r=this._defaultContext),"other"===e.type&&e.url.startsWith("devtools://devtools")&&this._devtools)this._devtools.install(i);else if("other"!==e.type&&r){if(s.assert(!this._crPages.has(e.targetId),"Duplicate target "+e.targetId),s.assert(!this._backgroundPages.has(e.targetId),"Duplicate target "+e.targetId),s.assert(!this._serviceWorkers.has(e.targetId),"Duplicate target "+e.targetId),"background_page"===e.type){const t=new l.CRPage(i,e.targetId,r,null,!1);return this._backgroundPages.set(e.targetId,t),void t.pageOrError().then(()=>{r.emit(m.CREvents.BackgroundPage,t._page)})}if("page"===e.type){const t=e.openerId&&this._crPages.get(e.openerId)||null,n=new l.CRPage(i,e.targetId,r,t,!0);return this._crPages.set(e.targetId,n),void n._page.reportAsNew()}if("service_worker"===e.type){const t=new p(r,i,e.url);return this._serviceWorkers.set(e.targetId,t),void r.emit(m.CREvents.ServiceWorker,t)}s.assert(!1,"Unknown target type: "+e.type)}else n&&i._sendMayFail("Runtime.runIfWaitingForDebugger").then(()=>{this._session._sendMayFail("Target.detachFromTarget",{sessionId:t})})}_onDetachedFromTarget(e){const t=e.targetId,n=this._crPages.get(t);if(n)return this._crPages.delete(t),void n.didClose();const i=this._backgroundPages.get(t);if(i)return this._backgroundPages.delete(t),void i.didClose();const r=this._serviceWorkers.get(t);return r?(this._serviceWorkers.delete(t),void r.emit(a.Worker.Events.Close)):void 0}async _closePage(e){await this._session.send("Target.closeTarget",{targetId:e._targetId})}async newBrowserCDPSession(){return await this._connection.createBrowserSession()}async startTracing(e,t={}){s.assert(!this._tracingRecording,"Cannot start recording trace while already recording trace."),this._tracingClient=e?e._delegate._mainFrameSession._client:this._session;const n=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler","disabled-by-default-v8.cpu_profiler.hires"],{path:i=null,screenshots:r=!1,categories:o=n}=t;r&&o.push("disabled-by-default-devtools.screenshot"),this._tracingPath=i,this._tracingRecording=!0,await this._tracingClient.send("Tracing.start",{transferMode:"ReturnAsStream",categories:o.join(",")})}async stopTracing(){s.assert(this._tracingClient,"Tracing was not started.");const[e]=await Promise.all([new Promise(e=>this._tracingClient.once("Tracing.tracingComplete",e)),this._tracingClient.send("Tracing.end")]),t=await d.readProtocolStream(this._tracingClient,e.stream,this._tracingPath);return this._tracingRecording=!1,t}isConnected(){return!this._connection._closed}async _clientRootSession(){return this._clientRootSessionPromise||(this._clientRootSessionPromise=this._connection.createBrowserSession()),this._clientRootSessionPromise}}t.CRBrowser=h;class p extends a.Worker{constructor(e,t,n){super(n),this._browserContext=e,t.once("Runtime.executionContextCreated",e=>{this._createExecutionContext(new u.CRExecutionContext(t,e.context))}),t.send("Runtime.enable",{}).catch(e=>{}),t.send("Runtime.runIfWaitingForDebugger").catch(e=>{})}}class m extends r.BrowserContext{constructor(e,t,n){super(e,n,t),this._browser=e,this._evaluateOnNewDocumentSources=[],this._authenticateProxyViaCredentials()}async _initialize(){s.assert(!Array.from(this._browser._crPages.values()).some(e=>e._browserContext===this));const e=[super._initialize()];this._browser._options.downloadsPath&&e.push(this._browser._session.send("Browser.setDownloadBehavior",{behavior:this._options.acceptDownloads?"allowAndName":"deny",browserContextId:this._browserContextId,downloadPath:this._browser._options.downloadsPath})),this._options.permissions&&e.push(this.grantPermissions(this._options.permissions)),await Promise.all(e)}pages(){const e=[];for(const t of this._browser._crPages.values())t._browserContext===this&&t._initializedPage&&e.push(t._initializedPage);return e}async newPageDelegate(){r.assertBrowserContextIsNotOwned(this);const e=this._browser.isClank()?new Set(this._browser._crPages.keys()):void 0;let{targetId:t}=await this._browser._session.send("Target.createTarget",{url:"about:blank",browserContextId:this._browserContextId});if(e){const n=new Set(this._browser._crPages.keys());for(const t of e)n.delete(t);for(const e of n){this._browser._crPages.get(e)._opener&&n.delete(e)}s.assert(1===n.size),[t]=[...n]}return this._browser._crPages.get(t)}async _doCookies(e){const{cookies:t}=await this._browser._session.send("Storage.getCookies",{browserContextId:this._browserContextId});return o.filterCookies(t.map(e=>{const t={sameSite:"None",...e};return delete t.size,delete t.priority,delete t.session,delete t.sameParty,t}),e)}async addCookies(e){await this._browser._session.send("Storage.setCookies",{cookies:o.rewriteCookies(e),browserContextId:this._browserContextId})}async clearCookies(){await this._browser._session.send("Storage.clearCookies",{browserContextId:this._browserContextId})}async _doGrantPermissions(e,t){const n=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardSanitizedWrite"],["payment-handler","paymentHandler"],["midi-sysex","midiSysex"]]),i=t.map(e=>{const t=n.get(e);if(!t)throw new Error("Unknown permission: "+e);return t});await this._browser._session.send("Browser.grantPermissions",{origin:"*"===e?void 0:e,browserContextId:this._browserContextId,permissions:i})}async _doClearPermissions(){await this._browser._session.send("Browser.resetPermissions",{browserContextId:this._browserContextId})}async setGeolocation(e){r.verifyGeolocation(e),this._options.geolocation=e;for(const e of this.pages())await e._delegate.updateGeolocation()}async setExtraHTTPHeaders(e){this._options.extraHTTPHeaders=e;for(const e of this.pages())await e._delegate.updateExtraHTTPHeaders()}async setOffline(e){this._options.offline=e;for(const e of this.pages())await e._delegate.updateOffline()}async _doSetHTTPCredentials(e){this._options.httpCredentials=e;for(const e of this.pages())await e._delegate.updateHttpCredentials()}async _doAddInitScript(e){this._evaluateOnNewDocumentSources.push(e);for(const t of this.pages())await t._delegate.evaluateOnNewDocument(e)}async _doExposeBinding(e){for(const t of this.pages())await t._delegate.exposeBinding(e)}async _doUpdateRequestInterception(){for(const e of this.pages())await e._delegate.updateRequestInterception()}async _doClose(){s.assert(this._browserContextId),await this._browser._session.send("Target.disposeBrowserContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId);for(const[e,t]of this._browser._serviceWorkers)t._browserContext===this&&(t.emit(a.Worker.Events.Close),this._browser._serviceWorkers.delete(e))}backgroundPages(){const e=[];for(const t of this._browser._backgroundPages.values())t._browserContext===this&&t._initializedPage&&e.push(t._initializedPage);return e}serviceWorkers(){return Array.from(this._browser._serviceWorkers.values()).filter(e=>e._browserContext===this)}async newCDPSession(e){if(!(e instanceof a.Page))throw new Error("page: expected Page");const t=e._delegate._targetId,n=await this._browser._clientRootSession(),{sessionId:i}=await n.send("Target.attachToTarget",{targetId:t,flatten:!0});return this._browser._connection.session(i)}}t.CRBrowserContext=m,m.CREvents={BackgroundPage:"backgroundpage",ServiceWorker:"serviceworker"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Browser=void 0;const i=n(8),r=n(9),s=n(6),o=n(169);class a extends s.EventEmitter{constructor(e){super(),this._downloads=new Map,this._defaultContext=null,this._startedClosing=!1,this._idToVideo=new Map,this._options=e}async newPage(e){const t=await this.newContext(e),n=await t.newPage();return n._ownedContext=t,n}_downloadCreated(e,t,n,i){const r=new o.Download(e,this._options.downloadsPath||"",t,n,i);this._downloads.set(t,r)}_downloadFilenameSuggested(e,t){const n=this._downloads.get(e);n&&n._filenameSuggested(t)}_downloadFinished(e,t){const n=this._downloads.get(e);n&&(n._reportFinished(t),this._downloads.delete(e))}_videoStarted(e,t,n,s){const o=new i.Video(e,t,n);this._idToVideo.set(t,o),e.emit(i.BrowserContext.Events.VideoStarted,o),s.then(e=>{e instanceof r.Page&&e.videoStarted(o)})}_videoFinished(e){const t=this._idToVideo.get(e);this._idToVideo.delete(e),t._finish()}_didClose(){for(const e of this.contexts())e._browserClosed();this._defaultContext&&this._defaultContext._browserClosed(),this.emit(a.Events.Disconnected)}async close(){this._startedClosing||(this._startedClosing=!0,await this._options.browserProcess.close()),this.isConnected()&&await new Promise(e=>this.once(a.Events.Disconnected,e))}}t.Browser=a,a.Events={Disconnected:"disconnected"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exceptionToError=t.toConsoleMessageLocation=t.readProtocolStream=t.releaseObject=t.getExceptionMessage=void 0;const i=n(1),r=n(2),s=n(0);function o(e){if(e.exception)return e.exception.description||String(e.exception.value);let t=e.text;if(e.stackTrace)for(const n of e.stackTrace.callFrames){const e=n.url+":"+n.lineNumber+":"+n.columnNumber;t+=`\n    at ${n.functionName||"<anonymous>"} (${e})`}return t}t.getExceptionMessage=o,t.releaseObject=async function(e,t){await e.send("Runtime.releaseObject",{objectId:t}).catch(e=>{})},t.readProtocolStream=async function(e,t,n){let o,a=!1;n&&(await s.mkdirIfNeeded(n),o=await r.promisify(i.open)(n,"w"));const c=[];for(;!a;){const s=await e.send("IO.read",{handle:t});a=s.eof;const l=Buffer.from(s.data,s.base64Encoded?"base64":void 0);c.push(l),n&&await r.promisify(i.write)(o,l)}return n&&await r.promisify(i.close)(o),await e.send("IO.close",{handle:t}),Buffer.concat(c)},t.toConsoleMessageLocation=function(e){return e&&e.callFrames.length?{url:e.callFrames[0].url,lineNumber:e.callFrames[0].lineNumber,columnNumber:e.callFrames[0].columnNumber}:{url:"",lineNumber:0,columnNumber:0}},t.exceptionToError=function(e){const t=o(e),n=t.split("\n"),i=n.findIndex(e=>e.startsWith("    at"));let r="",s="";-1===i?r=t:(r=n.slice(0,i).join("\n"),s=t);const a=r.match(/^[a-zA-Z0-0_]*Error: (.*)$/);a&&(r=a[1]);const c=new Error(r);return c.stack=s,c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserContextDispatcher=void 0;const i=n(8),r=n(5),s=n(217),o=n(66),a=n(46),c=n(113),l=n(39);class d extends r.Dispatcher{constructor(e,t){super(e,t,"BrowserContext",{isChromium:t._browser._options.isChromium},!0),this._context=t;for(const e of t.pages())this._dispatchEvent("page",{page:new s.PageDispatcher(this._scope,e)});if(t.on(i.BrowserContext.Events.Page,e=>this._dispatchEvent("page",{page:new s.PageDispatcher(this._scope,e)})),t.on(i.BrowserContext.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),"chromium"===t._browser._options.name){for(const e of t.backgroundPages())this._dispatchEvent("crBackgroundPage",{page:new s.PageDispatcher(this._scope,e)});t.on(a.CRBrowserContext.CREvents.BackgroundPage,e=>this._dispatchEvent("crBackgroundPage",{page:new s.PageDispatcher(this._scope,e)}));for(const e of t.serviceWorkers())this._dispatchEvent("crServiceWorker",new s.WorkerDispatcher(this._scope,e));t.on(a.CRBrowserContext.CREvents.ServiceWorker,e=>this._dispatchEvent("crServiceWorker",{worker:new s.WorkerDispatcher(this._scope,e)}))}}async setDefaultNavigationTimeoutNoReply(e){this._context.setDefaultNavigationTimeout(e.timeout)}async setDefaultTimeoutNoReply(e){this._context.setDefaultTimeout(e.timeout)}async exposeBinding(e){await this._context.exposeBinding(e.name,!!e.needsHandle,(t,...n)=>{const i=new s.BindingCallDispatcher(this._scope,e.name,!!e.needsHandle,t,n);return this._dispatchEvent("bindingCall",{binding:i}),i.promise()})}async newPage(){return{page:r.lookupDispatcher(await this._context.newPage())}}async cookies(e){return{cookies:await this._context.cookies(e.urls)}}async addCookies(e){await this._context.addCookies(e.cookies)}async clearCookies(){await this._context.clearCookies()}async grantPermissions(e){await this._context.grantPermissions(e.permissions,e.origin)}async clearPermissions(){await this._context.clearPermissions()}async setGeolocation(e){await this._context.setGeolocation(e.geolocation)}async setExtraHTTPHeaders(e){await this._context.setExtraHTTPHeaders(e.headers)}async setOffline(e){await this._context.setOffline(e.offline)}async setHTTPCredentials(e){await this._context.setHTTPCredentials(e.httpCredentials)}async addInitScript(e){await this._context._doAddInitScript(e.source)}async setNetworkInterceptionEnabled(e){e.enabled?this._context._setRequestInterceptor((e,t)=>{this._dispatchEvent("route",{route:new o.RouteDispatcher(this._scope,e),request:o.RequestDispatcher.from(this._scope,t)})}):await this._context._setRequestInterceptor(void 0)}async storageState(){return await this._context.storageState()}async close(){await this._context.close()}async extendInjectedScript(e){await this._context.extendInjectedScript(e.source,l.parseArgument(e.arg))}async crNewCDPSession(e){if(!this._object._browser._options.isChromium)throw new Error("CDP session is only available in Chromium");const t=this._object;return{session:new c.CDPSessionDispatcher(this._scope,await t.newCDPSession(e.page._object))}}}t.BrowserContextDispatcher=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCall=t.Page=void 0;const i=n(15),r=n(0),s=n(12),o=n(20),a=n(224),c=n(7),l=n(117),d=n(118),u=n(119),h=n(68),p=n(69),m=n(51),f=n(229),_=n(19),g=n(52),w=n(230),b=n(26),y=n(231),v=n(29),x=n(1),S=n(3),k=n(2),C=n(23),E=n(0),T=n(16),P=n(232),O=k.promisify(x.writeFile.bind(x)),A=k.promisify(x.mkdir);class I extends c.ChannelOwner{constructor(e,t,n,r){super(e,t,n,r),this._frames=new Set,this._workers=new Set,this._closed=!1,this._routes=[],this.coverage=null,this._bindings=new Map,this._isPageCall=!1,this._video=null,this.setMaxListeners(0),this._browserContext=e,this._timeoutSettings=new s.TimeoutSettings(this._browserContext._timeoutSettings),this.accessibility=new a.Accessibility(this._channel),this.keyboard=new f.Keyboard(this._channel),this.mouse=new f.Mouse(this._channel),this.touchscreen=new f.Touchscreen(this._channel),this._mainFrame=m.Frame.from(r.mainFrame),this._mainFrame._page=this,this._frames.add(this._mainFrame),this._viewportSize=r.viewportSize||null,this._closed=r.isClosed,this._channel.on("bindingCall",({binding:e})=>this._onBinding(M.from(e))),this._channel.on("close",()=>this._onClose()),this._channel.on("console",({message:e})=>this.emit(i.Events.Page.Console,l.ConsoleMessage.from(e))),this._channel.on("crash",()=>this._onCrash()),this._channel.on("dialog",({dialog:e})=>this.emit(i.Events.Page.Dialog,d.Dialog.from(e))),this._channel.on("domcontentloaded",()=>this.emit(i.Events.Page.DOMContentLoaded)),this._channel.on("download",({download:e})=>this.emit(i.Events.Page.Download,u.Download.from(e))),this._channel.on("fileChooser",({element:e,isMultiple:t})=>this.emit(i.Events.Page.FileChooser,new w.FileChooser(this,h.ElementHandle.from(e),t))),this._channel.on("frameAttached",({frame:e})=>this._onFrameAttached(m.Frame.from(e))),this._channel.on("frameDetached",({frame:e})=>this._onFrameDetached(m.Frame.from(e))),this._channel.on("load",()=>this.emit(i.Events.Page.Load)),this._channel.on("pageError",({error:e})=>this.emit(i.Events.Page.PageError,o.parseError(e))),this._channel.on("popup",({page:e})=>this.emit(i.Events.Page.Popup,I.from(e))),this._channel.on("request",({request:e})=>this.emit(i.Events.Page.Request,g.Request.from(e))),this._channel.on("requestFailed",({request:e,failureText:t,responseEndTiming:n})=>this._onRequestFailed(g.Request.from(e),n,t)),this._channel.on("requestFinished",({request:e,responseEndTiming:t})=>this._onRequestFinished(g.Request.from(e),t)),this._channel.on("response",({response:e})=>this.emit(i.Events.Page.Response,g.Response.from(e))),this._channel.on("route",({route:e,request:t})=>this._onRoute(g.Route.from(e),g.Request.from(t))),this._channel.on("video",({relativePath:e})=>this.video()._setRelativePath(e)),this._channel.on("webSocket",({webSocket:e})=>this.emit(i.Events.Page.WebSocket,g.WebSocket.from(e))),this._channel.on("worker",({worker:e})=>this._onWorker(p.Worker.from(e))),this._browserContext._isChromium?(this.coverage=new y.ChromiumCoverage(this._channel),this.pdf=e=>this._pdf(e)):this.pdf=void 0}static from(e){return e._object}static fromNullable(e){return e?I.from(e):null}_onRequestFailed(e,t,n){e._failureText=n||null,e._timing&&(e._timing.responseEnd=t),this.emit(i.Events.Page.RequestFailed,e)}_onRequestFinished(e,t){e._timing&&(e._timing.responseEnd=t),this.emit(i.Events.Page.RequestFinished,e)}_onFrameAttached(e){e._page=this,this._frames.add(e),e._parentFrame&&e._parentFrame._childFrames.add(e),this.emit(i.Events.Page.FrameAttached,e)}_onFrameDetached(e){this._frames.delete(e),e._detached=!0,e._parentFrame&&e._parentFrame._childFrames.delete(e),this.emit(i.Events.Page.FrameDetached,e)}_onRoute(e,t){for(const{url:n,handler:i}of this._routes)if(C.urlMatches(t.url(),n))return void i(e,t);this._browserContext._onRoute(e,t)}async _onBinding(e){const t=this._bindings.get(e._initializer.name);t?e.call(t):this._browserContext._onBinding(e)}_onWorker(e){this._workers.add(e),e._page=this,this.emit(i.Events.Page.Worker,e)}_onClose(){this._closed=!0,this._browserContext._pages.delete(this),this.emit(i.Events.Page.Close)}_onCrash(){this.emit(i.Events.Page.Crash)}context(){return this._browserContext}async opener(){return I.fromNullable((await this._channel.opener()).page)}mainFrame(){return this._mainFrame}frame(e){const t=E.isString(e)?e:e.name,n=E.isObject(e)?e.url:void 0;return r.assert(t||n,"Either name or url matcher should be specified"),this.frames().find(e=>t?e.name()===t:C.urlMatches(e.url(),n))||null}frames(){return[...this._frames]}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e),this._channel.setDefaultNavigationTimeoutNoReply({timeout:e})}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}video(){return this._video?this._video:this._browserContext._options.recordVideo?(this._video=new P.Video(this),this._initializer.videoRelativePath&&this._video._setRelativePath(this._initializer.videoRelativePath),this._video):null}_attributeToPage(e){try{return this._isPageCall=!0,e()}finally{this._isPageCall=!1}}async $(e){return this._attributeToPage(()=>this._mainFrame.$(e))}async waitForSelector(e,t){return this._attributeToPage(()=>this._mainFrame.waitForSelector(e,t))}async dispatchEvent(e,t,n,i){return this._attributeToPage(()=>this._mainFrame.dispatchEvent(e,t,n,i))}async evaluateHandle(e,t){return _.assertMaxArguments(arguments.length,2),this._attributeToPage(()=>this._mainFrame.evaluateHandle(e,t))}async $eval(e,t,n){return _.assertMaxArguments(arguments.length,3),this._attributeToPage(()=>this._mainFrame.$eval(e,t,n))}async $$eval(e,t,n){return _.assertMaxArguments(arguments.length,3),this._attributeToPage(()=>this._mainFrame.$$eval(e,t,n))}async $$(e){return this._attributeToPage(()=>this._mainFrame.$$(e))}async addScriptTag(e={}){return this._attributeToPage(()=>this._mainFrame.addScriptTag(e))}async addStyleTag(e={}){return this._attributeToPage(()=>this._mainFrame.addStyleTag(e))}async exposeFunction(e,t){return this._wrapApiCall("page.exposeFunction",async()=>{await this._channel.exposeBinding({name:e});this._bindings.set(e,(e,...n)=>t(...n))})}async exposeBinding(e,t,n={}){return this._wrapApiCall("page.exposeBinding",async()=>{await this._channel.exposeBinding({name:e,needsHandle:n.handle}),this._bindings.set(e,t)})}async setExtraHTTPHeaders(e){return this._wrapApiCall("page.setExtraHTTPHeaders",async()=>{g.validateHeaders(e),await this._channel.setExtraHTTPHeaders({headers:E.headersObjectToArray(e)})})}url(){return this._attributeToPage(()=>this._mainFrame.url())}async content(){return this._attributeToPage(()=>this._mainFrame.content())}async setContent(e,t){return this._attributeToPage(()=>this._mainFrame.setContent(e,t))}async goto(e,t){return this._attributeToPage(()=>this._mainFrame.goto(e,t))}async reload(e={}){return this._wrapApiCall("page.reload",async()=>{const t=m.verifyLoadState("waitUntil",void 0===e.waitUntil?"load":e.waitUntil);return g.Response.fromNullable((await this._channel.reload({...e,waitUntil:t})).response)})}async waitForLoadState(e,t){return this._attributeToPage(()=>this._mainFrame.waitForLoadState(e,t))}async waitForNavigation(e){return this._attributeToPage(()=>this._mainFrame.waitForNavigation(e))}async waitForRequest(e,t={}){return this.waitForEvent(i.Events.Page.Request,{predicate:t=>E.isString(e)||E.isRegExp(e)?C.urlMatches(t.url(),e):e(t),timeout:t.timeout})}async waitForResponse(e,t={}){return this.waitForEvent(i.Events.Page.Response,{predicate:t=>E.isString(e)||E.isRegExp(e)?C.urlMatches(t.url(),e):e(t),timeout:t.timeout})}async waitForEvent(e,t={}){const n=this._timeoutSettings.timeout("function"==typeof t?{}:t),r="function"==typeof t?t:t.predicate,s=new v.Waiter;s.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==i.Events.Page.Crash&&s.rejectOnEvent(this,i.Events.Page.Crash,new Error("Page crashed")),e!==i.Events.Page.Close&&s.rejectOnEvent(this,i.Events.Page.Close,new Error("Page closed"));const o=await s.waitForEvent(this,e,r);return s.dispose(),o}async goBack(e={}){return this._wrapApiCall("page.goBack",async()=>{const t=m.verifyLoadState("waitUntil",void 0===e.waitUntil?"load":e.waitUntil);return g.Response.fromNullable((await this._channel.goBack({...e,waitUntil:t})).response)})}async goForward(e={}){return this._wrapApiCall("page.goForward",async()=>{const t=m.verifyLoadState("waitUntil",void 0===e.waitUntil?"load":e.waitUntil);return g.Response.fromNullable((await this._channel.goForward({...e,waitUntil:t})).response)})}async emulateMedia(e={}){return this._wrapApiCall("page.emulateMedia",async()=>{await this._channel.emulateMedia({media:null===e.media?"null":e.media,colorScheme:null===e.colorScheme?"null":e.colorScheme})})}async setViewportSize(e){return this._wrapApiCall("page.setViewportSize",async()=>{this._viewportSize=e,await this._channel.setViewportSize({viewportSize:e})})}viewportSize(){return this._viewportSize}async evaluate(e,t){return _.assertMaxArguments(arguments.length,2),this._attributeToPage(()=>this._mainFrame.evaluate(e,t))}async addInitScript(e,t){return this._wrapApiCall("page.addInitScript",async()=>{const n=await C.evaluationScript(e,t);await this._channel.addInitScript({source:n})})}async route(e,t){return this._wrapApiCall("page.route",async()=>{this._routes.push({url:e,handler:t}),1===this._routes.length&&await this._channel.setNetworkInterceptionEnabled({enabled:!0})})}async unroute(e,t){return this._wrapApiCall("page.unroute",async()=>{this._routes=this._routes.filter(n=>n.url!==e||t&&n.handler!==t),0===this._routes.length&&await this._channel.setNetworkInterceptionEnabled({enabled:!1})})}async screenshot(e={}){return this._wrapApiCall("page.screenshot",async()=>{const t={...e};t.type||(t.type=h.determineScreenshotType(e));const n=await this._channel.screenshot(t),i=b.Buffer.from(n.binary,"base64");return e.path&&(await E.mkdirIfNeeded(e.path),await O(e.path,i)),i})}async title(){return this._attributeToPage(()=>this._mainFrame.title())}async bringToFront(){return this._wrapApiCall("page.bringToFront",async()=>{await this._channel.bringToFront()})}async close(e={runBeforeUnload:void 0}){try{await this._wrapApiCall("page.close",async()=>{await this._channel.close(e),this._ownedContext&&await this._ownedContext.close()})}catch(e){if(T.isSafeCloseError(e))return;throw e}}isClosed(){return this._closed}async click(e,t){return this._attributeToPage(()=>this._mainFrame.click(e,t))}async dblclick(e,t){return this._attributeToPage(()=>this._mainFrame.dblclick(e,t))}async tap(e,t){return this._attributeToPage(()=>this._mainFrame.tap(e,t))}async fill(e,t,n){return this._attributeToPage(()=>this._mainFrame.fill(e,t,n))}async focus(e,t){return this._attributeToPage(()=>this._mainFrame.focus(e,t))}async textContent(e,t){return this._attributeToPage(()=>this._mainFrame.textContent(e,t))}async innerText(e,t){return this._attributeToPage(()=>this._mainFrame.innerText(e,t))}async innerHTML(e,t){return this._attributeToPage(()=>this._mainFrame.innerHTML(e,t))}async getAttribute(e,t,n){return this._attributeToPage(()=>this._mainFrame.getAttribute(e,t,n))}async isChecked(e,t){return this._attributeToPage(()=>this._mainFrame.isChecked(e,t))}async isDisabled(e,t){return this._attributeToPage(()=>this._mainFrame.isDisabled(e,t))}async isEditable(e,t){return this._attributeToPage(()=>this._mainFrame.isEditable(e,t))}async isEnabled(e,t){return this._attributeToPage(()=>this._mainFrame.isEnabled(e,t))}async isHidden(e,t){return this._attributeToPage(()=>this._mainFrame.isHidden(e,t))}async isVisible(e,t){return this._attributeToPage(()=>this._mainFrame.isVisible(e,t))}async hover(e,t){return this._attributeToPage(()=>this._mainFrame.hover(e,t))}async selectOption(e,t,n){return this._attributeToPage(()=>this._mainFrame.selectOption(e,t,n))}async setInputFiles(e,t,n){return this._attributeToPage(()=>this._mainFrame.setInputFiles(e,t,n))}async type(e,t,n){return this._attributeToPage(()=>this._mainFrame.type(e,t,n))}async press(e,t,n){return this._attributeToPage(()=>this._mainFrame.press(e,t,n))}async check(e,t){return this._attributeToPage(()=>this._mainFrame.check(e,t))}async uncheck(e,t){return this._attributeToPage(()=>this._mainFrame.uncheck(e,t))}async waitForTimeout(e){await this._mainFrame.waitForTimeout(e)}async waitForFunction(e,t,n){return this._attributeToPage(()=>this._mainFrame.waitForFunction(e,t,n))}workers(){return[...this._workers]}on(e,t){return e!==i.Events.Page.FileChooser||this.listenerCount(e)||this._channel.setFileChooserInterceptedNoReply({intercepted:!0}),super.on(e,t),this}addListener(e,t){return e!==i.Events.Page.FileChooser||this.listenerCount(e)||this._channel.setFileChooserInterceptedNoReply({intercepted:!0}),super.addListener(e,t),this}off(e,t){return super.off(e,t),e!==i.Events.Page.FileChooser||this.listenerCount(e)||this._channel.setFileChooserInterceptedNoReply({intercepted:!1}),this}removeListener(e,t){return super.removeListener(e,t),e!==i.Events.Page.FileChooser||this.listenerCount(e)||this._channel.setFileChooserInterceptedNoReply({intercepted:!1}),this}async _pdf(e={}){const t={...e};t.margin&&(t.margin={...t.margin}),"number"==typeof e.width&&(t.width=e.width+"px"),"number"==typeof e.height&&(t.height=e.height+"px");for(const n of["top","right","bottom","left"]){const i=n;e.margin&&"number"==typeof e.margin[i]&&(t.margin[i]=t.margin[i]+"px")}const n=await this._channel.pdf(t),i=b.Buffer.from(n.pdf,"base64");return e.path&&(await A(S.dirname(e.path),{recursive:!0}),await O(e.path,i)),i}}t.Page=I;class M extends c.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}async call(e){try{const t=m.Frame.from(this._initializer.frame),n={context:t._page.context(),page:t._page,frame:t};let i;i=this._initializer.handle?await e(n,_.JSHandle.from(this._initializer.handle)):await e(n,...this._initializer.args.map(_.parseResult)),this._channel.resolve({result:_.serializeArgument(i)}).catch(()=>{})}catch(e){this._channel.reject({error:o.serializeError(e)}).catch(()=>{})}}}t.BindingCall=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyLoadState=t.Frame=void 0;const i=n(0),r=n(7),s=n(68),o=n(19),a=n(1),c=n(52),l=n(2),d=n(6),u=n(29),h=n(15),p=n(228),m=n(23),f=l.promisify(a.readFile.bind(a));class _ extends r.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._parentFrame=null,this._url="",this._name="",this._detached=!1,this._childFrames=new Set,this._eventEmitter=new d.EventEmitter,this._eventEmitter.setMaxListeners(0),this._parentFrame=_.fromNullable(i.parentFrame),this._parentFrame&&this._parentFrame._childFrames.add(this),this._name=i.name,this._url=i.url,this._loadStates=new Set(i.loadStates),this._channel.on("loadstate",e=>{e.add&&(this._loadStates.add(e.add),this._eventEmitter.emit("loadstate",e.add)),e.remove&&this._loadStates.delete(e.remove)}),this._channel.on("navigated",e=>{this._url=e.url,this._name=e.name,this._eventEmitter.emit("navigated",e),!e.error&&this._page&&this._page.emit(h.Events.Page.FrameNavigated,this)})}static from(e){return e._object}static fromNullable(e){return e?_.from(e):null}_apiName(e){return this._page._isPageCall?"page."+e:"frame."+e}page(){return this._page}async goto(e,t={}){return this._wrapApiCall(this._apiName("goto"),async()=>{const n=g("waitUntil",void 0===t.waitUntil?"load":t.waitUntil);return c.Response.fromNullable((await this._channel.goto({url:e,...t,waitUntil:n})).response)})}_setupNavigationWaiter(e){const t=new u.Waiter;t.rejectOnEvent(this._page,h.Events.Page.Close,new Error("Navigation failed because page was closed!")),t.rejectOnEvent(this._page,h.Events.Page.Crash,new Error("Navigation failed because page crashed!")),t.rejectOnEvent(this._page,h.Events.Page.FrameDetached,new Error("Navigating frame was detached!"),e=>e===this);const n=this._page._timeoutSettings.navigationTimeout(e);return t.rejectOnTimeout(n,`Timeout ${n}ms exceeded.`),t}async waitForNavigation(e={}){return this._wrapApiCall(this._apiName("waitForNavigation"),async()=>{const t=g("waitUntil",void 0===e.waitUntil?"load":e.waitUntil),n=this._setupNavigationWaiter(e),i="string"==typeof e.url?` to "${e.url}"`:"";n.log(`waiting for navigation${i} until "${t}"`);const r=await n.waitForEvent(this._eventEmitter,"navigated",t=>!!t.error||(n.log(`  navigated to "${t.url}"`),m.urlMatches(t.url,e.url)));if(r.error){const e=new Error(r.error);e.stack="",await n.waitForPromise(Promise.reject(e))}this._loadStates.has(t)||await n.waitForEvent(this._eventEmitter,"loadstate",e=>(n.log(`  "${e}" event fired`),e===t));const s=r.newDocument?c.Request.fromNullable(r.newDocument.request):null,o=s?await n.waitForPromise(s._finalRequest().response()):null;return n.dispose(),o})}async waitForLoadState(e="load",t={}){if(e=g("state",e),!this._loadStates.has(e))return this._wrapApiCall(this._apiName("waitForLoadState"),async()=>{const n=this._setupNavigationWaiter(t);await n.waitForEvent(this._eventEmitter,"loadstate",t=>(n.log(`  "${t}" event fired`),t===e)),n.dispose()})}async frameElement(){return this._wrapApiCall(this._apiName("frameElement"),async()=>s.ElementHandle.from((await this._channel.frameElement()).element))}async evaluateHandle(e,t){return o.assertMaxArguments(arguments.length,2),this._wrapApiCall(this._apiName("evaluateHandle"),async()=>{const n=await this._channel.evaluateExpressionHandle({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t)});return o.JSHandle.from(n.handle)})}async _evaluateHandleInUtility(e,t){return o.assertMaxArguments(arguments.length,2),this._wrapApiCall(this._apiName("_evaluateHandleInUtility"),async()=>{const n=await this._channel.evaluateExpressionHandle({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t),world:"utility"});return o.JSHandle.from(n.handle)})}async evaluate(e,t){return o.assertMaxArguments(arguments.length,2),this._wrapApiCall(this._apiName("evaluate"),async()=>{const n=await this._channel.evaluateExpression({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t)});return o.parseResult(n.value)})}async _evaluateInUtility(e,t){return o.assertMaxArguments(arguments.length,2),this._wrapApiCall(this._apiName("evaluate"),async()=>{const n=await this._channel.evaluateExpression({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t),world:"utility"});return o.parseResult(n.value)})}async $(e){return this._wrapApiCall(this._apiName("$"),async()=>{const t=await this._channel.querySelector({selector:e});return s.ElementHandle.fromNullable(t.element)})}async waitForSelector(e,t={}){return this._wrapApiCall(this._apiName("waitForSelector"),async()=>{if(t.visibility)throw new Error("options.visibility is not supported, did you mean options.state?");if(t.waitFor&&"visible"!==t.waitFor)throw new Error("options.waitFor is not supported, did you mean options.state?");const n=await this._channel.waitForSelector({selector:e,...t});return s.ElementHandle.fromNullable(n.element)})}async dispatchEvent(e,t,n,i={}){return this._wrapApiCall(this._apiName("dispatchEvent"),async()=>{await this._channel.dispatchEvent({selector:e,type:t,eventInit:o.serializeArgument(n),...i})})}async $eval(e,t,n){return o.assertMaxArguments(arguments.length,3),this._wrapApiCall(this._apiName("$eval"),async()=>{const i=await this._channel.evalOnSelector({selector:e,expression:String(t),isFunction:"function"==typeof t,arg:o.serializeArgument(n)});return o.parseResult(i.value)})}async $$eval(e,t,n){return o.assertMaxArguments(arguments.length,3),this._wrapApiCall(this._apiName("$$eval"),async()=>{const i=await this._channel.evalOnSelectorAll({selector:e,expression:String(t),isFunction:"function"==typeof t,arg:o.serializeArgument(n)});return o.parseResult(i.value)})}async $$(e){return this._wrapApiCall(this._apiName("$$"),async()=>(await this._channel.querySelectorAll({selector:e})).elements.map(e=>s.ElementHandle.from(e)))}async content(){return this._wrapApiCall(this._apiName("content"),async()=>(await this._channel.content()).value)}async setContent(e,t={}){return this._wrapApiCall(this._apiName("setContent"),async()=>{const n=g("waitUntil",void 0===t.waitUntil?"load":t.waitUntil);await this._channel.setContent({html:e,...t,waitUntil:n})})}name(){return this._name||""}url(){return this._url}parentFrame(){return this._parentFrame}childFrames(){return Array.from(this._childFrames)}isDetached(){return this._detached}async addScriptTag(e={}){return this._wrapApiCall(this._apiName("addScriptTag"),async()=>{const t={...e};return t.path&&(t.content=(await f(t.path)).toString(),t.content+="//# sourceURL="+t.path.replace(/\n/g,"")),s.ElementHandle.from((await this._channel.addScriptTag({...t})).element)})}async addStyleTag(e={}){return this._wrapApiCall(this._apiName("addStyleTag"),async()=>{const t={...e};return t.path&&(t.content=(await f(t.path)).toString(),t.content+="/*# sourceURL="+t.path.replace(/\n/g,"")+"*/"),s.ElementHandle.from((await this._channel.addStyleTag({...t})).element)})}async click(e,t={}){return this._wrapApiCall(this._apiName("click"),async()=>await this._channel.click({selector:e,...t}))}async dblclick(e,t={}){return this._wrapApiCall(this._apiName("dblclick"),async()=>await this._channel.dblclick({selector:e,...t}))}async tap(e,t={}){return this._wrapApiCall(this._apiName("tap"),async()=>await this._channel.tap({selector:e,...t}))}async fill(e,t,n={}){return this._wrapApiCall(this._apiName("fill"),async()=>await this._channel.fill({selector:e,value:t,...n}))}async focus(e,t={}){return this._wrapApiCall(this._apiName("focus"),async()=>{await this._channel.focus({selector:e,...t})})}async textContent(e,t={}){return this._wrapApiCall(this._apiName("textContent"),async()=>{const n=(await this._channel.textContent({selector:e,...t})).value;return void 0===n?null:n})}async innerText(e,t={}){return this._wrapApiCall(this._apiName("innerText"),async()=>(await this._channel.innerText({selector:e,...t})).value)}async innerHTML(e,t={}){return this._wrapApiCall(this._apiName("innerHTML"),async()=>(await this._channel.innerHTML({selector:e,...t})).value)}async getAttribute(e,t,n={}){return this._wrapApiCall(this._apiName("getAttribute"),async()=>{const i=(await this._channel.getAttribute({selector:e,name:t,...n})).value;return void 0===i?null:i})}async isChecked(e,t={}){return this._wrapApiCall(this._apiName("isChecked"),async()=>(await this._channel.isChecked({selector:e,...t})).value)}async isDisabled(e,t={}){return this._wrapApiCall(this._apiName("isDisabled"),async()=>(await this._channel.isDisabled({selector:e,...t})).value)}async isEditable(e,t={}){return this._wrapApiCall(this._apiName("isEditable"),async()=>(await this._channel.isEditable({selector:e,...t})).value)}async isEnabled(e,t={}){return this._wrapApiCall(this._apiName("isEnabled"),async()=>(await this._channel.isEnabled({selector:e,...t})).value)}async isHidden(e,t={}){return this._wrapApiCall(this._apiName("isHidden"),async()=>(await this._channel.isHidden({selector:e,...t})).value)}async isVisible(e,t={}){return this._wrapApiCall(this._apiName("isVisible"),async()=>(await this._channel.isVisible({selector:e,...t})).value)}async hover(e,t={}){return this._wrapApiCall(this._apiName("hover"),async()=>{await this._channel.hover({selector:e,...t})})}async selectOption(e,t,n={}){return this._wrapApiCall(this._apiName("selectOption"),async()=>(await this._channel.selectOption({selector:e,...s.convertSelectOptionValues(t),...n})).values)}async setInputFiles(e,t,n={}){return this._wrapApiCall(this._apiName("setInputFiles"),async()=>{await this._channel.setInputFiles({selector:e,files:await s.convertInputFiles(t),...n})})}async type(e,t,n={}){return this._wrapApiCall(this._apiName("type"),async()=>{await this._channel.type({selector:e,text:t,...n})})}async press(e,t,n={}){return this._wrapApiCall(this._apiName("press"),async()=>{await this._channel.press({selector:e,key:t,...n})})}async check(e,t={}){return this._wrapApiCall(this._apiName("check"),async()=>{await this._channel.check({selector:e,...t})})}async uncheck(e,t={}){return this._wrapApiCall(this._apiName("uncheck"),async()=>{await this._channel.uncheck({selector:e,...t})})}async waitForTimeout(e){await new Promise(t=>setTimeout(t,e))}async waitForFunction(e,t,n={}){return this._wrapApiCall(this._apiName("waitForFunction"),async()=>{"string"==typeof n.polling&&i.assert("raf"===n.polling,"Unknown polling option: "+n.polling);const r=await this._channel.waitForFunction({...n,pollingInterval:"raf"===n.polling?void 0:n.polling,expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t)});return o.JSHandle.from(r.handle)})}async title(){return this._wrapApiCall(this._apiName("title"),async()=>(await this._channel.title()).value)}}function g(e,t){if("networkidle0"===t&&(t="networkidle"),!p.kLifecycleEvents.has(t))throw new Error(e+": expected one of (load|domcontentloaded|networkidle)");return t}t.Frame=_,t.verifyLoadState=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateHeaders=t.WebSocket=t.Response=t.Route=t.Request=void 0;const i=n(80),r=n(7),s=n(51),o=n(1),a=n(120),c=n(2),l=n(0),d=n(15),u=n(29);class h extends r.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._redirectedFrom=null,this._redirectedTo=null,this._failureText=null,this._redirectedFrom=h.fromNullable(i.redirectedFrom),this._redirectedFrom&&(this._redirectedFrom._redirectedTo=this),this._headers=l.headersArrayToObject(i.headers,!0),this._postData=i.postData?Buffer.from(i.postData,"base64"):null,this._timing={startTime:0,domainLookupStart:-1,domainLookupEnd:-1,connectStart:-1,secureConnectionStart:-1,connectEnd:-1,requestStart:-1,responseStart:-1,responseEnd:-1}}static from(e){return e._object}static fromNullable(e){return e?h.from(e):null}url(){return this._initializer.url}resourceType(){return this._initializer.resourceType}method(){return this._initializer.method}postData(){return this._postData?this._postData.toString("utf8"):null}postDataBuffer(){return this._postData}postDataJSON(){const e=this.postData();if(!e)return null;const t=this.headers()["content-type"];if(!t)return null;if("application/x-www-form-urlencoded"===t){const t={},n=new i.URLSearchParams(e);for(const[e,i]of n.entries())t[e]=i;return t}return JSON.parse(e)}headers(){return{...this._headers}}async response(){return m.fromNullable((await this._channel.response()).response)}frame(){return s.Frame.from(this._initializer.frame)}isNavigationRequest(){return this._initializer.isNavigationRequest}redirectedFrom(){return this._redirectedFrom}redirectedTo(){return this._redirectedTo}failure(){return null===this._failureText?null:{errorText:this._failureText}}timing(){return this._timing}_finalRequest(){return this._redirectedTo?this._redirectedTo._finalRequest():this}}t.Request=h;class p extends r.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}request(){return h.from(this._initializer.request)}async abort(e){await this._channel.abort({errorCode:e})}async fulfill(e={}){let t="",n=!1,i=0;if(e.path){const r=await c.promisify(o.readFile)(e.path);t=r.toString("base64"),n=!0,i=r.length}else l.isString(e.body)?(t=e.body,n=!1,i=Buffer.byteLength(t)):e.body&&(t=e.body.toString("base64"),n=!0,i=e.body.length);const r={};for(const t of Object.keys(e.headers||{}))r[t.toLowerCase()]=String(e.headers[t]);e.contentType?r["content-type"]=String(e.contentType):e.path&&(r["content-type"]=a.getType(e.path)||"application/octet-stream"),i&&!("content-length"in r)&&(r["content-length"]=String(i)),await this._channel.fulfill({status:e.status||200,headers:l.headersObjectToArray(r),body:t,isBase64:n})}async continue(e={}){const t=l.isString(e.postData)?Buffer.from(e.postData,"utf8"):e.postData;await this._channel.continue({url:e.url,method:e.method,headers:e.headers?l.headersObjectToArray(e.headers):void 0,postData:t?t.toString("base64"):void 0})}}t.Route=p;class m extends r.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._headers=l.headersArrayToObject(i.headers,!0),this._request=h.from(this._initializer.request),this._request._headers=l.headersArrayToObject(i.requestHeaders,!0),Object.assign(this._request._timing,this._initializer.timing)}static from(e){return e._object}static fromNullable(e){return e?m.from(e):null}url(){return this._initializer.url}ok(){return 0===this._initializer.status||this._initializer.status>=200&&this._initializer.status<=299}status(){return this._initializer.status}statusText(){return this._initializer.statusText}headers(){return{...this._headers}}async finished(){const e=await this._channel.finished();return e.error?new Error(e.error):null}async body(){return Buffer.from((await this._channel.body()).binary,"base64")}async text(){return(await this.body()).toString("utf8")}async json(){const e=await this.text();return JSON.parse(e)}request(){return this._request}frame(){return this._request.frame()}}t.Response=m;class f extends r.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._isClosed=!1,this._page=e,this._channel.on("frameSent",e=>{const t=2===e.opcode?Buffer.from(e.data,"base64"):e.data;this.emit(d.Events.WebSocket.FrameSent,{payload:t})}),this._channel.on("frameReceived",e=>{const t=2===e.opcode?Buffer.from(e.data,"base64"):e.data;this.emit(d.Events.WebSocket.FrameReceived,{payload:t})}),this._channel.on("socketError",({error:e})=>this.emit(d.Events.WebSocket.Error,e)),this._channel.on("close",()=>{this._isClosed=!0,this.emit(d.Events.WebSocket.Close)})}static from(e){return e._object}url(){return this._initializer.url}isClosed(){return this._isClosed}async waitForEvent(e,t={}){const n=this._page._timeoutSettings.timeout("function"==typeof t?{}:t),i="function"==typeof t?t:t.predicate,r=new u.Waiter;r.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==d.Events.WebSocket.Error&&r.rejectOnEvent(this,d.Events.WebSocket.Error,new Error("Socket error")),e!==d.Events.WebSocket.Close&&r.rejectOnEvent(this,d.Events.WebSocket.Close,new Error("Socket closed")),r.rejectOnEvent(this._page,d.Events.Page.Close,new Error("Page closed"));const s=await r.waitForEvent(this,e,i);return r.dispose(),s}}t.WebSocket=f,t.validateHeaders=function(e){for(const t of Object.keys(e)){const n=e[t];if(!Object.is(n,void 0)&&!l.isString(n))throw new Error(`Expected value of header "${t}" to be String, but "${typeof n}" is found.`)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tEnum=t.tObject=t.tArray=t.tOptional=t.tAny=t.tUndefined=t.tBinary=t.tString=t.tBoolean=t.tNumber=t.ValidationError=void 0;const i=n(0);class r extends Error{}t.ValidationError=r,t.tNumber=(e,t)=>{if(e instanceof Number)return e.valueOf();if("number"==typeof e)return e;throw new r(`${t}: expected number, got ${typeof e}`)},t.tBoolean=(e,t)=>{if(e instanceof Boolean)return e.valueOf();if("boolean"==typeof e)return e;throw new r(`${t}: expected boolean, got ${typeof e}`)},t.tString=(e,t)=>{if(e instanceof String)return e.valueOf();if("string"==typeof e)return e;throw new r(`${t}: expected string, got ${typeof e}`)},t.tBinary=(e,t)=>{if(e instanceof String)return e.valueOf();if("string"==typeof e)return e;throw new r(`${t}: expected base64-encoded buffer, got ${typeof e}`)},t.tUndefined=(e,t)=>{if(Object.is(e,void 0))return e;throw new r(`${t}: expected undefined, got ${typeof e}`)},t.tAny=(e,t)=>e,t.tOptional=e=>(t,n)=>Object.is(t,void 0)?t:e(t,n),t.tArray=e=>(t,n)=>{if(!Array.isArray(t))throw new r(`${n}: expected array, got ${typeof t}`);return t.map((t,i)=>e(t,n+"["+i+"]"))},t.tObject=e=>(t,n)=>{if(Object.is(t,null))throw new r(n+": expected object, got null");if("object"!=typeof t)throw new r(`${n}: expected object, got ${typeof t}`);const s={};for(const[i,r]of Object.entries(e)){const e=r(t[i],n?n+"."+i:i);Object.is(e,void 0)||(s[i]=e)}if(i.isUnderTest())for(const[e,n]of Object.entries(t))e.startsWith("__testHook")&&(s[e]=n);return s},t.tEnum=e=>(t,n)=>{if(!e.includes(t))throw new r(`${n}: expected one of (${e.join("|")})`);return t}},function(e,t,n){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=n(142):e.exports=n(144)},function(e,t,n){e.exports=d,d.Minimatch=u;var i={sep:"/"};try{i=n(3)}catch(e){}var r=d.GLOBSTAR=u.GLOBSTAR={},s=n(154),o={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},a="().*{}+?[]^$\\!".split("").reduce((function(e,t){return e[t]=!0,e}),{});var c=/\/+/;function l(e,t){e=e||{},t=t||{};var n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),Object.keys(e).forEach((function(t){n[t]=e[t]})),n}function d(e,t,n){if("string"!=typeof t)throw new TypeError("glob pattern string required");return n||(n={}),!(!n.nocomment&&"#"===t.charAt(0))&&(""===t.trim()?""===e:new u(t,n).match(e))}function u(e,t){if(!(this instanceof u))return new u(e,t);if("string"!=typeof e)throw new TypeError("glob pattern string required");t||(t={}),e=e.trim(),"/"!==i.sep&&(e=e.split(i.sep).join("/")),this.options=t,this.set=[],this.pattern=e,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function h(e,t){if(t||(t=this instanceof u?this.options:{}),void 0===(e=void 0===e?this.pattern:e))throw new TypeError("undefined pattern");return t.nobrace||!e.match(/\{.*\}/)?[e]:s(e)}d.filter=function(e,t){return t=t||{},function(n,i,r){return d(n,e,t)}},d.defaults=function(e){if(!e||!Object.keys(e).length)return d;var t=d,n=function(n,i,r){return t.minimatch(n,i,l(e,r))};return n.Minimatch=function(n,i){return new t.Minimatch(n,l(e,i))},n},u.defaults=function(e){return e&&Object.keys(e).length?d.defaults(e).Minimatch:u},u.prototype.debug=function(){},u.prototype.make=function(){if(this._made)return;var e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();var n=this.globSet=this.braceExpand();t.debug&&(this.debug=console.error);this.debug(this.pattern,n),n=this.globParts=n.map((function(e){return e.split(c)})),this.debug(this.pattern,n),n=n.map((function(e,t,n){return e.map(this.parse,this)}),this),this.debug(this.pattern,n),n=n.filter((function(e){return-1===e.indexOf(!1)})),this.debug(this.pattern,n),this.set=n},u.prototype.parseNegate=function(){var e=this.pattern,t=!1,n=this.options,i=0;if(n.nonegate)return;for(var r=0,s=e.length;r<s&&"!"===e.charAt(r);r++)t=!t,i++;i&&(this.pattern=e.substr(i));this.negate=t},d.braceExpand=function(e,t){return h(e,t)},u.prototype.braceExpand=h,u.prototype.parse=function(e,t){if(e.length>65536)throw new TypeError("pattern is too long");var n=this.options;if(!n.noglobstar&&"**"===e)return r;if(""===e)return"";var i,s="",c=!!n.nocase,l=!1,d=[],u=[],h=!1,m=-1,f=-1,_="."===e.charAt(0)?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",g=this;function w(){if(i){switch(i){case"*":s+="[^/]*?",c=!0;break;case"?":s+="[^/]",c=!0;break;default:s+="\\"+i}g.debug("clearStateChar %j %j",i,s),i=!1}}for(var b,y=0,v=e.length;y<v&&(b=e.charAt(y));y++)if(this.debug("%s\t%s %s %j",e,y,s,b),l&&a[b])s+="\\"+b,l=!1;else switch(b){case"/":return!1;case"\\":w(),l=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,y,s,b),h){this.debug("  in class"),"!"===b&&y===f+1&&(b="^"),s+=b;continue}g.debug("call clearStateChar %j",i),w(),i=b,n.noext&&w();continue;case"(":if(h){s+="(";continue}if(!i){s+="\\(";continue}d.push({type:i,start:y-1,reStart:s.length,open:o[i].open,close:o[i].close}),s+="!"===i?"(?:(?!(?:":"(?:",this.debug("plType %j %j",i,s),i=!1;continue;case")":if(h||!d.length){s+="\\)";continue}w(),c=!0;var x=d.pop();s+=x.close,"!"===x.type&&u.push(x),x.reEnd=s.length;continue;case"|":if(h||!d.length||l){s+="\\|",l=!1;continue}w(),s+="|";continue;case"[":if(w(),h){s+="\\"+b;continue}h=!0,f=y,m=s.length,s+=b;continue;case"]":if(y===f+1||!h){s+="\\"+b,l=!1;continue}if(h){var S=e.substring(f+1,y);try{RegExp("["+S+"]")}catch(e){var k=this.parse(S,p);s=s.substr(0,m)+"\\["+k[0]+"\\]",c=c||k[1],h=!1;continue}}c=!0,h=!1,s+=b;continue;default:w(),l?l=!1:!a[b]||"^"===b&&h||(s+="\\"),s+=b}h&&(S=e.substr(f+1),k=this.parse(S,p),s=s.substr(0,m)+"\\["+k[0],c=c||k[1]);for(x=d.pop();x;x=d.pop()){var C=s.slice(x.reStart+x.open.length);this.debug("setting tail",s,x),C=C.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,n){return n||(n="\\"),t+t+n+"|"})),this.debug("tail=%j\n   %s",C,C,x,s);var E="*"===x.type?"[^/]*?":"?"===x.type?"[^/]":"\\"+x.type;c=!0,s=s.slice(0,x.reStart)+E+"\\("+C}w(),l&&(s+="\\\\");var T=!1;switch(s.charAt(0)){case".":case"[":case"(":T=!0}for(var P=u.length-1;P>-1;P--){var O=u[P],A=s.slice(0,O.reStart),I=s.slice(O.reStart,O.reEnd-8),M=s.slice(O.reEnd-8,O.reEnd),N=s.slice(O.reEnd);M+=N;var F=A.split("(").length-1,D=N;for(y=0;y<F;y++)D=D.replace(/\)[+*?]?/,"");var R="";""===(N=D)&&t!==p&&(R="$"),s=A+I+N+R+M}""!==s&&c&&(s="(?=.)"+s);T&&(s=_+s);if(t===p)return[s,c];if(!c)return function(e){return e.replace(/\\(.)/g,"$1")}(e);var L=n.nocase?"i":"";try{var j=new RegExp("^"+s+"$",L)}catch(e){return new RegExp("$.")}return j._glob=e,j._src=s,j};var p={};d.makeRe=function(e,t){return new u(e,t||{}).makeRe()},u.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var e=this.set;if(!e.length)return this.regexp=!1,this.regexp;var t=this.options,n=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",i=t.nocase?"i":"",s=e.map((function(e){return e.map((function(e){return e===r?n:"string"==typeof e?function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e):e._src})).join("\\/")})).join("|");s="^(?:"+s+")$",this.negate&&(s="^(?!"+s+").*$");try{this.regexp=new RegExp(s,i)}catch(e){this.regexp=!1}return this.regexp},d.match=function(e,t,n){var i=new u(t,n=n||{});return e=e.filter((function(e){return i.match(e)})),i.options.nonull&&!e.length&&e.push(t),e},u.prototype.match=function(e,t){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;var n=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/"));e=e.split(c),this.debug(this.pattern,"split",e);var r,s,o=this.set;for(this.debug(this.pattern,"set",o),s=e.length-1;s>=0&&!(r=e[s]);s--);for(s=0;s<o.length;s++){var a=o[s],l=e;if(n.matchBase&&1===a.length&&(l=[r]),this.matchOne(l,a,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate},u.prototype.matchOne=function(e,t,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var s=0,o=0,a=e.length,c=t.length;s<a&&o<c;s++,o++){this.debug("matchOne loop");var l,d=t[o],u=e[s];if(this.debug(t,d,u),!1===d)return!1;if(d===r){this.debug("GLOBSTAR",[t,d,u]);var h=s,p=o+1;if(p===c){for(this.debug("** at the end");s<a;s++)if("."===e[s]||".."===e[s]||!i.dot&&"."===e[s].charAt(0))return!1;return!0}for(;h<a;){var m=e[h];if(this.debug("\nglobstar while",e,h,t,p,m),this.matchOne(e.slice(h),t.slice(p),n))return this.debug("globstar found match!",h,a,m),!0;if("."===m||".."===m||!i.dot&&"."===m.charAt(0)){this.debug("dot detected!",e,h,t,p);break}this.debug("globstar swallow a segment, and continue"),h++}return!(!n||(this.debug("\n>>> no match, partial?",e,h,t,p),h!==a))}if("string"==typeof d?(l=i.nocase?u.toLowerCase()===d.toLowerCase():u===d,this.debug("string match",d,u,l)):(l=u.match(d),this.debug("pattern match",d,u,l)),!l)return!1}if(s===a&&o===c)return!0;if(s===a)return n;if(o===c)return s===a-1&&""===e[s];throw new Error("wtf?")}},function(e,t,n){"use strict";function i(e){return"/"===e.charAt(0)}function r(e){var t=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(e),n=t[1]||"",i=Boolean(n&&":"!==n.charAt(1));return Boolean(t[2]||i)}e.exports="win32"===process.platform?r:i,e.exports.posix=i,e.exports.win32=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Frame=t.FrameManager=void 0;const i=n(44),r=n(4),s=n(13),o=n(9),a=n(91),c=n(17),l=n(6),d=n(0),u=n(10);t.FrameManager=class{constructor(e){this._frames=new Map,this._consoleMessageTags=new Map,this._signalBarriers=new Set,this._webSockets=new Map,this._page=e,this._mainFrame=void 0}dispose(){for(const e of this._frames.values())e._stopNetworkIdleTimer()}mainFrame(){return this._mainFrame}frames(){const e=[];return function t(n){e.push(n);for(const e of n.childFrames())t(e)}(this._mainFrame),e}frame(e){return this._frames.get(e)||null}frameAttached(e,t){const n=t?this._frames.get(t):null;if(n){d.assert(!this._frames.has(e));const t=new h(this._page,e,n);return this._frames.set(e,t),this._page.emit(o.Page.Events.FrameAttached,t),t}return this._mainFrame?(this._frames.delete(this._mainFrame._id),this._mainFrame._id=e):(d.assert(!this._frames.has(e)),this._mainFrame=new h(this._page,e,n)),this._frames.set(e,this._mainFrame),this._mainFrame}async waitForSignalsCreatedBy(e,t,n,i){if(t)return n();const r=new m(e);this._signalBarriers.add(r),e&&e.cleanupWhenAborted(()=>this._signalBarriers.delete(r));const s=await n();return"input"===i&&await this._page._delegate.inputActionEpilogue(),await r.waitFor(),this._signalBarriers.delete(r),await new Promise(d.makeWaitForNextTask()),s}frameWillPotentiallyRequestNavigation(){for(const e of this._signalBarriers)e.retain()}frameDidPotentiallyRequestNavigation(){for(const e of this._signalBarriers)e.release()}frameRequestedNavigation(e,t){const n=this._frames.get(e);if(n){for(const e of this._signalBarriers)e.addFrameNavigation(n);n._pendingDocument&&n._pendingDocument.documentId===t||(n._pendingDocument={documentId:t,request:void 0})}}frameCommittedNewDocumentNavigation(e,t,n,i,r){const s=this._frames.get(e);let o;this.removeChildFramesRecursively(s),this.clearWebSockets(s),s._url=t,s._name=n,s._pendingDocument?(void 0===s._pendingDocument.documentId&&(s._pendingDocument.documentId=i),s._pendingDocument.documentId===i?s._currentDocument=s._pendingDocument:(o=s._pendingDocument,s._currentDocument={documentId:i,request:void 0}),s._pendingDocument=void 0):s._currentDocument={documentId:i,request:void 0},s._onClearLifecycle();const a={url:t,name:n,newDocument:s._currentDocument};s.emit(h.Events.Navigation,a),r||(u.debugLogger.log("api",`  navigated to "${t}"`),this._page.frameNavigatedToNewDocument(s)),s._pendingDocument=o}frameCommittedSameDocumentNavigation(e,t){const n=this._frames.get(e);if(!n)return;n._url=t;const i={url:t,name:n._name};n.emit(h.Events.Navigation,i),u.debugLogger.log("api",`  navigated to "${t}"`)}frameAbortedNavigation(e,t,n){const i=this._frames.get(e);if(!i||!i._pendingDocument)return;if(void 0!==n&&i._pendingDocument.documentId!==n)return;const r={url:i._url,name:i._name,newDocument:i._pendingDocument,error:new Error(t)};i._pendingDocument=void 0,i.emit(h.Events.Navigation,r)}frameDetached(e){const t=this._frames.get(e);t&&this._removeFramesRecursively(t)}frameStoppedLoading(e){this.frameLifecycleEvent(e,"domcontentloaded"),this.frameLifecycleEvent(e,"load")}frameLifecycleEvent(e,t){const n=this._frames.get(e);n&&n._onLifecycleEvent(t)}requestStarted(e){const t=e.frame();if(this._inflightRequestStarted(e),e._documentId&&(t._pendingDocument={documentId:e._documentId,request:e}),e._isFavicon){const t=e._route();t&&t.continue()}else this._page._requestStarted(e)}requestReceivedResponse(e){e.request()._isFavicon||this._page.emit(o.Page.Events.Response,e)}requestFinished(e){this._inflightRequestFinished(e),e._isFavicon||this._page.emit(o.Page.Events.RequestFinished,e)}requestFailed(e,t){const n=e.frame();if(this._inflightRequestFinished(e),n._pendingDocument&&n._pendingDocument.request===e){let i=e.failure().errorText;t&&(i+="; maybe frame was detached?"),this.frameAbortedNavigation(n._id,i,n._pendingDocument.documentId)}e._isFavicon||this._page.emit(o.Page.Events.RequestFailed,e)}removeChildFramesRecursively(e){for(const t of e.childFrames())this._removeFramesRecursively(t)}_removeFramesRecursively(e){this.removeChildFramesRecursively(e),e._onDetached(),this._frames.delete(e._id),this._page.isClosed()||this._page.emit(o.Page.Events.FrameDetached,e)}_inflightRequestFinished(e){const t=e.frame();e._isFavicon||t._inflightRequests.has(e)&&(t._inflightRequests.delete(e),0===t._inflightRequests.size&&t._startNetworkIdleTimer())}_inflightRequestStarted(e){const t=e.frame();e._isFavicon||(t._inflightRequests.add(e),1===t._inflightRequests.size&&t._stopNetworkIdleTimer())}interceptConsoleMessage(e){if("debug"!==e.type())return!1;const t=e.text(),n=this._consoleMessageTags.get(t);return!!n&&(this._consoleMessageTags.delete(t),n(),!0)}clearWebSockets(e){e.parentFrame()||this._webSockets.clear()}onWebSocketCreated(e,t){const n=new s.WebSocket(t);this._webSockets.set(e,n)}onWebSocketRequest(e){const t=this._webSockets.get(e);t&&this._page.emit(o.Page.Events.WebSocket,t)}onWebSocketResponse(e,t,n){const i=this._webSockets.get(e);t<400||i&&i.error(`${n}: ${t}`)}onWebSocketFrameSent(e,t,n){const i=this._webSockets.get(e);i&&i.frameSent(t,n)}webSocketFrameReceived(e,t,n){const i=this._webSockets.get(e);i&&i.frameReceived(t,n)}webSocketClosed(e){const t=this._webSockets.get(e);t&&t.closed(),this._webSockets.delete(e)}webSocketError(e,t){const n=this._webSockets.get(e);n&&n.error(t)}};class h extends l.EventEmitter{constructor(e,t,n){super(),this._firedLifecycleEvents=new Set,this._subtreeLifecycleEvents=new Set,this._url="",this._detached=!1,this._contextData=new Map,this._childFrames=new Set,this._name="",this._inflightRequests=new Set,this._setContentCounter=0,this._detachedCallback=()=>{},this.setMaxListeners(0),this._id=t,this._page=e,this._parentFrame=n,this._currentDocument={documentId:void 0,request:void 0},this._detachedPromise=new Promise(e=>this._detachedCallback=e),this._contextData.set("main",{contextPromise:new Promise(()=>{}),contextResolveCallback:()=>{},context:null,rerunnableTasks:new Set}),this._contextData.set("utility",{contextPromise:new Promise(()=>{}),contextResolveCallback:()=>{},context:null,rerunnableTasks:new Set}),this._setContext("main",null),this._setContext("utility",null),this._parentFrame&&this._parentFrame._childFrames.add(this)}_onLifecycleEvent(e){this._firedLifecycleEvents.has(e)||(this._firedLifecycleEvents.add(e),this._page.mainFrame()._recalculateLifecycle())}_onClearLifecycle(){this._firedLifecycleEvents.clear(),this._page.mainFrame()._recalculateLifecycle(),this._inflightRequests=new Set(Array.from(this._inflightRequests).filter(e=>e===this._currentDocument.request)),this._stopNetworkIdleTimer(),0===this._inflightRequests.size&&this._startNetworkIdleTimer()}_recalculateLifecycle(){const e=new Set(this._firedLifecycleEvents);for(const t of this._childFrames){t._recalculateLifecycle();for(const n of e)t._subtreeLifecycleEvents.has(n)||e.delete(n)}const t=this._page.mainFrame();for(const n of e)this._subtreeLifecycleEvents.has(n)||(this.emit(h.Events.AddLifecycle,n),this===t&&"about:blank"!==this._url&&u.debugLogger.log("api",`  "${n}" event fired`),this===t&&"load"===n&&this._page.emit(o.Page.Events.Load),this===t&&"domcontentloaded"===n&&this._page.emit(o.Page.Events.DOMContentLoaded));for(const t of this._subtreeLifecycleEvents)e.has(t)||this.emit(h.Events.RemoveLifecycle,t);this._subtreeLifecycleEvents=e}setupNavigationProgressController(e){this._page._disconnectedPromise.then(()=>e.abort(new Error("Navigation failed because page was closed!"))),this._page._crashedPromise.then(()=>e.abort(new Error("Navigation failed because page crashed!"))),this._detachedPromise.then(()=>e.abort(new Error("Navigating frame was detached!")))}async goto(e,t,n={}){return this.setupNavigationProgressController(e),e.run(async e=>{const i=f("waitUntil",void 0===n.waitUntil?"load":n.waitUntil);e.log(`navigating to "${t}", waiting until "${i}"`);const s=(this._page._state.extraHTTPHeaders||[]).find(e=>"referer"===e.name.toLowerCase());let o=s?s.value:void 0;if(void 0!==n.referer){if(void 0!==o&&o!==n.referer)throw new Error('"referer" is already specified as extra HTTP header');o=n.referer}t=r.helper.completeUserURL(t);const a=r.helper.waitForEvent(e,this,h.Events.Navigation,e=>!e.newDocument),c=await this._page._delegate.navigateFrame(this,t,o);let l;if(c.newDocumentId){if(a.dispose(),l=await r.helper.waitForEvent(e,this,h.Events.Navigation,e=>e.newDocument&&(e.newDocument.documentId===c.newDocumentId||!e.error)).promise,l.newDocument.documentId!==c.newDocumentId)throw new Error("Navigation interrupted by another one");if(l.error)throw l.error}else l=await a.promise;this._subtreeLifecycleEvents.has(i)||await r.helper.waitForEvent(e,this,h.Events.AddLifecycle,e=>e===i).promise;const d=l.newDocument?l.newDocument.request:void 0,u=d?d._finalRequest().response():null;return await this._page._doSlowMo(),u},this._page._timeoutSettings.navigationTimeout(n))}async _waitForNavigation(e,t){const n=f("waitUntil",void 0===t.waitUntil?"load":t.waitUntil);e.log(`waiting for navigation until "${n}"`);const i=await r.helper.waitForEvent(e,this,h.Events.Navigation,t=>(t.error||e.log(`  navigated to "${this._url}"`),!0)).promise;if(i.error)throw i.error;this._subtreeLifecycleEvents.has(n)||await r.helper.waitForEvent(e,this,h.Events.AddLifecycle,e=>e===n).promise;const s=i.newDocument?i.newDocument.request:void 0;return s?s._finalRequest().response():null}async _waitForLoadState(e,t){const n=f("state",t);this._subtreeLifecycleEvents.has(n)||await r.helper.waitForEvent(e,this,h.Events.AddLifecycle,e=>e===n).promise}async frameElement(){return this._page._delegate.getFrameElement(this)}_context(e){if(this._detached)throw new Error(`Execution Context is not available in detached frame "${this.url()}" (are you trying to evaluate?)`);return this._contextData.get(e).contextPromise}_mainContext(){return this._context("main")}_utilityContext(){return this._context("utility")}async _evaluateExpressionHandle(e,t,n,i="main"){const r=await this._context(i),s=await r.evaluateExpressionHandleInternal(e,t,n);return"main"===i&&await this._page._doSlowMo(),s}async _evaluateExpression(e,t,n,i="main"){const r=await this._context(i),s=await r.evaluateExpressionInternal(e,t,n);return"main"===i&&await this._page._doSlowMo(),s}async $(e){return this._page.selectors._query(this,e)}async waitForSelector(e,t={}){if(t.visibility)throw new Error("options.visibility is not supported, did you mean options.state?");if(t.waitFor&&"visible"!==t.waitFor)throw new Error("options.waitFor is not supported, did you mean options.state?");const{state:n="visible"}=t;if(!["attached","detached","visible","hidden"].includes(n))throw new Error("state: expected one of (attached|detached|visible|hidden)");const r=this._page.selectors._parseSelector(e),s=i.waitForSelectorTask(r,n);return c.runAbortableTask(async t=>{t.log(`waiting for selector "${e}"${"attached"===n?"":" to be "+n}`);const i=await this._scheduleRerunnableHandleTask(t,r.world,s);if(!i.asElement())return i.dispose(),null;return i.asElement()._adoptTo(await this._mainContext())},this._page._timeoutSettings.timeout(t))}async dispatchEvent(e,t,n,r={}){const s=this._page.selectors._parseSelector(e),o=i.dispatchEventTask(s,t,n||{});await c.runAbortableTask(async n=>{n.log(`Dispatching "${t}" event on selector "${e}"...`),await this._scheduleRerunnableTask(n,"main",o)},this._page._timeoutSettings.timeout(r)),await this._page._doSlowMo()}async _$evalExpression(e,t,n,i){const r=await this.$(e);if(!r)throw new Error(`Error: failed to find element matching selector "${e}"`);const s=await r._evaluateExpression(t,n,!0,i);return r.dispose(),s}async _$$evalExpression(e,t,n,i){const r=await this._page.selectors._queryArray(this,e),s=await r._evaluateExpression(t,n,!0,i);return r.dispose(),s}async $$(e){return this._page.selectors._queryAll(this,e,void 0,!0)}async content(){return(await this._utilityContext()).evaluateInternal(()=>{let e="";return document.doctype&&(e=(new XMLSerializer).serializeToString(document.doctype)),document.documentElement&&(e+=document.documentElement.outerHTML),e})}async setContent(e,t,n={}){return this.setupNavigationProgressController(e),e.run(async e=>{const i=void 0===n.waitUntil?"load":n.waitUntil;e.log(`setting frame content, waiting until "${i}"`);const r=`--playwright--set--content--${this._id}--${++this._setContentCounter}--`,s=await this._utilityContext(),o=new Promise((t,n)=>{this._page._frameManager._consoleMessageTags.set(r,()=>{this._onClearLifecycle(),this._waitForLoadState(e,i).then(t).catch(n)})}),a=s.evaluateInternal(({html:e,tag:t})=>{window.stop(),document.open(),console.debug(t),document.write(e),document.close()},{html:t,tag:r});await Promise.all([a,o]),await this._page._doSlowMo()},this._page._timeoutSettings.navigationTimeout(n))}name(){return this._name||""}url(){return this._url}parentFrame(){return this._parentFrame}childFrames(){return Array.from(this._childFrames)}async addScriptTag(e){const{url:t=null,content:n=null,type:i=""}=e;if(!t&&!n)throw new Error("Provide an object with a `url`, `path` or `content` property");const r=await this._mainContext();return this._raceWithCSPError(async()=>{if(null!==t)return(await r.evaluateHandleInternal(s,{url:t,type:i})).asElement();const e=(await r.evaluateHandleInternal(o,{content:n,type:i})).asElement();return this._page._delegate.cspErrorsAsynchronousForInlineScipts&&await r.evaluateInternal(()=>!0),e});async function s(e){const t=document.createElement("script");t.src=e.url,e.type&&(t.type=e.type);const n=new Promise((e,n)=>{t.onload=e,t.onerror=e=>n("string"==typeof e?new Error(e):new Error("Failed to load script at "+t.src))});return document.head.appendChild(t),await n,t}function o(e){const t=document.createElement("script");t.type=e.type||"text/javascript",t.text=e.content;let n=null;if(t.onerror=e=>n=e,document.head.appendChild(t),n)throw n;return t}}async addStyleTag(e){const{url:t=null,content:n=null}=e;if(!t&&!n)throw new Error("Provide an object with a `url`, `path` or `content` property");const i=await this._mainContext();return this._raceWithCSPError(async()=>null!==t?(await i.evaluateHandleInternal(r,t)).asElement():(await i.evaluateHandleInternal(s,n)).asElement());async function r(e){const t=document.createElement("link");t.rel="stylesheet",t.href=e;const n=new Promise((e,n)=>{t.onload=e,t.onerror=n});return document.head.appendChild(t),await n,t}async function s(e){const t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(e));const n=new Promise((e,n)=>{t.onload=e,t.onerror=n});return document.head.appendChild(t),await n,t}}async _raceWithCSPError(e){const t=[];let n,i,s;const a=new Promise(async t=>{try{n=await e()}catch(e){i=e}t()}),c=new Promise(e=>{t.push(r.helper.addEventListener(this._page,o.Page.Events.Console,t=>{"error"===t.type()&&t.text().includes("Content Security Policy")&&(s=t,e())}))});if(await Promise.race([a,c]),r.helper.removeEventListeners(t),s)throw new Error(s.text());if(i)throw i;return n}async _retryWithProgressIfNotConnected(e,t,n){const r=this._page.selectors._parseSelector(t);for(;e.isRunning();){e.log(`waiting for selector "${t}"`);const s=i.waitForSelectorTask(r,"attached"),o=(await this._scheduleRerunnableHandleTask(e,r.world,s)).asElement();e.cleanupWhenAborted(()=>{o.dispose()});const a=await n(o);if(o.dispose(),"error:notconnected"!==a)return a;e.log("element was detached from the DOM, retrying")}}async _retryWithSelectorIfNotConnected(e,t,n){return c.runAbortableTask(async t=>this._retryWithProgressIfNotConnected(t,e,e=>n(t,e)),this._page._timeoutSettings.timeout(t))}async click(e,t,n){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._click(e,n))),this._page._timeoutSettings.timeout(n))}async dblclick(e,t,n={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._dblclick(e,n))),this._page._timeoutSettings.timeout(n))}async tap(e,t,n){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._tap(e,n))),this._page._timeoutSettings.timeout(n))}async fill(e,t,n,r){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._fill(e,n,r))),this._page._timeoutSettings.timeout(r))}async focus(e,t={}){await this._retryWithSelectorIfNotConnected(e,t,(e,t)=>t._focus(e)),await this._page._doSlowMo()}async textContent(e,t={}){const n=this._page.selectors._parseSelector(e),r=i.textContentTask(n);return c.runAbortableTask(async t=>(t.log(`  retrieving textContent from "${e}"`),this._scheduleRerunnableTask(t,n.world,r)),this._page._timeoutSettings.timeout(t))}async innerText(e,t={}){const n=this._page.selectors._parseSelector(e),r=i.innerTextTask(n);return c.runAbortableTask(async t=>{t.log(`  retrieving innerText from "${e}"`);return i.throwFatalDOMError(await this._scheduleRerunnableTask(t,n.world,r)).innerText},this._page._timeoutSettings.timeout(t))}async innerHTML(e,t={}){const n=this._page.selectors._parseSelector(e),r=i.innerHTMLTask(n);return c.runAbortableTask(async t=>(t.log(`  retrieving innerHTML from "${e}"`),this._scheduleRerunnableTask(t,n.world,r)),this._page._timeoutSettings.timeout(t))}async getAttribute(e,t,n={}){const r=this._page.selectors._parseSelector(e),s=i.getAttributeTask(r,t);return c.runAbortableTask(async n=>(n.log(`  retrieving attribute "${t}" from "${e}"`),this._scheduleRerunnableTask(n,r.world,s)),this._page._timeoutSettings.timeout(n))}async isVisible(e,t={}){return c.runAbortableTask(async t=>{t.log(`  checking visibility of "${e}"`);const n=await this.$(e);return!!n&&await n.isVisible()},this._page._timeoutSettings.timeout(t))}async isHidden(e,t={}){return!await this.isVisible(e,t)}async isDisabled(e,t={}){const n=this._page.selectors._parseSelector(e),r=i.disabledTask(n);return c.runAbortableTask(async t=>(t.log(`  checking disabled state of "${e}"`),this._scheduleRerunnableTask(t,n.world,r)),this._page._timeoutSettings.timeout(t))}async isEnabled(e,t={}){return!await this.isDisabled(e,t)}async isEditable(e,t={}){const n=this._page.selectors._parseSelector(e),r=i.editableTask(n);return c.runAbortableTask(async t=>(t.log(`  checking editable state of "${e}"`),this._scheduleRerunnableTask(t,n.world,r)),this._page._timeoutSettings.timeout(t))}async isChecked(e,t={}){const n=this._page.selectors._parseSelector(e),r=i.checkedTask(n);return c.runAbortableTask(async t=>(t.log(`  checking checked state of "${e}"`),this._scheduleRerunnableTask(t,n.world,r)),this._page._timeoutSettings.timeout(t))}async hover(e,t,n={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._hover(e,n))),this._page._timeoutSettings.timeout(n))}async selectOption(e,t,n,i,r={}){return e.run(async e=>await this._retryWithProgressIfNotConnected(e,t,t=>t._selectOption(e,n,i,r)),this._page._timeoutSettings.timeout(r))}async setInputFiles(e,t,n,r={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._setInputFiles(e,n,r))),this._page._timeoutSettings.timeout(r))}async type(e,t,n,r={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._type(e,n,r))),this._page._timeoutSettings.timeout(r))}async press(e,t,n,r={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._press(e,n,r))),this._page._timeoutSettings.timeout(r))}async check(e,t,n={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._setChecked(e,!0,n))),this._page._timeoutSettings.timeout(n))}async uncheck(e,t,n={}){return e.run(async e=>i.assertDone(await this._retryWithProgressIfNotConnected(e,t,t=>t._setChecked(e,!1,n))),this._page._timeoutSettings.timeout(n))}async _waitForFunctionExpression(e,t,n,i={}){"number"==typeof i.pollingInterval&&d.assert(i.pollingInterval>0,"Cannot poll with non-positive interval: "+i.pollingInterval);const r=t?"return ("+e+")(arg)":"return ("+e+")",s=e=>e.evaluateHandle((e,{predicateBody:t,polling:n,arg:i})=>{const r=new Function("arg",t);return"number"!=typeof n?e.pollRaf((e,t)=>r(i)||t):e.pollInterval(n,(e,t)=>r(i)||t)},{predicateBody:r,polling:i.pollingInterval,arg:n});return c.runAbortableTask(e=>this._scheduleRerunnableHandleTask(e,"main",s),this._page._timeoutSettings.timeout(i))}async title(){return(await this._utilityContext()).evaluateInternal(()=>document.title)}_onDetached(){this._stopNetworkIdleTimer(),this._detached=!0,this._detachedCallback();for(const e of this._contextData.values())for(const t of e.rerunnableTasks)t.terminate(new Error("waitForFunction failed: frame got detached."));this._parentFrame&&this._parentFrame._childFrames.delete(this),this._parentFrame=null}_scheduleRerunnableTask(e,t,n){const i=this._contextData.get(t),r=new p(i,e,n,!0);return this._detached&&r.terminate(new Error("waitForFunction failed: frame got detached.")),i.context&&r.rerun(i.context),r.promise}_scheduleRerunnableHandleTask(e,t,n){const i=this._contextData.get(t),r=new p(i,e,n,!1);return this._detached&&r.terminate(new Error("waitForFunction failed: frame got detached.")),i.context&&r.rerun(i.context),r.promise}_setContext(e,t){const n=this._contextData.get(e);if(n.context=t,t){n.contextResolveCallback.call(null,t);for(const e of n.rerunnableTasks)e.rerun(t)}else n.contextPromise=new Promise(e=>{n.contextResolveCallback=e})}_contextCreated(e,t){this._contextData.get(e).context&&this._setContext(e,null),this._setContext(e,t)}_contextDestroyed(e){for(const[t,n]of this._contextData)n.context===e&&this._setContext(t,null)}_startNetworkIdleTimer(){d.assert(!this._networkIdleTimer),this._firedLifecycleEvents.has("networkidle")||this._detached||(this._networkIdleTimer=setTimeout(()=>this._onLifecycleEvent("networkidle"),500))}_stopNetworkIdleTimer(){this._networkIdleTimer&&clearTimeout(this._networkIdleTimer),this._networkIdleTimer=void 0}async extendInjectedScript(e,t){const n=await this._mainContext();return(await n.injectedScript()).evaluateHandle((e,{source:t,arg:n})=>e.extend(t,n),{source:e,arg:t})}}t.Frame=h,h.Events={Navigation:"navigation",AddLifecycle:"addlifecycle",RemoveLifecycle:"removelifecycle"};class p{constructor(e,t,n,i){this._resolve=()=>{},this._reject=()=>{},this._task=n,this._progress=t,this._returnByValue=i,this._contextData=e,this._contextData.rerunnableTasks.add(this),this.promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}terminate(e){this._reject(e)}async rerun(e){try{const t=await e.injectedScript(),n=new i.InjectedScriptPollHandler(this._progress,await this._task(t)),r=this._returnByValue?await n.finish():await n.finishHandle();this._contextData.rerunnableTasks.delete(this),this._resolve(r)}catch(e){if(e.message.includes("Execution context was destroyed"))return;if(e.message.includes("Cannot find context with specified id"))return;this._contextData.rerunnableTasks.delete(this),this._reject(e)}}}class m{constructor(e){this._protectCount=0,this._promiseCallback=()=>{},this._progress=e,this._promise=new Promise(e=>this._promiseCallback=e),this.retain()}waitFor(){return this.release(),this._promise}async addFrameNavigation(e){this.retain();const t=r.helper.waitForEvent(null,e,h.Events.Navigation,t=>(!t.error&&this._progress&&this._progress.log(`  navigated to "${e._url}"`),!0));await Promise.race([e._page._disconnectedPromise,e._page._crashedPromise,e._detachedPromise,t.promise]).catch(e=>{}),t.dispose(),this.release()}retain(){++this._protectCount}release(){--this._protectCount,this._protectCount||this._promiseCallback()}}function f(e,t){if("networkidle0"===t&&(t="networkidle"),!a.kLifecycleEvents.has(t))throw new Error(e+": expected one of (load|domcontentloaded|networkidle)");return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Touchscreen=t.Mouse=t.Keyboard=t.keypadLocation=void 0;const i=n(0),r=n(163);t.keypadLocation=r.keypadLocation;const s=["Alt","Control","Meta","Shift"];t.Keyboard=class{constructor(e,t){this._pressedModifiers=new Set,this._pressedKeys=new Set,this._raw=e,this._page=t}async down(e){const t=this._keyDescriptionForString(e),n=this._pressedKeys.has(t.code);this._pressedKeys.add(t.code),s.includes(t.key)&&this._pressedModifiers.add(t.key);const i=t.text;await this._raw.keydown(this._pressedModifiers,t.code,t.keyCode,t.keyCodeWithoutLocation,t.key,t.location,n,i),await this._page._doSlowMo()}_keyDescriptionForString(e){let t=a.get(e);i.assert(t,`Unknown key: "${e}"`);return t=this._pressedModifiers.has("Shift")&&t.shifted?t.shifted:t,this._pressedModifiers.size>1||!this._pressedModifiers.has("Shift")&&1===this._pressedModifiers.size?{...t,text:""}:t}async up(e){const t=this._keyDescriptionForString(e);s.includes(t.key)&&this._pressedModifiers.delete(t.key),this._pressedKeys.delete(t.code),await this._raw.keyup(this._pressedModifiers,t.code,t.keyCode,t.keyCodeWithoutLocation,t.key,t.location),await this._page._doSlowMo()}async insertText(e){await this._raw.sendText(e),await this._page._doSlowMo()}async type(e,t){const n=t&&t.delay||void 0;for(const t of e)a.has(t)?await this.press(t,{delay:n}):(n&&await new Promise(e=>setTimeout(e,n)),await this.insertText(t))}async press(e,t={}){const n=function(e){const t=[];let n="";for(const i of e)"+"===i&&n?(t.push(n),n=""):n+=i;return t.push(n),t}(e),i=[];e=n[n.length-1];for(let e=0;e<n.length-1;++e)i.push(this.down(n[e]));i.push(this.down(e)),t.delay&&(await Promise.all(i),await new Promise(e=>setTimeout(e,t.delay))),i.push(this.up(e));for(let e=n.length-2;e>=0;--e)i.push(this.up(n[e]));await Promise.all(i)}async _ensureModifiers(e){for(const t of e)if(!s.includes(t))throw new Error("Unknown modifier "+t);const t=Array.from(this._pressedModifiers),n=[];for(const t of s){const i=e.includes(t),r=this._pressedModifiers.has(t);i&&!r?n.push(this.down(t)):!i&&r&&n.push(this.up(t))}return await Promise.all(n),t}_modifiers(){return this._pressedModifiers}};t.Mouse=class{constructor(e,t){this._x=0,this._y=0,this._lastButton="none",this._buttons=new Set,this._raw=e,this._page=t,this._keyboard=this._page.keyboard}async move(e,t,n={}){const{steps:i=1}=n,r=this._x,s=this._y;this._x=e,this._y=t;for(let n=1;n<=i;n++){const o=r+n/i*(e-r),a=s+n/i*(t-s);await this._raw.move(o,a,this._lastButton,this._buttons,this._keyboard._modifiers()),await this._page._doSlowMo()}}async down(e={}){const{button:t="left",clickCount:n=1}=e;this._lastButton=t,this._buttons.add(t),await this._raw.down(this._x,this._y,this._lastButton,this._buttons,this._keyboard._modifiers(),n),await this._page._doSlowMo()}async up(e={}){const{button:t="left",clickCount:n=1}=e;this._lastButton="none",this._buttons.delete(t),await this._raw.up(this._x,this._y,t,this._buttons,this._keyboard._modifiers(),n),await this._page._doSlowMo()}async click(e,t,n={}){const{delay:i=null,clickCount:r=1}=n;if(i){this.move(e,t);for(let e=1;e<=r;++e)await this.down({...n,clickCount:e}),await new Promise(e=>setTimeout(e,i)),await this.up({...n,clickCount:e}),e<r&&await new Promise(e=>setTimeout(e,i))}else{const i=[];i.push(this.move(e,t));for(let e=1;e<=r;++e)i.push(this.down({...n,clickCount:e})),i.push(this.up({...n,clickCount:e}));await Promise.all(i)}}async dblclick(e,t,n={}){await this.click(e,t,{...n,clickCount:2})}};const o=new Map([["ShiftLeft",["Shift"]],["ControlLeft",["Control"]],["AltLeft",["Alt"]],["MetaLeft",["Meta"]],["Enter",["\n","\r"]]]),a=function(e){const t=new Map;for(const n in e){const r=e[n],s={key:r.key||"",keyCode:r.keyCode||0,keyCodeWithoutLocation:r.keyCodeWithoutLocation||r.keyCode||0,code:n,text:r.text||"",location:r.location||0};let a;if(1===r.key.length&&(s.text=s.key),r.shiftKey&&(i.assert(1===r.shiftKey.length),a={...s},a.key=r.shiftKey,a.text=r.shiftKey,r.shiftKeyCode&&(a.keyCode=r.shiftKeyCode)),t.set(n,{...s,shifted:a}),o.has(n))for(const e of o.get(n))t.set(e,s);r.location||(1===s.key.length&&t.set(s.key,s),a&&t.set(a.key,{...a,shifted:void 0}))}return t}(r.USKeyboardLayout);t.Touchscreen=class{constructor(e,t){this._raw=e,this._page=t}async tap(e,t){if(!this._page._browserContext._options.hasTouch)throw new Error("hasTouch must be enabled on the browser context before using the touchscreen.");await this._raw.tap(e,t,this._page.keyboard._modifiers()),await this._page._doSlowMo()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serverSelectors=t.Selectors=void 0;const i=n(166);class r{constructor(){this._builtinEngines=new Set(["css","css:light","xpath","xpath:light","text","text:light","id","id:light","data-testid","data-testid:light","data-test-id","data-test-id:light","data-test","data-test:light"]),this._engines=new Map}async register(e,t,n=!1){if(!e.match(/^[a-zA-Z_0-9-]+$/))throw new Error("Selector engine name may only contain [a-zA-Z0-9_] characters");if(this._builtinEngines.has(e)||"zs"===e||"zs:light"===e)throw new Error(`"${e}" is a predefined selector engine`);if(this._engines.has(e))throw new Error(`"${e}" selector engine has been already registered`);this._engines.set(e,{source:t,contentScript:n})}async _query(e,t,n){const i=this._parseSelector(t),r=await e._context(i.world),s=await r.injectedScript(),o=await s.evaluateHandle((e,{parsed:t,scope:n})=>e.querySelector(t,n||document),{parsed:i.parsed,scope:n}),a=o.asElement();if(!a)return o.dispose(),null;const c=await e._mainContext();return this._adoptIfNeeded(a,c)}async _queryArray(e,t,n){const i=this._parseSelector(t),r=await e._mainContext(),s=await r.injectedScript();return await s.evaluateHandle((e,{parsed:t,scope:n})=>e.querySelectorAll(t,n||document),{parsed:i.parsed,scope:n})}async _queryAll(e,t,n,i){const r=this._parseSelector(t),s=await e._context(r.world),o=await s.injectedScript(),a=await o.evaluateHandle((e,{parsed:t,scope:n})=>e.querySelectorAll(t,n||document),{parsed:r.parsed,scope:n}),c=await a.getProperties();a.dispose();const l=i?await e._mainContext():s,d=[];for(const e of c.values()){const t=e.asElement();t?d.push(this._adoptIfNeeded(t,l)):e.dispose()}return Promise.all(d)}async _adoptIfNeeded(e,t){if(e._context===t)return e;const n=e._page._delegate.adoptElementHandle(e,t);return e.dispose(),n}_parseSelector(e){const t=i.parseSelector(e);let n=!1;for(const i of t.parts)if(!Array.isArray(i)){const t=this._engines.get(i.name);if(!t&&!this._builtinEngines.has(i.name))throw new Error(`Unknown engine "${i.name}" while parsing selector ${e}`);t&&!t.contentScript&&(n=!0)}return{parsed:t,selector:e,world:n?"main":"utility"}}}t.Selectors=r,t.serverSelectors=new r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRExecutionContext=void 0;const i=n(48),r=n(22),s=n(34),o=n(11),a=n(45);function c(e){if(e.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(e.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};if(e.message.endsWith("Cannot find context with specified id")||e.message.endsWith("Inspected target navigated or closed")||e.message.endsWith("Execution context was destroyed."))throw new Error("Execution context was destroyed, most likely because of a navigation.");throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&o.rewriteErrorMessage(e,e.message+" Are you passing a nested JSHandle?"),e}t.CRExecutionContext=class{constructor(e,t){this._client=e,this._contextId=t.id}async rawEvaluate(e){const{exceptionDetails:t,result:n}=await this._client.send("Runtime.evaluate",{expression:s.ensureSourceUrl(e),contextId:this._contextId}).catch(c);if(t)throw new Error("Evaluation failed: "+i.getExceptionMessage(t));return n.objectId}async evaluateWithArguments(e,t,n,r,s){const{exceptionDetails:o,result:l}=await this._client.send("Runtime.callFunctionOn",{functionDeclaration:e,objectId:n._objectId,arguments:[{objectId:n._objectId},...r.map(e=>({value:e})),...s.map(e=>({objectId:e}))],returnByValue:t,awaitPromise:!0,userGesture:!0}).catch(c);if(o)throw new Error("Evaluation failed: "+i.getExceptionMessage(o));return t?a.parseEvaluationResultValue(l.value):n._context.createHandle(l)}async getProperties(e){const t=e._objectId;if(!t)return new Map;const n=await this._client.send("Runtime.getProperties",{objectId:t,ownProperties:!0}),i=new Map;for(const t of n.result)t.enumerable&&t.value&&i.set(t.name,e._context.createHandle(t.value));return i}createHandle(e,t){return new r.JSHandle(e,t.subtype||t.type,t.objectId,function(e){const t=e.value,n=e.unserializableValue;return n?r.parseUnserializableValue(n):t}(t))}async releaseHandle(e){e._objectId&&await i.releaseObject(this._client,e._objectId)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dialog=void 0;const i=n(0),r=n(9);t.Dialog=class{constructor(e,t,n,i,r){this._handled=!1,this._page=e,this._type=t,this._message=n,this._onHandle=i,this._defaultValue=r||""}type(){return this._type}message(){return this._message}defaultValue(){return this._defaultValue}async accept(e){i.assert(!this._handled,"Cannot accept dialog which is already handled!"),this._handled=!0,await this._onHandle(!0,e),this._page.emit(r.Page.Events.InternalDialogClosed,this)}async dismiss(){i.assert(!this._handled,"Cannot dismiss dialog which is already handled!"),this._handled=!0,await this._onHandle(!1),this._page.emit(r.Page.Events.InternalDialogClosed,this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.envArrayToObject=t.launchProcess=t.gracefullyCloseAll=void 0;const i=n(63),r=n(96),s=n(85),o=n(4),a=n(0),c=new Set;t.gracefullyCloseAll=async function(){await Promise.all(Array.from(c).map(e=>e().catch(e=>{})))};const l=process.getMaxListeners();0!==l&&process.setMaxListeners(Math.max(l||0,100)),t.launchProcess=async function(e){const t=()=>o.helper.removeFolders(e.tempDirectories),n="pipe"===e.stdio?["ignore","pipe","pipe","pipe","pipe"]:["pipe","pipe","pipe"];e.log(`<launching> ${e.executablePath} ${e.args.join(" ")}`);const l=i.spawn(e.executablePath,e.args,{detached:"win32"!==process.platform,env:e.env,cwd:e.cwd,stdio:n});if(l.on("error",()=>{}),!l.pid){let e;const n=new Promise((t,n)=>e=t);return l.once("error",t=>{e(new Error("Failed to launch browser: "+t))}),t().then(()=>n).then(e=>Promise.reject(e))}e.log("<launched> pid="+l.pid),r.createInterface({input:l.stdout}).on("line",t=>{e.log("[out] "+t)}),r.createInterface({input:l.stderr}).on("line",t=>{e.log("[err] "+t)});let d=!1,u=()=>{};const h=new Promise(e=>u=e);let p=()=>{};const m=new Promise(e=>p=e);l.once("exit",(n,i)=>{e.log(`<process did exit: exitCode=${n}, signal=${i}>`),d=!0,o.helper.removeEventListeners(f),c.delete(g),e.onExit(n,i),u(),t().then(p)});const f=[o.helper.addEventListener(process,"exit",w)];e.handleSIGINT&&f.push(o.helper.addEventListener(process,"SIGINT",()=>{g().then(()=>{a.isUnderTest()?setTimeout(()=>process.exit(130),0):process.exit(130)})})),e.handleSIGTERM&&f.push(o.helper.addEventListener(process,"SIGTERM",g)),e.handleSIGHUP&&f.push(o.helper.addEventListener(process,"SIGHUP",g)),c.add(g);let _=!1;async function g(){if(c.delete(g),_)return e.log("<forecefully close>"),w(),void await h;_=!0,e.log("<gracefully close start>"),await e.attemptToGracefullyClose().catch(()=>w()),await m,e.log("<gracefully close end>")}function w(){if(e.log("<kill>"),o.helper.removeEventListeners(f),l.pid&&!l.killed&&!d)try{"win32"===process.platform?i.execSync(`taskkill /pid ${l.pid} /T /F`):process.kill(-l.pid,"SIGKILL")}catch(e){}try{for(const t of e.tempDirectories)s.sync(t)}catch(e){}}return{launchedProcess:l,gracefullyClose:g,kill:function(){return w(),m}}},t.envArrayToObject=function(e){const t={};for(const{name:n,value:i}of e)t[n]=i;return t}},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserType=void 0;const i=n(1),r=n(14),s=n(3),o=n(2),a=n(8),c=n(97),l=n(62),d=n(182),u=n(17),h=n(12),p=n(183),m=n(0),f=n(4),_=n(10),g=o.promisify(i.mkdir),w=o.promisify(i.mkdtemp),b=s.join(r.tmpdir(),"playwright_downloads-");function y(e){const{devtools:t=!1,headless:n=!m.isDebugMode()&&!t}=e;return{...e,devtools:t,headless:n}}t.BrowserType=class{constructor(e,t){this._name=t.name;const n=c.browsersPath(e);this._browserDescriptor=t,this._browserPath=c.browserDirectory(n,t),this._executablePath=c.executablePath(this._browserPath,t)||""}executablePath(){return this._executablePath}name(){return this._name}async launch(e,t){e=y(e);const n=new u.ProgressController;n.setLogName("browser");return await n.run(n=>this._innerLaunch(n,e,void 0,f.helper.debugProtocolLogger(t)).catch(e=>{throw this._rewriteStartupError(e)}),h.TimeoutSettings.timeout(e))}async launchPersistentContext(e,t={}){const n=t=y(t),i=new u.ProgressController;i.setLogName("browser");return(await i.run(i=>this._innerLaunch(i,t,n,f.helper.debugProtocolLogger(),e).catch(e=>{throw this._rewriteStartupError(e)}),h.TimeoutSettings.timeout(t)))._defaultContext}async _innerLaunch(e,t,n,i,r){t.proxy=t.proxy?a.normalizeProxySettings(t.proxy):void 0;const s=new _.RecentLogsCollector,{browserProcess:o,downloadsPath:c,transport:l}=await this._launchProcess(e,t,!!n,s,r);t.__testHookBeforeCreateBrowser&&await t.__testHookBeforeCreateBrowser();const d={name:this._name,isChromium:"chromium"===this._name,slowMo:t.slowMo,persistent:n,headful:!t.headless,downloadsPath:c,browserProcess:o,proxy:t.proxy,protocolLogger:i,browserLogsCollector:s};n&&a.validateBrowserContextOptions(n,d),function(e,t){for(const[n,i]of Object.entries(e))n.startsWith("__testHook")&&(t[n]=i)}(t,d);const u=await this._connectToTransport(l,d);return n&&!t.ignoreAllDefaultArgs&&await u._defaultContext._loadDefaultContext(e),u}async _launchProcess(e,t,n,o,a){const{ignoreDefaultArgs:c,ignoreAllDefaultArgs:u,args:h=[],executablePath:m=null,handleSIGINT:f=!0,handleSIGTERM:_=!0,handleSIGHUP:y=!0}=t,v=t.env?l.envArrayToObject(t.env):process.env,x=[],S=await(async(e,t)=>{let n;return t?(n=t,await g(t,{recursive:!0})):(n=await w(e),x.push(n)),n})(b,t.downloadsPath);a||(a=await w(s.join(r.tmpdir(),`playwright_${this._name}dev_profile-`)),x.push(a));const k=[];u?k.push(...h):c?k.push(...this._defaultArgs(t,n,a).filter(e=>-1===c.indexOf(e))):k.push(...this._defaultArgs(t,n,a));const C=m||this.executablePath();if(!C)throw new Error('No executable path is specified. Pass "executablePath" option directly.');if(!await(e=>new Promise(t=>i.stat(e,e=>t(!e))))(C)){const e=[`Failed to launch ${this._name} because executable doesn't exist at ${C}`];throw m||e.push('Try re-installing playwright with "npm install playwright"'),new Error(e.join("\n"))}m||await p.validateHostRequirements(this._browserPath,this._browserDescriptor);let E=void 0,T=void 0;const{launchedProcess:P,gracefullyClose:O,kill:A}=await l.launchProcess({executablePath:C,args:k,env:this._amendEnvironment(v,a,C,k),handleSIGINT:f,handleSIGTERM:_,handleSIGHUP:y,log:t=>{e.log(t),o.log(t)},stdio:"pipe",tempDirectories:x,attemptToGracefullyClose:async()=>{t.__testHookGracefullyClose&&await t.__testHookGracefullyClose(),this._attemptToGracefullyCloseBrowser(E)},onExit:(e,t)=>{T&&T.onclose&&T.onclose(e,t)}});T={onclose:void 0,process:P,close:O,kill:A},e.cleanupWhenAborted(()=>T&&async function(e,t){let n;try{await Promise.race([e.close(),new Promise((e,i)=>n=setTimeout(i,t))])}catch(t){await e.kill().catch(e=>{})}finally{clearTimeout(n)}}(T,e.timeUntilDeadline()));const I=P.stdio;return E=new d.PipeTransport(I[3],I[4]),{browserProcess:T,downloadsPath:S,transport:E}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFSession=t.FFSessionEvents=t.FFConnection=t.kBrowserCloseMessageId=t.ConnectionEvents=void 0;const i=n(6),r=n(0),s=n(11),o=n(10),a=n(4);t.ConnectionEvents={Disconnected:Symbol("Disconnected")},t.kBrowserCloseMessageId=-9999;class c extends i.EventEmitter{constructor(e,t,n){super(),this._transport=e,this._protocolLogger=t,this._browserLogsCollector=n,this._lastId=0,this._callbacks=new Map,this._transport.onmessage=this._onMessage.bind(this),this._transport.onclose=this._onClose.bind(this),this._sessions=new Map,this._closed=!1,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}async send(e,t){this._checkClosed(e);const n=this.nextMessageId();return this._rawSend({id:n,method:e,params:t}),new Promise((t,i)=>{this._callbacks.set(n,{resolve:t,reject:i,error:new Error,method:e})})}nextMessageId(){return++this._lastId}_checkClosed(e){if(this._closed)throw new Error(`Protocol error (${e}): Browser closed.`+a.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs()))}_rawSend(e){this._protocolLogger("send",e),this._transport.send(e)}async _onMessage(e){if(this._protocolLogger("receive",e),e.id!==t.kBrowserCloseMessageId)if(e.sessionId){const t=this._sessions.get(e.sessionId);t&&t.dispatchMessage(e)}else if(e.id){const t=this._callbacks.get(e.id);t&&(this._callbacks.delete(e.id),e.error?t.reject(d(t.error,t.method,e.error)):t.resolve(e.result))}else Promise.resolve().then(()=>this.emit(e.method,e.params))}_onClose(){this._closed=!0,this._transport.onmessage=void 0,this._transport.onclose=void 0;const e=a.helper.formatBrowserLogs(this._browserLogsCollector.recentLogs());for(const t of this._sessions.values())t.dispose(e);this._sessions.clear();for(const t of this._callbacks.values())t.reject(s.rewriteErrorMessage(t.error,`Protocol error (${t.method}): Browser closed.`+e));this._callbacks.clear(),Promise.resolve().then(()=>this.emit(t.ConnectionEvents.Disconnected))}close(){this._closed||this._transport.close()}createSession(e,t){const n=new l(this,t,e,t=>this._rawSend({...t,sessionId:e}));return this._sessions.set(e,n),n}}t.FFConnection=c,t.FFSessionEvents={Disconnected:Symbol("Disconnected")};class l extends i.EventEmitter{constructor(e,t,n,i){super(),this._disposed=!1,this._crashed=!1,this._callbacks=new Map,this._connection=e,this._targetType=t,this._sessionId=n,this._rawSend=i,this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}markAsCrashed(){this._crashed=!0}async send(e,t){if(this._crashed)throw new Error("Page crashed");if(this._connection._checkClosed(e),this._disposed)throw new Error(`Protocol error (${e}): Session closed. Most likely the ${this._targetType} has been closed.`);const n=this._connection.nextMessageId();return this._rawSend({method:e,params:t,id:n}),new Promise((t,i)=>{this._callbacks.set(n,{resolve:t,reject:i,error:new Error,method:e})})}sendMayFail(e,t){return this.send(e,t).catch(e=>o.debugLogger.log("error",e))}dispatchMessage(e){if(e.id&&this._callbacks.has(e.id)){const t=this._callbacks.get(e.id);this._callbacks.delete(e.id),e.error?t.reject(d(t.error,t.method,e.error)):t.resolve(e.result)}else r.assert(!e.id),Promise.resolve().then(()=>this.emit(e.method,e.params))}dispose(e){for(const t of this._callbacks.values())t.reject(s.rewriteErrorMessage(t.error,`Protocol error (${t.method}): Target closed.`+e));this._callbacks.clear(),this._disposed=!0,this._connection._sessions.delete(this._sessionId),Promise.resolve().then(()=>this.emit(t.FFSessionEvents.Disconnected))}}function d(e,t,n){let i=`Protocol error (${t}): ${n.message}`;return"data"in n&&(i+=" "+n.data),s.rewriteErrorMessage(e,i)}t.FFSession=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketDispatcher=t.RouteDispatcher=t.ResponseDispatcher=t.RequestDispatcher=void 0;const i=n(13),r=n(5),s=n(112);class o extends r.Dispatcher{static from(e,t){return r.existingDispatcher(t)||new o(e,t)}static fromNullable(e,t){return t?o.from(e,t):void 0}constructor(e,t){const n=t.postDataBuffer();super(e,t,"Request",{frame:s.FrameDispatcher.from(e,t.frame()),url:t.url(),resourceType:t.resourceType(),method:t.method(),postData:null===n?void 0:n.toString("base64"),headers:t.headers(),isNavigationRequest:t.isNavigationRequest(),redirectedFrom:o.fromNullable(e,t.redirectedFrom())})}async response(){return{response:r.lookupNullableDispatcher(await this._object.response())}}}t.RequestDispatcher=o;class a extends r.Dispatcher{constructor(e,t){super(e,t,"Response",{request:o.from(e,t.request()),url:t.url(),status:t.status(),statusText:t.statusText(),requestHeaders:t.request().headers(),headers:t.headers(),timing:t.timing()})}async finished(){return await this._object._finishedPromise}async body(){return{binary:(await this._object.body()).toString("base64")}}}t.ResponseDispatcher=a;class c extends r.Dispatcher{constructor(e,t){super(e,t,"Route",{request:o.from(e,t.request())})}async continue(e){await this._object.continue({url:e.url,method:e.method,headers:e.headers,postData:e.postData?Buffer.from(e.postData,"base64"):void 0})}async fulfill(e){await this._object.fulfill(e)}async abort(e){await this._object.abort(e.errorCode||"failed")}}t.RouteDispatcher=c;class l extends r.Dispatcher{constructor(e,t){super(e,t,"WebSocket",{url:t.url()}),t.on(i.WebSocket.Events.FrameSent,e=>this._dispatchEvent("frameSent",e)),t.on(i.WebSocket.Events.FrameReceived,e=>this._dispatchEvent("frameReceived",e)),t.on(i.WebSocket.Events.SocketError,e=>this._dispatchEvent("socketError",{error:e})),t.on(i.WebSocket.Events.Close,()=>this._dispatchEvent("close",{}))}}t.WebSocketDispatcher=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;const i=n(18),r=n(7);class s extends r.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}stream(){return new o(this._channel)}}t.Stream=s;class o extends i.Readable{constructor(e){super(),this._channel=e}async _read(e){const t=await this._channel.read({size:e});t.binary?this.push(Buffer.from(t.binary,"base64")):this.push(null)}_destroy(e,t){this._channel.close().catch(e=>null),super._destroy(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.determineScreenshotType=t.convertInputFiles=t.convertSelectOptionValues=t.ElementHandle=void 0;const i=n(51),r=n(19),s=n(1),o=n(120),a=n(3),c=n(2),l=n(0),d=c.promisify(s.writeFile.bind(s));class u extends r.JSHandle{constructor(e,t,n,i){super(e,t,n,i),this._elementChannel=this._channel}static from(e){return e._object}static fromNullable(e){return e?u.from(e):null}asElement(){return this}async ownerFrame(){return this._wrapApiCall("elementHandle.ownerFrame",async()=>i.Frame.fromNullable((await this._elementChannel.ownerFrame()).frame))}async contentFrame(){return this._wrapApiCall("elementHandle.contentFrame",async()=>i.Frame.fromNullable((await this._elementChannel.contentFrame()).frame))}async getAttribute(e){return this._wrapApiCall("elementHandle.getAttribute",async()=>{const t=(await this._elementChannel.getAttribute({name:e})).value;return void 0===t?null:t})}async textContent(){return this._wrapApiCall("elementHandle.textContent",async()=>{const e=(await this._elementChannel.textContent()).value;return void 0===e?null:e})}async innerText(){return this._wrapApiCall("elementHandle.innerText",async()=>(await this._elementChannel.innerText()).value)}async innerHTML(){return this._wrapApiCall("elementHandle.innerHTML",async()=>(await this._elementChannel.innerHTML()).value)}async isChecked(){return this._wrapApiCall("elementHandle.isChecked",async()=>(await this._elementChannel.isChecked()).value)}async isDisabled(){return this._wrapApiCall("elementHandle.isDisabled",async()=>(await this._elementChannel.isDisabled()).value)}async isEditable(){return this._wrapApiCall("elementHandle.isEditable",async()=>(await this._elementChannel.isEditable()).value)}async isEnabled(){return this._wrapApiCall("elementHandle.isEnabled",async()=>(await this._elementChannel.isEnabled()).value)}async isHidden(){return this._wrapApiCall("elementHandle.isHidden",async()=>(await this._elementChannel.isHidden()).value)}async isVisible(){return this._wrapApiCall("elementHandle.isVisible",async()=>(await this._elementChannel.isVisible()).value)}async dispatchEvent(e,t={}){return this._wrapApiCall("elementHandle.dispatchEvent",async()=>{await this._elementChannel.dispatchEvent({type:e,eventInit:r.serializeArgument(t)})})}async scrollIntoViewIfNeeded(e={}){return this._wrapApiCall("elementHandle.scrollIntoViewIfNeeded",async()=>{await this._elementChannel.scrollIntoViewIfNeeded(e)})}async hover(e={}){return this._wrapApiCall("elementHandle.hover",async()=>{await this._elementChannel.hover(e)})}async click(e={}){return this._wrapApiCall("elementHandle.click",async()=>await this._elementChannel.click(e))}async dblclick(e={}){return this._wrapApiCall("elementHandle.dblclick",async()=>await this._elementChannel.dblclick(e))}async tap(e={}){return this._wrapApiCall("elementHandle.tap",async()=>await this._elementChannel.tap(e))}async selectOption(e,t={}){return this._wrapApiCall("elementHandle.selectOption",async()=>(await this._elementChannel.selectOption({...h(e),...t})).values)}async fill(e,t={}){return this._wrapApiCall("elementHandle.fill",async()=>await this._elementChannel.fill({value:e,...t}))}async selectText(e={}){return this._wrapApiCall("elementHandle.selectText",async()=>{await this._elementChannel.selectText(e)})}async setInputFiles(e,t={}){return this._wrapApiCall("elementHandle.setInputFiles",async()=>{await this._elementChannel.setInputFiles({files:await p(e),...t})})}async focus(){return this._wrapApiCall("elementHandle.focus",async()=>{await this._elementChannel.focus()})}async type(e,t={}){return this._wrapApiCall("elementHandle.type",async()=>{await this._elementChannel.type({text:e,...t})})}async press(e,t={}){return this._wrapApiCall("elementHandle.press",async()=>{await this._elementChannel.press({key:e,...t})})}async check(e={}){return this._wrapApiCall("elementHandle.check",async()=>await this._elementChannel.check(e))}async uncheck(e={}){return this._wrapApiCall("elementHandle.uncheck",async()=>await this._elementChannel.uncheck(e))}async boundingBox(){return this._wrapApiCall("elementHandle.boundingBox",async()=>{const e=(await this._elementChannel.boundingBox()).value;return void 0===e?null:e})}async screenshot(e={}){return this._wrapApiCall("elementHandle.screenshot",async()=>{const t={...e};t.type||(t.type=m(e));const n=await this._elementChannel.screenshot(t),i=Buffer.from(n.binary,"base64");return e.path&&(await l.mkdirIfNeeded(e.path),await d(e.path,i)),i})}async $(e){return this._wrapApiCall("elementHandle.$",async()=>u.fromNullable((await this._elementChannel.querySelector({selector:e})).element))}async $$(e){return this._wrapApiCall("elementHandle.$$",async()=>(await this._elementChannel.querySelectorAll({selector:e})).elements.map(e=>u.from(e)))}async $eval(e,t,n){return this._wrapApiCall("elementHandle.$eval",async()=>{const i=await this._elementChannel.evalOnSelector({selector:e,expression:String(t),isFunction:"function"==typeof t,arg:r.serializeArgument(n)});return r.parseResult(i.value)})}async $$eval(e,t,n){return this._wrapApiCall("elementHandle.$$eval",async()=>{const i=await this._elementChannel.evalOnSelectorAll({selector:e,expression:String(t),isFunction:"function"==typeof t,arg:r.serializeArgument(n)});return r.parseResult(i.value)})}async waitForElementState(e,t={}){return this._wrapApiCall("elementHandle.waitForElementState",async()=>await this._elementChannel.waitForElementState({state:e,...t}))}async waitForSelector(e,t={}){return this._wrapApiCall("elementHandle.waitForSelector",async()=>{const n=await this._elementChannel.waitForSelector({selector:e,...t});return u.fromNullable(n.element)})}}function h(e){if(null===e)return{};if(Array.isArray(e)||(e=[e]),!e.length)return{};for(let t=0;t<e.length;t++)l.assert(null!==e[t],`options[${t}]: expected object, got null`);return e[0]instanceof u?{elements:e.map(e=>e._elementChannel)}:l.isString(e[0])?{options:e.map(e=>({value:e}))}:{options:e}}async function p(e){const t=Array.isArray(e)?e:[e];return await Promise.all(t.map(async e=>"string"==typeof e?{name:a.basename(e),mimeType:o.getType(e)||"application/octet-stream",buffer:(await c.promisify(s.readFile)(e)).toString("base64")}:{name:e.name,mimeType:e.mimeType,buffer:e.buffer.toString("base64")}))}function m(e){if(e.path){const t=o.getType(e.path);if("image/png"===t)return"png";if("image/jpeg"===t)return"jpeg";throw new Error(`path: unsupported mime type "${t}"`)}return e.type}t.ElementHandle=u,t.convertSelectOptionValues=h,t.convertInputFiles=p,t.determineScreenshotType=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Worker=void 0;const i=n(15),r=n(7),s=n(19);class o extends r.ChannelOwner{constructor(e,t,n,r){super(e,t,n,r),this._channel.on("close",()=>{this._page&&this._page._workers.delete(this),this._context&&this._context._serviceWorkers.delete(this),this.emit(i.Events.Worker.Close,this)})}static from(e){return e._object}url(){return this._initializer.url}async evaluate(e,t){s.assertMaxArguments(arguments.length,2);const n=await this._channel.evaluateExpression({expression:String(e),isFunction:"function"==typeof e,arg:s.serializeArgument(t)});return s.parseResult(n.value)}async evaluateHandle(e,t){s.assertMaxArguments(arguments.length,2);const n=await this._channel.evaluateExpressionHandle({expression:String(e),isFunction:"function"==typeof e,arg:s.serializeArgument(t)});return s.JSHandle.from(n.handle)}}t.Worker=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sharedSelectors=t.SelectorsOwner=t.Selectors=void 0;const i=n(23),r=n(7);class s{constructor(){this._channels=new Set,this._registrations=[]}async register(e,t,n={}){const r={...n,name:e,source:await i.evaluationScript(t,void 0,!1)};for(const e of this._channels)await e._channel.register(r);this._registrations.push(r)}_addChannel(e){this._channels.add(e);for(const t of this._registrations)e._channel.register(t).catch(e=>{})}_removeChannel(e){this._channels.delete(e)}}t.Selectors=s;class o extends r.ChannelOwner{static from(e){return e._object}}t.SelectorsOwner=o,t.sharedSelectors=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDPSession=void 0;const i=n(7);class r extends i.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._channel.on("event",({method:e,params:t})=>{this.emit(e,t)}),this.on=super.on,this.addListener=super.addListener,this.off=super.removeListener,this.removeListener=super.removeListener,this.once=super.once}static from(e){return e._object}async send(e,t){return this._wrapApiCall("cdpSession.send",async()=>(await this._channel.send({method:e,params:t})).result)}async detach(){return this._wrapApiCall("cdpSession.detach",async()=>this._channel.detach())}}t.CDPSession=r},function(e,t,n){"use strict";var i=n(30).codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,n,s){if("function"==typeof n)return e(t,null,n);n||(n={}),s=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}}(s||r);var o=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||d()},l=t._writableState&&t._writableState.finished,d=function(){a=!1,l=!0,o||s.call(t)},u=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,u=!0,a||s.call(t)},p=function(e){s.call(t,e)},m=function(){var e;return o&&!u?(t._readableState&&t._readableState.ended||(e=new i),s.call(t,e)):a&&!l?(t._writableState&&t._writableState.ended||(e=new i),s.call(t,e)):void 0},f=function(){t.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",d),t.on("abort",m),t.req?f():t.on("request",f)),t.on("end",h),t.on("finish",d),!1!==n.error&&t.on("error",p),t.on("close",m),function(){t.removeListener("complete",d),t.removeListener("abort",m),t.removeListener("request",f),t.req&&t.req.removeListener("finish",d),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",d),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",m)}}},function(e,t){e.exports=require("https")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createScheme=t.ValidationError=void 0;const i=n(53);var r=n(53);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return r.ValidationError}}),t.createScheme=function(e){const t={},n=e=>(n,r)=>{const s=t[e];if(!s)throw new i.ValidationError(r+': unknown type "'+e+'"');return s(n,r)};return t.Metadata=i.tObject({stack:i.tOptional(i.tString)}),t.Point=i.tObject({x:i.tNumber,y:i.tNumber}),t.Rect=i.tObject({x:i.tNumber,y:i.tNumber,width:i.tNumber,height:i.tNumber}),t.SerializedValue=i.tObject({n:i.tOptional(i.tNumber),b:i.tOptional(i.tBoolean),s:i.tOptional(i.tString),v:i.tOptional(i.tEnum(["null","undefined","NaN","Infinity","-Infinity","-0"])),d:i.tOptional(i.tString),r:i.tOptional(i.tObject({p:i.tString,f:i.tString})),a:i.tOptional(i.tArray(n("SerializedValue"))),o:i.tOptional(i.tArray(i.tObject({k:i.tString,v:n("SerializedValue")}))),h:i.tOptional(i.tNumber)}),t.SerializedArgument=i.tObject({value:n("SerializedValue"),handles:i.tArray(e("*"))}),t.AXNode=i.tObject({role:i.tString,name:i.tString,valueString:i.tOptional(i.tString),valueNumber:i.tOptional(i.tNumber),description:i.tOptional(i.tString),keyshortcuts:i.tOptional(i.tString),roledescription:i.tOptional(i.tString),valuetext:i.tOptional(i.tString),disabled:i.tOptional(i.tBoolean),expanded:i.tOptional(i.tBoolean),focused:i.tOptional(i.tBoolean),modal:i.tOptional(i.tBoolean),multiline:i.tOptional(i.tBoolean),multiselectable:i.tOptional(i.tBoolean),readonly:i.tOptional(i.tBoolean),required:i.tOptional(i.tBoolean),selected:i.tOptional(i.tBoolean),checked:i.tOptional(i.tEnum(["checked","unchecked","mixed"])),pressed:i.tOptional(i.tEnum(["pressed","released","mixed"])),level:i.tOptional(i.tNumber),valuemin:i.tOptional(i.tNumber),valuemax:i.tOptional(i.tNumber),autocomplete:i.tOptional(i.tString),haspopup:i.tOptional(i.tString),invalid:i.tOptional(i.tString),orientation:i.tOptional(i.tString),children:i.tOptional(i.tArray(n("AXNode")))}),t.SetNetworkCookie=i.tObject({name:i.tString,value:i.tString,url:i.tOptional(i.tString),domain:i.tOptional(i.tString),path:i.tOptional(i.tString),expires:i.tOptional(i.tNumber),httpOnly:i.tOptional(i.tBoolean),secure:i.tOptional(i.tBoolean),sameSite:i.tOptional(i.tEnum(["Strict","Lax","None"]))}),t.NetworkCookie=i.tObject({name:i.tString,value:i.tString,domain:i.tString,path:i.tString,expires:i.tNumber,httpOnly:i.tBoolean,secure:i.tBoolean,sameSite:i.tEnum(["Strict","Lax","None"])}),t.NameValue=i.tObject({name:i.tString,value:i.tString}),t.OriginStorage=i.tObject({origin:i.tString,localStorage:i.tArray(n("NameValue"))}),t.SerializedError=i.tObject({error:i.tOptional(i.tObject({message:i.tString,name:i.tString,stack:i.tOptional(i.tString)})),value:i.tOptional(n("SerializedValue"))}),t.SelectorsRegisterParams=i.tObject({name:i.tString,source:i.tString,contentScript:i.tOptional(i.tBoolean)}),t.BrowserTypeLaunchParams=i.tObject({executablePath:i.tOptional(i.tString),args:i.tOptional(i.tArray(i.tString)),ignoreAllDefaultArgs:i.tOptional(i.tBoolean),ignoreDefaultArgs:i.tOptional(i.tArray(i.tString)),handleSIGINT:i.tOptional(i.tBoolean),handleSIGTERM:i.tOptional(i.tBoolean),handleSIGHUP:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber),env:i.tOptional(i.tArray(n("NameValue"))),headless:i.tOptional(i.tBoolean),devtools:i.tOptional(i.tBoolean),proxy:i.tOptional(i.tObject({server:i.tString,bypass:i.tOptional(i.tString),username:i.tOptional(i.tString),password:i.tOptional(i.tString)})),downloadsPath:i.tOptional(i.tString),firefoxUserPrefs:i.tOptional(i.tAny),chromiumSandbox:i.tOptional(i.tBoolean),slowMo:i.tOptional(i.tNumber)}),t.BrowserTypeLaunchPersistentContextParams=i.tObject({userDataDir:i.tString,executablePath:i.tOptional(i.tString),args:i.tOptional(i.tArray(i.tString)),ignoreAllDefaultArgs:i.tOptional(i.tBoolean),ignoreDefaultArgs:i.tOptional(i.tArray(i.tString)),handleSIGINT:i.tOptional(i.tBoolean),handleSIGTERM:i.tOptional(i.tBoolean),handleSIGHUP:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber),env:i.tOptional(i.tArray(n("NameValue"))),headless:i.tOptional(i.tBoolean),devtools:i.tOptional(i.tBoolean),proxy:i.tOptional(i.tObject({server:i.tString,bypass:i.tOptional(i.tString),username:i.tOptional(i.tString),password:i.tOptional(i.tString)})),downloadsPath:i.tOptional(i.tString),chromiumSandbox:i.tOptional(i.tBoolean),slowMo:i.tOptional(i.tNumber),noDefaultViewport:i.tOptional(i.tBoolean),viewport:i.tOptional(i.tObject({width:i.tNumber,height:i.tNumber})),ignoreHTTPSErrors:i.tOptional(i.tBoolean),javaScriptEnabled:i.tOptional(i.tBoolean),bypassCSP:i.tOptional(i.tBoolean),userAgent:i.tOptional(i.tString),locale:i.tOptional(i.tString),timezoneId:i.tOptional(i.tString),geolocation:i.tOptional(i.tObject({longitude:i.tNumber,latitude:i.tNumber,accuracy:i.tOptional(i.tNumber)})),permissions:i.tOptional(i.tArray(i.tString)),extraHTTPHeaders:i.tOptional(i.tArray(n("NameValue"))),offline:i.tOptional(i.tBoolean),httpCredentials:i.tOptional(i.tObject({username:i.tString,password:i.tString})),deviceScaleFactor:i.tOptional(i.tNumber),isMobile:i.tOptional(i.tBoolean),hasTouch:i.tOptional(i.tBoolean),colorScheme:i.tOptional(i.tEnum(["light","dark","no-preference"])),acceptDownloads:i.tOptional(i.tBoolean),_traceResourcesPath:i.tOptional(i.tString),_tracePath:i.tOptional(i.tString),recordVideo:i.tOptional(i.tObject({dir:i.tString,size:i.tOptional(i.tObject({width:i.tNumber,height:i.tNumber}))})),recordHar:i.tOptional(i.tObject({omitContent:i.tOptional(i.tBoolean),path:i.tString}))}),t.BrowserCloseParams=i.tOptional(i.tObject({})),t.BrowserNewContextParams=i.tObject({noDefaultViewport:i.tOptional(i.tBoolean),viewport:i.tOptional(i.tObject({width:i.tNumber,height:i.tNumber})),ignoreHTTPSErrors:i.tOptional(i.tBoolean),javaScriptEnabled:i.tOptional(i.tBoolean),bypassCSP:i.tOptional(i.tBoolean),userAgent:i.tOptional(i.tString),locale:i.tOptional(i.tString),timezoneId:i.tOptional(i.tString),geolocation:i.tOptional(i.tObject({longitude:i.tNumber,latitude:i.tNumber,accuracy:i.tOptional(i.tNumber)})),permissions:i.tOptional(i.tArray(i.tString)),extraHTTPHeaders:i.tOptional(i.tArray(n("NameValue"))),offline:i.tOptional(i.tBoolean),httpCredentials:i.tOptional(i.tObject({username:i.tString,password:i.tString})),deviceScaleFactor:i.tOptional(i.tNumber),isMobile:i.tOptional(i.tBoolean),hasTouch:i.tOptional(i.tBoolean),colorScheme:i.tOptional(i.tEnum(["dark","light","no-preference"])),acceptDownloads:i.tOptional(i.tBoolean),_traceResourcesPath:i.tOptional(i.tString),_tracePath:i.tOptional(i.tString),recordVideo:i.tOptional(i.tObject({dir:i.tString,size:i.tOptional(i.tObject({width:i.tNumber,height:i.tNumber}))})),recordHar:i.tOptional(i.tObject({omitContent:i.tOptional(i.tBoolean),path:i.tString})),proxy:i.tOptional(i.tObject({server:i.tString,bypass:i.tOptional(i.tString),username:i.tOptional(i.tString),password:i.tOptional(i.tString)})),storageState:i.tOptional(i.tObject({cookies:i.tOptional(i.tArray(n("SetNetworkCookie"))),origins:i.tOptional(i.tArray(n("OriginStorage")))}))}),t.BrowserCrNewBrowserCDPSessionParams=i.tOptional(i.tObject({})),t.BrowserCrStartTracingParams=i.tObject({page:i.tOptional(e("Page")),path:i.tOptional(i.tString),screenshots:i.tOptional(i.tBoolean),categories:i.tOptional(i.tArray(i.tString))}),t.BrowserCrStopTracingParams=i.tOptional(i.tObject({})),t.BrowserContextAddCookiesParams=i.tObject({cookies:i.tArray(n("SetNetworkCookie"))}),t.BrowserContextAddInitScriptParams=i.tObject({source:i.tString}),t.BrowserContextClearCookiesParams=i.tOptional(i.tObject({})),t.BrowserContextClearPermissionsParams=i.tOptional(i.tObject({})),t.BrowserContextCloseParams=i.tOptional(i.tObject({})),t.BrowserContextCookiesParams=i.tObject({urls:i.tArray(i.tString)}),t.BrowserContextExposeBindingParams=i.tObject({name:i.tString,needsHandle:i.tOptional(i.tBoolean)}),t.BrowserContextGrantPermissionsParams=i.tObject({permissions:i.tArray(i.tString),origin:i.tOptional(i.tString)}),t.BrowserContextNewPageParams=i.tOptional(i.tObject({})),t.BrowserContextSetDefaultNavigationTimeoutNoReplyParams=i.tObject({timeout:i.tNumber}),t.BrowserContextSetDefaultTimeoutNoReplyParams=i.tObject({timeout:i.tNumber}),t.BrowserContextSetExtraHTTPHeadersParams=i.tObject({headers:i.tArray(n("NameValue"))}),t.BrowserContextSetGeolocationParams=i.tObject({geolocation:i.tOptional(i.tObject({longitude:i.tNumber,latitude:i.tNumber,accuracy:i.tOptional(i.tNumber)}))}),t.BrowserContextSetHTTPCredentialsParams=i.tObject({httpCredentials:i.tOptional(i.tObject({username:i.tString,password:i.tString}))}),t.BrowserContextSetNetworkInterceptionEnabledParams=i.tObject({enabled:i.tBoolean}),t.BrowserContextSetOfflineParams=i.tObject({offline:i.tBoolean}),t.BrowserContextStorageStateParams=i.tOptional(i.tObject({})),t.BrowserContextExtendInjectedScriptParams=i.tObject({source:i.tString,arg:n("SerializedArgument")}),t.BrowserContextCrNewCDPSessionParams=i.tObject({page:e("Page")}),t.PageSetDefaultNavigationTimeoutNoReplyParams=i.tObject({timeout:i.tNumber}),t.PageSetDefaultTimeoutNoReplyParams=i.tObject({timeout:i.tNumber}),t.PageSetFileChooserInterceptedNoReplyParams=i.tObject({intercepted:i.tBoolean}),t.PageAddInitScriptParams=i.tObject({source:i.tString}),t.PageCloseParams=i.tObject({runBeforeUnload:i.tOptional(i.tBoolean)}),t.PageEmulateMediaParams=i.tObject({media:i.tOptional(i.tEnum(["screen","print","null"])),colorScheme:i.tOptional(i.tEnum(["dark","light","no-preference","null"]))}),t.PageExposeBindingParams=i.tObject({name:i.tString,needsHandle:i.tOptional(i.tBoolean)}),t.PageGoBackParams=i.tObject({timeout:i.tOptional(i.tNumber),waitUntil:i.tOptional(i.tEnum(["load","domcontentloaded","networkidle"]))}),t.PageGoForwardParams=i.tObject({timeout:i.tOptional(i.tNumber),waitUntil:i.tOptional(i.tEnum(["load","domcontentloaded","networkidle"]))}),t.PageOpenerParams=i.tOptional(i.tObject({})),t.PageReloadParams=i.tObject({timeout:i.tOptional(i.tNumber),waitUntil:i.tOptional(i.tEnum(["load","domcontentloaded","networkidle"]))}),t.PageScreenshotParams=i.tObject({timeout:i.tOptional(i.tNumber),type:i.tOptional(i.tEnum(["png","jpeg"])),quality:i.tOptional(i.tNumber),omitBackground:i.tOptional(i.tBoolean),fullPage:i.tOptional(i.tBoolean),clip:i.tOptional(n("Rect"))}),t.PageSetExtraHTTPHeadersParams=i.tObject({headers:i.tArray(n("NameValue"))}),t.PageSetNetworkInterceptionEnabledParams=i.tObject({enabled:i.tBoolean}),t.PageSetViewportSizeParams=i.tObject({viewportSize:i.tObject({width:i.tNumber,height:i.tNumber})}),t.PageKeyboardDownParams=i.tObject({key:i.tString}),t.PageKeyboardUpParams=i.tObject({key:i.tString}),t.PageKeyboardInsertTextParams=i.tObject({text:i.tString}),t.PageKeyboardTypeParams=i.tObject({text:i.tString,delay:i.tOptional(i.tNumber)}),t.PageKeyboardPressParams=i.tObject({key:i.tString,delay:i.tOptional(i.tNumber)}),t.PageMouseMoveParams=i.tObject({x:i.tNumber,y:i.tNumber,steps:i.tOptional(i.tNumber)}),t.PageMouseDownParams=i.tObject({button:i.tOptional(i.tEnum(["left","right","middle"])),clickCount:i.tOptional(i.tNumber)}),t.PageMouseUpParams=i.tObject({button:i.tOptional(i.tEnum(["left","right","middle"])),clickCount:i.tOptional(i.tNumber)}),t.PageMouseClickParams=i.tObject({x:i.tNumber,y:i.tNumber,delay:i.tOptional(i.tNumber),button:i.tOptional(i.tEnum(["left","right","middle"])),clickCount:i.tOptional(i.tNumber)}),t.PageTouchscreenTapParams=i.tObject({x:i.tNumber,y:i.tNumber}),t.PageAccessibilitySnapshotParams=i.tObject({interestingOnly:i.tOptional(i.tBoolean),root:i.tOptional(e("ElementHandle"))}),t.PagePdfParams=i.tObject({scale:i.tOptional(i.tNumber),displayHeaderFooter:i.tOptional(i.tBoolean),headerTemplate:i.tOptional(i.tString),footerTemplate:i.tOptional(i.tString),printBackground:i.tOptional(i.tBoolean),landscape:i.tOptional(i.tBoolean),pageRanges:i.tOptional(i.tString),format:i.tOptional(i.tString),width:i.tOptional(i.tString),height:i.tOptional(i.tString),preferCSSPageSize:i.tOptional(i.tBoolean),margin:i.tOptional(i.tObject({top:i.tOptional(i.tString),bottom:i.tOptional(i.tString),left:i.tOptional(i.tString),right:i.tOptional(i.tString)}))}),t.PageCrStartJSCoverageParams=i.tObject({resetOnNavigation:i.tOptional(i.tBoolean),reportAnonymousScripts:i.tOptional(i.tBoolean)}),t.PageCrStopJSCoverageParams=i.tOptional(i.tObject({})),t.PageCrStartCSSCoverageParams=i.tObject({resetOnNavigation:i.tOptional(i.tBoolean)}),t.PageCrStopCSSCoverageParams=i.tOptional(i.tObject({})),t.PageBringToFrontParams=i.tOptional(i.tObject({})),t.FrameEvalOnSelectorParams=i.tObject({selector:i.tString,expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.FrameEvalOnSelectorAllParams=i.tObject({selector:i.tString,expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.FrameAddScriptTagParams=i.tObject({url:i.tOptional(i.tString),content:i.tOptional(i.tString),type:i.tOptional(i.tString)}),t.FrameAddStyleTagParams=i.tObject({url:i.tOptional(i.tString),content:i.tOptional(i.tString)}),t.FrameCheckParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.FrameClickParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(n("Point")),delay:i.tOptional(i.tNumber),button:i.tOptional(i.tEnum(["left","right","middle"])),clickCount:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.FrameContentParams=i.tOptional(i.tObject({})),t.FrameDblclickParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(n("Point")),delay:i.tOptional(i.tNumber),button:i.tOptional(i.tEnum(["left","right","middle"])),timeout:i.tOptional(i.tNumber)}),t.FrameDispatchEventParams=i.tObject({selector:i.tString,type:i.tString,eventInit:n("SerializedArgument"),timeout:i.tOptional(i.tNumber)}),t.FrameEvaluateExpressionParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument"),world:i.tOptional(i.tEnum(["main","utility"]))}),t.FrameEvaluateExpressionHandleParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument"),world:i.tOptional(i.tEnum(["main","utility"]))}),t.FrameFillParams=i.tObject({selector:i.tString,value:i.tString,timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.FrameFocusParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameFrameElementParams=i.tOptional(i.tObject({})),t.FrameGetAttributeParams=i.tObject({selector:i.tString,name:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameGotoParams=i.tObject({url:i.tString,timeout:i.tOptional(i.tNumber),waitUntil:i.tOptional(i.tEnum(["load","domcontentloaded","networkidle"])),referer:i.tOptional(i.tString)}),t.FrameHoverParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(n("Point")),timeout:i.tOptional(i.tNumber)}),t.FrameInnerHTMLParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameInnerTextParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameIsCheckedParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameIsDisabledParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameIsEnabledParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameIsHiddenParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameIsVisibleParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameIsEditableParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FramePressParams=i.tObject({selector:i.tString,key:i.tString,delay:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.FrameQuerySelectorParams=i.tObject({selector:i.tString}),t.FrameQuerySelectorAllParams=i.tObject({selector:i.tString}),t.FrameSelectOptionParams=i.tObject({selector:i.tString,elements:i.tOptional(i.tArray(e("ElementHandle"))),options:i.tOptional(i.tArray(i.tObject({value:i.tOptional(i.tString),label:i.tOptional(i.tString),index:i.tOptional(i.tNumber)}))),timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.FrameSetContentParams=i.tObject({html:i.tString,timeout:i.tOptional(i.tNumber),waitUntil:i.tOptional(i.tEnum(["load","domcontentloaded","networkidle"]))}),t.FrameSetInputFilesParams=i.tObject({selector:i.tString,files:i.tArray(i.tObject({name:i.tString,mimeType:i.tString,buffer:i.tBinary})),timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.FrameTapParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(n("Point")),timeout:i.tOptional(i.tNumber)}),t.FrameTextContentParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber)}),t.FrameTitleParams=i.tOptional(i.tObject({})),t.FrameTypeParams=i.tObject({selector:i.tString,text:i.tString,delay:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.FrameUncheckParams=i.tObject({selector:i.tString,force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.FrameWaitForFunctionParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument"),timeout:i.tOptional(i.tNumber),pollingInterval:i.tOptional(i.tNumber)}),t.FrameWaitForSelectorParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber),state:i.tOptional(i.tEnum(["attached","detached","visible","hidden"]))}),t.WorkerEvaluateExpressionParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.WorkerEvaluateExpressionHandleParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.JSHandleDisposeParams=i.tOptional(i.tObject({})),t.ElementHandleDisposeParams=n("JSHandleDisposeParams"),t.JSHandleEvaluateExpressionParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElementHandleEvaluateExpressionParams=n("JSHandleEvaluateExpressionParams"),t.JSHandleEvaluateExpressionHandleParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElementHandleEvaluateExpressionHandleParams=n("JSHandleEvaluateExpressionHandleParams"),t.JSHandleGetPropertyListParams=i.tOptional(i.tObject({})),t.ElementHandleGetPropertyListParams=n("JSHandleGetPropertyListParams"),t.JSHandleGetPropertyParams=i.tObject({name:i.tString}),t.ElementHandleGetPropertyParams=n("JSHandleGetPropertyParams"),t.JSHandleJsonValueParams=i.tOptional(i.tObject({})),t.ElementHandleJsonValueParams=n("JSHandleJsonValueParams"),t.ElementHandleEvalOnSelectorParams=i.tObject({selector:i.tString,expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElementHandleEvalOnSelectorAllParams=i.tObject({selector:i.tString,expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElementHandleBoundingBoxParams=i.tOptional(i.tObject({})),t.ElementHandleCheckParams=i.tObject({force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.ElementHandleClickParams=i.tObject({force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(n("Point")),delay:i.tOptional(i.tNumber),button:i.tOptional(i.tEnum(["left","right","middle"])),clickCount:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.ElementHandleContentFrameParams=i.tOptional(i.tObject({})),t.ElementHandleDblclickParams=i.tObject({force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(n("Point")),delay:i.tOptional(i.tNumber),button:i.tOptional(i.tEnum(["left","right","middle"])),timeout:i.tOptional(i.tNumber)}),t.ElementHandleDispatchEventParams=i.tObject({type:i.tString,eventInit:n("SerializedArgument")}),t.ElementHandleFillParams=i.tObject({value:i.tString,timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.ElementHandleFocusParams=i.tOptional(i.tObject({})),t.ElementHandleGetAttributeParams=i.tObject({name:i.tString}),t.ElementHandleHoverParams=i.tObject({force:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(n("Point")),timeout:i.tOptional(i.tNumber)}),t.ElementHandleInnerHTMLParams=i.tOptional(i.tObject({})),t.ElementHandleInnerTextParams=i.tOptional(i.tObject({})),t.ElementHandleIsCheckedParams=i.tOptional(i.tObject({})),t.ElementHandleIsDisabledParams=i.tOptional(i.tObject({})),t.ElementHandleIsEditableParams=i.tOptional(i.tObject({})),t.ElementHandleIsEnabledParams=i.tOptional(i.tObject({})),t.ElementHandleIsHiddenParams=i.tOptional(i.tObject({})),t.ElementHandleIsVisibleParams=i.tOptional(i.tObject({})),t.ElementHandleOwnerFrameParams=i.tOptional(i.tObject({})),t.ElementHandlePressParams=i.tObject({key:i.tString,delay:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.ElementHandleQuerySelectorParams=i.tObject({selector:i.tString}),t.ElementHandleQuerySelectorAllParams=i.tObject({selector:i.tString}),t.ElementHandleScreenshotParams=i.tObject({timeout:i.tOptional(i.tNumber),type:i.tOptional(i.tEnum(["png","jpeg"])),quality:i.tOptional(i.tNumber),omitBackground:i.tOptional(i.tBoolean)}),t.ElementHandleScrollIntoViewIfNeededParams=i.tObject({timeout:i.tOptional(i.tNumber)}),t.ElementHandleSelectOptionParams=i.tObject({elements:i.tOptional(i.tArray(e("ElementHandle"))),options:i.tOptional(i.tArray(i.tObject({value:i.tOptional(i.tString),label:i.tOptional(i.tString),index:i.tOptional(i.tNumber)}))),timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.ElementHandleSelectTextParams=i.tObject({timeout:i.tOptional(i.tNumber)}),t.ElementHandleSetInputFilesParams=i.tObject({files:i.tArray(i.tObject({name:i.tString,mimeType:i.tString,buffer:i.tBinary})),timeout:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean)}),t.ElementHandleTapParams=i.tObject({force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),modifiers:i.tOptional(i.tArray(i.tEnum(["Alt","Control","Meta","Shift"]))),position:i.tOptional(n("Point")),timeout:i.tOptional(i.tNumber)}),t.ElementHandleTextContentParams=i.tOptional(i.tObject({})),t.ElementHandleTypeParams=i.tObject({text:i.tString,delay:i.tOptional(i.tNumber),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.ElementHandleUncheckParams=i.tObject({force:i.tOptional(i.tBoolean),noWaitAfter:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.ElementHandleWaitForElementStateParams=i.tObject({state:i.tEnum(["visible","hidden","stable","enabled","disabled","editable"]),timeout:i.tOptional(i.tNumber)}),t.ElementHandleWaitForSelectorParams=i.tObject({selector:i.tString,timeout:i.tOptional(i.tNumber),state:i.tOptional(i.tEnum(["attached","detached","visible","hidden"]))}),t.RequestResponseParams=i.tOptional(i.tObject({})),t.RouteAbortParams=i.tObject({errorCode:i.tOptional(i.tString)}),t.RouteContinueParams=i.tObject({url:i.tOptional(i.tString),method:i.tOptional(i.tString),headers:i.tOptional(i.tArray(n("NameValue"))),postData:i.tOptional(i.tBinary)}),t.RouteFulfillParams=i.tObject({status:i.tOptional(i.tNumber),headers:i.tOptional(i.tArray(n("NameValue"))),body:i.tOptional(i.tString),isBase64:i.tOptional(i.tBoolean)}),t.ResourceTiming=i.tObject({startTime:i.tNumber,domainLookupStart:i.tNumber,domainLookupEnd:i.tNumber,connectStart:i.tNumber,secureConnectionStart:i.tNumber,connectEnd:i.tNumber,requestStart:i.tNumber,responseStart:i.tNumber}),t.ResponseBodyParams=i.tOptional(i.tObject({})),t.ResponseFinishedParams=i.tOptional(i.tObject({})),t.BindingCallRejectParams=i.tObject({error:n("SerializedError")}),t.BindingCallResolveParams=i.tObject({result:n("SerializedArgument")}),t.DialogAcceptParams=i.tObject({promptText:i.tOptional(i.tString)}),t.DialogDismissParams=i.tOptional(i.tObject({})),t.DownloadPathParams=i.tOptional(i.tObject({})),t.DownloadSaveAsParams=i.tObject({path:i.tString}),t.DownloadSaveAsStreamParams=i.tOptional(i.tObject({})),t.DownloadFailureParams=i.tOptional(i.tObject({})),t.DownloadStreamParams=i.tOptional(i.tObject({})),t.DownloadDeleteParams=i.tOptional(i.tObject({})),t.StreamReadParams=i.tObject({size:i.tOptional(i.tNumber)}),t.StreamCloseParams=i.tOptional(i.tObject({})),t.CDPSessionSendParams=i.tObject({method:i.tString,params:i.tOptional(i.tAny)}),t.CDPSessionDetachParams=i.tOptional(i.tObject({})),t.ElectronLaunchParams=i.tObject({executablePath:i.tString,args:i.tOptional(i.tArray(i.tString)),cwd:i.tOptional(i.tString),env:i.tOptional(i.tArray(n("NameValue"))),handleSIGINT:i.tOptional(i.tBoolean),handleSIGTERM:i.tOptional(i.tBoolean),handleSIGHUP:i.tOptional(i.tBoolean),timeout:i.tOptional(i.tNumber)}),t.ElectronApplicationNewBrowserWindowParams=i.tObject({arg:n("SerializedArgument")}),t.ElectronApplicationEvaluateExpressionParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElectronApplicationEvaluateExpressionHandleParams=i.tObject({expression:i.tString,isFunction:i.tBoolean,arg:n("SerializedArgument")}),t.ElectronApplicationCloseParams=i.tOptional(i.tObject({})),t.AndroidDevicesParams=i.tOptional(i.tObject({})),t.AndroidSetDefaultTimeoutNoReplyParams=i.tObject({timeout:i.tNumber}),t.AndroidSocketWriteParams=i.tObject({data:i.tBinary}),t.AndroidSocketCloseParams=i.tOptional(i.tObject({})),t.AndroidDeviceWaitParams=i.tObject({selector:n("AndroidSelector"),state:i.tOptional(i.tEnum(["gone"])),timeout:i.tOptional(i.tNumber)}),t.AndroidDeviceFillParams=i.tObject({selector:n("AndroidSelector"),text:i.tString,timeout:i.tOptional(i.tNumber)}),t.AndroidDeviceTapParams=i.tObject({selector:n("AndroidSelector"),duration:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.AndroidDeviceDragParams=i.tObject({selector:n("AndroidSelector"),dest:n("Point"),speed:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.AndroidDeviceFlingParams=i.tObject({selector:n("AndroidSelector"),direction:i.tEnum(["up","down","left","right"]),speed:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.AndroidDeviceLongTapParams=i.tObject({selector:n("AndroidSelector"),timeout:i.tOptional(i.tNumber)}),t.AndroidDevicePinchCloseParams=i.tObject({selector:n("AndroidSelector"),percent:i.tNumber,speed:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.AndroidDevicePinchOpenParams=i.tObject({selector:n("AndroidSelector"),percent:i.tNumber,speed:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.AndroidDeviceScrollParams=i.tObject({selector:n("AndroidSelector"),direction:i.tEnum(["up","down","left","right"]),percent:i.tNumber,speed:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.AndroidDeviceSwipeParams=i.tObject({selector:n("AndroidSelector"),direction:i.tEnum(["up","down","left","right"]),percent:i.tNumber,speed:i.tOptional(i.tNumber),timeout:i.tOptional(i.tNumber)}),t.AndroidDeviceInfoParams=i.tObject({selector:n("AndroidSelector")}),t.AndroidDeviceTreeParams=i.tOptional(i.tObject({})),t.AndroidDeviceScreenshotParams=i.tOptional(i.tObject({})),t.AndroidDeviceInputTypeParams=i.tObject({text:i.tString}),t.AndroidDeviceInputPressParams=i.tObject({key:i.tString}),t.AndroidDeviceInputTapParams=i.tObject({point:n("Point")}),t.AndroidDeviceInputSwipeParams=i.tObject({segments:i.tArray(n("Point")),steps:i.tNumber}),t.AndroidDeviceInputDragParams=i.tObject({from:n("Point"),to:n("Point"),steps:i.tNumber}),t.AndroidDeviceLaunchBrowserParams=i.tObject({pkg:i.tOptional(i.tString),ignoreHTTPSErrors:i.tOptional(i.tBoolean),javaScriptEnabled:i.tOptional(i.tBoolean),bypassCSP:i.tOptional(i.tBoolean),userAgent:i.tOptional(i.tString),locale:i.tOptional(i.tString),timezoneId:i.tOptional(i.tString),geolocation:i.tOptional(i.tObject({longitude:i.tNumber,latitude:i.tNumber,accuracy:i.tOptional(i.tNumber)})),permissions:i.tOptional(i.tArray(i.tString)),extraHTTPHeaders:i.tOptional(i.tArray(n("NameValue"))),offline:i.tOptional(i.tBoolean),httpCredentials:i.tOptional(i.tObject({username:i.tString,password:i.tString})),deviceScaleFactor:i.tOptional(i.tNumber),isMobile:i.tOptional(i.tBoolean),hasTouch:i.tOptional(i.tBoolean),colorScheme:i.tOptional(i.tEnum(["dark","light","no-preference"])),acceptDownloads:i.tOptional(i.tBoolean),_traceResourcesPath:i.tOptional(i.tString),_tracePath:i.tOptional(i.tString),recordVideo:i.tOptional(i.tObject({dir:i.tString,size:i.tOptional(i.tObject({width:i.tNumber,height:i.tNumber}))})),recordHar:i.tOptional(i.tObject({omitContent:i.tOptional(i.tBoolean),path:i.tString})),proxy:i.tOptional(i.tObject({server:i.tString,bypass:i.tOptional(i.tString),username:i.tOptional(i.tString),password:i.tOptional(i.tString)}))}),t.AndroidDeviceOpenParams=i.tObject({command:i.tString}),t.AndroidDeviceShellParams=i.tObject({command:i.tString}),t.AndroidDeviceInstallApkParams=i.tObject({file:i.tBinary,args:i.tOptional(i.tArray(i.tString))}),t.AndroidDevicePushParams=i.tObject({file:i.tBinary,path:i.tString,mode:i.tOptional(i.tNumber)}),t.AndroidDeviceSetDefaultTimeoutNoReplyParams=i.tObject({timeout:i.tNumber}),t.AndroidDeviceConnectToWebViewParams=i.tObject({pid:i.tNumber}),t.AndroidDeviceCloseParams=i.tOptional(i.tObject({})),t.AndroidWebView=i.tObject({pid:i.tNumber,pkg:i.tString}),t.AndroidSelector=i.tObject({checkable:i.tOptional(i.tBoolean),checked:i.tOptional(i.tBoolean),clazz:i.tOptional(i.tString),clickable:i.tOptional(i.tBoolean),depth:i.tOptional(i.tNumber),desc:i.tOptional(i.tString),enabled:i.tOptional(i.tBoolean),focusable:i.tOptional(i.tBoolean),focused:i.tOptional(i.tBoolean),hasChild:i.tOptional(i.tObject({selector:n("AndroidSelector")})),hasDescendant:i.tOptional(i.tObject({selector:n("AndroidSelector"),maxDepth:i.tOptional(i.tNumber)})),longClickable:i.tOptional(i.tBoolean),pkg:i.tOptional(i.tString),res:i.tOptional(i.tString),scrollable:i.tOptional(i.tBoolean),selected:i.tOptional(i.tBoolean),text:i.tOptional(i.tString)}),t.AndroidElementInfo=i.tObject({children:i.tOptional(i.tArray(n("AndroidElementInfo"))),clazz:i.tString,desc:i.tString,res:i.tString,pkg:i.tString,text:i.tString,bounds:n("Rect"),checkable:i.tBoolean,checked:i.tBoolean,clickable:i.tBoolean,enabled:i.tBoolean,focusable:i.tBoolean,focused:i.tBoolean,longClickable:i.tBoolean,scrollable:i.tBoolean,selected:i.tBoolean}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidDevice=t.Android=void 0;const i=n(54),r=n(6),s=n(1),o=n(2),a=n(24),c=n(0),l=n(8),d=n(17),u=n(46),h=n(4),p=n(177),m=n(10),f=n(12),_=o.promisify(s.readFile);t.Android=class{constructor(e){this._devices=new Map,this._backend=e,this._timeoutSettings=new f.TimeoutSettings}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}async devices(){const e=(await this._backend.devices()).filter(e=>"device"===e.status),t=new Set;for(const n of e){if(t.add(n.serial),this._devices.has(n.serial))continue;const e=await g.create(this,n);this._devices.set(n.serial,e)}for(const e of this._devices.keys())t.has(e)||this._devices.delete(e);return[...this._devices.values()]}_deviceClosed(e){this._devices.delete(e.serial)}};class g extends r.EventEmitter{constructor(e,t,n){super(),this._lastId=0,this._callbacks=new Map,this._webViews=new Map,this._browserConnections=new Set,this._isClosed=!1,this._android=e,this._backend=t,this.model=n,this.serial=t.serial,this._timeoutSettings=new f.TimeoutSettings(e._timeoutSettings)}static async create(e,t){await t.init();const n=await t.runCommand("shell:getprop ro.product.model"),i=new g(e,t,n.toString().trim());return await i._init(),i}async _init(){await this._refreshWebViews();const e=()=>{this._pollingWebViews=setTimeout(()=>this._refreshWebViews().then(e).catch(()=>{}),500)};e()}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}async shell(e){const t=await this._backend.runCommand("shell:"+e);return await this._refreshWebViews(),t}async open(e){return await this._backend.open(""+e)}async screenshot(){return await this._backend.runCommand("shell:screencap -p")}async _driver(){return this._driverPromise||(this._driverPromise=this._installDriver()),this._driverPromise}async _installDriver(){i("pw:android")("Stopping the old driver"),await this.shell("am force-stop com.microsoft.playwright.androiddriver"),i("pw:android")("Uninstalling the old driver"),await this.shell("cmd package uninstall com.microsoft.playwright.androiddriver"),await this.shell("cmd package uninstall com.microsoft.playwright.androiddriver.test"),i("pw:android")("Installing the new driver");for(const e of["android-driver.apk","android-driver-target.apk"])await this.installApk(await _(n(178).resolve("./"+e)));i("pw:android")("Starting the new driver"),this.shell("am instrument -w com.microsoft.playwright.androiddriver.test/androidx.test.runner.AndroidJUnitRunner");const e=await this._waitForLocalAbstract("playwright_android_driver_socket"),t=new p.Transport(e,e,e,"be");return t.onmessage=e=>{const t=JSON.parse(e),{id:n,result:i,error:r}=t,s=this._callbacks.get(n);s&&(r?s.reject(new Error(r)):s.fulfill(i),this._callbacks.delete(n))},t}async _waitForLocalAbstract(e){let t;for(i("pw:android")("Polling the socket localabstract:"+e);!t;)try{t=await this._backend.open("localabstract:"+e)}catch(e){await new Promise(e=>setTimeout(e,250))}return i("pw:android")("Connected to localabstract:"+e),t}async send(e,t={}){t.timeout=this._timeoutSettings.timeout(t);const n=await this._driver(),i=++this._lastId,r=new Promise((e,t)=>this._callbacks.set(i,{fulfill:e,reject:t}));return n.send(JSON.stringify({id:i,method:e,params:t})),r}async close(){this._isClosed=!0,this._pollingWebViews&&clearTimeout(this._pollingWebViews);for(const e of this._browserConnections)await e.close();if(this._driverPromise){(await this._driver()).close()}await this._backend.close(),this._android._deviceClosed(this),this.emit(g.Events.Closed)}async launchBrowser(e="com.android.chrome",t={}){i("pw:android")("Force-stopping",e),await this._backend.runCommand("shell:am force-stop "+e);const n="playwright-"+c.createGuid(),r="_ --disable-fre --no-default-browser-check --no-first-run --remote-debugging-socket-name="+n;return i("pw:android")("Starting",e,r),await this._backend.runCommand(`shell:echo "${r}" > /data/local/tmp/chrome-command-line`),await this._backend.runCommand(`shell:am start -n ${e}/com.google.android.apps.chrome.Main about:blank`),await this._connectToBrowser(n,t)}async connectToWebView(e){if(!this._webViews.get(e))throw new Error("WebView has been closed");return await this._connectToBrowser("webview_devtools_remote_"+e)}async _connectToBrowser(e,t={}){const n=await this._waitForLocalAbstract(e),i=new w(this,n);await i._init(),this._browserConnections.add(i);const r={name:"clank",isChromium:!0,slowMo:0,persistent:{...t,noDefaultViewport:!0},downloadsPath:void 0,browserProcess:new b(i),proxy:t.proxy,protocolLogger:h.helper.debugProtocolLogger(),browserLogsCollector:new m.RecentLogsCollector};l.validateBrowserContextOptions(t,r);const s=await u.CRBrowser.connect(i,r),o=new d.ProgressController,a=s._defaultContext;await o.run(async e=>{await a._loadDefaultContextAsIs(e)});{const e=a.pages()[0]._delegate;await e._mainFrameSession._client.send("Emulation.setDeviceMetricsOverride",{mobile:!1,width:0,height:0,deviceScaleFactor:0}),await e._mainFrameSession._client.send("Emulation.clearDeviceMetricsOverride",{})}return a}webViews(){return[...this._webViews.values()]}async installApk(e,t){const n=t&&t.args?t.args:["-r","-t","-S"];i("pw:android")("Opening install socket");const r=await this._backend.open(`shell:cmd package install ${n.join(" ")} ${e.length}`);i("pw:android")("Writing driver bytes: "+e.length),await r.write(e);const s=await new Promise(e=>r.on("data",e));i("pw:android")("Written driver bytes: "+s),await r.close()}async push(e,t,n=420){const i=await this._backend.open("sync:"),r=async(e,t)=>{const n=Buffer.alloc(e.length+4);n.write(e,0),n.writeUInt32LE(t,e.length),await i.write(n)},s=async(e,t)=>{await r(e,t.length),await i.write(t)};await s("SEND",Buffer.from(`${t},${n}`));for(let t=0;t<e.length;t+=65535)await s("DATA",e.slice(t,t+65535));await r("DONE",Date.now()/1e3|0);const o=(await new Promise(e=>i.once("data",e))).slice(0,4).toString();if("OKAY"!==o)throw new Error("Could not push: "+o);await i.close()}async _refreshWebViews(){const e=(await this._backend.runCommand("shell:cat /proc/net/unix | grep webview_devtools_remote")).toString().split("\n");if(this._isClosed)return;const t=new Set;for(const n of e){const e=n.match(/[^@]+@webview_devtools_remote_(\d+)/);if(!e)continue;const i=+e[1];t.add(i)}for(const e of t){if(this._webViews.has(e))continue;const t=(await this._backend.runCommand("shell:ps -A | grep "+e)).toString().split("\n");if(this._isClosed)return;let n="";for(const i of t){const t=i.match(/[^\s]+\s+(\d+).*$/);if(!t)continue;+t[1]===e&&(n=i.substring(i.lastIndexOf(" ")+1))}const i={pid:e,pkg:n};this._webViews.set(e,i),this.emit(g.Events.WebViewAdded,i)}for(const e of this._webViews.keys())t.has(e)||(this._webViews.delete(e),this.emit(g.Events.WebViewRemoved,e))}}t.AndroidDevice=g,g.Events={WebViewAdded:"webViewAdded",WebViewRemoved:"webViewRemoved",Closed:"closed"};class w extends r.EventEmitter{constructor(e,t){super(),this._waitForNextTask=c.makeWaitForNextTask(),this.device=e,this._socket=t,this._socket.on("close",()=>{this._waitForNextTask(()=>{this.onclose&&this.onclose()})}),this._receiver=new a.Receiver,this._receiver.on("message",e=>{this._waitForNextTask(()=>{this.onmessage&&this.onmessage(JSON.parse(e))})})}async _init(){await this._socket.write(Buffer.from("GET /devtools/browser HTTP/1.1\r\nUpgrade: WebSocket\r\nConnection: Upgrade\r\nSec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ==\r\nSec-WebSocket-Version: 13\r\n\r\n")),await new Promise(e=>this._socket.once("data",e)),this._socket.on("data",e=>this._receiver._write(e,"binary",()=>{}))}async send(e){var t;await this._socket.write((t=JSON.stringify(e),a.Sender.frame(Buffer.from(t),{opcode:1,mask:!0,fin:!0,readOnly:!0})[0]))}async close(){await this._socket.close()}}class b{constructor(e){this._browser=e}async kill(){}async close(){await this._browser.close()}}},function(e,t,n){e.exports=function(e){function t(e){let n,r=null;function s(...e){if(!s.enabled)return;const i=s,r=Number(new Date),o=r-(n||r);i.diff=o,i.prev=n,i.curr=r,n=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return"%";a++;const s=t.formatters[r];if("function"==typeof s){const t=e[a];n=s.call(i,t),e.splice(a,1),a--}return n}),t.formatArgs.call(i,e);(i.log||t.log).apply(i,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=i,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null===r?t.enabled(e):r,set:e=>{r=e}}),"function"==typeof t.init&&t.init(s),s}function i(e,n){const i=t(this.namespace+(void 0===n?":":n)+e);return i.log=this.log,i}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length;for(n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(143),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},function(e,t,n){"use strict";const i=n(6),r=n(73),s=n(78),o=n(79),a=n(148),{randomBytes:c,createHash:l}=n(41),{URL:d}=n(80),u=n(42),h=n(81),p=n(83),{BINARY_TYPES:m,EMPTY_BUFFER:f,GUID:_,kStatusCode:g,kWebSocket:w,NOOP:b}=n(25),{addEventListener:y,removeEventListener:v}=n(150),{format:x,parse:S}=n(84),{toBuffer:k}=n(43),C=["CONNECTING","OPEN","CLOSING","CLOSED"],E=[8,13];class T extends i{constructor(e,t,n){super(),this._binaryType=m[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage="",this._closeTimer=null,this._extensions={},this._protocol="",this._readyState=T.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,Array.isArray(t)?t=t.join(", "):"object"==typeof t&&null!==t&&(n=t,t=void 0),function e(t,n,i,o){const a={protocolVersion:E[1],maxPayload:104857600,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,host:void 0,path:void 0,port:void 0};if(!E.includes(a.protocolVersion))throw new RangeError(`Unsupported protocol version: ${a.protocolVersion} (supported versions: ${E.join(", ")})`);let h;n instanceof d?(h=n,t._url=n.href):(h=new d(n),t._url=n);const p="ws+unix:"===h.protocol;if(!(h.host||p&&h.pathname))throw new Error("Invalid URL: "+t.url);const m="wss:"===h.protocol||"https:"===h.protocol,f=m?443:80,g=c(16).toString("base64"),w=m?r.get:s.get;let b;a.createConnection=m?O:P,a.defaultPort=a.defaultPort||f,a.port=h.port||f,a.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,a.headers={"Sec-WebSocket-Version":a.protocolVersion,"Sec-WebSocket-Key":g,Connection:"Upgrade",Upgrade:"websocket",...a.headers},a.path=h.pathname+h.search,a.timeout=a.handshakeTimeout,a.perMessageDeflate&&(b=new u(!0!==a.perMessageDeflate?a.perMessageDeflate:{},!1,a.maxPayload),a.headers["Sec-WebSocket-Extensions"]=x({[u.extensionName]:b.offer()}));i&&(a.headers["Sec-WebSocket-Protocol"]=i);a.origin&&(a.protocolVersion<13?a.headers["Sec-WebSocket-Origin"]=a.origin:a.headers.Origin=a.origin);(h.username||h.password)&&(a.auth=`${h.username}:${h.password}`);if(p){const e=a.path.split(":");a.socketPath=e[0],a.path=e[1]}let y=t._req=w(a);a.timeout&&y.on("timeout",()=>{A(t,y,"Opening handshake has timed out")});y.on("error",e=>{null===y||y.aborted||(y=t._req=null,t._readyState=T.CLOSING,t.emit("error",e),t.emitClose())}),y.on("response",r=>{const s=r.headers.location,c=r.statusCode;if(s&&a.followRedirects&&c>=300&&c<400){if(++t._redirects>a.maxRedirects)return void A(t,y,"Maximum redirects exceeded");y.abort();const r=new d(s,n);e(t,r,i,o)}else t.emit("unexpected-response",y,r)||A(t,y,"Unexpected server response: "+r.statusCode)}),y.on("upgrade",(e,n,r)=>{if(t.emit("upgrade",e),t.readyState!==T.CONNECTING)return;y=t._req=null;const s=l("sha1").update(g+_).digest("base64");if(e.headers["sec-websocket-accept"]!==s)return void A(t,n,"Invalid Sec-WebSocket-Accept header");const o=e.headers["sec-websocket-protocol"],c=(i||"").split(/, */);let d;if(!i&&o?d="Server sent a subprotocol but none was requested":i&&!o?d="Server sent no subprotocol":o&&!c.includes(o)&&(d="Server sent an invalid subprotocol"),d)A(t,n,d);else{if(o&&(t._protocol=o),b)try{const n=S(e.headers["sec-websocket-extensions"]);n[u.extensionName]&&(b.accept(n[u.extensionName]),t._extensions[u.extensionName]=b)}catch(e){return void A(t,n,"Invalid Sec-WebSocket-Extensions header")}t.setSocket(n,r,a.maxPayload)}})}(this,e,t,n)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(e){m.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){const i=new h(this.binaryType,this._extensions,this._isServer,n);this._sender=new p(e,this._extensions),this._receiver=i,this._socket=e,i[w]=this,e[w]=this,i.on("conclude",M),i.on("drain",N),i.on("error",F),i.on("message",R),i.on("ping",L),i.on("pong",j),e.setTimeout(0),e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",B),e.on("data",q),e.on("end",H),e.on("error",W),this._readyState=T.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=T.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[u.extensionName]&&this._extensions[u.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=T.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==T.CLOSED){if(this.readyState===T.CONNECTING){const e="WebSocket was closed before the connection was established";return A(this,this._req,e)}this.readyState!==T.CLOSING?(this._readyState=T.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,this._closeFrameReceived&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(e,t,n){if(this.readyState===T.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===T.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||f,t,n)):I(this,e,n)}pong(e,t,n){if(this.readyState===T.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===T.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||f,t,n)):I(this,e,n)}send(e,t,n){if(this.readyState===T.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(n=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==T.OPEN)return void I(this,e,n);const i={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[u.extensionName]||(i.compress=!1),this._sender.send(e||f,i,n)}terminate(){if(this.readyState!==T.CLOSED){if(this.readyState===T.CONNECTING){const e="WebSocket was closed before the connection was established";return A(this,this._req,e)}this._socket&&(this._readyState=T.CLOSING,this._socket.destroy())}}}function P(e){return e.path=e.socketPath,o.connect(e)}function O(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=o.isIP(e.host)?"":e.host),a.connect(e)}function A(e,t,n){e._readyState=T.CLOSING;const i=new Error(n);Error.captureStackTrace(i,A),t.setHeader?(t.abort(),t.once("abort",e.emitClose.bind(e)),e.emit("error",i)):(t.destroy(i),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function I(e,t,n){if(t){const n=k(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}if(n){n(new Error(`WebSocket is not open: readyState ${e.readyState} (${C[e.readyState]})`))}}function M(e,t){const n=this[w];n._socket.removeListener("data",q),n._socket.resume(),n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,1005===e?n.close():n.close(e,t)}function N(){this[w]._socket.resume()}function F(e){const t=this[w];t._socket.removeListener("data",q),t._readyState=T.CLOSING,t._closeCode=e[g],t.emit("error",e),t._socket.destroy()}function D(){this[w].emitClose()}function R(e){this[w].emit("message",e)}function L(e){const t=this[w];t.pong(e,!t._isServer,b),t.emit("ping",e)}function j(e){this[w].emit("pong",e)}function B(){const e=this[w];this.removeListener("close",B),this.removeListener("end",H),e._readyState=T.CLOSING,e._socket.read(),e._receiver.end(),this.removeListener("data",q),this[w]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",D),e._receiver.on("finish",D))}function q(e){this[w]._receiver.write(e)||this.pause()}function H(){const e=this[w];e._readyState=T.CLOSING,e._receiver.end(),this.end()}function W(){const e=this[w];this.removeListener("error",W),this.on("error",b),e&&(e._readyState=T.CLOSING,this.destroy())}C.forEach((e,t)=>{const n={enumerable:!0,value:t};Object.defineProperty(T.prototype,e,n),Object.defineProperty(T,e,n)}),["binaryType","bufferedAmount","extensions","protocol","readyState","url"].forEach(e=>{Object.defineProperty(T.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(T.prototype,"on"+e,{configurable:!0,enumerable:!0,get(){const t=this.listeners(e);for(let e=0;e<t.length;e++)if(t[e]._listener)return t[e]._listener},set(t){const n=this.listeners(e);for(let t=0;t<n.length;t++)n[t]._listener&&this.removeListener(e,n[t]);this.addEventListener(e,t)}})}),T.prototype.addEventListener=y,T.prototype.removeEventListener=v,e.exports=T},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("url")},function(e,t,n){"use strict";const{Writable:i}=n(18),r=n(42),{BINARY_TYPES:s,EMPTY_BUFFER:o,kStatusCode:a,kWebSocket:c}=n(25),{concat:l,toArrayBuffer:d,unmask:u}=n(43),{isValidStatusCode:h,isValidUTF8:p}=n(82);function m(e,t,n,i){const r=new e(n?"Invalid WebSocket frame: "+t:t);return Error.captureStackTrace(r,m),r[a]=i,r}e.exports=class extends i{constructor(e,t,n,i){super(),this._binaryType=e||s[0],this[c]=void 0,this._extensions=t||{},this._isServer=!!n,this._maxPayload=0|i,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(e,t,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=t.slice(e),t.slice(0,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0],i=t.length-e;e>=n.length?t.set(this._buffers.shift(),i):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),i),this._buffers[0]=n.slice(e)),e-=n.length}while(e>0);return t}startLoop(e){let t;this._loop=!0;do{switch(this._state){case 0:t=this.getInfo();break;case 1:t=this.getPayloadLength16();break;case 2:t=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:t=this.getData(e);break;default:return void(this._loop=!1)}}while(this._loop);e(t)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const e=this.consume(2);if(0!=(48&e[0]))return this._loop=!1,m(RangeError,"RSV2 and RSV3 must be clear",!0,1002);const t=64==(64&e[0]);if(t&&!this._extensions[r.extensionName])return this._loop=!1,m(RangeError,"RSV1 must be clear",!0,1002);if(this._fin=128==(128&e[0]),this._opcode=15&e[0],this._payloadLength=127&e[1],0===this._opcode){if(t)return this._loop=!1,m(RangeError,"RSV1 must be clear",!0,1002);if(!this._fragmented)return this._loop=!1,m(RangeError,"invalid opcode 0",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,m(RangeError,"invalid opcode "+this._opcode,!0,1002);this._compressed=t}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,m(RangeError,"invalid opcode "+this._opcode,!0,1002);if(!this._fin)return this._loop=!1,m(RangeError,"FIN must be set",!0,1002);if(t)return this._loop=!1,m(RangeError,"RSV1 must be clear",!0,1002);if(this._payloadLength>125)return this._loop=!1,m(RangeError,"invalid payload length "+this._payloadLength,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&e[1]),this._isServer){if(!this._masked)return this._loop=!1,m(RangeError,"MASK must be set",!0,1002)}else if(this._masked)return this._loop=!1,m(RangeError,"MASK must be clear",!0,1002);if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const e=this.consume(8),t=e.readUInt32BE(0);return t>Math.pow(2,21)-1?(this._loop=!1,m(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009)):(this._payloadLength=t*Math.pow(2,32)+e.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,m(RangeError,"Max payload size exceeded",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=o;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&u(t,this._mask)}return this._opcode>7?this.controlMessage(t):this._compressed?(this._state=5,void this.decompress(t,e)):(t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage())}decompress(e,t){this._extensions[r.extensionName].decompress(e,this._fin,(e,n)=>{if(e)return t(e);if(n.length){if(this._messageLength+=n.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return t(m(RangeError,"Max payload size exceeded",!1,1009));this._fragments.push(n)}const i=this.dataMessage();if(i)return t(i);this.startLoop(t)})}dataMessage(){if(this._fin){const e=this._messageLength,t=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let n;n="nodebuffer"===this._binaryType?l(t,e):"arraybuffer"===this._binaryType?d(l(t,e)):t,this.emit("message",n)}else{const n=l(t,e);if(!p(n))return this._loop=!1,m(Error,"invalid UTF-8 sequence",!0,1007);this.emit("message",n.toString())}}this._state=0}controlMessage(e){if(8===this._opcode)if(this._loop=!1,0===e.length)this.emit("conclude",1005,""),this.end();else{if(1===e.length)return m(RangeError,"invalid payload length 1",!0,1002);{const t=e.readUInt16BE(0);if(!h(t))return m(RangeError,"invalid status code "+t,!0,1002);const n=e.slice(2);if(!p(n))return m(Error,"invalid UTF-8 sequence",!0,1007);this.emit("conclude",t,n.toString()),this.end()}}else 9===this._opcode?this.emit("ping",e):this.emit("pong",e);this._state=0}}},function(e,t,n){"use strict";try{const e=n(!function(){var e=new Error("Cannot find module 'utf-8-validate'");throw e.code="MODULE_NOT_FOUND",e}());t.isValidUTF8="object"==typeof e?e.Validation.isValidUTF8:e}catch(e){t.isValidUTF8=()=>!0}t.isValidStatusCode=e=>e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},function(e,t,n){"use strict";const{randomFillSync:i}=n(41),r=n(42),{EMPTY_BUFFER:s}=n(25),{isValidStatusCode:o}=n(82),{mask:a,toBuffer:c}=n(43),l=Buffer.alloc(4);class d{constructor(e,t){this._extensions=t||{},this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(e,t){const n=t.mask&&t.readOnly;let r=t.mask?6:2,s=e.length;e.length>=65536?(r+=8,s=127):e.length>125&&(r+=2,s=126);const o=Buffer.allocUnsafe(n?e.length+r:r);return o[0]=t.fin?128|t.opcode:t.opcode,t.rsv1&&(o[0]|=64),o[1]=s,126===s?o.writeUInt16BE(e.length,2):127===s&&(o.writeUInt32BE(0,2),o.writeUInt32BE(e.length,6)),t.mask?(i(l,0,4),o[1]|=128,o[r-4]=l[0],o[r-3]=l[1],o[r-2]=l[2],o[r-1]=l[3],n?(a(e,l,o,r,e.length),[o]):(a(e,l,e,0,e.length),[o,e])):[o,e]}close(e,t,n,i){let r;if(void 0===e)r=s;else{if("number"!=typeof e||!o(e))throw new TypeError("First argument must be a valid error code number");if(void 0===t||""===t)r=Buffer.allocUnsafe(2),r.writeUInt16BE(e,0);else{const n=Buffer.byteLength(t);if(n>123)throw new RangeError("The message must not be greater than 123 bytes");r=Buffer.allocUnsafe(2+n),r.writeUInt16BE(e,0),r.write(t,2)}}this._deflating?this.enqueue([this.doClose,r,n,i]):this.doClose(r,n,i)}doClose(e,t,n){this.sendFrame(d.frame(e,{fin:!0,rsv1:!1,opcode:8,mask:t,readOnly:!1}),n)}ping(e,t,n){const i=c(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPing,i,t,c.readOnly,n]):this.doPing(i,t,c.readOnly,n)}doPing(e,t,n,i){this.sendFrame(d.frame(e,{fin:!0,rsv1:!1,opcode:9,mask:t,readOnly:n}),i)}pong(e,t,n){const i=c(e);if(i.length>125)throw new RangeError("The data size must not be greater than 125 bytes");this._deflating?this.enqueue([this.doPong,i,t,c.readOnly,n]):this.doPong(i,t,c.readOnly,n)}doPong(e,t,n,i){this.sendFrame(d.frame(e,{fin:!0,rsv1:!1,opcode:10,mask:t,readOnly:n}),i)}send(e,t,n){const i=c(e),s=this._extensions[r.extensionName];let o=t.binary?2:1,a=t.compress;if(this._firstFragment?(this._firstFragment=!1,a&&s&&(a=i.length>=s._threshold),this._compress=a):(a=!1,o=0),t.fin&&(this._firstFragment=!0),s){const e={fin:t.fin,rsv1:a,opcode:o,mask:t.mask,readOnly:c.readOnly};this._deflating?this.enqueue([this.dispatch,i,this._compress,e,n]):this.dispatch(i,this._compress,e,n)}else this.sendFrame(d.frame(i,{fin:t.fin,rsv1:!1,opcode:o,mask:t.mask,readOnly:c.readOnly}),n)}dispatch(e,t,n,i){if(!t)return void this.sendFrame(d.frame(e,n),i);const s=this._extensions[r.extensionName];this._bufferedBytes+=e.length,this._deflating=!0,s.compress(e,n.fin,(t,r)=>{if(this._socket.destroyed){const e=new Error("The socket was closed while data was being compressed");"function"==typeof i&&i(e);for(let t=0;t<this._queue.length;t++){const n=this._queue[t][4];"function"==typeof n&&n(e)}}else this._bufferedBytes-=e.length,this._deflating=!1,n.readOnly=!1,this.sendFrame(d.frame(r,n),i),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[1].length,Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[1].length,this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}e.exports=d},function(e,t,n){"use strict";const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function r(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}e.exports={format:function(e){return Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>[t].concat(Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(e){const t=Object.create(null);if(void 0===e||""===e)return t;let n,s,o=Object.create(null),a=!1,c=!1,l=!1,d=-1,u=-1,h=0;for(;h<e.length;h++){const p=e.charCodeAt(h);if(void 0===n)if(-1===u&&1===i[p])-1===d&&(d=h);else if(32===p||9===p)-1===u&&-1!==d&&(u=h);else{if(59!==p&&44!==p)throw new SyntaxError("Unexpected character at index "+h);{if(-1===d)throw new SyntaxError("Unexpected character at index "+h);-1===u&&(u=h);const i=e.slice(d,u);44===p?(r(t,i,o),o=Object.create(null)):n=i,d=u=-1}}else if(void 0===s)if(-1===u&&1===i[p])-1===d&&(d=h);else if(32===p||9===p)-1===u&&-1!==d&&(u=h);else if(59===p||44===p){if(-1===d)throw new SyntaxError("Unexpected character at index "+h);-1===u&&(u=h),r(o,e.slice(d,u),!0),44===p&&(r(t,n,o),o=Object.create(null),n=void 0),d=u=-1}else{if(61!==p||-1===d||-1!==u)throw new SyntaxError("Unexpected character at index "+h);s=e.slice(d,h),d=u=-1}else if(c){if(1!==i[p])throw new SyntaxError("Unexpected character at index "+h);-1===d?d=h:a||(a=!0),c=!1}else if(l)if(1===i[p])-1===d&&(d=h);else if(34===p&&-1!==d)l=!1,u=h;else{if(92!==p)throw new SyntaxError("Unexpected character at index "+h);c=!0}else if(34===p&&61===e.charCodeAt(h-1))l=!0;else if(-1===u&&1===i[p])-1===d&&(d=h);else if(-1===d||32!==p&&9!==p){if(59!==p&&44!==p)throw new SyntaxError("Unexpected character at index "+h);{if(-1===d)throw new SyntaxError("Unexpected character at index "+h);-1===u&&(u=h);let i=e.slice(d,u);a&&(i=i.replace(/\\/g,""),a=!1),r(o,s,i),44===p&&(r(t,n,o),o=Object.create(null),n=void 0),s=void 0,d=u=-1}}else-1===u&&(u=h)}if(-1===d||l)throw new SyntaxError("Unexpected end of input");-1===u&&(u=h);const p=e.slice(d,u);return void 0===n?r(t,p,o):(void 0===s?r(o,p,!0):r(o,s,a?p.replace(/\\/g,""):p),r(t,n,o)),t}}},function(e,t,n){const i=n(33),r=n(3),s=n(1);let o=void 0;try{o=n(86)}catch(e){}const a={nosort:!0,silent:!0};let c=0;const l="win32"===process.platform,d=e=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(t=>{e[t]=e[t]||s[t],e[t+="Sync"]=e[t]||s[t]}),e.maxBusyTries=e.maxBusyTries||3,e.emfileWait=e.emfileWait||1e3,!1===e.glob&&(e.disableGlob=!0),!0!==e.disableGlob&&void 0===o)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");e.disableGlob=e.disableGlob||!1,e.glob=e.glob||a},u=(e,t,n)=>{"function"==typeof t&&(n=t,t={}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i.equal(typeof n,"function","rimraf: callback function required"),i(t,"rimraf: invalid options argument provided"),i.equal(typeof t,"object","rimraf: options should be object"),d(t);let r=0,s=null,a=0;const l=(e,i)=>e?n(e):(a=i.length,0===a?n():void i.forEach(e=>{const i=o=>{if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<t.maxBusyTries)return r++,setTimeout(()=>h(e,t,i),100*r);if("EMFILE"===o.code&&c<t.emfileWait)return setTimeout(()=>h(e,t,i),c++);"ENOENT"===o.code&&(o=null)}c=0,(e=>{s=s||e,0==--a&&n(s)})(o)};h(e,t,i)}));if(t.disableGlob||!o.hasMagic(e))return l(null,[e]);t.lstat(e,(n,i)=>{if(!n)return l(null,[e]);o(e,t.glob,l)})},h=(e,t,n)=>{i(e),i(t),i("function"==typeof n),t.lstat(e,(i,r)=>i&&"ENOENT"===i.code?n(null):(i&&"EPERM"===i.code&&l&&p(e,t,i,n),r&&r.isDirectory()?f(e,t,i,n):void t.unlink(e,i=>{if(i){if("ENOENT"===i.code)return n(null);if("EPERM"===i.code)return l?p(e,t,i,n):f(e,t,i,n);if("EISDIR"===i.code)return f(e,t,i,n)}return n(i)})))},p=(e,t,n,r)=>{i(e),i(t),i("function"==typeof r),t.chmod(e,438,i=>{i?r("ENOENT"===i.code?null:n):t.stat(e,(i,s)=>{i?r("ENOENT"===i.code?null:n):s.isDirectory()?f(e,t,n,r):t.unlink(e,r)})})},m=(e,t,n)=>{i(e),i(t);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw n}let r;try{r=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw n}r.isDirectory()?w(e,t,n):t.unlinkSync(e)},f=(e,t,n,r)=>{i(e),i(t),i("function"==typeof r),t.rmdir(e,i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?r(n):r(i):_(e,t,r)})},_=(e,t,n)=>{i(e),i(t),i("function"==typeof n),t.readdir(e,(i,s)=>{if(i)return n(i);let o,a=s.length;if(0===a)return t.rmdir(e,n);s.forEach(i=>{u(r.join(e,i),t,i=>{if(!o)return i?n(o=i):void(0==--a&&t.rmdir(e,n))})})})},g=(e,t)=>{let n;if(d(t=t||{}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i(t,"rimraf: missing options"),i.equal(typeof t,"object","rimraf: options should be object"),t.disableGlob||!o.hasMagic(e))n=[e];else try{t.lstatSync(e),n=[e]}catch(i){n=o.sync(e,t.glob)}if(n.length)for(let e=0;e<n.length;e++){const i=n[e];let r;try{r=t.lstatSync(i)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&l&&m(i,t,e)}try{r&&r.isDirectory()?w(i,t,null):t.unlinkSync(i)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return l?m(i,t,e):w(i,t,e);if("EISDIR"!==e.code)throw e;w(i,t,e)}}},w=(e,t,n)=>{i(e),i(t);try{t.rmdirSync(e)}catch(i){if("ENOENT"===i.code)return;if("ENOTDIR"===i.code)throw n;"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code||b(e,t)}},b=(e,t)=>{i(e),i(t),t.readdirSync(e).forEach(n=>g(r.join(e,n),t));const n=l?100:1;let s=0;for(;;){let i=!0;try{const r=t.rmdirSync(e,t);return i=!1,r}finally{if(++s<n&&i)continue}}};e.exports=u,u.sync=g},function(e,t,n){e.exports=b;var i=n(1),r=n(87),s=n(55),o=(s.Minimatch,n(157)),a=n(6).EventEmitter,c=n(3),l=n(33),d=n(56),u=n(159),h=n(88),p=(h.alphasort,h.alphasorti,h.setopts),m=h.ownProp,f=n(160),_=(n(2),h.childrenIgnored),g=h.isIgnored,w=n(90);function b(e,t,n){if("function"==typeof t&&(n=t,t={}),t||(t={}),t.sync){if(n)throw new TypeError("callback provided to sync glob");return u(e,t)}return new v(e,t,n)}b.sync=u;var y=b.GlobSync=u.GlobSync;function v(e,t,n){if("function"==typeof t&&(n=t,t=null),t&&t.sync){if(n)throw new TypeError("callback provided to sync glob");return new y(e,t)}if(!(this instanceof v))return new v(e,t,n);p(this,e,t),this._didRealPath=!1;var i=this.minimatch.set.length;this.matches=new Array(i),"function"==typeof n&&(n=w(n),this.on("error",n),this.on("end",(function(e){n(null,e)})));var r=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===i)return o();for(var s=0;s<i;s++)this._process(this.minimatch.set[s],s,!1,o);function o(){--r._processing,r._processing<=0&&r._finish()}}b.glob=b,b.hasMagic=function(e,t){var n=function(e,t){if(null===t||"object"!=typeof t)return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}({},t);n.noprocess=!0;var i=new v(e,n).minimatch.set;if(!e)return!1;if(i.length>1)return!0;for(var r=0;r<i[0].length;r++)if("string"!=typeof i[0][r])return!0;return!1},b.Glob=v,o(v,a),v.prototype._finish=function(){if(l(this instanceof v),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();h.finish(this),this.emit("end",this.found)}},v.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,n=0;n<this.matches.length;n++)this._realpathSet(n,i)}function i(){0==--e&&t._finish()}},v.prototype._realpathSet=function(e,t){var n=this.matches[e];if(!n)return t();var i=Object.keys(n),s=this,o=i.length;if(0===o)return t();var a=this.matches[e]=Object.create(null);i.forEach((function(n,i){n=s._makeAbs(n),r.realpath(n,s.realpathCache,(function(i,r){i?"stat"===i.syscall?a[n]=!0:s.emit("error",i):a[r]=!0,0==--o&&(s.matches[e]=a,t())}))}))},v.prototype._mark=function(e){return h.mark(this,e)},v.prototype._makeAbs=function(e){return h.makeAbs(this,e)},v.prototype.abort=function(){this.aborted=!0,this.emit("abort")},v.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},v.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var n=e[t];this._emitMatch(n[0],n[1])}}if(this._processQueue.length){var i=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<i.length;t++){var r=i[t];this._processing--,this._process(r[0],r[1],r[2],r[3])}}}},v.prototype._process=function(e,t,n,i){if(l(this instanceof v),l("function"==typeof i),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,n,i]);else{for(var r,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t,i);case 0:r=null;break;default:r=e.slice(0,o).join("/")}var a,c=e.slice(o);null===r?a=".":d(r)||d(e.join("/"))?(r&&d(r)||(r="/"+r),a=r):a=r;var u=this._makeAbs(a);if(_(this,a))return i();c[0]===s.GLOBSTAR?this._processGlobStar(r,a,u,c,t,n,i):this._processReaddir(r,a,u,c,t,n,i)}},v.prototype._processReaddir=function(e,t,n,i,r,s,o){var a=this;this._readdir(n,s,(function(c,l){return a._processReaddir2(e,t,n,i,r,s,l,o)}))},v.prototype._processReaddir2=function(e,t,n,i,r,s,o,a){if(!o)return a();for(var l=i[0],d=!!this.minimatch.negate,u=l._glob,h=this.dot||"."===u.charAt(0),p=[],m=0;m<o.length;m++){if("."!==(_=o[m]).charAt(0)||h)(d&&!e?!_.match(l):_.match(l))&&p.push(_)}var f=p.length;if(0===f)return a();if(1===i.length&&!this.mark&&!this.stat){this.matches[r]||(this.matches[r]=Object.create(null));for(m=0;m<f;m++){var _=p[m];e&&(_="/"!==e?e+"/"+_:e+_),"/"!==_.charAt(0)||this.nomount||(_=c.join(this.root,_)),this._emitMatch(r,_)}return a()}i.shift();for(m=0;m<f;m++){_=p[m];e&&(_="/"!==e?e+"/"+_:e+_),this._process([_].concat(i),r,s,a)}a()},v.prototype._emitMatch=function(e,t){if(!this.aborted&&!g(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var n=d(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0;var r=this.statCache[n];r&&this.emit("stat",t,r),this.emit("match",t)}}},v.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var n=this,r=f("lstat\0"+e,(function(i,r){if(i&&"ENOENT"===i.code)return t();var s=r&&r.isSymbolicLink();n.symlinks[e]=s,s||!r||r.isDirectory()?n._readdir(e,!1,t):(n.cache[e]="FILE",t())}));r&&i.lstat(e,r)}},v.prototype._readdir=function(e,t,n){if(!this.aborted&&(n=f("readdir\0"+e+"\0"+t,n))){if(t&&!m(this.symlinks,e))return this._readdirInGlobStar(e,n);if(m(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return n();if(Array.isArray(r))return n(null,r)}i.readdir(e,function(e,t,n){return function(i,r){i?e._readdirError(t,i,n):e._readdirEntries(t,r,n)}}(this,e,n))}},v.prototype._readdirEntries=function(e,t,n){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<t.length;i++){var r=t[i];r="/"===e?e+r:e+"/"+r,this.cache[r]=!0}return this.cache[e]=t,n(null,t)}},v.prototype._readdirError=function(e,t,n){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var i=this._makeAbs(e);if(this.cache[i]="FILE",i===this.cwdAbs){var r=new Error(t.code+" invalid cwd "+this.cwd);r.path=this.cwd,r.code=t.code,this.emit("error",r),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return n()}},v.prototype._processGlobStar=function(e,t,n,i,r,s,o){var a=this;this._readdir(n,s,(function(c,l){a._processGlobStar2(e,t,n,i,r,s,l,o)}))},v.prototype._processGlobStar2=function(e,t,n,i,r,s,o,a){if(!o)return a();var c=i.slice(1),l=e?[e]:[],d=l.concat(c);this._process(d,r,!1,a);var u=this.symlinks[n],h=o.length;if(u&&s)return a();for(var p=0;p<h;p++){if("."!==o[p].charAt(0)||this.dot){var m=l.concat(o[p],c);this._process(m,r,!0,a);var f=l.concat(o[p],i);this._process(f,r,!0,a)}}a()},v.prototype._processSimple=function(e,t,n){var i=this;this._stat(e,(function(r,s){i._processSimple2(e,t,r,s,n)}))},v.prototype._processSimple2=function(e,t,n,i,r){if(this.matches[t]||(this.matches[t]=Object.create(null)),!i)return r();if(e&&d(e)&&!this.nomount){var s=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=c.join(this.root,e):(e=c.resolve(this.root,e),s&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),r()},v.prototype._stat=function(e,t){var n=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&m(this.cache,n)){var s=this.cache[n];if(Array.isArray(s)&&(s="DIR"),!r||"DIR"===s)return t(null,s);if(r&&"FILE"===s)return t()}var o=this.statCache[n];if(void 0!==o){if(!1===o)return t(null,o);var a=o.isDirectory()?"DIR":"FILE";return r&&"FILE"===a?t():t(null,a,o)}var c=this,l=f("stat\0"+n,(function(r,s){if(s&&s.isSymbolicLink())return i.stat(n,(function(i,r){i?c._stat2(e,n,null,s,t):c._stat2(e,n,i,r,t)}));c._stat2(e,n,r,s,t)}));l&&i.lstat(n,l)},v.prototype._stat2=function(e,t,n,i,r){if(n&&("ENOENT"===n.code||"ENOTDIR"===n.code))return this.statCache[t]=!1,r();var s="/"===e.slice(-1);if(this.statCache[t]=i,"/"===t.slice(-1)&&i&&!i.isDirectory())return r(null,!1,i);var o=!0;return i&&(o=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||o,s&&"FILE"===o?r():r(null,o,i)}},function(e,t,n){e.exports=d,d.realpath=d,d.sync=u,d.realpathSync=u,d.monkeypatch=function(){i.realpath=d,i.realpathSync=u},d.unmonkeypatch=function(){i.realpath=r,i.realpathSync=s};var i=n(1),r=i.realpath,s=i.realpathSync,o=process.version,a=/^v[0-5]\./.test(o),c=n(153);function l(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function d(e,t,n){if(a)return r(e,t,n);"function"==typeof t&&(n=t,t=null),r(e,t,(function(i,r){l(i)?c.realpath(e,t,n):n(i,r)}))}function u(e,t){if(a)return s(e,t);try{return s(e,t)}catch(n){if(l(n))return c.realpathSync(e,t);throw n}}},function(e,t,n){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.alphasort=l,t.alphasorti=c,t.setopts=function(e,t,n){n||(n={});if(n.matchBase&&-1===t.indexOf("/")){if(n.noglobstar)throw new Error("base matching requires globstar");t="**/"+t}e.silent=!!n.silent,e.pattern=t,e.strict=!1!==n.strict,e.realpath=!!n.realpath,e.realpathCache=n.realpathCache||Object.create(null),e.follow=!!n.follow,e.dot=!!n.dot,e.mark=!!n.mark,e.nodir=!!n.nodir,e.nodir&&(e.mark=!0);e.sync=!!n.sync,e.nounique=!!n.nounique,e.nonull=!!n.nonull,e.nosort=!!n.nosort,e.nocase=!!n.nocase,e.stat=!!n.stat,e.noprocess=!!n.noprocess,e.absolute=!!n.absolute,e.maxLength=n.maxLength||1/0,e.cache=n.cache||Object.create(null),e.statCache=n.statCache||Object.create(null),e.symlinks=n.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(d))}(e,n),e.changedCwd=!1;var s=process.cwd();i(n,"cwd")?(e.cwd=r.resolve(n.cwd),e.changedCwd=e.cwd!==s):e.cwd=s;e.root=n.root||r.resolve(e.cwd,"/"),e.root=r.resolve(e.root),"win32"===process.platform&&(e.root=e.root.replace(/\\/g,"/"));e.cwdAbs=o(e.cwd)?e.cwd:u(e,e.cwd),"win32"===process.platform&&(e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));e.nomount=!!n.nomount,n.nonegate=!0,n.nocomment=!0,e.minimatch=new a(t,n),e.options=e.minimatch.options},t.ownProp=i,t.makeAbs=u,t.finish=function(e){for(var t=e.nounique,n=t?[]:Object.create(null),i=0,r=e.matches.length;i<r;i++){var s=e.matches[i];if(s&&0!==Object.keys(s).length){var o=Object.keys(s);t?n.push.apply(n,o):o.forEach((function(e){n[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[i];t?n.push(a):n[a]=!0}}t||(n=Object.keys(n));e.nosort||(n=n.sort(e.nocase?c:l));if(e.mark){for(i=0;i<n.length;i++)n[i]=e._mark(n[i]);e.nodir&&(n=n.filter((function(t){var n=!/\/$/.test(t),i=e.cache[t]||e.cache[u(e,t)];return n&&i&&(n="DIR"!==i&&!Array.isArray(i)),n})))}e.ignore.length&&(n=n.filter((function(t){return!h(e,t)})));e.found=n},t.mark=function(e,t){var n=u(e,t),i=e.cache[n],r=t;if(i){var s="DIR"===i||Array.isArray(i),o="/"===t.slice(-1);if(s&&!o?r+="/":!s&&o&&(r=r.slice(0,-1)),r!==t){var a=u(e,r);e.statCache[a]=e.statCache[n],e.cache[a]=e.cache[n]}}return r},t.isIgnored=h,t.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var r=n(3),s=n(55),o=n(56),a=s.Minimatch;function c(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}function l(e,t){return e.localeCompare(t)}function d(e){var t=null;if("/**"===e.slice(-3)){var n=e.replace(/(\/\*\*)+$/,"");t=new a(n,{dot:!0})}return{matcher:new a(e,{dot:!0}),gmatcher:t}}function u(e,t){var n=t;return n="/"===t.charAt(0)?r.join(e.root,t):o(t)||""===t?t:e.changedCwd?r.resolve(e.cwd,t):r.resolve(t),"win32"===process.platform&&(n=n.replace(/\\/g,"/")),n}function h(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){i[e]=t[e]})),i;function i(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var i=t.apply(this,e),r=e[e.length-1];return"function"==typeof i&&i!==r&&Object.keys(r).forEach((function(e){i[e]=r[e]})),i}}},function(e,t,n){var i=n(89);function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=i(r),e.exports.strict=i(s),r.proto=r((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.colorSchemes=t.mediaTypes=t.kLifecycleEvents=void 0,t.kLifecycleEvents=new Set(["load","domcontentloaded","networkidle"]),t.mediaTypes=new Set(["screen","print"]),t.colorSchemes=new Set(["dark","light","no-preference"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kScreenshotDuringNavigationError=t.Screenshotter=void 0;const i=n(4),r=n(11),s=n(0);t.Screenshotter=class{constructor(e){this._queue=new o,this._page=e,this._queue=new o}async _originalViewportSize(){const e=this._page.viewportSize();let t=e;if(!t){const e=await this._page.mainFrame()._utilityContext();t=await e.evaluateInternal(()=>({width:window.innerWidth,height:window.innerHeight}))}return{viewportSize:t,originalViewportSize:e}}async _fullPageSize(){const e=await this._page.mainFrame()._utilityContext(),n=await e.evaluateInternal(()=>document.body&&document.documentElement?{width:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.body.clientWidth,document.documentElement.clientWidth),height:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}:null);if(!n)throw new Error(t.kScreenshotDuringNavigationError);return n}async screenshotPage(e,t){const n=c(t);return this._queue.postTask(async()=>{const{viewportSize:i,originalViewportSize:r}=await this._originalViewportSize();if(t.fullPage){const s=await this._fullPageSize();let o={x:0,y:0,width:s.width,height:s.height},c=null;const l=s.width<=i.width&&s.height<=i.height;this._page._delegate.canScreenshotOutsideViewport()||l||(c=s,e.throwIfAborted(),await this._page.setViewportSize(c),e.cleanupWhenAborted(()=>this._restoreViewport(r))),t.clip&&(o=a(t.clip,o));const d=await this._screenshot(e,n,o,void 0,t);return e.throwIfAborted(),c&&await this._restoreViewport(r),d}const s=t.clip?a(t.clip,i):{x:0,y:0,...i};return await this._screenshot(e,n,void 0,s,t)}).catch(l)}async screenshotElement(e,t,n={}){const r=c(n);return this._queue.postTask(async()=>{const{viewportSize:o,originalViewportSize:a}=await this._originalViewportSize();await t._waitAndScrollIntoViewIfNeeded(e);let c=await t.boundingBox();s.assert(c,"Node is either not visible or not an HTMLElement"),s.assert(0!==c.width,"Node has 0 width."),s.assert(0!==c.height,"Node has 0 height.");let l=null;const d=c.width<=o.width&&c.height<=o.height;this._page._delegate.canScreenshotOutsideViewport()||d||(l=i.helper.enclosingIntSize({width:Math.max(o.width,c.width),height:Math.max(o.height,c.height)}),e.throwIfAborted(),await this._page.setViewportSize(l),e.cleanupWhenAborted(()=>this._restoreViewport(a)),await t._waitAndScrollIntoViewIfNeeded(e),c=await t.boundingBox(),s.assert(c,"Node is either not visible or not an HTMLElement"),s.assert(0!==c.width,"Node has 0 width."),s.assert(0!==c.height,"Node has 0 height."));const u=await this._page.mainFrame()._utilityContext(),h=await u.evaluateInternal(()=>({x:window.scrollX,y:window.scrollY})),p={...c};p.x+=h.x,p.y+=h.y;const m=await this._screenshot(e,r,i.helper.enclosingIntRect(p),void 0,n);return e.throwIfAborted(),l&&await this._restoreViewport(a),m}).catch(l)}async _screenshot(e,t,n,i,r){r.__testHookBeforeScreenshot&&await r.__testHookBeforeScreenshot(),e.throwIfAborted();const s=r.omitBackground&&"png"===t;s&&(await this._page._delegate.setBackgroundColor({r:0,g:0,b:0,a:0}),e.cleanupWhenAborted(()=>this._page._delegate.setBackgroundColor()));const o=await this._page._delegate.takeScreenshot(t,n,i,r.quality);return e.throwIfAborted(),s&&await this._page._delegate.setBackgroundColor(),e.throwIfAborted(),r.__testHookAfterScreenshot&&await r.__testHookAfterScreenshot(),o}async _restoreViewport(e){s.assert(!this._page._delegate.canScreenshotOutsideViewport()),e?await this._page.setViewportSize(e):await this._page._delegate.resetViewport()}};class o{constructor(){this._chain=Promise.resolve()}postTask(e){const t=this._chain.then(e);return this._chain=t.catch(()=>{}),t}}function a(e,t){const n={x:Math.max(0,Math.min(e.x,t.width)),y:Math.max(0,Math.min(e.y,t.height))},i=Math.max(0,Math.min(e.x+e.width,t.width)),r=Math.max(0,Math.min(e.y+e.height,t.height)),o={x:n.x,y:n.y,width:i-n.x,height:r-n.y};return s.assert(o.width&&o.height,"Clipped area is either empty or outside the resulting image"),o}function c(e){let t=null;return e.type&&(s.assert("png"===e.type||"jpeg"===e.type,"Unknown options.type value: "+e.type),t=e.type),t||(t="png"),void 0!==e.quality&&(s.assert("jpeg"===t,"options.quality is unsupported for the "+t+" screenshots"),s.assert("number"==typeof e.quality,"Expected options.quality to be a number but found "+typeof e.quality),s.assert(Number.isInteger(e.quality),"Expected options.quality to be an integer"),s.assert(e.quality>=0&&e.quality<=100,"Expected options.quality to be between 0 and 100 (inclusive), got "+e.quality)),e.clip&&(s.assert("number"==typeof e.clip.x,"Expected options.clip.x to be a number but found "+typeof e.clip.x),s.assert("number"==typeof e.clip.y,"Expected options.clip.y to be a number but found "+typeof e.clip.y),s.assert("number"==typeof e.clip.width,"Expected options.clip.width to be a number but found "+typeof e.clip.width),s.assert("number"==typeof e.clip.height,"Expected options.clip.height to be a number but found "+typeof e.clip.height),s.assert(0!==e.clip.width,"Expected options.clip.width not to be 0."),s.assert(0!==e.clip.height,"Expected options.clip.height not to be 0.")),t}function l(e){throw"object"==typeof e&&e instanceof Error&&e.message.includes("Execution context was destroyed")&&r.rewriteErrorMessage(e,t.kScreenshotDuringNavigationError),e}t.kScreenshotDuringNavigationError="Cannot take a screenshot while page is navigating"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleMessage=void 0;t.ConsoleMessage=class{constructor(e,t,n,i){this._type=e,this._text=t,this._args=n,this._location=i||{url:"",lineNumber:0,columnNumber:0}}type(){return this._type}text(){return void 0===this._text&&(this._text=this._args.map(e=>e._value).join(" ")),this._text}args(){return this._args}location(){return this._location}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.macEditingCommands=void 0,t.macEditingCommands={Backspace:"deleteBackward:",Enter:"insertNewline:",NumpadEnter:"insertNewline:",Escape:"cancelOperation:",ArrowUp:"moveUp:",ArrowDown:"moveDown:",ArrowLeft:"moveLeft:",ArrowRight:"moveRight:",F5:"complete:",Delete:"deleteForward:",Home:"scrollToBeginningOfDocument:",End:"scrollToEndOfDocument:",PageUp:"scrollPageUp:",PageDown:"scrollPageDown:","Shift+Backspace":"deleteBackward:","Shift+Enter":"insertNewline:","Shift+NumpadEnter":"insertNewline:","Shift+Escape":"cancelOperation:","Shift+ArrowUp":"moveUpAndModifySelection:","Shift+ArrowDown":"moveDownAndModifySelection:","Shift+ArrowLeft":"moveLeftAndModifySelection:","Shift+ArrowRight":"moveRightAndModifySelection:","Shift+F5":"complete:","Shift+Delete":"deleteForward:","Shift+Home":"moveToBeginningOfDocumentAndModifySelection:","Shift+End":"moveToEndOfDocumentAndModifySelection:","Shift+PageUp":"pageUpAndModifySelection:","Shift+PageDown":"pageDownAndModifySelection:","Shift+Numpad5":"delete:","Control+Tab":"selectNextKeyView:","Control+Enter":"insertLineBreak:","Control+NumpadEnter":"insertLineBreak:","Control+Quote":"insertSingleQuoteIgnoringSubstitution:","Control+KeyA":"moveToBeginningOfParagraph:","Control+KeyB":"moveBackward:","Control+KeyD":"deleteForward:","Control+KeyE":"moveToEndOfParagraph:","Control+KeyF":"moveForward:","Control+KeyH":"deleteBackward:","Control+KeyK":"deleteToEndOfParagraph:","Control+KeyL":"centerSelectionInVisibleArea:","Control+KeyN":"moveDown:","Control+KeyO":["insertNewlineIgnoringFieldEditor:","moveBackward:"],"Control+KeyP":"moveUp:","Control+KeyT":"transpose:","Control+KeyV":"pageDown:","Control+KeyY":"yank:","Control+Backspace":"deleteBackwardByDecomposingPreviousCharacter:","Control+ArrowUp":"scrollPageUp:","Control+ArrowDown":"scrollPageDown:","Control+ArrowLeft":"moveToLeftEndOfLine:","Control+ArrowRight":"moveToRightEndOfLine:","Shift+Control+Enter":"insertLineBreak:","Shift+Control+NumpadEnter":"insertLineBreak:","Shift+Control+Tab":"selectPreviousKeyView:","Shift+Control+Quote":"insertDoubleQuoteIgnoringSubstitution:","Shift+Control+KeyA":"moveToBeginningOfParagraphAndModifySelection:","Shift+Control+KeyB":"moveBackwardAndModifySelection:","Shift+Control+KeyE":"moveToEndOfParagraphAndModifySelection:","Shift+Control+KeyF":"moveForwardAndModifySelection:","Shift+Control+KeyN":"moveDownAndModifySelection:","Shift+Control+KeyP":"moveUpAndModifySelection:","Shift+Control+KeyV":"pageDownAndModifySelection:","Shift+Control+Backspace":"deleteBackwardByDecomposingPreviousCharacter:","Shift+Control+ArrowUp":"scrollPageUp:","Shift+Control+ArrowDown":"scrollPageDown:","Shift+Control+ArrowLeft":"moveToLeftEndOfLineAndModifySelection:","Shift+Control+ArrowRight":"moveToRightEndOfLineAndModifySelection:","Alt+Backspace":"deleteWordBackward:","Alt+Enter":"insertNewlineIgnoringFieldEditor:","Alt+NumpadEnter":"insertNewlineIgnoringFieldEditor:","Alt+Escape":"complete:","Alt+ArrowUp":["moveBackward:","moveToBeginningOfParagraph:"],"Alt+ArrowDown":["moveForward:","moveToEndOfParagraph:"],"Alt+ArrowLeft":"moveWordLeft:","Alt+ArrowRight":"moveWordRight:","Alt+Delete":"deleteWordForward:","Alt+PageUp":"pageUp:","Alt+PageDown":"pageDown:","Shift+Alt+Backspace":"deleteWordBackward:","Shift+Alt+Enter":"insertNewlineIgnoringFieldEditor:","Shift+Alt+NumpadEnter":"insertNewlineIgnoringFieldEditor:","Shift+Alt+Escape":"complete:","Shift+Alt+ArrowUp":"moveParagraphBackwardAndModifySelection:","Shift+Alt+ArrowDown":"moveParagraphForwardAndModifySelection:","Shift+Alt+ArrowLeft":"moveWordLeftAndModifySelection:","Shift+Alt+ArrowRight":"moveWordRightAndModifySelection:","Shift+Alt+Delete":"deleteWordForward:","Shift+Alt+PageUp":"pageUp:","Shift+Alt+PageDown":"pageDown:","Control+Alt+KeyB":"moveWordBackward:","Control+Alt+KeyF":"moveWordForward:","Control+Alt+Backspace":"deleteWordBackward:","Shift+Control+Alt+KeyB":"moveWordBackwardAndModifySelection:","Shift+Control+Alt+KeyF":"moveWordForwardAndModifySelection:","Shift+Control+Alt+Backspace":"deleteWordBackward:","Meta+NumpadSubtract":"cancel:","Meta+Backspace":"deleteToBeginningOfLine:","Meta+ArrowUp":"moveToBeginningOfDocument:","Meta+ArrowDown":"moveToEndOfDocument:","Meta+ArrowLeft":"moveToLeftEndOfLine:","Meta+ArrowRight":"moveToRightEndOfLine:","Shift+Meta+NumpadSubtract":"cancel:","Shift+Meta+Backspace":"deleteToBeginningOfLine:","Shift+Meta+ArrowUp":"moveToBeginningOfDocumentAndModifySelection:","Shift+Meta+ArrowDown":"moveToEndOfDocumentAndModifySelection:","Shift+Meta+ArrowLeft":"moveToLeftEndOfLineAndModifySelection:","Shift+Meta+ArrowRight":"moveToRightEndOfLineAndModifySelection:","Meta+KeyA":"selectAll:"}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ffmpegExecutable=t.printDepsWindowsExecutable=void 0;const i=n(1),r=n(14),s=n(3);function o(t){try{const n=s.join(e,"..","..",...t);if(i.existsSync(n))return n}catch(e){}}t.printDepsWindowsExecutable=function(){return o(["bin","PrintDeps.exe"])},t.ffmpegExecutable=function(){let e;return e="win32"===process.platform?"x64"===r.arch()?"ffmpeg-win64.exe":"ffmpeg-win32.exe":"darwin"===process.platform?"ffmpeg-mac":"ffmpeg-linux",o(["third_party","ffmpeg",e])}}).call(this,"/")},function(e,t){e.exports=require("readline")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserDirectory=t.markerFilePath=t.browserDirectory=t.browsersPath=t.executablePath=t.windowsExeAndDllDirectories=t.linuxLddDirectories=t.hostPlatform=void 0;const i=n(63),r=n(14),s=n(3),o=n(98),a=n(0);t.hostPlatform=(()=>{const e=r.platform();if("darwin"===e){const[e,t]=i.execSync("sw_vers -productVersion",{stdio:["ignore","pipe","ignore"]}).toString("utf8").trim().split(".").map(e=>parseInt(e,10));let n=!1;e>=11&&(n="1"===i.execSync("sysctl -in hw.optional.arm64",{stdio:["ignore","pipe","ignore"]}).toString().trim());return`mac${10===e?`${e}.${t}`:""+e}${n?"-arm64":""}`}if("linux"===e){const e=o.getUbuntuVersionSync();return parseInt(e,10)<=19?"ubuntu18.04":"ubuntu20.04"}return"win32"===e?"x64"===r.arch()?"win64":"win32":e})(),t.linuxLddDirectories=function(e,t){return"chromium"===t.name?[s.join(e,"chrome-linux")]:"firefox"===t.name?[s.join(e,"firefox")]:"webkit"===t.name?[s.join(e,"minibrowser-gtk"),s.join(e,"minibrowser-gtk","bin"),s.join(e,"minibrowser-gtk","lib"),s.join(e,"minibrowser-wpe"),s.join(e,"minibrowser-wpe","bin"),s.join(e,"minibrowser-wpe","lib")]:[]},t.windowsExeAndDllDirectories=function(e,t){return"chromium"===t.name?[s.join(e,"chrome-win")]:"firefox"===t.name?[s.join(e,"firefox")]:"webkit"===t.name?[e]:[]},t.executablePath=function(e,n){let i;return"chromium"===n.name&&(i=new Map([["ubuntu18.04",["chrome-linux","chrome"]],["ubuntu20.04",["chrome-linux","chrome"]],["mac10.13",["chrome-mac","Chromium.app","Contents","MacOS","Chromium"]],["mac10.14",["chrome-mac","Chromium.app","Contents","MacOS","Chromium"]],["mac10.15",["chrome-mac","Chromium.app","Contents","MacOS","Chromium"]],["mac11",["chrome-mac","Chromium.app","Contents","MacOS","Chromium"]],["mac11-arm64",["chrome-mac","Chromium.app","Contents","MacOS","Chromium"]],["win32",["chrome-win","chrome.exe"]],["win64",["chrome-win","chrome.exe"]]]).get(t.hostPlatform)),"firefox"===n.name&&(i=new Map([["ubuntu18.04",["firefox","firefox"]],["ubuntu20.04",["firefox","firefox"]],["mac10.13",["firefox","Nightly.app","Contents","MacOS","firefox"]],["mac10.14",["firefox","Nightly.app","Contents","MacOS","firefox"]],["mac10.15",["firefox","Nightly.app","Contents","MacOS","firefox"]],["mac11",["firefox","Nightly.app","Contents","MacOS","firefox"]],["mac11-arm64",["firefox","Nightly.app","Contents","MacOS","firefox"]],["win32",["firefox","firefox.exe"]],["win64",["firefox","firefox.exe"]]]).get(t.hostPlatform)),"webkit"===n.name&&(i=new Map([["ubuntu18.04",["pw_run.sh"]],["ubuntu20.04",["pw_run.sh"]],["mac10.13",void 0],["mac10.14",["pw_run.sh"]],["mac10.15",["pw_run.sh"]],["mac11",["pw_run.sh"]],["mac11-arm64",["pw_run.sh"]],["win32",["Playwright.exe"]],["win64",["Playwright.exe"]]]).get(t.hostPlatform)),i?s.join(e,...i):void 0};const c=(()=>{const e=a.getFromENV("PLAYWRIGHT_BROWSERS_PATH");if("0"!==e)return e||s.join(function(){if("linux"===process.platform)return process.env.XDG_CACHE_HOME||s.join(r.homedir(),".cache");if("darwin"===process.platform)return s.join(r.homedir(),"Library","Caches");if("win32"===process.platform)return process.env.LOCALAPPDATA||s.join(r.homedir(),"AppData","Local");throw new Error("Unsupported platform: "+process.platform)}(),"ms-playwright")})();function l(e,t){return s.join(e,`${t.name}-${t.revision}`)}t.browsersPath=function(e){return c||s.join(e,".local-browsers")},t.browserDirectory=l,t.markerFilePath=function(e,t){return s.join(l(e,t),"INSTALLATION_COMPLETE")},t.isBrowserDirectory=function(e){const t=s.basename(e);return t.startsWith("chromium-")||t.startsWith("firefox-")||t.startsWith("webkit-")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUbuntuVersionSync=t.getUbuntuVersion=void 0;const i=n(1),r=n(14),s=n(2).promisify(i.readFile.bind(i));function o(e){const t=new Map;for(const n of e.split("\n")){const e=n.split("="),i=e.shift();let r=e.join("=").trim();r.startsWith('"')&&r.endsWith('"')&&(r=r.substring(1,r.length-1)),i&&t.set(i.toLowerCase(),r)}return t.get("name")&&"ubuntu"===t.get("name").toLowerCase()&&t.get("version_id")||""}t.getUbuntuVersion=async function(){if("linux"!==r.platform())return"";const e=await s("/etc/os-release","utf8").catch(e=>"");return e?o(e):""},t.getUbuntuVersionSync=function(){if("linux"!==r.platform())return"";try{const e=i.readFileSync("/etc/os-release","utf8");return e?o(e):""}catch(e){return""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Electron=t.ElectronApplication=void 0;const i=n(14),r=n(46),s=n(35),o=n(60),a=n(22),c=n(9),l=n(12),d=n(185),u=n(62),h=n(8),p=n(17),m=n(6),f=n(4),_=n(96),g=n(10);class w extends m.EventEmitter{constructor(e,t){super(),this._windows=new Set,this._lastWindowId=0,this._timeoutSettings=new l.TimeoutSettings,this._browserContext=e._defaultContext,this._browserContext.on(h.BrowserContext.Events.Close,()=>{Promise.resolve().then(()=>this.emit(w.Events.Close))}),this._browserContext.on(h.BrowserContext.Events.Page,e=>this._onPage(e)),this._nodeConnection=t,this._nodeSession=t.rootSession}async _onPage(e){const t=++this._lastWindowId;e.on(c.Page.Events.Close,()=>{e.browserWindow.dispose(),this._windows.delete(e)}),e._browserWindowId=t,this._windows.add(e);const n=await this._nodeElectronHandle.evaluateHandle(({BrowserWindow:e},t)=>e.fromId(t),t).catch(e=>{});n&&(e.browserWindow=n,await p.runAbortableTask(t=>e.mainFrame()._waitForLoadState(t,"domcontentloaded"),e._timeoutSettings.navigationTimeout({})).catch(e=>{}),this.emit(w.Events.Window,e))}async newBrowserWindow(e){const t=await this._nodeElectronHandle.evaluate(async({BrowserWindow:e},t)=>{const n=new e(t);return n.loadURL("about:blank"),n.id},e);for(const e of this._windows)if(e._browserWindowId===t)return e;return await this._waitForEvent(w.Events.Window,e=>e._browserWindowId===t)}context(){return this._browserContext}async close(){const e=this._waitForEvent(w.Events.Close);await this._nodeElectronHandle.evaluate(({app:e})=>e.quit()),this._nodeConnection.close(),await e}async _waitForEvent(e,t){const n=new p.ProgressController;return e!==w.Events.Close&&this._browserContext._closePromise.then(e=>n.abort(e)),n.run(n=>f.helper.waitForEvent(n,this,e,t).promise,this._timeoutSettings.timeout({}))}async _init(){this._nodeSession.on("Runtime.executionContextCreated",e=>{e.context.auxData&&e.context.auxData.isDefault&&(this._nodeExecutionContext=new a.ExecutionContext(new o.CRExecutionContext(this._nodeSession,e.context)))}),await this._nodeSession.send("Runtime.enable",{}).catch(e=>{}),this._nodeElectronHandle=await a.evaluate(this._nodeExecutionContext,!1,"process.mainModule.require('electron')")}}t.ElectronApplication=w,w.Events={Close:"close",Window:"window"};function b(e,t,n){return new Promise((i,r)=>{const s=_.createInterface({input:t.stderr}),o=new Error("Process failed to launch!"),a=[f.helper.addEventListener(s,"line",(function(e){const t=e.match(n);if(!t)return;c(),i(t)})),f.helper.addEventListener(s,"close",r.bind(null,o)),f.helper.addEventListener(t,"exit",r.bind(null,o)),f.helper.addEventListener(t,"error",r.bind(null,o))];function c(){f.helper.removeEventListeners(a)}e.cleanupWhenAborted(c)})}t.Electron=class{async launch(e,t={}){const{args:n=[],handleSIGINT:o=!0,handleSIGTERM:a=!0,handleSIGHUP:c=!0}=t,h=new p.ProgressController;return h.setLogName("browser"),h.run(async l=>{let h=void 0;const p=["--inspect=0","--remote-debugging-port=0",...n];if("linux"===i.platform()){process.geteuid&&0===process.geteuid()&&-1===p.indexOf("--no-sandbox")&&p.push("--no-sandbox")}const m=new g.RecentLogsCollector,{launchedProcess:_,gracefullyClose:y,kill:v}=await u.launchProcess({executablePath:e,args:p,env:t.env?u.envArrayToObject(t.env):process.env,handleSIGINT:o,handleSIGTERM:a,handleSIGHUP:c,log:e=>{l.log(e),m.log(e)},stdio:"pipe",cwd:t.cwd,tempDirectories:[],attemptToGracefullyClose:()=>h.close(),onExit:()=>{}}),x=await b(l,_,/^Debugger listening on (ws:\/\/.*)$/),S=await d.WebSocketTransport.connect(l,x[1]),k=new s.CRConnection(S,f.helper.debugProtocolLogger(),m),C=await b(l,_,/^DevTools listening on (ws:\/\/.*)$/),E=await d.WebSocketTransport.connect(l,C[1]),T={name:"electron",isChromium:!0,headful:!0,persistent:{noDefaultViewport:!0},browserProcess:{onclose:void 0,process:_,close:y,kill:v},protocolLogger:f.helper.debugProtocolLogger(),browserLogsCollector:m},P=await r.CRBrowser.connect(E,T);return h=new w(P,k),await h._init(),h},l.TimeoutSettings.timeout(t))}}},function(e,t,n){"use strict";let i=n(2),r=n(18),s=e.exports=function(){r.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};i.inherits(s,r),s.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),process.nextTick(function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},s.prototype.write=function(e,t){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;let n;return n=Buffer.isBuffer(e)?e:Buffer.from(e,t||this._encoding),this._buffers.push(n),this._buffered+=n.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused},s.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},s.prototype.destroySoon=s.prototype.end,s.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("Unexpected end of input")),this.destroy()},s.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},s.prototype._processReadAllowingLess=function(e){this._reads.shift();let t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))},s.prototype._processRead=function(e){this._reads.shift();let t=0,n=0,i=Buffer.alloc(e.length);for(;t<e.length;){let r=this._buffers[n++],s=Math.min(r.length,e.length-t);r.copy(i,t,0,s),t+=s,s!==r.length&&(this._buffers[--n]=r.slice(s))}n>0&&this._buffers.splice(0,n),this._buffered-=e.length,e.func.call(this,i)},s.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else{if(!(this._buffered>=e.length))break;this._processRead(e)}}this._buffers&&!this.writable&&this._end()}catch(e){this.emit("error",e)}}},function(e,t,n){"use strict";let i=n(102),r=n(103);function s(e,t,n){let i=e*t;return 8!==n&&(i=Math.ceil(i/(8/n))),i}let o=e.exports=function(e,t){let n=e.width,r=e.height,o=e.interlace,a=e.bpp,c=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],o){let e=i.getImagePasses(n,r);for(let t=0;t<e.length;t++)this._images.push({byteWidth:s(e[t].width,a,c),height:e[t].height,lineIndex:0})}else this._images.push({byteWidth:s(n,a,c),height:r,lineIndex:0});this._xComparison=8===c?a:16===c?2*a:1};o.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},o.prototype._unFilterType1=function(e,t,n){let i=this._xComparison,r=i-1;for(let s=0;s<n;s++){let n=e[1+s],o=s>r?t[s-i]:0;t[s]=n+o}},o.prototype._unFilterType2=function(e,t,n){let i=this._lastLine;for(let r=0;r<n;r++){let n=e[1+r],s=i?i[r]:0;t[r]=n+s}},o.prototype._unFilterType3=function(e,t,n){let i=this._xComparison,r=i-1,s=this._lastLine;for(let o=0;o<n;o++){let n=e[1+o],a=s?s[o]:0,c=o>r?t[o-i]:0,l=Math.floor((c+a)/2);t[o]=n+l}},o.prototype._unFilterType4=function(e,t,n){let i=this._xComparison,s=i-1,o=this._lastLine;for(let a=0;a<n;a++){let n=e[1+a],c=o?o[a]:0,l=a>s?t[a-i]:0,d=a>s&&o?o[a-i]:0,u=r(l,c,d);t[a]=n+u}},o.prototype._reverseFilterLine=function(e){let t,n=e[0],i=this._images[this._imageIndex],r=i.byteWidth;if(0===n)t=e.slice(1,r+1);else switch(t=Buffer.alloc(r),n){case 1:this._unFilterType1(e,t,r);break;case 2:this._unFilterType2(e,t,r);break;case 3:this._unFilterType3(e,t,r);break;case 4:this._unFilterType4(e,t,r);break;default:throw new Error("Unrecognised filter type - "+n)}this.write(t),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=t,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}},function(e,t,n){"use strict";let i=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];t.getImagePasses=function(e,t){let n=[],r=e%8,s=t%8,o=(e-r)/8,a=(t-s)/8;for(let e=0;e<i.length;e++){let t=i[e],c=o*t.x.length,l=a*t.y.length;for(let e=0;e<t.x.length&&t.x[e]<r;e++)c++;for(let e=0;e<t.y.length&&t.y[e]<s;e++)l++;c>0&&l>0&&n.push({width:c,height:l,index:e})}return n},t.getInterlaceIterator=function(e){return function(t,n,r){let s=t%i[r].x.length,o=(t-s)/i[r].x.length*8+i[r].x[s],a=n%i[r].y.length;return 4*o+((n-a)/i[r].y.length*8+i[r].y[a])*e*4}}},function(e,t,n){"use strict";e.exports=function(e,t,n){let i=e+t-n,r=Math.abs(i-e),s=Math.abs(i-t),o=Math.abs(i-n);return r<=s&&r<=o?e:s<=o?t:n}},function(e,t,n){"use strict";let i=n(37),r=n(105),s=e.exports=function(e,t){this._options=e,e.checkCRC=!1!==e.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[i.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[i.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[i.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[i.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[i.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[i.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.finished=t.finished,this.simpleTransparency=t.simpleTransparency,this.headersFinished=t.headersFinished||function(){}};s.prototype.start=function(){this.read(i.PNG_SIGNATURE.length,this._parseSignature.bind(this))},s.prototype._parseSignature=function(e){let t=i.PNG_SIGNATURE;for(let n=0;n<t.length;n++)if(e[n]!==t[n])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},s.prototype._parseChunkBegin=function(e){let t=e.readUInt32BE(0),n=e.readUInt32BE(4),s="";for(let t=4;t<8;t++)s+=String.fromCharCode(e[t]);let o=Boolean(32&e[4]);if(this._hasIHDR||n===i.TYPE_IHDR){if(this._crc=new r,this._crc.write(Buffer.from(s)),this._chunks[n])return this._chunks[n](t);o?this.read(t+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+s))}else this.error(new Error("Expected IHDR on beggining"))},s.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},s.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},s.prototype._parseChunkEnd=function(e){let t=e.readInt32BE(0),n=this._crc.crc32();this._options.checkCRC&&n!==t?this.error(new Error("Crc error - "+t+" - "+n)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},s.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))},s.prototype._parseIHDR=function(e){this._crc.write(e);let t=e.readUInt32BE(0),n=e.readUInt32BE(4),r=e[8],s=e[9],o=e[10],a=e[11],c=e[12];if(8!==r&&4!==r&&2!==r&&1!==r&&16!==r)return void this.error(new Error("Unsupported bit depth "+r));if(!(s in i.COLORTYPE_TO_BPP_MAP))return void this.error(new Error("Unsupported color type"));if(0!==o)return void this.error(new Error("Unsupported compression method"));if(0!==a)return void this.error(new Error("Unsupported filter method"));if(0!==c&&1!==c)return void this.error(new Error("Unsupported interlace method"));this._colorType=s;let l=i.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:n,depth:r,interlace:Boolean(c),palette:Boolean(s&i.COLORTYPE_PALETTE),color:Boolean(s&i.COLORTYPE_COLOR),alpha:Boolean(s&i.COLORTYPE_ALPHA),bpp:l,colorType:s}),this._handleChunkEnd()},s.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))},s.prototype._parsePLTE=function(e){this._crc.write(e);let t=Math.floor(e.length/3);for(let n=0;n<t;n++)this._palette.push([e[3*n],e[3*n+1],e[3*n+2],255]);this.palette(this._palette),this._handleChunkEnd()},s.prototype._handleTRNS=function(e){this.simpleTransparency(),this.read(e,this._parseTRNS.bind(this))},s.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===i.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(e.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(let t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===i.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===i.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()},s.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))},s.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/i.GAMMA_DIVISION),this._handleChunkEnd()},s.prototype._handleIDAT=function(e){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-e,this._parseIDAT.bind(this,e))},s.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===i.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(t);let n=e-t.length;n>0?this._handleIDAT(n):this._handleChunkEnd()},s.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))},s.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}},function(e,t,n){"use strict";let i=[];!function(){for(let e=0;e<256;e++){let t=e;for(let e=0;e<8;e++)1&t?t=3988292384^t>>>1:t>>>=1;i[e]=t}}();let r=e.exports=function(){this._crc=-1};r.prototype.write=function(e){for(let t=0;t<e.length;t++)this._crc=i[255&(this._crc^e[t])]^this._crc>>>8;return!0},r.prototype.crc32=function(){return-1^this._crc},r.crc32=function(e){let t=-1;for(let n=0;n<e.length;n++)t=i[255&(t^e[n])]^t>>>8;return-1^t}},function(e,t,n){"use strict";let i=n(102),r=[function(){},function(e,t,n,i){if(i===t.length)throw new Error("Ran out of data");let r=t[i];e[n]=r,e[n+1]=r,e[n+2]=r,e[n+3]=255},function(e,t,n,i){if(i+1>=t.length)throw new Error("Ran out of data");let r=t[i];e[n]=r,e[n+1]=r,e[n+2]=r,e[n+3]=t[i+1]},function(e,t,n,i){if(i+2>=t.length)throw new Error("Ran out of data");e[n]=t[i],e[n+1]=t[i+1],e[n+2]=t[i+2],e[n+3]=255},function(e,t,n,i){if(i+3>=t.length)throw new Error("Ran out of data");e[n]=t[i],e[n+1]=t[i+1],e[n+2]=t[i+2],e[n+3]=t[i+3]}],s=[function(){},function(e,t,n,i){let r=t[0];e[n]=r,e[n+1]=r,e[n+2]=r,e[n+3]=i},function(e,t,n){let i=t[0];e[n]=i,e[n+1]=i,e[n+2]=i,e[n+3]=t[1]},function(e,t,n,i){e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=i},function(e,t,n){e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3]}];function o(e,t,n,i,s,o){let a=e.width,c=e.height,l=e.index;for(let e=0;e<c;e++)for(let c=0;c<a;c++){let a=n(c,e,l);r[i](t,s,a,o),o+=i}return o}function a(e,t,n,i,r,o){let a=e.width,c=e.height,l=e.index;for(let e=0;e<c;e++){for(let c=0;c<a;c++){let a=r.get(i),d=n(c,e,l);s[i](t,a,d,o)}r.resetAfterLine()}}t.dataToBitMap=function(e,t){let n,r,s=t.width,c=t.height,l=t.depth,d=t.bpp,u=t.interlace;8!==l&&(n=function(e,t){let n=[],i=0;function r(){if(i===e.length)throw new Error("Ran out of data");let r,s,o,a,c,l,d,u,h=e[i];switch(i++,t){default:throw new Error("unrecognised depth");case 16:d=e[i],i++,n.push((h<<8)+d);break;case 4:d=15&h,u=h>>4,n.push(u,d);break;case 2:c=3&h,l=h>>2&3,d=h>>4&3,u=h>>6&3,n.push(u,d,l,c);break;case 1:r=1&h,s=h>>1&1,o=h>>2&1,a=h>>3&1,c=h>>4&1,l=h>>5&1,d=h>>6&1,u=h>>7&1,n.push(u,d,l,c,a,o,s,r)}}return{get:function(e){for(;n.length<e;)r();let t=n.slice(0,e);return n=n.slice(e),t},resetAfterLine:function(){n.length=0},end:function(){if(i!==e.length)throw new Error("extra data found")}}}(e,l)),r=l<=8?Buffer.alloc(s*c*4):new Uint16Array(s*c*4);let h,p,m=Math.pow(2,l)-1,f=0;if(u)h=i.getImagePasses(s,c),p=i.getInterlaceIterator(s,c);else{let e=0;p=function(){let t=e;return e+=4,t},h=[{width:s,height:c}]}for(let t=0;t<h.length;t++)8===l?f=o(h[t],r,p,d,e,f):a(h[t],r,p,d,n,m);if(8===l){if(f!==e.length)throw new Error("extra data found")}else n.end();return r}},function(e,t,n){"use strict";e.exports=function(e,t){let n=t.depth,i=t.width,r=t.height,s=t.colorType,o=t.transColor,a=t.palette,c=e;return 3===s?function(e,t,n,i,r){let s=0;for(let o=0;o<i;o++)for(let i=0;i<n;i++){let n=r[e[s]];if(!n)throw new Error("index "+e[s]+" not in palette");for(let e=0;e<4;e++)t[s+e]=n[e];s+=4}}(e,c,i,r,a):(o&&function(e,t,n,i,r){let s=0;for(let o=0;o<i;o++)for(let i=0;i<n;i++){let n=!1;if(1===r.length?r[0]===e[s]&&(n=!0):r[0]===e[s]&&r[1]===e[s+1]&&r[2]===e[s+2]&&(n=!0),n)for(let e=0;e<4;e++)t[s+e]=0;s+=4}}(e,c,i,r,o),8!==n&&(16===n&&(c=Buffer.alloc(i*r*4)),function(e,t,n,i,r){let s=Math.pow(2,r)-1,o=0;for(let r=0;r<i;r++)for(let i=0;i<n;i++){for(let n=0;n<4;n++)t[o+n]=Math.floor(255*e[o+n]/s+.5);o+=4}}(e,c,i,r,n))),c}},function(e,t,n){"use strict";let i=n(37),r=n(105),s=n(203),o=n(204),a=n(21),c=e.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32768,e.deflateLevel=null!=e.deflateLevel?e.deflateLevel:9,e.deflateStrategy=null!=e.deflateStrategy?e.deflateStrategy:3,e.inputHasAlpha=null==e.inputHasAlpha||e.inputHasAlpha,e.deflateFactory=e.deflateFactory||a.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType="number"==typeof e.colorType?e.colorType:i.COLORTYPE_COLOR_ALPHA,e.inputColorType="number"==typeof e.inputColorType?e.inputColorType:i.COLORTYPE_COLOR_ALPHA,-1===[i.COLORTYPE_GRAYSCALE,i.COLORTYPE_COLOR,i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(e.colorType))throw new Error("option color type:"+e.colorType+" is not supported at present");if(-1===[i.COLORTYPE_GRAYSCALE,i.COLORTYPE_COLOR,i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(e.inputColorType))throw new Error("option input color type:"+e.inputColorType+" is not supported at present");if(8!==e.bitDepth&&16!==e.bitDepth)throw new Error("option bit depth:"+e.bitDepth+" is not supported at present")};c.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},c.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},c.prototype.filterData=function(e,t,n){let r=s(e,t,n,this._options),a=i.COLORTYPE_TO_BPP_MAP[this._options.colorType];return o(r,t,n,this._options,a)},c.prototype._packChunk=function(e,t){let n=t?t.length:0,i=Buffer.alloc(n+12);return i.writeUInt32BE(n,0),i.writeUInt32BE(e,4),t&&t.copy(i,8),i.writeInt32BE(r.crc32(i.slice(4,i.length-4)),i.length-4),i},c.prototype.packGAMA=function(e){let t=Buffer.alloc(4);return t.writeUInt32BE(Math.floor(e*i.GAMMA_DIVISION),0),this._packChunk(i.TYPE_gAMA,t)},c.prototype.packIHDR=function(e,t){let n=Buffer.alloc(13);return n.writeUInt32BE(e,0),n.writeUInt32BE(t,4),n[8]=this._options.bitDepth,n[9]=this._options.colorType,n[10]=0,n[11]=0,n[12]=0,this._packChunk(i.TYPE_IHDR,n)},c.prototype.packIDAT=function(e){return this._packChunk(i.TYPE_IDAT,e)},c.prototype.packIEND=function(){return this._packChunk(i.TYPE_IEND,null)}},function(e,t,n){"use strict";let i=e.exports=function(e){this._buffer=e,this._reads=[]};i.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})},i.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let e=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=e.length||e.allowLess))break;{this._reads.shift();let t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKExecutionContext=void 0;const i=n(36),r=n(22),s=n(45),o=n(34);t.WKExecutionContext=class{constructor(e,t){this._contextDestroyedCallback=()=>{},this._session=e,this._contextId=t,this._executionContextDestroyedPromise=new Promise((e,t)=>{this._contextDestroyedCallback=e})}_dispose(){this._contextDestroyedCallback()}async rawEvaluate(e){try{const t=await this._session.send("Runtime.evaluate",{expression:o.ensureSourceUrl(e),contextId:this._contextId,returnByValue:!1});if(t.wasThrown)throw new Error("Evaluation failed: "+t.result.description);return t.result.objectId}catch(e){throw c(e)}}async evaluateWithArguments(e,t,n,i,r){try{let o=await this._session.send("Runtime.callFunctionOn",{functionDeclaration:e,objectId:n._objectId,arguments:[{objectId:n._objectId},...i.map(e=>({value:e})),...r.map(e=>({objectId:e}))],returnByValue:!1,emulateUserGesture:!0});if(o.result.objectId&&"Promise"===o.result.className&&(o=await Promise.race([this._executionContextDestroyedPromise.then(()=>a),this._session.send("Runtime.awaitPromise",{promiseObjectId:o.result.objectId,returnByValue:!1})])),o.wasThrown)throw new Error("Evaluation failed: "+o.result.description);if(!t)return n._context.createHandle(o.result);if(o.result.objectId){if("undefined"===o.result.type)return;return await this._returnObjectByValue(n,o.result.objectId)}return s.parseEvaluationResultValue(o.result.value)}catch(e){throw c(e)}}async _returnObjectByValue(e,t){try{const n=await this._session.send("Runtime.callFunctionOn",{functionDeclaration:"object => object"+o.generateSourceUrl(),objectId:e._objectId,arguments:[{objectId:t}],returnByValue:!0});if(n.wasThrown)throw new Error("Evaluation failed: "+n.result.description);return s.parseEvaluationResultValue(n.result.value)}catch(e){throw c(e)}}async getProperties(e){const t=e._objectId;if(!t)return new Map;const n=await this._session.send("Runtime.getProperties",{objectId:t,ownProperties:!0}),i=new Map;for(const t of n.properties)t.enumerable&&t.value&&i.set(t.name,e._context.createHandle(t.value));return i}createHandle(e,t){const n="Promise"===t.className;return new r.JSHandle(e,n?"promise":t.subtype||t.type,t.objectId,function(e){const t=e.value;return"number"===e.type&&["NaN","-Infinity","Infinity","-0"].includes(e.description)?r.parseUnserializableValue(e.description):t}(t))}async releaseHandle(e){e._objectId&&await this._session.send("Runtime.releaseObject",{objectId:e._objectId}).catch(e=>{})}};const a={wasThrown:!0,result:{description:"Protocol error: Execution context was destroyed, most likely because of a navigation."}};function c(e){return i.isSwappedOutError(e)||e.message.includes("Missing injected script for given")?new Error("Execution context was destroyed, most likely because of a navigation."):e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDispatcher=void 0;const i=n(5);class r extends i.Dispatcher{constructor(e,t){super(e,t,"Stream",{})}async read(e){const t=this._object.read(Math.min(this._object.readableLength,e.size||this._object.readableLength));return{binary:t?t.toString("base64"):""}}async close(){this._object.destroy()}}t.StreamDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameDispatcher=void 0;const i=n(57),r=n(5),s=n(38),o=n(39),a=n(66),c=n(8);class l extends r.Dispatcher{constructor(e,t){super(e,t,"Frame",{url:t.url(),name:t.name(),parentFrame:r.lookupNullableDispatcher(t.parentFrame()),loadStates:Array.from(t._subtreeLifecycleEvents)}),this._frame=t,t.on(i.Frame.Events.AddLifecycle,e=>{this._dispatchEvent("loadstate",{add:e})}),t.on(i.Frame.Events.RemoveLifecycle,e=>{this._dispatchEvent("loadstate",{remove:e})}),t.on(i.Frame.Events.Navigation,e=>{const t={url:e.url,name:e.name,error:e.error?e.error.message:void 0};e.newDocument&&(t.newDocument={request:a.RequestDispatcher.fromNullable(this._scope,e.newDocument.request||null)}),this._dispatchEvent("navigated",t)})}static from(e,t){return r.existingDispatcher(t)||new l(e,t)}async goto(e,t){return await c.runAction(async t=>({response:r.lookupNullableDispatcher(await this._frame.goto(t,e.url,e))}),{...t,type:"goto",value:e.url,page:this._frame._page})}async frameElement(){return{element:new s.ElementHandleDispatcher(this._scope,await this._frame.frameElement())}}async evaluateExpression(e){return{value:o.serializeResult(await this._frame._evaluateExpression(e.expression,e.isFunction,o.parseArgument(e.arg),e.world))}}async evaluateExpressionHandle(e){return{handle:s.createHandle(this._scope,await this._frame._evaluateExpressionHandle(e.expression,e.isFunction,o.parseArgument(e.arg),e.world))}}async waitForSelector(e){return{element:s.ElementHandleDispatcher.createNullable(this._scope,await this._frame.waitForSelector(e.selector,e))}}async dispatchEvent(e){return this._frame.dispatchEvent(e.selector,e.type,o.parseArgument(e.eventInit),e)}async evalOnSelector(e){return{value:o.serializeResult(await this._frame._$evalExpression(e.selector,e.expression,e.isFunction,o.parseArgument(e.arg)))}}async evalOnSelectorAll(e){return{value:o.serializeResult(await this._frame._$$evalExpression(e.selector,e.expression,e.isFunction,o.parseArgument(e.arg)))}}async querySelector(e){return{element:s.ElementHandleDispatcher.createNullable(this._scope,await this._frame.$(e.selector))}}async querySelectorAll(e){return{elements:(await this._frame.$$(e.selector)).map(e=>new s.ElementHandleDispatcher(this._scope,e))}}async content(){return{value:await this._frame.content()}}async setContent(e,t){return await c.runAction(async t=>await this._frame.setContent(t,e.html,e),{...t,type:"setContent",value:e.html,page:this._frame._page})}async addScriptTag(e){return{element:new s.ElementHandleDispatcher(this._scope,await this._frame.addScriptTag(e))}}async addStyleTag(e){return{element:new s.ElementHandleDispatcher(this._scope,await this._frame.addStyleTag(e))}}async click(e,t){return c.runAction(async t=>await this._frame.click(t,e.selector,e),{...t,type:"click",target:e.selector,page:this._frame._page})}async dblclick(e,t){return c.runAction(async t=>await this._frame.dblclick(t,e.selector,e),{...t,type:"dblclick",target:e.selector,page:this._frame._page})}async tap(e,t){return c.runAction(async t=>await this._frame.tap(t,e.selector,e),{...t,type:"tap",target:e.selector,page:this._frame._page})}async fill(e,t){return c.runAction(async t=>await this._frame.fill(t,e.selector,e.value,e),{...t,type:"fill",value:e.value,target:e.selector,page:this._frame._page})}async focus(e){await this._frame.focus(e.selector,e)}async textContent(e){const t=await this._frame.textContent(e.selector,e);return{value:null===t?void 0:t}}async innerText(e){return{value:await this._frame.innerText(e.selector,e)}}async innerHTML(e){return{value:await this._frame.innerHTML(e.selector,e)}}async getAttribute(e){const t=await this._frame.getAttribute(e.selector,e.name,e);return{value:null===t?void 0:t}}async isChecked(e){return{value:await this._frame.isChecked(e.selector,e)}}async isDisabled(e){return{value:await this._frame.isDisabled(e.selector,e)}}async isEditable(e){return{value:await this._frame.isEditable(e.selector,e)}}async isEnabled(e){return{value:await this._frame.isEnabled(e.selector,e)}}async isHidden(e){return{value:await this._frame.isHidden(e.selector,e)}}async isVisible(e){return{value:await this._frame.isVisible(e.selector,e)}}async hover(e,t){return c.runAction(async t=>await this._frame.hover(t,e.selector,e),{...t,type:"hover",target:e.selector,page:this._frame._page})}async selectOption(e,t){return c.runAction(async t=>{const n=(e.elements||[]).map(e=>e._elementHandle);return{values:await this._frame.selectOption(t,e.selector,n,e.options||[],e)}},{...t,type:"selectOption",target:e.selector,page:this._frame._page})}async setInputFiles(e,t){return c.runAction(async t=>await this._frame.setInputFiles(t,e.selector,e.files,e),{...t,type:"setInputFiles",target:e.selector,page:this._frame._page})}async type(e,t){return c.runAction(async t=>await this._frame.type(t,e.selector,e.text,e),{...t,type:"type",value:e.text,target:e.selector,page:this._frame._page})}async press(e,t){return c.runAction(async t=>await this._frame.press(t,e.selector,e.key,e),{...t,type:"press",value:e.key,target:e.selector,page:this._frame._page})}async check(e,t){return c.runAction(async t=>await this._frame.check(t,e.selector,e),{...t,type:"check",target:e.selector,page:this._frame._page})}async uncheck(e,t){return c.runAction(async t=>await this._frame.uncheck(t,e.selector,e),{...t,type:"uncheck",target:e.selector,page:this._frame._page})}async waitForFunction(e){return{handle:s.createHandle(this._scope,await this._frame._waitForFunctionExpression(e.expression,e.isFunction,o.parseArgument(e.arg),e))}}async title(){return{value:await this._frame.title()}}}t.FrameDispatcher=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDPSessionDispatcher=void 0;const i=n(35),r=n(5);class s extends r.Dispatcher{constructor(e,t){super(e,t,"CDPSession",{},!0),t._eventListener=(e,t)=>{this._dispatchEvent("event",{method:e,params:t})},t.on(i.CRSessionEvents.Disconnected,()=>this._dispose())}async send(e){return{result:await this._object.send(e.method,e.params)}}async detach(){return this._object.detach()}}t.CDPSessionDispatcher=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserDispatcher=void 0;const i=n(47),r=n(49),s=n(113),o=n(5);class a extends o.Dispatcher{constructor(e,t){super(e,t,"Browser",{version:t.version(),name:t._options.name},!0),t.on(i.Browser.Events.Disconnected,()=>this._didClose())}_didClose(){this._dispatchEvent("close"),this._dispose()}async newContext(e){const t=await this._object.newContext(e);return e.storageState&&await t.setStorageState(e.storageState),{context:new r.BrowserContextDispatcher(this._scope,t)}}async close(){await this._object.close()}async crNewBrowserCDPSession(){if(!this._object._options.isChromium)throw new Error("CDP session is only available in Chromium");const e=this._object;return{session:new s.CDPSessionDispatcher(this._scope,await e.newBrowserCDPSession())}}async crStartTracing(e){if(!this._object._options.isChromium)throw new Error("Tracing is only available in Chromium");const t=this._object;await t.startTracing(e.page?e.page._object:void 0,e)}async crStopTracing(){if(!this._object._options.isChromium)throw new Error("Tracing is only available in Chromium");const e=this._object;return{binary:(await e.stopTracing()).toString("base64")}}}t.BrowserDispatcher=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectorsDispatcher=void 0;const i=n(5);class r extends i.Dispatcher{constructor(e,t){super(e,t,"Selectors",{})}async register(e){await this._object.register(e.name,e.source,e.contentScript)}}t.SelectorsDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;const i=n(27),r=n(28),s=n(121),o=n(7),a=n(68),c=n(51),l=n(19),d=n(52),u=n(50),h=n(69),p=n(117),m=n(118),f=n(119),_=n(20),g=n(71),w=n(233),b=n(122),y=n(234),v=n(235),x=n(67),S=n(236),k=n(237),C=n(10),E=n(70),T=n(0),P=n(123);class O extends o.ChannelOwner{constructor(e){super(e,"","",{})}}t.Connection=class{constructor(){this._objects=new Map,this._waitingForObject=new Map,this.onmessage=e=>{},this._lastId=0,this._callbacks=new Map,this._rootObject=new O(this)}async waitForObjectWithKnownName(e){return this._objects.has(e)?this._objects.get(e):new Promise(t=>this._waitingForObject.set(e,t))}getObjectWithKnownName(e){return this._objects.get(e)}async sendMessageToServer(e,t,n){const i={};Error.captureStackTrace(i);const r=i.stack.startsWith("Error")?i.stack.substring(5):i.stack,s=++this._lastId,o={id:s,guid:e,method:t,params:n};C.debugLogger.log("channel:command",o),this.onmessage({...o,metadata:{stack:r}});try{return await new Promise((e,t)=>this._callbacks.set(s,{resolve:e,reject:t}))}catch(e){const t=T.isUnderTest()&&e.stack?e.stack.substring(e.stack.indexOf(e.message)+e.message.length):"";throw e.stack=e.message+t+r,e}}_debugScopeState(){return this._rootObject._debugScopeState()}dispatch(e){const{id:t,guid:n,method:i,params:r,result:s,error:o}=e;if(t){C.debugLogger.log("channel:response",e);const n=this._callbacks.get(t);if(!n)throw new Error("Cannot find command to respond: "+t);return this._callbacks.delete(t),void(o?n.reject(_.parseError(o)):n.resolve(this._replaceGuidsWithChannels(s)))}if(C.debugLogger.log("channel:event",e),"__create__"===i)return void this._createRemoteObject(n,r.type,r.guid,r.initializer);if("__dispose__"===i){const e=this._objects.get(n);if(!e)throw new Error("Cannot find object to dispose: "+n);return void e._dispose()}const a=this._objects.get(n);if(!a)throw new Error(`Cannot find object to emit "${i}": ${n}`);a._channel.emit(i,this._replaceGuidsWithChannels(r))}_replaceGuidsWithChannels(e){if(!e)return e;if(Array.isArray(e))return e.map(e=>this._replaceGuidsWithChannels(e));if(e.guid&&this._objects.has(e.guid))return this._objects.get(e.guid)._channel;if("object"==typeof e){const t={};for(const n of Object.keys(e))t[n]=this._replaceGuidsWithChannels(e[n]);return t}return e}_createRemoteObject(e,t,n,o){const _=this._objects.get(e);if(!_)throw new Error(`Cannot find parent object ${e} to create ${n}`);let C;switch(o=this._replaceGuidsWithChannels(o),t){case"Android":C=new P.Android(_,t,n,o);break;case"AndroidSocket":C=new P.AndroidSocket(_,t,n,o);break;case"AndroidDevice":C=new P.AndroidDevice(_,t,n,o);break;case"BindingCall":C=new u.BindingCall(_,t,n,o);break;case"Browser":{const e=o.name;C="chromium"===e?new y.ChromiumBrowser(_,t,n,o):"webkit"===e?new S.WebKitBrowser(_,t,n,o):"firefox"===e?new k.FirefoxBrowser(_,t,n,o):new i.Browser(_,t,n,o);break}case"BrowserContext":{const{isChromium:e}=o;C=e?new v.ChromiumBrowserContext(_,t,n,o):new r.BrowserContext(_,t,n,o);break}case"BrowserType":C=new s.BrowserType(_,t,n,o);break;case"CDPSession":C=new g.CDPSession(_,t,n,o);break;case"ConsoleMessage":C=new p.ConsoleMessage(_,t,n,o);break;case"Dialog":C=new m.Dialog(_,t,n,o);break;case"Download":C=new f.Download(_,t,n,o);break;case"Electron":C=new b.Electron(_,t,n,o);break;case"ElectronApplication":C=new b.ElectronApplication(_,t,n,o);break;case"ElementHandle":C=new a.ElementHandle(_,t,n,o);break;case"Frame":C=new c.Frame(_,t,n,o);break;case"JSHandle":C=new l.JSHandle(_,t,n,o);break;case"Page":C=new u.Page(_,t,n,o);break;case"Playwright":C=new w.Playwright(_,t,n,o);break;case"RemoteBrowser":C=new s.RemoteBrowser(_,t,n,o);break;case"Request":C=new d.Request(_,t,n,o);break;case"Response":C=new d.Response(_,t,n,o);break;case"Route":C=new d.Route(_,t,n,o);break;case"Stream":C=new x.Stream(_,t,n,o);break;case"Selectors":C=new E.SelectorsOwner(_,t,n,o);break;case"WebSocket":C=new d.WebSocket(_,t,n,o);break;case"Worker":C=new h.Worker(_,t,n,o);break;default:throw new Error("Missing type "+t)}const T=this._waitingForObject.get(n);return T&&(T(C),this._waitingForObject.delete(n)),C}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleMessage=void 0;const i=n(2),r=n(19),s=n(7);class o extends s.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}type(){return this._initializer.type}text(){return this._initializer.text}args(){return this._initializer.args.map(r.JSHandle.from)}location(){return this._initializer.location}[i.inspect.custom](){return this.text()}}t.ConsoleMessage=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dialog=void 0;const i=n(7);class r extends i.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}type(){return this._initializer.type}message(){return this._initializer.message}defaultValue(){return this._initializer.defaultValue}async accept(e){return this._wrapApiCall("dialog.accept",async()=>{await this._channel.accept({promptText:e})})}async dismiss(){return this._wrapApiCall("dialog.dismiss",async()=>{await this._channel.dismiss()})}}t.Dialog=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Download=void 0;const i=n(7),r=n(67),s=n(1),o=n(0);class a extends i.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._browser=e._browser}static from(e){return e._object}url(){return this._initializer.url}suggestedFilename(){return this._initializer.suggestedFilename}async path(){if(this._browser&&this._browser._isRemote)throw new Error("Path is not available when using browserType.connect(). Use download.saveAs() to save a local copy.");return(await this._channel.path()).value||null}async saveAs(e){return this._wrapApiCall("download.saveAs",async()=>{if(!this._browser||!this._browser._isRemote)return void await this._channel.saveAs({path:e});const t=await this._channel.saveAsStream(),n=r.Stream.from(t.stream);await o.mkdirIfNeeded(e),await new Promise((t,i)=>{n.stream().pipe(s.createWriteStream(e)).on("finish",t).on("error",i)})})}async failure(){return(await this._channel.failure()).error||null}async createReadStream(){const e=await this._channel.stream();if(!e.stream)return null;return r.Stream.from(e.stream).stream()}async delete(){return this._channel.delete()}}t.Download=a},function(e,t,n){"use strict";let i=n(225);e.exports=new i(n(226),n(227))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteBrowser=t.BrowserType=void 0;const i=n(27),r=n(28),s=n(7),o=n(24),a=n(3),c=n(1),l=n(116),d=n(20),u=n(15),h=n(12),p=n(23),m=n(0),f=n(70),_=n(16),g=n(67);class w extends s.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._timeoutSettings=new h.TimeoutSettings}static from(e){return e._object}executablePath(){if(!this._initializer.executablePath)throw new Error("Browser is not supported on current platform");return this._initializer.executablePath}name(){return this._initializer.name}async launch(e={}){const t=e.logger;return this._wrapApiCall("browserType.launch",async()=>{m.assert(!e.userDataDir,"userDataDir option is not supported in `browserType.launch`. Use `browserType.launchPersistentContext` instead"),m.assert(!e.port,"Cannot specify a port without launching as a server.");const n={...e,ignoreDefaultArgs:Array.isArray(e.ignoreDefaultArgs)?e.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!e.ignoreDefaultArgs&&!Array.isArray(e.ignoreDefaultArgs),env:e.env?p.envObjectToArray(e.env):void 0},r=i.Browser.from((await this._channel.launch(n)).browser);return r._logger=t,r},t)}async launchServer(e={}){if(!this._serverLauncher)throw new Error("Launching server is not supported");return this._serverLauncher.launchServer(e)}async launchPersistentContext(e,t={}){return this._wrapApiCall("browserType.launchPersistentContext",async()=>{m.assert(!t.port,"Cannot specify a port without launching as a server.");const n=await r.prepareBrowserContextOptions(t),i={...n,ignoreDefaultArgs:Array.isArray(t.ignoreDefaultArgs)?t.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!t.ignoreDefaultArgs&&!Array.isArray(t.ignoreDefaultArgs),env:t.env?p.envObjectToArray(t.env):void 0,userDataDir:e},s=await this._channel.launchPersistentContext(i),o=r.BrowserContext.from(s.context);return o._options=n,o._logger=t.logger,o},t.logger)}async connect(e){const t=e.logger;return this._wrapApiCall("browserType.connect",async()=>{const n=new l.Connection,r=new o(e.wsEndpoint,[],{perMessageDeflate:!1,maxPayload:268435456,handshakeTimeout:this._timeoutSettings.timeout(e)}),s=e.slowMo?t=>setTimeout(t,e.slowMo):m.makeWaitForNextTask();return n.onmessage=e=>{r.readyState===o.OPEN?r.send(JSON.stringify(e)):setTimeout(()=>{n.dispatch({id:e.id,error:d.serializeError(new Error(_.kBrowserClosedError))})},0)},r.addEventListener("message",e=>{s(()=>n.dispatch(JSON.parse(e.data)))}),await new Promise(async(s,o)=>{if(e.__testHookBeforeCreateBrowser)try{await e.__testHookBeforeCreateBrowser()}catch(e){o(e)}r.addEventListener("open",async()=>{const e=e=>{o(new Error("Server disconnected: "+e.reason))};r.addEventListener("close",e);const a=await n.waitForObjectWithKnownName("remoteBrowser"),c=f.SelectorsOwner.from(a._initializer.selectors);f.sharedSelectors._addChannel(c);const l=i.Browser.from(a._initializer.browser);l._logger=t,l._isRemote=!0;const d=()=>{for(const e of l.contexts()){for(const t of e.pages())t._onClose();e._onClose()}l._didClose()};r.removeEventListener("close",e),r.addEventListener("close",d),l.on(u.Events.Browser.Disconnected,()=>{f.sharedSelectors._removeChannel(c),r.removeEventListener("close",d),r.close()}),s(l)}),r.addEventListener("error",e=>{r.close(),o(new Error(e.message+". Most likely ws endpoint is incorrect"))})})},t)}}t.BrowserType=w;class b extends s.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._channel.on("video",({context:e,stream:t,relativePath:n})=>this._onVideo(r.BrowserContext.from(e),g.Stream.from(t),n))}async _onVideo(e,t,n){const i=a.join(e._options.recordVideo.dir,n);await m.mkdirIfNeeded(i),t.stream().pipe(c.createWriteStream(i))}}t.RemoteBrowser=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElectronApplication=t.Electron=void 0;const i=n(28),r=n(7),s=n(50),o=n(19),a=n(12),c=n(29),l=n(15),d=n(23);class u extends r.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i)}async launch(e,t={}){const n=t.logger;return t={...t,logger:void 0},this._wrapApiCall("electron.launch",async()=>{const n={...t,env:t.env?d.envObjectToArray(t.env):void 0,executablePath:e};return h.from((await this._channel.launch(n)).electronApplication)},n)}}t.Electron=u;class h extends r.ChannelOwner{constructor(e,t,n,r){super(e,t,n,r),this._windows=new Set,this._timeoutSettings=new a.TimeoutSettings,this._channel.on("context",({context:e})=>this._context=i.BrowserContext.from(e)),this._channel.on("window",({page:e,browserWindow:t})=>{const n=s.Page.from(e);n.browserWindow=o.JSHandle.from(t),this._windows.add(n),this.emit(l.Events.ElectronApplication.Window,n),n.once(l.Events.Page.Close,()=>this._windows.delete(n))}),this._channel.on("close",()=>this.emit(l.Events.ElectronApplication.Close))}static from(e){return e._object}windows(){return[...this._windows]}async firstWindow(){return this._windows.size?this._windows.values().next().value:this.waitForEvent("window")}async newBrowserWindow(e){const t=await this._channel.newBrowserWindow({arg:o.serializeArgument(e)});return s.Page.from(t.page)}context(){return this._context}async close(){await this._channel.close()}async waitForEvent(e,t={}){const n=this._timeoutSettings.timeout("function"==typeof t?{}:t),i="function"==typeof t?t:t.predicate,r=new c.Waiter;r.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==l.Events.ElectronApplication.Close&&r.rejectOnEvent(this,l.Events.ElectronApplication.Close,new Error("Electron application closed"));const s=await r.waitForEvent(this,e,i);return r.dispose(),s}async evaluate(e,t){const n=await this._channel.evaluateExpression({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t)});return o.parseResult(n.value)}async evaluateHandle(e,t){const n=await this._channel.evaluateExpressionHandle({expression:String(e),isFunction:"function"==typeof e,arg:o.serializeArgument(t)});return o.JSHandle.from(n.handle)}}t.ElectronApplication=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidWebView=t.AndroidSocket=t.AndroidDevice=t.Android=void 0;const i=n(1),r=n(2),s=n(0),o=n(15),a=n(28),c=n(7),l=n(12),d=n(29),u=n(6);class h extends c.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._timeoutSettings=new l.TimeoutSettings}static from(e){return e._object}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}async devices(){return this._wrapApiCall("android.devices",async()=>{const{devices:e}=await this._channel.devices();return e.map(e=>p.from(e))})}}t.Android=h;class p extends c.ChannelOwner{constructor(e,t,n,i){super(e,t,n,i),this._webViews=new Map,this.input=new _(this),this._timeoutSettings=new l.TimeoutSettings(e._timeoutSettings),this._channel.on("webViewAdded",({webView:e})=>this._onWebViewAdded(e)),this._channel.on("webViewRemoved",({pid:e})=>this._onWebViewRemoved(e))}static from(e){return e._object}_onWebViewAdded(e){const t=new w(this,e);this._webViews.set(e.pid,t),this.emit(o.Events.AndroidDevice.WebView,t)}_onWebViewRemoved(e){const t=this._webViews.get(e);this._webViews.delete(e),t&&t.emit(o.Events.AndroidWebView.Close)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e),this._channel.setDefaultTimeoutNoReply({timeout:e})}serial(){return this._initializer.serial}model(){return this._initializer.model}webViews(){return[...this._webViews.values()]}async webView(e,t){const n=[...this._webViews.values()].find(t=>t.pkg()===e.pkg);return n||this.waitForEvent("webview",{...t,predicate:t=>t.pkg()===e.pkg})}async wait(e,t){await this._wrapApiCall("androidDevice.wait",async()=>{await this._channel.wait({selector:g(e),...t})})}async fill(e,t,n){await this._wrapApiCall("androidDevice.fill",async()=>{await this._channel.fill({selector:g(e),text:t,...n})})}async press(e,t,n){await this.tap(e,n),await this.input.press(t)}async tap(e,t){await this._wrapApiCall("androidDevice.tap",async()=>{await this._channel.tap({selector:g(e),...t})})}async drag(e,t,n){await this._wrapApiCall("androidDevice.drag",async()=>{await this._channel.drag({selector:g(e),dest:t,...n})})}async fling(e,t,n){await this._wrapApiCall("androidDevice.fling",async()=>{await this._channel.fling({selector:g(e),direction:t,...n})})}async longTap(e,t){await this._wrapApiCall("androidDevice.longTap",async()=>{await this._channel.longTap({selector:g(e),...t})})}async pinchClose(e,t,n){await this._wrapApiCall("androidDevice.pinchClose",async()=>{await this._channel.pinchClose({selector:g(e),percent:t,...n})})}async pinchOpen(e,t,n){await this._wrapApiCall("androidDevice.pinchOpen",async()=>{await this._channel.pinchOpen({selector:g(e),percent:t,...n})})}async scroll(e,t,n,i){await this._wrapApiCall("androidDevice.scroll",async()=>{await this._channel.scroll({selector:g(e),direction:t,percent:n,...i})})}async swipe(e,t,n,i){await this._wrapApiCall("androidDevice.swipe",async()=>{await this._channel.swipe({selector:g(e),direction:t,percent:n,...i})})}async info(e){return await this._wrapApiCall("androidDevice.info",async()=>(await this._channel.info({selector:g(e)})).info)}async tree(){return await this._wrapApiCall("androidDevice.tree",async()=>(await this._channel.tree()).tree)}async screenshot(e={}){return await this._wrapApiCall("androidDevice.screenshot",async()=>{const{binary:t}=await this._channel.screenshot(),n=Buffer.from(t,"base64");return e.path&&await r.promisify(i.writeFile)(e.path,n),n})}async close(){return this._wrapApiCall("androidDevice.close",async()=>{await this._channel.close(),this.emit(o.Events.AndroidDevice.Close)})}async shell(e){return this._wrapApiCall("androidDevice.shell",async()=>{const{result:t}=await this._channel.shell({command:e});return Buffer.from(t,"base64")})}async open(e){return this._wrapApiCall("androidDevice.open",async()=>m.from((await this._channel.open({command:e})).socket))}async installApk(e,t){return this._wrapApiCall("androidDevice.installApk",async()=>{await this._channel.installApk({file:await f(e),args:t&&t.args})})}async push(e,t,n){return this._wrapApiCall("androidDevice.push",async()=>{await this._channel.push({file:await f(e),path:t,mode:n?n.mode:void 0})})}async launchBrowser(e={}){return this._wrapApiCall("androidDevice.launchBrowser",async()=>{const t=await a.prepareBrowserContextOptions(e),{context:n}=await this._channel.launchBrowser(t);return a.BrowserContext.from(n)})}async waitForEvent(e,t={}){const n=this._timeoutSettings.timeout("function"==typeof t?{}:t),i="function"==typeof t?t:t.predicate,r=new d.Waiter;r.rejectOnTimeout(n,`Timeout while waiting for event "${e}"`),e!==o.Events.AndroidDevice.Close&&r.rejectOnEvent(this,o.Events.AndroidDevice.Close,new Error("Device closed"));const s=await r.waitForEvent(this,e,i);return r.dispose(),s}}t.AndroidDevice=p;class m extends c.ChannelOwner{static from(e){return e._object}constructor(e,t,n,i){super(e,t,n,i),this._channel.on("data",({data:e})=>this.emit(o.Events.AndroidSocket.Data,Buffer.from(e,"base64"))),this._channel.on("close",()=>this.emit(o.Events.AndroidSocket.Close))}async write(e){return this._wrapApiCall("androidDevice.write",async()=>{await this._channel.write({data:e.toString("base64")})})}async close(){return this._wrapApiCall("androidDevice.close",async()=>{await this._channel.close()})}}async function f(e){return s.isString(e)?(await r.promisify(i.readFile)(e)).toString("base64"):e.toString("base64")}t.AndroidSocket=m;class _{constructor(e){this._device=e}async type(e){return this._device._wrapApiCall("androidDevice.inputType",async()=>{await this._device._channel.inputType({text:e})})}async press(e){return this._device._wrapApiCall("androidDevice.inputPress",async()=>{await this._device._channel.inputPress({key:e})})}async tap(e){return this._device._wrapApiCall("androidDevice.inputTap",async()=>{await this._device._channel.inputTap({point:e})})}async swipe(e,t,n){return this._device._wrapApiCall("androidDevice.inputSwipe",async()=>{await this._device._channel.inputSwipe({segments:t,steps:n})})}async drag(e,t,n){return this._device._wrapApiCall("androidDevice.inputDragAndDrop",async()=>{await this._device._channel.inputDrag({from:e,to:t,steps:n})})}}function g(e){const{checkable:t,checked:n,clazz:i,clickable:r,depth:s,desc:o,enabled:a,focusable:c,focused:l,hasChild:d,hasDescendant:u,longClickable:h,pkg:p,res:m,scrollable:f,selected:_,text:w}=e,b=e=>{if(void 0!==e)return e instanceof RegExp?e.source:"^"+e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")+"$"};return{checkable:t,checked:n,clazz:b(i),pkg:b(p),desc:b(o),res:b(m),text:b(w),clickable:r,depth:s,enabled:a,focusable:c,focused:l,hasChild:d?{selector:g(d.selector)}:void 0,hasDescendant:u?{selector:g(u.selector),maxDepth:u.maxDepth}:void 0,longClickable:h,scrollable:f,selected:_}}class w extends u.EventEmitter{constructor(e,t){super(),this._device=e,this._data=t}pid(){return this._data.pid}pkg(){return this._data.pkg}async page(){return this._pagePromise||(this._pagePromise=this._fetchPage()),this._pagePromise}async _fetchPage(){return this._device._wrapApiCall("androidWebView.page",async()=>{const{context:e}=await this._device._channel.connectToWebView({pid:this._data.pid});return a.BrowserContext.from(e).pages()[0]})}}t.AndroidWebView=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return["AWS_Lambda_nodejs10.x","AWS_Lambda_nodejs12.x"].includes(process.env.AWS_EXECUTION_ENV)}},function(e,t,n){"use strict";var i;e.exports=S,S.ReadableState=x;n(6).EventEmitter;var r=function(e,t){return e.listeners(t).length},s=n(126),o=n(26).Buffer,a=global.Uint8Array||function(){};var c,l=n(2);c=l&&l.debuglog?l.debuglog("stream"):function(){};var d,u,h=n(256),p=n(127),m=n(128).getHighWaterMark,f=n(30).codes,_=f.ERR_INVALID_ARG_TYPE,g=f.ERR_STREAM_PUSH_AFTER_EOF,w=f.ERR_METHOD_NOT_IMPLEMENTED,b=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,y=n(257).emitExperimentalWarning;n(31)(S,s);var v=["error","close","destroy","pause","resume"];function x(e,t,r){i=i||n(32),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",r),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(130).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function S(e){if(i=i||n(32),!(this instanceof S))return new S(e);var t=this instanceof i;this._readableState=new x(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function k(e,t,n,i,r){c("readableAddChunk",t);var s,l=e._readableState;if(null===t)l.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}(e,l);else if(r||(s=function(e,t){var n;i=t,o.isBuffer(i)||i instanceof a||"string"==typeof t||void 0===t||e.objectMode||(n=new _("chunk",["string","Buffer","Uint8Array"],t));var i;return n}(l,t)),s)e.emit("error",s);else if(l.objectMode||t&&t.length>0)if("string"==typeof t||l.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),i)l.endEmitted?e.emit("error",new b):C(e,l,t,!0);else if(l.ended)e.emit("error",new g);else{if(l.destroyed)return!1;l.reading=!1,l.decoder&&!n?(t=l.decoder.write(t),l.objectMode||0!==t.length?C(e,l,t,!1):O(e,l)):C(e,l,t,!1)}else i||(l.reading=!1,O(e,l));return!l.ended&&(l.length<l.highWaterMark||0===l.length)}function C(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),O(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=o.from(e,t),t=""),n=!0),k(this,e,t,!1,n)},S.prototype.unshift=function(e){return k(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(e){return d||(d=n(130).StringDecoder),this._readableState.decoder=new d(e),this._readableState.encoding=this._readableState.decoder.encoding,this};function E(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function T(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,process.nextTick(P,e))}function P(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||e.emit("readable"),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,F(e)}function O(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(A,e,t))}function A(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){c("readable nexttick read 0"),e.read(0)}function N(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),F(e),t.flowing&&!t.reading&&e.read(0)}function F(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function R(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process.nextTick(L,t,e))}function L(e,t){c("endReadableNT",e.endEmitted,e.length),e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function j(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):T(this),null;if(0===(e=E(e,t))&&t.ended)return 0===t.length&&R(this),null;var i,r=t.needReadable;return c("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",r=!0),t.ended||t.reading?c("reading or ended",r=!1):r&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=E(n,t))),null===(i=e>0?D(e,t):null)?(t.needReadable=!0,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&R(this)),null!==i&&this.emit("data",i),i},S.prototype._read=function(e){this.emit("error",new w("_read()"))},S.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?a:f;function o(t,r){c("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",o),n.removeListener("end",a),n.removeListener("end",f),n.removeListener("data",u),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function a(){c("onend"),e.end()}i.endEmitted?process.nextTick(s):n.once("end",s),e.on("unpipe",o);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&r(e,"data")&&(t.flowing=!0,F(e))}}(n);e.on("drain",l);var d=!1;function u(t){c("ondata");var r=e.write(t);c("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==j(i.pipes,e))&&!d&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function h(t){c("onerror",t),f(),e.removeListener("error",h),0===r(e,"error")&&e.emit("error",t)}function p(){e.removeListener("finish",m),f()}function m(){c("onfinish"),e.removeListener("close",p),f()}function f(){c("unpipe"),n.unpipe(e)}return n.on("data",u),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",h),e.once("close",p),e.once("finish",m),e.emit("pipe",n),i.flowing||(c("pipe resume"),n.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<r;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=j(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,c("on readable",i.length,i.reading),i.length?T(this):i.reading||process.nextTick(M,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&process.nextTick(I,this),n},S.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process.nextTick(I,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(N,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){(c("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r)||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var s=0;s<v.length;s++)e.on(v[s],this.emit.bind(this,v[s]));return this._read=function(t){c("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return y("Readable[Symbol.asyncIterator]"),void 0===u&&(u=n(261)),u(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=D,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}})},function(e,t,n){e.exports=n(18)},function(e,t,n){"use strict";function i(e,t){s(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||process.nextTick(s,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(process.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t?(process.nextTick(r,n),t(e)):process.nextTick(r,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";var i=n(30).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,r){var s=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,r,n);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new i(r?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;e.entry=null;for(;i;){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}var r;e.exports=S,S.WritableState=x;var s={deprecate:n(259)},o=n(126),a=n(26).Buffer,c=global.Uint8Array||function(){};var l,d=n(127),u=n(128).getHighWaterMark,h=n(30).codes,p=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,f=h.ERR_MULTIPLE_CALLBACK,_=h.ERR_STREAM_CANNOT_PIPE,g=h.ERR_STREAM_DESTROYED,w=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,y=h.ERR_UNKNOWN_ENCODING;function v(){}function x(e,t,s){r=r||n(32),e=e||{},"boolean"!=typeof s&&(s=t instanceof r),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=u(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if("function"!=typeof r)throw new f;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,r){--t.pendingcb,n?(process.nextTick(r,i),process.nextTick(O,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(r(i),e._writableState.errorEmitted=!0,e.emit("error",i),O(e,t))}(e,n,i,t,r);else{var s=T(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||E(e,n),i?process.nextTick(C,e,n,s,r):C(e,n,s,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function S(e){var t=this instanceof(r=r||n(32));if(!t&&!l.call(S,this))return new S(e);this._writableState=new x(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),o.call(this)}function k(e,t,n,i,r,s,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new g("write")):n?e._writev(r,t.onwrite):e._write(r,s,t.onwrite),t.sync=!1}function C(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),O(e,t)}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,s=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var a=0,c=!0;n;)s[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;s.allBuffers=c,k(e,t,!0,t.length,s,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,d=n.encoding,u=n.callback;if(k(e,t,!1,t.objectMode?1:l.length,l,d,u),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function T(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var n=T(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}n(31)(S,o),x.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(x.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===S&&(e&&e._writableState instanceof x)}})):l=function(e){return e instanceof this},S.prototype.pipe=function(){this.emit("error",new _)},S.prototype.write=function(e,t,n){var i,r=this._writableState,s=!1,o=!r.objectMode&&(i=e,a.isBuffer(i)||i instanceof c);return o&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=v),r.ending?function(e,t){var n=new b;e.emit("error",n),process.nextTick(t,n)}(this,n):(o||function(e,t,n,i){var r;return null===n?r=new w:"string"==typeof n||t.objectMode||(r=new p("chunk",["string","Buffer"],n)),!r||(e.emit("error",r),process.nextTick(i,r),!1)}(this,r,e,n))&&(r.pendingcb++,s=function(e,t,n,i,r,s){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,i,r);i!==o&&(n=!0,r="buffer",i=o)}var c=t.objectMode?1:i.length;t.length+=c;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:s,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,c,i,r,s);return l}(this,r,o,e,t,n)),s},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||E(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new y(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new m("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,O(e,t),n&&(t.finished?process.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=d.destroy,S.prototype._undestroy=d.undestroy,S.prototype._destroy=function(e,t){t(e)}},function(e,t,n){"use strict";var i=n(260).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=a,t=4;break;case"base64":this.text=d,this.end=u,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function a(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"ï¿½";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"ï¿½";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"ï¿½"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function u(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"ï¿½":t},s.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=o(t[i]);if(r>=0)return r>0&&(e.lastNeed=r-1),r;if(--i<n||-2===r)return 0;if((r=o(t[i]))>=0)return r>0&&(e.lastNeed=r-2),r;if(--i<n||-2===r)return 0;if((r=o(t[i]))>=0)return r>0&&(2===r?r=0:e.lastNeed=r-3),r;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";e.exports=d;var i=n(30).codes,r=i.ERR_METHOD_NOT_IMPLEMENTED,s=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=i.ERR_TRANSFORM_WITH_LENGTH_0,c=n(32);function l(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function d(e){if(!(this instanceof d))return new d(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}n(31)(d,c),d.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},d.prototype._transform=function(e,t,n){n(new r("_transform()"))},d.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},d.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},d.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t){var n=Buffer.alloc,i="0".charCodeAt(0),r=Buffer.from("ustar\0","binary"),s=Buffer.from("00","binary"),o=Buffer.from("ustar ","binary"),a=Buffer.from(" \0","binary"),c=parseInt("7777",8),l=function(e,t,n,i){for(;n<i;n++)if(e[n]===t)return n;return i},d=function(e){for(var t=256,n=0;n<148;n++)t+=e[n];for(var i=156;i<512;i++)t+=e[i];return t},u=function(e,t){return(e=e.toString(8)).length>t?"7777777777777777777".slice(0,t)+" ":"0000000000000000000".slice(0,t-e.length)+e+" "};var h=function(e,t,n){if(128&(e=e.slice(t,t+n))[t=0])return function(e){var t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}for(var n=!1,i=[],r=e.length-1;r>0;r--){var s=e[r];t?i.push(s):n&&0===s?i.push(0):n?(n=!1,i.push(256-s)):i.push(255-s)}var o=0,a=i.length;for(r=0;r<a;r++)o+=i[r]*Math.pow(256,r);return t?o:-1*o}(e);for(;t<e.length&&32===e[t];)t++;for(var i=(r=l(e,32,t,e.length),s=e.length,o=e.length,"number"!=typeof r?o:(r=~~r)>=s?s:r>=0||(r+=s)>=0?r:0);t<i&&0===e[t];)t++;return i===t?0:parseInt(e.slice(t,i).toString(),8);var r,s,o},p=function(e,t,n,i){return e.slice(t,l(e,0,t,t+n)).toString(i)},m=function(e){var t=Buffer.byteLength(e),n=Math.floor(Math.log(t)/Math.log(10))+1;return t+n>=Math.pow(10,n)&&n++,t+n+e};t.decodeLongPath=function(e,t){return p(e,0,e.length,t)},t.encodePax=function(e){var t="";e.name&&(t+=m(" path="+e.name+"\n")),e.linkname&&(t+=m(" linkpath="+e.linkname+"\n"));var n=e.pax;if(n)for(var i in n)t+=m(" "+i+"="+n[i]+"\n");return Buffer.from(t)},t.decodePax=function(e){for(var t={};e.length;){for(var n=0;n<e.length&&32!==e[n];)n++;var i=parseInt(e.slice(0,n).toString(),10);if(!i)return t;var r=e.slice(n+1,i-1).toString(),s=r.indexOf("=");if(-1===s)return t;t[r.slice(0,s)]=r.slice(s+1),e=e.slice(i)}return t},t.encode=function(e){var t=n(512),o=e.name,a="";if(5===e.typeflag&&"/"!==o[o.length-1]&&(o+="/"),Buffer.byteLength(o)!==o.length)return null;for(;Buffer.byteLength(o)>100;){var l=o.indexOf("/");if(-1===l)return null;a+=a?"/"+o.slice(0,l):o.slice(0,l),o=o.slice(l+1)}return Buffer.byteLength(o)>100||Buffer.byteLength(a)>155||e.linkname&&Buffer.byteLength(e.linkname)>100?null:(t.write(o),t.write(u(e.mode&c,6),100),t.write(u(e.uid,6),108),t.write(u(e.gid,6),116),t.write(u(e.size,11),124),t.write(u(e.mtime.getTime()/1e3|0,11),136),t[156]=i+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(e.type),e.linkname&&t.write(e.linkname,157),r.copy(t,257),s.copy(t,263),e.uname&&t.write(e.uname,265),e.gname&&t.write(e.gname,297),t.write(u(e.devmajor||0,6),329),t.write(u(e.devminor||0,6),337),a&&t.write(a,345),t.write(u(d(t),6),148),t)},t.decode=function(e,t){var n=0===e[156]?0:e[156]-i,s=p(e,0,100,t),c=h(e,100,8),l=h(e,108,8),u=h(e,116,8),m=h(e,124,12),f=h(e,136,12),_=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(n),g=0===e[157]?null:p(e,157,100,t),w=p(e,265,32),b=p(e,297,32),y=h(e,329,8),v=h(e,337,8),x=d(e);if(256===x)return null;if(x!==h(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(0===r.compare(e,257,263))e[345]&&(s=p(e,345,155,t)+"/"+s);else if(0!==o.compare(e,257,263)||0!==a.compare(e,263,265))throw new Error("Invalid tar header: unknown format.");return 0===n&&s&&"/"===s[s.length-1]&&(n=5),{name:s,mode:c,uid:l,gid:u,size:m,mtime:new Date(1e3*f),type:_,linkname:g,uname:w,gname:b,devmajor:y,devminor:v}}},function(e,t,n){var i=n(134),r=function(){},s=function(e,t,n){if("function"==typeof t)return s(e,null,t);t||(t={}),n=i(n||r);var o=e._writableState,a=e._readableState,c=t.readable||!1!==t.readable&&e.readable,l=t.writable||!1!==t.writable&&e.writable,d=function(){e.writable||u()},u=function(){l=!1,c||n.call(e)},h=function(){c=!1,l||n.call(e)},p=function(t){n.call(e,t?new Error("exited with error code: "+t):null)},m=function(t){n.call(e,t)},f=function(){return(!c||a&&a.ended)&&(!l||o&&o.ended)?void 0:n.call(e,new Error("premature close"))},_=function(){e.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?l&&!o&&(e.on("end",d),e.on("close",d)):(e.on("complete",u),e.on("abort",f),e.req?_():e.on("request",_)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",p),e.on("end",h),e.on("finish",u),!1!==t.error&&e.on("error",m),e.on("close",f),function(){e.removeListener("complete",u),e.removeListener("abort",f),e.removeListener("request",_),e.req&&e.req.removeListener("finish",u),e.removeListener("end",d),e.removeListener("close",d),e.removeListener("finish",u),e.removeListener("exit",p),e.removeListener("end",h),e.removeListener("error",m),e.removeListener("close",f)}};e.exports=s},function(e,t,n){var i=n(267);function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}e.exports=i(r),e.exports.strict=i(s),r.proto=r((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},,function(e,t,n){function i(e,t,n,i,r,s,o){try{var a=e[s](o),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(i,r)}const r=n(137);t.handler=function(){var e,t=(e=function*(e,t){const n=JSON.parse(e.body).pageToScreenshot,i=yield r.launchChromium(),s=yield i.newContext(),o=yield s.newPage();yield o.goto(n);const a=yield o.screenshot({encoding:"binary"});return yield i.close(),{statusCode:200,body:JSON.stringify({message:"Complete screenshot of "+n,buffer:a})}},function(){var t=this,n=arguments;return new Promise((function(r,s){var o=e.apply(t,n);function a(e){i(o,r,s,a,c,"next",e)}function c(e){i(o,r,s,a,c,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}()},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(138),t)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.loadFont=t.launchChromium=t.getChromiumArgs=void 0;const i=n(1),r=n(1),s=n(3),o=n(2),a=n(73),c=n(139),l=n(124),d=n(247),u=n(248),h=n(249),{inflate:p}=n(250);function m(e){const t=["--autoplay-policy=user-gesture-required","--disable-background-networking","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-component-update","--disable-default-apps","--disable-dev-shm-usage","--disable-domain-reliability","--disable-extensions","--disable-features=AudioServiceOutOfProcess","--disable-hang-monitor","--disable-ipc-flooding-protection","--disable-notifications","--disable-offer-store-unmasked-wallet-cards","--disable-popup-blocking","--disable-print-preview","--disable-prompt-on-repost","--disable-renderer-backgrounding","--disable-setuid-sandbox","--disable-speech-api","--disable-sync","--disk-cache-size=33554432","--hide-scrollbars","--ignore-gpu-blacklist","--metrics-recording-only","--mute-audio","--no-default-browser-check","--no-first-run","--no-pings","--no-sandbox","--no-zygote","--password-store=basic","--use-gl=swiftshader","--use-mock-keychain"];return!0===e?t.push("--single-process"):t.push("--start-maximized"),t}t.getChromiumArgs=m,t.launchChromium=async function(t){const n=d.default(),r=m(n),o=await async function(t){if(!0!==t)return;if(!0===await u.default("/tmp/chromium")){for(const e of await i.promises.readdir("/tmp"))!0===e.startsWith("core.chromium")&&await i.promises.unlink("/tmp/"+e);return"/tmp/chromium"}const n=s.join(e,"bin"),r=[p(n+"/chromium.br"),p(n+"/swiftshader.tar.br")];return l.default()&&r.push(p(n+"/aws.tar.br")),(await Promise.all(r)).shift()}(n),a={...await h.default(),...(null==t?void 0:t.env)||{}};return await c.chromium.launch({args:r,executablePath:o,headless:n,env:a,...t})},t.loadFont=async e=>new Promise(async(t,n)=>{const c=new URL(e),l=s.join(h.AWS_FONT_DIR,c.pathname.split("/").pop());if(await o.promisify(r.exists)(l))return void t();r.existsSync(h.AWS_FONT_DIR)||await i.promises.mkdir(h.AWS_FONT_DIR);const d=r.createWriteStream(l);d.once("error",e=>n(e)),a.get(e,e=>{e.on("data",e=>{d.write(e)}),e.once("end",()=>{d.end(()=>t())})})})}).call(this,"/")},function(e,t,n){e.exports=n(140)},function(e,t,n){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0});const r=n(5),s=n(141),o=n(215),a=n(116),c=n(238),l=n(239),d=n(241),u=n(244),h=n(3);e.exports=function(){const e=new s.Playwright(h.join(i,".."),n(246).browsers);l.installDebugController(),d.installTracer(),u.installHarTracer();const t=new a.Connection,p=new r.DispatcherConnection;p.onmessage=e=>t.dispatch(e),t.onmessage=e=>p.dispatch(e),new o.PlaywrightDispatcher(p.rootDispatcher(),e);const m=t.getObjectWithKnownName("Playwright");return m.chromium._serverLauncher=new c.BrowserServerLauncherImpl(e.chromium),m.firefox._serverLauncher=new c.BrowserServerLauncherImpl(e.firefox),m.webkit._serverLauncher=new c.BrowserServerLauncherImpl(e.webkit),p.onmessage=e=>setImmediate(()=>t.dispatch(e)),t.onmessage=e=>setImmediate(()=>p.dispatch(e)),m._toImpl=e=>p._dispatchers.get(e._guid)._object,m}()}).call(this,"/")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Playwright=void 0;const i=n(75),r=n(180),s=n(181),o=n(99),a=n(186),c=n(59),l=n(193);t.Playwright=class{constructor(e,t){this.selectors=c.serverSelectors;const n=t.find(e=>"chromium"===e.name);this.chromium=new s.Chromium(e,n);const d=t.find(e=>"firefox"===e.name);this.firefox=new a.Firefox(e,d);const u=t.find(e=>"webkit"===e.name);this.webkit=new l.WebKit(e,u),this.electron=new o.Electron,this.android=new i.Android(new r.AdbBackend)}}},function(e,t,n){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let i=0,r=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(i++,"%c"===e&&(r=i))}),t.splice(r,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(76)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},function(e,t){var n=1e3,i=6e4,r=60*i,s=24*r;function o(e,t,n,i){var r=t>=1.5*n;return Math.round(e/n)+" "+i+(r?"s":"")}e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*s;case"hours":case"hour":case"hrs":case"hr":case"h":return o*r;case"minutes":case"minute":case"mins":case"min":case"m":return o*i;case"seconds":case"second":case"secs":case"sec":case"s":return o*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=s)return o(e,t,s,"day");if(t>=r)return o(e,t,r,"hour");if(t>=i)return o(e,t,i,"minute");if(t>=n)return o(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=s)return Math.round(e/s)+"d";if(t>=r)return Math.round(e/r)+"h";if(t>=i)return Math.round(e/i)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){const i=n(145),r=n(2);t.init=function(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let i=0;i<n.length;i++)e.inspectOpts[n[i]]=t.inspectOpts[n[i]]},t.log=function(...e){return process.stderr.write(r.format(...e)+"\n")},t.formatArgs=function(n){const{namespace:i,useColors:r}=this;if(r){const t=this.color,r="[3"+(t<8?t:"8;5;"+t),s=`  ${r};1m${i} [0m`;n[0]=s+n[0].split("\n").join("\n"+s),n.push(r+"m+"+e.exports.humanize(this.diff)+"[0m")}else n[0]=function(){if(t.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+i+" "+n[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):i.isatty(process.stderr.fd)},t.destroy=r.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=n(146);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,(e,t)=>t.toUpperCase());let i=process.env[t];return i=!!/^(yes|on|true|enabled)$/i.test(i)||!/^(no|off|false|disabled)$/i.test(i)&&("null"===i?null:Number(i)),e[n]=i,e},{}),e.exports=n(76)(t);const{formatters:s}=e.exports;s.o=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts).split("\n").map(e=>e.trim()).join(" ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,r.inspect(e,this.inspectOpts)}},function(e,t){e.exports=require("tty")},function(e,t,n){"use strict";const i=n(14),r=n(147),s=process.env;let o;function a(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===o)return 0;if(r("color=16m")||r("color=full")||r("color=truecolor"))return 3;if(r("color=256"))return 2;if(e&&!e.isTTY&&!0!==o)return 0;const t=o?1:0;if("win32"===process.platform){const e=i.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in s)||"codeship"===s.CI_NAME?1:t;if("TEAMCITY_VERSION"in s)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0;if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){const e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:(s.TERM,t)}(e))}r("no-color")||r("no-colors")||r("color=false")?o=!1:(r("color")||r("colors")||r("color=true")||r("color=always"))&&(o=!0),"FORCE_COLOR"in s&&(o=0===s.FORCE_COLOR.length||0!==parseInt(s.FORCE_COLOR,10)),e.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(e,t,n){"use strict";e.exports=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",i=t.indexOf(n+e),r=t.indexOf("--");return-1!==i&&(-1===r||i<r)}},function(e,t){e.exports=require("tls")},function(e,t,n){"use strict";const i=Symbol("kDone"),r=Symbol("kRun");e.exports=class{constructor(e){this[i]=()=>{this.pending--,this[r]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[r]()}[r](){if(this.pending!==this.concurrency&&this.jobs.length){const e=this.jobs.shift();this.pending++,e(this[i])}}}},function(e,t,n){"use strict";class i{constructor(e,t){this.target=t,this.type=e}}class r extends i{constructor(e,t){super("message",t),this.data=e}}class s extends i{constructor(e,t,n){super("close",n),this.wasClean=n._closeFrameReceived&&n._closeFrameSent,this.reason=t,this.code=e}}class o extends i{constructor(e){super("open",e)}}class a extends i{constructor(e,t){super("error",t),this.message=e.message,this.error=e}}const c={addEventListener(e,t,n){if("function"!=typeof t)return;function i(e){t.call(this,new r(e,this))}function c(e,n){t.call(this,new s(e,n,this))}function l(e){t.call(this,new a(e,this))}function d(){t.call(this,new o(this))}const u=n&&n.once?"once":"on";"message"===e?(i._listener=t,this[u](e,i)):"close"===e?(c._listener=t,this[u](e,c)):"error"===e?(l._listener=t,this[u](e,l)):"open"===e?(d._listener=t,this[u](e,d)):this[u](e,t)},removeEventListener(e,t){const n=this.listeners(e);for(let i=0;i<n.length;i++)n[i]!==t&&n[i]._listener!==t||this.removeListener(e,n[i])}};e.exports=c},function(e,t,n){"use strict";const{Duplex:i}=n(18);function r(e){e.emit("close")}function s(){!this.destroyed&&this._writableState.finished&&this.destroy()}function o(e){this.removeListener("error",o),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}e.exports=function(e,t){let n=!0;function a(){n&&e._socket.resume()}e.readyState===e.CONNECTING?e.once("open",(function(){e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a)})):(e._receiver.removeAllListeners("drain"),e._receiver.on("drain",a));const c=new i({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",(function(t){c.push(t)||(n=!1,e._socket.pause())})),e.once("error",(function(e){c.destroyed||c.destroy(e)})),e.once("close",(function(){c.destroyed||c.push(null)})),c._destroy=function(t,n){if(e.readyState===e.CLOSED)return n(t),void process.nextTick(r,c);let i=!1;e.once("error",(function(e){i=!0,n(e)})),e.once("close",(function(){i||n(t),process.nextTick(r,c)})),e.terminate()},c._final=function(t){e.readyState!==e.CONNECTING?null!==e._socket&&(e._socket._writableState.finished?(t(),c._readableState.endEmitted&&c.destroy()):(e._socket.once("finish",(function(){t()})),e.close())):e.once("open",(function(){c._final(t)}))},c._read=function(){e.readyState!==e.OPEN||n||(n=!0,e._receiver._writableState.needDrain||e._socket.resume())},c._write=function(t,n,i){e.readyState!==e.CONNECTING?e.send(t,i):e.once("open",(function(){c._write(t,n,i)}))},c.on("end",s),c.on("error",o),c}},function(e,t,n){"use strict";const i=n(6),{createHash:r}=n(41),{createServer:s,STATUS_CODES:o}=n(78),a=n(42),c=n(77),{format:l,parse:d}=n(84),{GUID:u,kWebSocket:h}=n(25),p=/^[+/0-9A-Za-z]{22}==$/;function m(e){e.emit("close")}function f(){this.destroy()}function _(e,t,n,i){e.writable&&(n=n||o[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(n),...i},e.write(`HTTP/1.1 ${t} ${o[t]}\r\n`+Object.keys(i).map(e=>`${e}: ${i[e]}`).join("\r\n")+"\r\n\r\n"+n)),e.removeListener("error",f),e.destroy()}e.exports=class extends i{constructor(e,t){if(super(),null==(e={maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,...e}).port&&!e.server&&!e.noServer)throw new TypeError('One of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=s((e,t)=>{const n=o[426];t.writeHead(426,{"Content-Length":n.length,"Content-Type":"text/plain"}),t.end(n)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,n,i)=>{this.handleUpgrade(t,n,i,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set),this.options=e}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(e&&this.once("close",e),this.clients)for(const e of this.clients)e.terminate();const t=this._server;t&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?t.close(()=>this.emit("close")):process.nextTick(m,this)}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,i){t.on("error",f);const r=void 0!==e.headers["sec-websocket-key"]&&e.headers["sec-websocket-key"].trim(),s=+e.headers["sec-websocket-version"],o={};if("GET"!==e.method||"websocket"!==e.headers.upgrade.toLowerCase()||!r||!p.test(r)||8!==s&&13!==s||!this.shouldHandle(e))return _(t,400);if(this.options.perMessageDeflate){const n=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const t=d(e.headers["sec-websocket-extensions"]);t[a.extensionName]&&(n.accept(t[a.extensionName]),o[a.extensionName]=n)}catch(e){return _(t,400)}}if(this.options.verifyClient){const a={origin:e.headers[""+(8===s?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(a,(s,a,c,l)=>{if(!s)return _(t,a||401,c,l);this.completeUpgrade(r,o,e,t,n,i)});if(!this.options.verifyClient(a))return _(t,401)}this.completeUpgrade(r,o,e,t,n,i)}completeUpgrade(e,t,n,i,s,o){if(!i.readable||!i.writable)return i.destroy();if(i[h])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");const d=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade","Sec-WebSocket-Accept: "+r("sha1").update(e+u).digest("base64")],p=new c(null);let m=n.headers["sec-websocket-protocol"];if(m&&(m=m.trim().split(/ *, */),m=this.options.handleProtocols?this.options.handleProtocols(m,n):m[0],m&&(d.push("Sec-WebSocket-Protocol: "+m),p._protocol=m)),t[a.extensionName]){const e=t[a.extensionName].params,n=l({[a.extensionName]:[e]});d.push("Sec-WebSocket-Extensions: "+n),p._extensions=t}this.emit("headers",d,n),i.write(d.concat("\r\n").join("\r\n")),i.removeListener("error",f),p.setSocket(i,s,this.options.maxPayload),this.clients&&(this.clients.add(p),p.on("close",()=>this.clients.delete(p))),o(p,n)}}},function(e,t,n){var i=n(3),r="win32"===process.platform,s=n(1),o=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(o){var t=new Error;e=function(e){e&&(t.message=e.message,n(e=t))}}else e=n;return e;function n(e){if(e){if(process.throwDeprecation)throw e;if(!process.noDeprecation){var t="fs: missing callback "+(e.stack||e.message);process.traceDeprecation?console.trace(t):console.error(t)}}}}()}i.normalize;if(r)var c=/(.*?)(?:[\/\\]+|$)/g;else c=/(.*?)(?:[\/]+|$)/g;if(r)var l=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else l=/^[\/]*/;t.realpathSync=function(e,t){if(e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var n,o,a,d,u=e,h={},p={};function m(){var t=l.exec(e);n=t[0].length,o=t[0],a=t[0],d="",r&&!p[a]&&(s.lstatSync(a),p[a]=!0)}for(m();n<e.length;){c.lastIndex=n;var f=c.exec(e);if(d=o,o+=f[0],a=d+f[1],n=c.lastIndex,!(p[a]||t&&t[a]===a)){var _;if(t&&Object.prototype.hasOwnProperty.call(t,a))_=t[a];else{var g=s.lstatSync(a);if(!g.isSymbolicLink()){p[a]=!0,t&&(t[a]=a);continue}var w=null;if(!r){var b=g.dev.toString(32)+":"+g.ino.toString(32);h.hasOwnProperty(b)&&(w=h[b])}null===w&&(s.statSync(a),w=s.readlinkSync(a)),_=i.resolve(d,w),t&&(t[a]=_),r||(h[b]=w)}e=i.resolve(_,e.slice(n)),m()}}return t&&(t[u]=e),e},t.realpath=function(e,t,n){if("function"!=typeof n&&(n=a(t),t=null),e=i.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return process.nextTick(n.bind(null,null,t[e]));var o,d,u,h,p=e,m={},f={};function _(){var t=l.exec(e);o=t[0].length,d=t[0],u=t[0],h="",r&&!f[u]?s.lstat(u,(function(e){if(e)return n(e);f[u]=!0,g()})):process.nextTick(g)}function g(){if(o>=e.length)return t&&(t[p]=e),n(null,e);c.lastIndex=o;var i=c.exec(e);return h=d,d+=i[0],u=h+i[1],o=c.lastIndex,f[u]||t&&t[u]===u?process.nextTick(g):t&&Object.prototype.hasOwnProperty.call(t,u)?y(t[u]):s.lstat(u,w)}function w(e,i){if(e)return n(e);if(!i.isSymbolicLink())return f[u]=!0,t&&(t[u]=u),process.nextTick(g);if(!r){var o=i.dev.toString(32)+":"+i.ino.toString(32);if(m.hasOwnProperty(o))return b(null,m[o],u)}s.stat(u,(function(e){if(e)return n(e);s.readlink(u,(function(e,t){r||(m[o]=t),b(e,t)}))}))}function b(e,r,s){if(e)return n(e);var o=i.resolve(h,r);t&&(t[s]=o),y(o)}function y(t){e=i.resolve(t,e.slice(o)),_()}_()}},function(e,t,n){var i=n(155),r=n(156);e.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return function e(t,n){var s=[],o=r("{","}",t);if(!o||/\$$/.test(o.pre))return[t];var c,l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body),_=l||u,g=o.body.indexOf(",")>=0;if(!_&&!g)return o.post.match(/,.*\}/)?(t=o.pre+"{"+o.body+a+o.post,e(t)):[t];if(_)c=o.body.split(/\.\./);else{if(1===(c=function e(t){if(!t)return[""];var n=[],i=r("{","}",t);if(!i)return t.split(",");var s=i.pre,o=i.body,a=i.post,c=s.split(",");c[c.length-1]+="{"+o+"}";var l=e(a);a.length&&(c[c.length-1]+=l.shift(),c.push.apply(c,l));return n.push.apply(n,c),n}(o.body)).length)if(1===(c=e(c[0],!1).map(h)).length)return(y=o.post.length?e(o.post,!1):[""]).map((function(e){return o.pre+c[0]+e}))}var w,b=o.pre,y=o.post.length?e(o.post,!1):[""];if(_){var v=d(c[0]),x=d(c[1]),S=Math.max(c[0].length,c[1].length),k=3==c.length?Math.abs(d(c[2])):1,C=m;x<v&&(k*=-1,C=f);var E=c.some(p);w=[];for(var T=v;C(T,x);T+=k){var P;if(u)"\\"===(P=String.fromCharCode(T))&&(P="");else if(P=String(T),E){var O=S-P.length;if(O>0){var A=new Array(O+1).join("0");P=T<0?"-"+A+P.slice(1):A+P}}w.push(P)}}else w=i(c,(function(t){return e(t,!1)}));for(var I=0;I<w.length;I++)for(var M=0;M<y.length;M++){var N=b+w[I]+y[M];(!n||_||N)&&s.push(N)}return s}(function(e){return e.split("\\\\").join(s).split("\\{").join(o).split("\\}").join(a).split("\\,").join(c).split("\\.").join(l)}(e),!0).map(u)};var s="\0SLASH"+Math.random()+"\0",o="\0OPEN"+Math.random()+"\0",a="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function d(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function u(e){return e.split(s).join("\\").split(o).join("{").split(a).join("}").split(c).join(",").split(l).join(".")}function h(e){return"{"+e+"}"}function p(e){return/^-?0\d/.test(e)}function m(e,t){return e<=t}function f(e,t){return e>=t}},function(e,t){e.exports=function(e,t){for(var i=[],r=0;r<e.length;r++){var s=t(e[r],r);n(s)?i.push.apply(i,s):i.push(s)}return i};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";function i(e,t,n){e instanceof RegExp&&(e=r(e,n)),t instanceof RegExp&&(t=r(t,n));var i=s(e,t,n);return i&&{start:i[0],end:i[1],pre:n.slice(0,i[0]),body:n.slice(i[0]+e.length,i[1]),post:n.slice(i[1]+t.length)}}function r(e,t){var n=t.match(e);return n?n[0]:null}function s(e,t,n){var i,r,s,o,a,c=n.indexOf(e),l=n.indexOf(t,c+1),d=c;if(c>=0&&l>0){for(i=[],s=n.length;d>=0&&!a;)d==c?(i.push(d),c=n.indexOf(e,d+1)):1==i.length?a=[i.pop(),l]:((r=i.pop())<s&&(s=r,o=l),l=n.indexOf(t,d+1)),d=c<l&&c>=0?c:l;i.length&&(a=[s,o])}return a}e.exports=i,i.range=s},function(e,t,n){try{var i=n(2);if("function"!=typeof i.inherits)throw"";e.exports=i.inherits}catch(t){e.exports=n(158)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){e.exports=m,m.GlobSync=f;var i=n(1),r=n(87),s=n(55),o=(s.Minimatch,n(86).Glob,n(2),n(3)),a=n(33),c=n(56),l=n(88),d=(l.alphasort,l.alphasorti,l.setopts),u=l.ownProp,h=l.childrenIgnored,p=l.isIgnored;function m(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new f(e,t).found}function f(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof f))return new f(e,t);if(d(this,e,t),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}f.prototype._finish=function(){if(a(this instanceof f),this.realpath){var e=this;this.matches.forEach((function(t,n){var i=e.matches[n]=Object.create(null);for(var s in t)try{s=e._makeAbs(s),i[r.realpathSync(s,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;i[e._makeAbs(s)]=!0}}))}l.finish(this)},f.prototype._process=function(e,t,n){a(this instanceof f);for(var i,r=0;"string"==typeof e[r];)r++;switch(r){case e.length:return void this._processSimple(e.join("/"),t);case 0:i=null;break;default:i=e.slice(0,r).join("/")}var o,l=e.slice(r);null===i?o=".":c(i)||c(e.join("/"))?(i&&c(i)||(i="/"+i),o=i):o=i;var d=this._makeAbs(o);h(this,o)||(l[0]===s.GLOBSTAR?this._processGlobStar(i,o,d,l,t,n):this._processReaddir(i,o,d,l,t,n))},f.prototype._processReaddir=function(e,t,n,i,r,s){var a=this._readdir(n,s);if(a){for(var c=i[0],l=!!this.minimatch.negate,d=c._glob,u=this.dot||"."===d.charAt(0),h=[],p=0;p<a.length;p++){if("."!==(_=a[p]).charAt(0)||u)(l&&!e?!_.match(c):_.match(c))&&h.push(_)}var m=h.length;if(0!==m)if(1!==i.length||this.mark||this.stat){i.shift();for(p=0;p<m;p++){var f;_=h[p];f=e?[e,_]:[_],this._process(f.concat(i),r,s)}}else{this.matches[r]||(this.matches[r]=Object.create(null));for(var p=0;p<m;p++){var _=h[p];e&&(_="/"!==e.slice(-1)?e+"/"+_:e+_),"/"!==_.charAt(0)||this.nomount||(_=o.join(this.root,_)),this._emitMatch(r,_)}}}},f.prototype._emitMatch=function(e,t){if(!p(this,t)){var n=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=n),!this.matches[e][t]){if(this.nodir){var i=this.cache[n];if("DIR"===i||Array.isArray(i))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},f.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,n;try{n=i.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var r=n&&n.isSymbolicLink();return this.symlinks[e]=r,r||!n||n.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},f.prototype._readdir=function(e,t){if(t&&!u(this.symlinks,e))return this._readdirInGlobStar(e);if(u(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return null;if(Array.isArray(n))return n}try{return this._readdirEntries(e,i.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},f.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,t},f.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);throw i.path=this.cwd,i.code=t.code,i}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},f.prototype._processGlobStar=function(e,t,n,i,r,s){var o=this._readdir(n,s);if(o){var a=i.slice(1),c=e?[e]:[],l=c.concat(a);this._process(l,r,!1);var d=o.length;if(!this.symlinks[n]||!s)for(var u=0;u<d;u++){if("."!==o[u].charAt(0)||this.dot){var h=c.concat(o[u],a);this._process(h,r,!0);var p=c.concat(o[u],i);this._process(p,r,!0)}}}},f.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&c(e)&&!this.nomount){var i=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=o.join(this.root,e):(e=o.resolve(this.root,e),i&&(e+="/"))}"win32"===process.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},f.prototype._stat=function(e){var t=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&u(this.cache,t)){var r=this.cache[t];if(Array.isArray(r)&&(r="DIR"),!n||"DIR"===r)return r;if(n&&"FILE"===r)return!1}var s=this.statCache[t];if(!s){var o;try{o=i.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(o&&o.isSymbolicLink())try{s=i.statSync(t)}catch(e){s=o}else s=o}this.statCache[t]=s;r=!0;return s&&(r=s.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||r,(!n||"FILE"!==r)&&r},f.prototype._mark=function(e){return l.mark(this,e)},f.prototype._makeAbs=function(e){return l.makeAbs(this,e)}},function(e,t,n){var i=n(89),r=Object.create(null),s=n(90);function o(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i]=e[i];return n}e.exports=i((function(e,t){return r[e]?(r[e].push(t),null):(r[e]=[t],function(e){return s((function t(){var n=r[e],i=n.length,s=o(arguments);try{for(var a=0;a<i;a++)n[a].apply(null,s)}finally{n.length>i?(n.splice(0,i),process.nextTick((function(){t.apply(null,s)}))):delete r[e]}}))}(e))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.source=void 0,t.source="var pwExport =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/server/injected/injectedScript.ts\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./node_modules/webpack/buildin/global.js\":\n/*!***********************************!*\\\n  !*** (webpack)/buildin/global.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n\n/***/ \"./src/server/common/cssParser.ts\":\n/*!****************************************!*\\\n  !*** ./src/server/common/cssParser.ts ***!\n  \\****************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeSelector = exports.parseCSS = void 0;\nconst css = __webpack_require__(/*! ./cssTokenizer */ \"./src/server/common/cssTokenizer.js\");\nfunction parseCSS(selector, customNames) {\n    let tokens;\n    try {\n        tokens = css.tokenize(selector);\n        if (!(tokens[tokens.length - 1] instanceof css.EOFToken))\n            tokens.push(new css.EOFToken());\n    }\n    catch (e) {\n        const newMessage = e.message + ` while parsing selector \"${selector}\"`;\n        const index = (e.stack || '').indexOf(e.message);\n        if (index !== -1)\n            e.stack = e.stack.substring(0, index) + newMessage + e.stack.substring(index + e.message.length);\n        e.message = newMessage;\n        throw e;\n    }\n    const unsupportedToken = tokens.find(token => {\n        return (token instanceof css.AtKeywordToken) ||\n            (token instanceof css.BadStringToken) ||\n            (token instanceof css.BadURLToken) ||\n            (token instanceof css.ColumnToken) ||\n            (token instanceof css.CDOToken) ||\n            (token instanceof css.CDCToken) ||\n            (token instanceof css.SemicolonToken) ||\n            // TODO: Consider using these for something, e.g. to escape complex strings.\n            // For example :xpath{ (//div/bar[@attr=\"foo\"])[2]/baz }\n            // Or this way :xpath( {complex-xpath-goes-here(\"hello\")} )\n            (token instanceof css.OpenCurlyToken) ||\n            (token instanceof css.CloseCurlyToken) ||\n            // TODO: Consider treating these as strings?\n            (token instanceof css.URLToken) ||\n            (token instanceof css.PercentageToken);\n    });\n    if (unsupportedToken)\n        throw new Error(`Unsupported token \"${unsupportedToken.toSource()}\" while parsing selector \"${selector}\"`);\n    let pos = 0;\n    const names = new Set();\n    function unexpected() {\n        return new Error(`Unexpected token \"${tokens[pos].toSource()}\" while parsing selector \"${selector}\"`);\n    }\n    function skipWhitespace() {\n        while (tokens[pos] instanceof css.WhitespaceToken)\n            pos++;\n    }\n    function isIdent(p = pos) {\n        return tokens[p] instanceof css.IdentToken;\n    }\n    function isString(p = pos) {\n        return tokens[p] instanceof css.StringToken;\n    }\n    function isNumber(p = pos) {\n        return tokens[p] instanceof css.NumberToken;\n    }\n    function isComma(p = pos) {\n        return tokens[p] instanceof css.CommaToken;\n    }\n    function isCloseParen(p = pos) {\n        return tokens[p] instanceof css.CloseParenToken;\n    }\n    function isStar(p = pos) {\n        return (tokens[p] instanceof css.DelimToken) && tokens[p].value === '*';\n    }\n    function isEOF(p = pos) {\n        return tokens[p] instanceof css.EOFToken;\n    }\n    function isClauseCombinator(p = pos) {\n        return (tokens[p] instanceof css.DelimToken) && (['>', '+', '~'].includes(tokens[p].value));\n    }\n    function isSelectorClauseEnd(p = pos) {\n        return isComma(p) || isCloseParen(p) || isEOF(p) || isClauseCombinator(p) || (tokens[p] instanceof css.WhitespaceToken);\n    }\n    function consumeFunctionArguments() {\n        const result = [consumeArgument()];\n        while (true) {\n            skipWhitespace();\n            if (!isComma())\n                break;\n            pos++;\n            result.push(consumeArgument());\n        }\n        return result;\n    }\n    function consumeArgument() {\n        skipWhitespace();\n        if (isNumber())\n            return tokens[pos++].value;\n        if (isString())\n            return tokens[pos++].value;\n        return consumeComplexSelector();\n    }\n    function consumeComplexSelector() {\n        skipWhitespace();\n        const result = { simples: [{ selector: consumeSimpleSelector(), combinator: '' }] };\n        while (true) {\n            skipWhitespace();\n            if (isClauseCombinator()) {\n                result.simples[result.simples.length - 1].combinator = tokens[pos++].value;\n                skipWhitespace();\n            }\n            else if (isSelectorClauseEnd()) {\n                break;\n            }\n            result.simples.push({ combinator: '', selector: consumeSimpleSelector() });\n        }\n        return result;\n    }\n    function consumeSimpleSelector() {\n        let rawCSSString = '';\n        const functions = [];\n        while (!isSelectorClauseEnd()) {\n            if (isIdent() || isStar()) {\n                rawCSSString += tokens[pos++].toSource();\n            }\n            else if (tokens[pos] instanceof css.HashToken) {\n                rawCSSString += tokens[pos++].toSource();\n            }\n            else if ((tokens[pos] instanceof css.DelimToken) && tokens[pos].value === '.') {\n                pos++;\n                if (isIdent())\n                    rawCSSString += '.' + tokens[pos++].toSource();\n                else\n                    throw unexpected();\n            }\n            else if (tokens[pos] instanceof css.ColonToken) {\n                pos++;\n                if (isIdent()) {\n                    if (!customNames.has(tokens[pos].value.toLowerCase())) {\n                        rawCSSString += ':' + tokens[pos++].toSource();\n                    }\n                    else {\n                        const name = tokens[pos++].value.toLowerCase();\n                        functions.push({ name, args: [] });\n                        names.add(name);\n                    }\n                }\n                else if (tokens[pos] instanceof css.FunctionToken) {\n                    const name = tokens[pos++].value.toLowerCase();\n                    if (!customNames.has(name)) {\n                        rawCSSString += `:${name}(${consumeBuiltinFunctionArguments()})`;\n                    }\n                    else {\n                        functions.push({ name, args: consumeFunctionArguments() });\n                        names.add(name);\n                    }\n                    skipWhitespace();\n                    if (!isCloseParen())\n                        throw unexpected();\n                    pos++;\n                }\n                else {\n                    throw unexpected();\n                }\n            }\n            else if (tokens[pos] instanceof css.OpenSquareToken) {\n                rawCSSString += '[';\n                pos++;\n                while (!(tokens[pos] instanceof css.CloseSquareToken) && !isEOF())\n                    rawCSSString += tokens[pos++].toSource();\n                if (!(tokens[pos] instanceof css.CloseSquareToken))\n                    throw unexpected();\n                rawCSSString += ']';\n                pos++;\n            }\n            else {\n                throw unexpected();\n            }\n        }\n        if (!rawCSSString && !functions.length)\n            throw unexpected();\n        return { css: rawCSSString || undefined, functions };\n    }\n    function consumeBuiltinFunctionArguments() {\n        let s = '';\n        while (!isCloseParen() && !isEOF())\n            s += tokens[pos++].toSource();\n        return s;\n    }\n    const result = consumeFunctionArguments();\n    if (!isEOF())\n        throw new Error(`Error while parsing selector \"${selector}\"`);\n    if (result.some(arg => typeof arg !== 'object' || !('simples' in arg)))\n        throw new Error(`Error while parsing selector \"${selector}\"`);\n    return { selector: result, names: Array.from(names) };\n}\nexports.parseCSS = parseCSS;\nfunction serializeSelector(args) {\n    return args.map(arg => {\n        if (typeof arg === 'string')\n            return `\"${arg}\"`;\n        if (typeof arg === 'number')\n            return String(arg);\n        return arg.simples.map(({ selector, combinator }) => {\n            let s = selector.css || '';\n            s = s + selector.functions.map(func => `:${func.name}(${serializeSelector(func.args)})`).join('');\n            if (combinator)\n                s += ' ' + combinator;\n            return s;\n        }).join(' ');\n    }).join(', ');\n}\nexports.serializeSelector = serializeSelector;\n\n\n/***/ }),\n\n/***/ \"./src/server/common/cssTokenizer.js\":\n/*!*******************************************!*\\\n  !*** ./src/server/common/cssTokenizer.js ***!\n  \\*******************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n/*\n * Original at https://github.com/tabatkins/parse-css\n * licensed under http://creativecommons.org/publicdomain/zero/1.0/\n *\n * Modifications copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Changes from https://github.com/tabatkins/parse-css\n//   - Tabs are replaced with two spaces.\n//   - Everything not related to tokenizing - below the first exports block - is removed.\n// @ts-nocheck\n(function (root, factory) {\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js,\n    // Rhino, and plain browser loading.\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    }\n    else {}\n}(this, function (exports) {\n    var between = function (num, first, last) { return num >= first && num <= last; };\n    function digit(code) { return between(code, 0x30, 0x39); }\n    function hexdigit(code) { return digit(code) || between(code, 0x41, 0x46) || between(code, 0x61, 0x66); }\n    function uppercaseletter(code) { return between(code, 0x41, 0x5a); }\n    function lowercaseletter(code) { return between(code, 0x61, 0x7a); }\n    function letter(code) { return uppercaseletter(code) || lowercaseletter(code); }\n    function nonascii(code) { return code >= 0x80; }\n    function namestartchar(code) { return letter(code) || nonascii(code) || code == 0x5f; }\n    function namechar(code) { return namestartchar(code) || digit(code) || code == 0x2d; }\n    function nonprintable(code) { return between(code, 0, 8) || code == 0xb || between(code, 0xe, 0x1f) || code == 0x7f; }\n    function newline(code) { return code == 0xa; }\n    function whitespace(code) { return newline(code) || code == 9 || code == 0x20; }\n    function badescape(code) { return newline(code) || isNaN(code); }\n    var maximumallowedcodepoint = 0x10ffff;\n    var InvalidCharacterError = function (message) {\n        this.message = message;\n    };\n    InvalidCharacterError.prototype = new Error;\n    InvalidCharacterError.prototype.name = 'InvalidCharacterError';\n    function preprocess(str) {\n        // Turn a string into an array of code points,\n        // following the preprocessing cleanup rules.\n        var codepoints = [];\n        for (var i = 0; i < str.length; i++) {\n            var code = str.charCodeAt(i);\n            if (code == 0xd && str.charCodeAt(i + 1) == 0xa) {\n                code = 0xa;\n                i++;\n            }\n            if (code == 0xd || code == 0xc)\n                code = 0xa;\n            if (code == 0x0)\n                code = 0xfffd;\n            if (between(code, 0xd800, 0xdbff) && between(str.charCodeAt(i + 1), 0xdc00, 0xdfff)) {\n                // Decode a surrogate pair into an astral codepoint.\n                var lead = code - 0xd800;\n                var trail = str.charCodeAt(i + 1) - 0xdc00;\n                code = Math.pow(2, 16) + lead * Math.pow(2, 10) + trail;\n                i++;\n            }\n            codepoints.push(code);\n        }\n        return codepoints;\n    }\n    function stringFromCode(code) {\n        if (code <= 0xffff)\n            return String.fromCharCode(code);\n        // Otherwise, encode astral char as surrogate pair.\n        code -= Math.pow(2, 16);\n        var lead = Math.floor(code / Math.pow(2, 10)) + 0xd800;\n        var trail = code % Math.pow(2, 10) + 0xdc00;\n        return String.fromCharCode(lead) + String.fromCharCode(trail);\n    }\n    function tokenize(str) {\n        str = preprocess(str);\n        var i = -1;\n        var tokens = [];\n        var code;\n        // Line number information.\n        var line = 0;\n        var column = 0;\n        // The only use of lastLineLength is in reconsume().\n        var lastLineLength = 0;\n        var incrLineno = function () {\n            line += 1;\n            lastLineLength = column;\n            column = 0;\n        };\n        var locStart = { line: line, column: column };\n        var codepoint = function (i) {\n            if (i >= str.length) {\n                return -1;\n            }\n            return str[i];\n        };\n        var next = function (num) {\n            if (num === undefined)\n                num = 1;\n            if (num > 3)\n                throw \"Spec Error: no more than three codepoints of lookahead.\";\n            return codepoint(i + num);\n        };\n        var consume = function (num) {\n            if (num === undefined)\n                num = 1;\n            i += num;\n            code = codepoint(i);\n            if (newline(code))\n                incrLineno();\n            else\n                column += num;\n            //console.log('Consume '+i+' '+String.fromCharCode(code) + ' 0x' + code.toString(16));\n            return true;\n        };\n        var reconsume = function () {\n            i -= 1;\n            if (newline(code)) {\n                line -= 1;\n                column = lastLineLength;\n            }\n            else {\n                column -= 1;\n            }\n            locStart.line = line;\n            locStart.column = column;\n            return true;\n        };\n        var eof = function (codepoint) {\n            if (codepoint === undefined)\n                codepoint = code;\n            return codepoint == -1;\n        };\n        var donothing = function () { };\n        var parseerror = function () { console.log(\"Parse error at index \" + i + \", processing codepoint 0x\" + code.toString(16) + \".\"); return true; };\n        var consumeAToken = function () {\n            consumeComments();\n            consume();\n            if (whitespace(code)) {\n                while (whitespace(next()))\n                    consume();\n                return new WhitespaceToken;\n            }\n            else if (code == 0x22)\n                return consumeAStringToken();\n            else if (code == 0x23) {\n                if (namechar(next()) || areAValidEscape(next(1), next(2))) {\n                    var token = new HashToken();\n                    if (wouldStartAnIdentifier(next(1), next(2), next(3)))\n                        token.type = \"id\";\n                    token.value = consumeAName();\n                    return token;\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x24) {\n                if (next() == 0x3d) {\n                    consume();\n                    return new SuffixMatchToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x27)\n                return consumeAStringToken();\n            else if (code == 0x28)\n                return new OpenParenToken();\n            else if (code == 0x29)\n                return new CloseParenToken();\n            else if (code == 0x2a) {\n                if (next() == 0x3d) {\n                    consume();\n                    return new SubstringMatchToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x2b) {\n                if (startsWithANumber()) {\n                    reconsume();\n                    return consumeANumericToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x2c)\n                return new CommaToken();\n            else if (code == 0x2d) {\n                if (startsWithANumber()) {\n                    reconsume();\n                    return consumeANumericToken();\n                }\n                else if (next(1) == 0x2d && next(2) == 0x3e) {\n                    consume(2);\n                    return new CDCToken();\n                }\n                else if (startsWithAnIdentifier()) {\n                    reconsume();\n                    return consumeAnIdentlikeToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x2e) {\n                if (startsWithANumber()) {\n                    reconsume();\n                    return consumeANumericToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x3a)\n                return new ColonToken;\n            else if (code == 0x3b)\n                return new SemicolonToken;\n            else if (code == 0x3c) {\n                if (next(1) == 0x21 && next(2) == 0x2d && next(3) == 0x2d) {\n                    consume(3);\n                    return new CDOToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x40) {\n                if (wouldStartAnIdentifier(next(1), next(2), next(3))) {\n                    return new AtKeywordToken(consumeAName());\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x5b)\n                return new OpenSquareToken();\n            else if (code == 0x5c) {\n                if (startsWithAValidEscape()) {\n                    reconsume();\n                    return consumeAnIdentlikeToken();\n                }\n                else {\n                    parseerror();\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x5d)\n                return new CloseSquareToken();\n            else if (code == 0x5e) {\n                if (next() == 0x3d) {\n                    consume();\n                    return new PrefixMatchToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x7b)\n                return new OpenCurlyToken();\n            else if (code == 0x7c) {\n                if (next() == 0x3d) {\n                    consume();\n                    return new DashMatchToken();\n                }\n                else if (next() == 0x7c) {\n                    consume();\n                    return new ColumnToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (code == 0x7d)\n                return new CloseCurlyToken();\n            else if (code == 0x7e) {\n                if (next() == 0x3d) {\n                    consume();\n                    return new IncludeMatchToken();\n                }\n                else {\n                    return new DelimToken(code);\n                }\n            }\n            else if (digit(code)) {\n                reconsume();\n                return consumeANumericToken();\n            }\n            else if (namestartchar(code)) {\n                reconsume();\n                return consumeAnIdentlikeToken();\n            }\n            else if (eof())\n                return new EOFToken();\n            else\n                return new DelimToken(code);\n        };\n        var consumeComments = function () {\n            while (next(1) == 0x2f && next(2) == 0x2a) {\n                consume(2);\n                while (true) {\n                    consume();\n                    if (code == 0x2a && next() == 0x2f) {\n                        consume();\n                        break;\n                    }\n                    else if (eof()) {\n                        parseerror();\n                        return;\n                    }\n                }\n            }\n        };\n        var consumeANumericToken = function () {\n            var num = consumeANumber();\n            if (wouldStartAnIdentifier(next(1), next(2), next(3))) {\n                var token = new DimensionToken();\n                token.value = num.value;\n                token.repr = num.repr;\n                token.type = num.type;\n                token.unit = consumeAName();\n                return token;\n            }\n            else if (next() == 0x25) {\n                consume();\n                var token = new PercentageToken();\n                token.value = num.value;\n                token.repr = num.repr;\n                return token;\n            }\n            else {\n                var token = new NumberToken();\n                token.value = num.value;\n                token.repr = num.repr;\n                token.type = num.type;\n                return token;\n            }\n        };\n        var consumeAnIdentlikeToken = function () {\n            var str = consumeAName();\n            if (str.toLowerCase() == \"url\" && next() == 0x28) {\n                consume();\n                while (whitespace(next(1)) && whitespace(next(2)))\n                    consume();\n                if (next() == 0x22 || next() == 0x27) {\n                    return new FunctionToken(str);\n                }\n                else if (whitespace(next()) && (next(2) == 0x22 || next(2) == 0x27)) {\n                    return new FunctionToken(str);\n                }\n                else {\n                    return consumeAURLToken();\n                }\n            }\n            else if (next() == 0x28) {\n                consume();\n                return new FunctionToken(str);\n            }\n            else {\n                return new IdentToken(str);\n            }\n        };\n        var consumeAStringToken = function (endingCodePoint) {\n            if (endingCodePoint === undefined)\n                endingCodePoint = code;\n            var string = \"\";\n            while (consume()) {\n                if (code == endingCodePoint || eof()) {\n                    return new StringToken(string);\n                }\n                else if (newline(code)) {\n                    parseerror();\n                    reconsume();\n                    return new BadStringToken();\n                }\n                else if (code == 0x5c) {\n                    if (eof(next())) {\n                        donothing();\n                    }\n                    else if (newline(next())) {\n                        consume();\n                    }\n                    else {\n                        string += stringFromCode(consumeEscape());\n                    }\n                }\n                else {\n                    string += stringFromCode(code);\n                }\n            }\n        };\n        var consumeAURLToken = function () {\n            var token = new URLToken(\"\");\n            while (whitespace(next()))\n                consume();\n            if (eof(next()))\n                return token;\n            while (consume()) {\n                if (code == 0x29 || eof()) {\n                    return token;\n                }\n                else if (whitespace(code)) {\n                    while (whitespace(next()))\n                        consume();\n                    if (next() == 0x29 || eof(next())) {\n                        consume();\n                        return token;\n                    }\n                    else {\n                        consumeTheRemnantsOfABadURL();\n                        return new BadURLToken();\n                    }\n                }\n                else if (code == 0x22 || code == 0x27 || code == 0x28 || nonprintable(code)) {\n                    parseerror();\n                    consumeTheRemnantsOfABadURL();\n                    return new BadURLToken();\n                }\n                else if (code == 0x5c) {\n                    if (startsWithAValidEscape()) {\n                        token.value += stringFromCode(consumeEscape());\n                    }\n                    else {\n                        parseerror();\n                        consumeTheRemnantsOfABadURL();\n                        return new BadURLToken();\n                    }\n                }\n                else {\n                    token.value += stringFromCode(code);\n                }\n            }\n        };\n        var consumeEscape = function () {\n            // Assume the the current character is the \\\n            // and the next code point is not a newline.\n            consume();\n            if (hexdigit(code)) {\n                // Consume 1-6 hex digits\n                var digits = [code];\n                for (var total = 0; total < 5; total++) {\n                    if (hexdigit(next())) {\n                        consume();\n                        digits.push(code);\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (whitespace(next()))\n                    consume();\n                var value = parseInt(digits.map(function (x) { return String.fromCharCode(x); }).join(''), 16);\n                if (value > maximumallowedcodepoint)\n                    value = 0xfffd;\n                return value;\n            }\n            else if (eof()) {\n                return 0xfffd;\n            }\n            else {\n                return code;\n            }\n        };\n        var areAValidEscape = function (c1, c2) {\n            if (c1 != 0x5c)\n                return false;\n            if (newline(c2))\n                return false;\n            return true;\n        };\n        var startsWithAValidEscape = function () {\n            return areAValidEscape(code, next());\n        };\n        var wouldStartAnIdentifier = function (c1, c2, c3) {\n            if (c1 == 0x2d) {\n                return namestartchar(c2) || c2 == 0x2d || areAValidEscape(c2, c3);\n            }\n            else if (namestartchar(c1)) {\n                return true;\n            }\n            else if (c1 == 0x5c) {\n                return areAValidEscape(c1, c2);\n            }\n            else {\n                return false;\n            }\n        };\n        var startsWithAnIdentifier = function () {\n            return wouldStartAnIdentifier(code, next(1), next(2));\n        };\n        var wouldStartANumber = function (c1, c2, c3) {\n            if (c1 == 0x2b || c1 == 0x2d) {\n                if (digit(c2))\n                    return true;\n                if (c2 == 0x2e && digit(c3))\n                    return true;\n                return false;\n            }\n            else if (c1 == 0x2e) {\n                if (digit(c2))\n                    return true;\n                return false;\n            }\n            else if (digit(c1)) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        };\n        var startsWithANumber = function () {\n            return wouldStartANumber(code, next(1), next(2));\n        };\n        var consumeAName = function () {\n            var result = \"\";\n            while (consume()) {\n                if (namechar(code)) {\n                    result += stringFromCode(code);\n                }\n                else if (startsWithAValidEscape()) {\n                    result += stringFromCode(consumeEscape());\n                }\n                else {\n                    reconsume();\n                    return result;\n                }\n            }\n        };\n        var consumeANumber = function () {\n            var repr = [];\n            var type = \"integer\";\n            if (next() == 0x2b || next() == 0x2d) {\n                consume();\n                repr += stringFromCode(code);\n            }\n            while (digit(next())) {\n                consume();\n                repr += stringFromCode(code);\n            }\n            if (next(1) == 0x2e && digit(next(2))) {\n                consume();\n                repr += stringFromCode(code);\n                consume();\n                repr += stringFromCode(code);\n                type = \"number\";\n                while (digit(next())) {\n                    consume();\n                    repr += stringFromCode(code);\n                }\n            }\n            var c1 = next(1), c2 = next(2), c3 = next(3);\n            if ((c1 == 0x45 || c1 == 0x65) && digit(c2)) {\n                consume();\n                repr += stringFromCode(code);\n                consume();\n                repr += stringFromCode(code);\n                type = \"number\";\n                while (digit(next())) {\n                    consume();\n                    repr += stringFromCode(code);\n                }\n            }\n            else if ((c1 == 0x45 || c1 == 0x65) && (c2 == 0x2b || c2 == 0x2d) && digit(c3)) {\n                consume();\n                repr += stringFromCode(code);\n                consume();\n                repr += stringFromCode(code);\n                consume();\n                repr += stringFromCode(code);\n                type = \"number\";\n                while (digit(next())) {\n                    consume();\n                    repr += stringFromCode(code);\n                }\n            }\n            var value = convertAStringToANumber(repr);\n            return { type: type, value: value, repr: repr };\n        };\n        var convertAStringToANumber = function (string) {\n            // CSS's number rules are identical to JS, afaik.\n            return +string;\n        };\n        var consumeTheRemnantsOfABadURL = function () {\n            while (consume()) {\n                if (code == 0x29 || eof()) {\n                    return;\n                }\n                else if (startsWithAValidEscape()) {\n                    consumeEscape();\n                    donothing();\n                }\n                else {\n                    donothing();\n                }\n            }\n        };\n        var iterationCount = 0;\n        while (!eof(next())) {\n            tokens.push(consumeAToken());\n            iterationCount++;\n            if (iterationCount > str.length * 2)\n                return \"I'm infinite-looping!\";\n        }\n        return tokens;\n    }\n    function CSSParserToken() { throw \"Abstract Base Class\"; }\n    CSSParserToken.prototype.toJSON = function () {\n        return { token: this.tokenType };\n    };\n    CSSParserToken.prototype.toString = function () { return this.tokenType; };\n    CSSParserToken.prototype.toSource = function () { return '' + this; };\n    function BadStringToken() { return this; }\n    BadStringToken.prototype = Object.create(CSSParserToken.prototype);\n    BadStringToken.prototype.tokenType = \"BADSTRING\";\n    function BadURLToken() { return this; }\n    BadURLToken.prototype = Object.create(CSSParserToken.prototype);\n    BadURLToken.prototype.tokenType = \"BADURL\";\n    function WhitespaceToken() { return this; }\n    WhitespaceToken.prototype = Object.create(CSSParserToken.prototype);\n    WhitespaceToken.prototype.tokenType = \"WHITESPACE\";\n    WhitespaceToken.prototype.toString = function () { return \"WS\"; };\n    WhitespaceToken.prototype.toSource = function () { return \" \"; };\n    function CDOToken() { return this; }\n    CDOToken.prototype = Object.create(CSSParserToken.prototype);\n    CDOToken.prototype.tokenType = \"CDO\";\n    CDOToken.prototype.toSource = function () { return \"\x3c!--\"; };\n    function CDCToken() { return this; }\n    CDCToken.prototype = Object.create(CSSParserToken.prototype);\n    CDCToken.prototype.tokenType = \"CDC\";\n    CDCToken.prototype.toSource = function () { return \"--\x3e\"; };\n    function ColonToken() { return this; }\n    ColonToken.prototype = Object.create(CSSParserToken.prototype);\n    ColonToken.prototype.tokenType = \":\";\n    function SemicolonToken() { return this; }\n    SemicolonToken.prototype = Object.create(CSSParserToken.prototype);\n    SemicolonToken.prototype.tokenType = \";\";\n    function CommaToken() { return this; }\n    CommaToken.prototype = Object.create(CSSParserToken.prototype);\n    CommaToken.prototype.tokenType = \",\";\n    function GroupingToken() { throw \"Abstract Base Class\"; }\n    GroupingToken.prototype = Object.create(CSSParserToken.prototype);\n    function OpenCurlyToken() { this.value = \"{\"; this.mirror = \"}\"; return this; }\n    OpenCurlyToken.prototype = Object.create(GroupingToken.prototype);\n    OpenCurlyToken.prototype.tokenType = \"{\";\n    function CloseCurlyToken() { this.value = \"}\"; this.mirror = \"{\"; return this; }\n    CloseCurlyToken.prototype = Object.create(GroupingToken.prototype);\n    CloseCurlyToken.prototype.tokenType = \"}\";\n    function OpenSquareToken() { this.value = \"[\"; this.mirror = \"]\"; return this; }\n    OpenSquareToken.prototype = Object.create(GroupingToken.prototype);\n    OpenSquareToken.prototype.tokenType = \"[\";\n    function CloseSquareToken() { this.value = \"]\"; this.mirror = \"[\"; return this; }\n    CloseSquareToken.prototype = Object.create(GroupingToken.prototype);\n    CloseSquareToken.prototype.tokenType = \"]\";\n    function OpenParenToken() { this.value = \"(\"; this.mirror = \")\"; return this; }\n    OpenParenToken.prototype = Object.create(GroupingToken.prototype);\n    OpenParenToken.prototype.tokenType = \"(\";\n    function CloseParenToken() { this.value = \")\"; this.mirror = \"(\"; return this; }\n    CloseParenToken.prototype = Object.create(GroupingToken.prototype);\n    CloseParenToken.prototype.tokenType = \")\";\n    function IncludeMatchToken() { return this; }\n    IncludeMatchToken.prototype = Object.create(CSSParserToken.prototype);\n    IncludeMatchToken.prototype.tokenType = \"~=\";\n    function DashMatchToken() { return this; }\n    DashMatchToken.prototype = Object.create(CSSParserToken.prototype);\n    DashMatchToken.prototype.tokenType = \"|=\";\n    function PrefixMatchToken() { return this; }\n    PrefixMatchToken.prototype = Object.create(CSSParserToken.prototype);\n    PrefixMatchToken.prototype.tokenType = \"^=\";\n    function SuffixMatchToken() { return this; }\n    SuffixMatchToken.prototype = Object.create(CSSParserToken.prototype);\n    SuffixMatchToken.prototype.tokenType = \"$=\";\n    function SubstringMatchToken() { return this; }\n    SubstringMatchToken.prototype = Object.create(CSSParserToken.prototype);\n    SubstringMatchToken.prototype.tokenType = \"*=\";\n    function ColumnToken() { return this; }\n    ColumnToken.prototype = Object.create(CSSParserToken.prototype);\n    ColumnToken.prototype.tokenType = \"||\";\n    function EOFToken() { return this; }\n    EOFToken.prototype = Object.create(CSSParserToken.prototype);\n    EOFToken.prototype.tokenType = \"EOF\";\n    EOFToken.prototype.toSource = function () { return \"\"; };\n    function DelimToken(code) {\n        this.value = stringFromCode(code);\n        return this;\n    }\n    DelimToken.prototype = Object.create(CSSParserToken.prototype);\n    DelimToken.prototype.tokenType = \"DELIM\";\n    DelimToken.prototype.toString = function () { return \"DELIM(\" + this.value + \")\"; };\n    DelimToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        return json;\n    };\n    DelimToken.prototype.toSource = function () {\n        if (this.value == \"\\\\\")\n            return \"\\\\\\n\";\n        else\n            return this.value;\n    };\n    function StringValuedToken() { throw \"Abstract Base Class\"; }\n    StringValuedToken.prototype = Object.create(CSSParserToken.prototype);\n    StringValuedToken.prototype.ASCIIMatch = function (str) {\n        return this.value.toLowerCase() == str.toLowerCase();\n    };\n    StringValuedToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        return json;\n    };\n    function IdentToken(val) {\n        this.value = val;\n    }\n    IdentToken.prototype = Object.create(StringValuedToken.prototype);\n    IdentToken.prototype.tokenType = \"IDENT\";\n    IdentToken.prototype.toString = function () { return \"IDENT(\" + this.value + \")\"; };\n    IdentToken.prototype.toSource = function () {\n        return escapeIdent(this.value);\n    };\n    function FunctionToken(val) {\n        this.value = val;\n        this.mirror = \")\";\n    }\n    FunctionToken.prototype = Object.create(StringValuedToken.prototype);\n    FunctionToken.prototype.tokenType = \"FUNCTION\";\n    FunctionToken.prototype.toString = function () { return \"FUNCTION(\" + this.value + \")\"; };\n    FunctionToken.prototype.toSource = function () {\n        return escapeIdent(this.value) + \"(\";\n    };\n    function AtKeywordToken(val) {\n        this.value = val;\n    }\n    AtKeywordToken.prototype = Object.create(StringValuedToken.prototype);\n    AtKeywordToken.prototype.tokenType = \"AT-KEYWORD\";\n    AtKeywordToken.prototype.toString = function () { return \"AT(\" + this.value + \")\"; };\n    AtKeywordToken.prototype.toSource = function () {\n        return \"@\" + escapeIdent(this.value);\n    };\n    function HashToken(val) {\n        this.value = val;\n        this.type = \"unrestricted\";\n    }\n    HashToken.prototype = Object.create(StringValuedToken.prototype);\n    HashToken.prototype.tokenType = \"HASH\";\n    HashToken.prototype.toString = function () { return \"HASH(\" + this.value + \")\"; };\n    HashToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        json.type = this.type;\n        return json;\n    };\n    HashToken.prototype.toSource = function () {\n        if (this.type == \"id\") {\n            return \"#\" + escapeIdent(this.value);\n        }\n        else {\n            return \"#\" + escapeHash(this.value);\n        }\n    };\n    function StringToken(val) {\n        this.value = val;\n    }\n    StringToken.prototype = Object.create(StringValuedToken.prototype);\n    StringToken.prototype.tokenType = \"STRING\";\n    StringToken.prototype.toString = function () {\n        return '\"' + escapeString(this.value) + '\"';\n    };\n    function URLToken(val) {\n        this.value = val;\n    }\n    URLToken.prototype = Object.create(StringValuedToken.prototype);\n    URLToken.prototype.tokenType = \"URL\";\n    URLToken.prototype.toString = function () { return \"URL(\" + this.value + \")\"; };\n    URLToken.prototype.toSource = function () {\n        return 'url(\"' + escapeString(this.value) + '\")';\n    };\n    function NumberToken() {\n        this.value = null;\n        this.type = \"integer\";\n        this.repr = \"\";\n    }\n    NumberToken.prototype = Object.create(CSSParserToken.prototype);\n    NumberToken.prototype.tokenType = \"NUMBER\";\n    NumberToken.prototype.toString = function () {\n        if (this.type == \"integer\")\n            return \"INT(\" + this.value + \")\";\n        return \"NUMBER(\" + this.value + \")\";\n    };\n    NumberToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        json.type = this.type;\n        json.repr = this.repr;\n        return json;\n    };\n    NumberToken.prototype.toSource = function () { return this.repr; };\n    function PercentageToken() {\n        this.value = null;\n        this.repr = \"\";\n    }\n    PercentageToken.prototype = Object.create(CSSParserToken.prototype);\n    PercentageToken.prototype.tokenType = \"PERCENTAGE\";\n    PercentageToken.prototype.toString = function () { return \"PERCENTAGE(\" + this.value + \")\"; };\n    PercentageToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        json.repr = this.repr;\n        return json;\n    };\n    PercentageToken.prototype.toSource = function () { return this.repr + \"%\"; };\n    function DimensionToken() {\n        this.value = null;\n        this.type = \"integer\";\n        this.repr = \"\";\n        this.unit = \"\";\n    }\n    DimensionToken.prototype = Object.create(CSSParserToken.prototype);\n    DimensionToken.prototype.tokenType = \"DIMENSION\";\n    DimensionToken.prototype.toString = function () { return \"DIM(\" + this.value + \",\" + this.unit + \")\"; };\n    DimensionToken.prototype.toJSON = function () {\n        var json = this.constructor.prototype.constructor.prototype.toJSON.call(this);\n        json.value = this.value;\n        json.type = this.type;\n        json.repr = this.repr;\n        json.unit = this.unit;\n        return json;\n    };\n    DimensionToken.prototype.toSource = function () {\n        var source = this.repr;\n        var unit = escapeIdent(this.unit);\n        if (unit[0].toLowerCase() == \"e\" && (unit[1] == \"-\" || between(unit.charCodeAt(1), 0x30, 0x39))) {\n            // Unit is ambiguous with scinot\n            // Remove the leading \"e\", replace with escape.\n            unit = \"\\\\65 \" + unit.slice(1, unit.length);\n        }\n        return source + unit;\n    };\n    function escapeIdent(string) {\n        string = '' + string;\n        var result = '';\n        var firstcode = string.charCodeAt(0);\n        for (var i = 0; i < string.length; i++) {\n            var code = string.charCodeAt(i);\n            if (code == 0x0) {\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\n            }\n            if (between(code, 0x1, 0x1f) || code == 0x7f ||\n                (i == 0 && between(code, 0x30, 0x39)) ||\n                (i == 1 && between(code, 0x30, 0x39) && firstcode == 0x2d)) {\n                result += '\\\\' + code.toString(16) + ' ';\n            }\n            else if (code >= 0x80 ||\n                code == 0x2d ||\n                code == 0x5f ||\n                between(code, 0x30, 0x39) ||\n                between(code, 0x41, 0x5a) ||\n                between(code, 0x61, 0x7a)) {\n                result += string[i];\n            }\n            else {\n                result += '\\\\' + string[i];\n            }\n        }\n        return result;\n    }\n    function escapeHash(string) {\n        // Escapes the contents of \"unrestricted\"-type hash tokens.\n        // Won't preserve the ID-ness of \"id\"-type hash tokens;\n        // use escapeIdent() for that.\n        string = '' + string;\n        var result = '';\n        var firstcode = string.charCodeAt(0);\n        for (var i = 0; i < string.length; i++) {\n            var code = string.charCodeAt(i);\n            if (code == 0x0) {\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\n            }\n            if (code >= 0x80 ||\n                code == 0x2d ||\n                code == 0x5f ||\n                between(code, 0x30, 0x39) ||\n                between(code, 0x41, 0x5a) ||\n                between(code, 0x61, 0x7a)) {\n                result += string[i];\n            }\n            else {\n                result += '\\\\' + code.toString(16) + ' ';\n            }\n        }\n        return result;\n    }\n    function escapeString(string) {\n        string = '' + string;\n        var result = '';\n        for (var i = 0; i < string.length; i++) {\n            var code = string.charCodeAt(i);\n            if (code == 0x0) {\n                throw new InvalidCharacterError('Invalid character: the input contains U+0000.');\n            }\n            if (between(code, 0x1, 0x1f) || code == 0x7f) {\n                result += '\\\\' + code.toString(16) + ' ';\n            }\n            else if (code == 0x22 || code == 0x5c) {\n                result += '\\\\' + string[i];\n            }\n            else {\n                result += string[i];\n            }\n        }\n        return result;\n    }\n    // Exportation.\n    exports.tokenize = tokenize;\n    exports.IdentToken = IdentToken;\n    exports.FunctionToken = FunctionToken;\n    exports.AtKeywordToken = AtKeywordToken;\n    exports.HashToken = HashToken;\n    exports.StringToken = StringToken;\n    exports.BadStringToken = BadStringToken;\n    exports.URLToken = URLToken;\n    exports.BadURLToken = BadURLToken;\n    exports.DelimToken = DelimToken;\n    exports.NumberToken = NumberToken;\n    exports.PercentageToken = PercentageToken;\n    exports.DimensionToken = DimensionToken;\n    exports.IncludeMatchToken = IncludeMatchToken;\n    exports.DashMatchToken = DashMatchToken;\n    exports.PrefixMatchToken = PrefixMatchToken;\n    exports.SuffixMatchToken = SuffixMatchToken;\n    exports.SubstringMatchToken = SubstringMatchToken;\n    exports.ColumnToken = ColumnToken;\n    exports.WhitespaceToken = WhitespaceToken;\n    exports.CDOToken = CDOToken;\n    exports.CDCToken = CDCToken;\n    exports.ColonToken = ColonToken;\n    exports.SemicolonToken = SemicolonToken;\n    exports.CommaToken = CommaToken;\n    exports.OpenParenToken = OpenParenToken;\n    exports.CloseParenToken = CloseParenToken;\n    exports.OpenSquareToken = OpenSquareToken;\n    exports.CloseSquareToken = CloseSquareToken;\n    exports.OpenCurlyToken = OpenCurlyToken;\n    exports.CloseCurlyToken = CloseCurlyToken;\n    exports.EOFToken = EOFToken;\n    exports.CSSParserToken = CSSParserToken;\n    exports.GroupingToken = GroupingToken;\n}));\n\n\n/***/ }),\n\n/***/ \"./src/server/common/selectorParser.ts\":\n/*!*********************************************!*\\\n  !*** ./src/server/common/selectorParser.ts ***!\n  \\*********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseSelector = void 0;\nconst cssParser_1 = __webpack_require__(/*! ./cssParser */ \"./src/server/common/cssParser.ts\");\nconst customCSSNames = new Set(['not', 'is', 'where', 'has', 'scope', 'light', 'visible', 'text', 'text-matches', 'text-is', 'above', 'below', 'right-of', 'left-of', 'near']);\nfunction parseSelector(selector) {\n    const result = parseSelectorV1(selector);\n    result.parts = result.parts.map(part => {\n        if (Array.isArray(part))\n            return part;\n        if (part.name === 'css' || part.name === 'css:light') {\n            if (part.name === 'css:light')\n                part.body = ':light(' + part.body + ')';\n            const parsedCSS = cssParser_1.parseCSS(part.body, customCSSNames);\n            return parsedCSS.selector;\n        }\n        return part;\n    });\n    return {\n        parts: result.parts,\n        capture: result.capture,\n    };\n}\nexports.parseSelector = parseSelector;\nfunction parseSelectorV1(selector) {\n    let index = 0;\n    let quote;\n    let start = 0;\n    const result = { parts: [] };\n    const append = () => {\n        const part = selector.substring(start, index).trim();\n        const eqIndex = part.indexOf('=');\n        let name;\n        let body;\n        if (eqIndex !== -1 && part.substring(0, eqIndex).trim().match(/^[a-zA-Z_0-9-+:*]+$/)) {\n            name = part.substring(0, eqIndex).trim();\n            body = part.substring(eqIndex + 1);\n        }\n        else if (part.length > 1 && part[0] === '\"' && part[part.length - 1] === '\"') {\n            name = 'text';\n            body = part;\n        }\n        else if (part.length > 1 && part[0] === \"'\" && part[part.length - 1] === \"'\") {\n            name = 'text';\n            body = part;\n        }\n        else if (/^\\(*\\/\\//.test(part) || part.startsWith('..')) {\n            // If selector starts with '//' or '//' prefixed with multiple opening\n            // parenthesis, consider xpath. @see https://github.com/microsoft/playwright/issues/817\n            // If selector starts with '..', consider xpath as well.\n            name = 'xpath';\n            body = part;\n        }\n        else {\n            name = 'css';\n            body = part;\n        }\n        let capture = false;\n        if (name[0] === '*') {\n            capture = true;\n            name = name.substring(1);\n        }\n        result.parts.push({ name, body });\n        if (capture) {\n            if (result.capture !== undefined)\n                throw new Error(`Only one of the selectors can capture using * modifier`);\n            result.capture = result.parts.length - 1;\n        }\n    };\n    if (!selector.includes('>>')) {\n        index = selector.length;\n        append();\n        return result;\n    }\n    while (index < selector.length) {\n        const c = selector[index];\n        if (c === '\\\\' && index + 1 < selector.length) {\n            index += 2;\n        }\n        else if (c === quote) {\n            quote = undefined;\n            index++;\n        }\n        else if (!quote && (c === '\"' || c === '\\'' || c === '`')) {\n            quote = c;\n            index++;\n        }\n        else if (!quote && c === '>' && selector[index + 1] === '>') {\n            append();\n            index += 2;\n            start = index;\n        }\n        else {\n            index++;\n        }\n    }\n    append();\n    return result;\n}\n\n\n/***/ }),\n\n/***/ \"./src/server/injected/injectedScript.ts\":\n/*!***********************************************!*\\\n  !*** ./src/server/injected/injectedScript.ts ***!\n  \\***********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InjectedScript = void 0;\nconst textSelectorEngine_1 = __webpack_require__(/*! ./textSelectorEngine */ \"./src/server/injected/textSelectorEngine.ts\");\nconst xpathSelectorEngine_1 = __webpack_require__(/*! ./xpathSelectorEngine */ \"./src/server/injected/xpathSelectorEngine.ts\");\nconst selectorParser_1 = __webpack_require__(/*! ../common/selectorParser */ \"./src/server/common/selectorParser.ts\");\nconst selectorEvaluator_1 = __webpack_require__(/*! ./selectorEvaluator */ \"./src/server/injected/selectorEvaluator.ts\");\nclass InjectedScript {\n    constructor(customEngines) {\n        this._enginesV1 = new Map();\n        this._enginesV1.set('xpath', xpathSelectorEngine_1.XPathEngine);\n        this._enginesV1.set('xpath:light', xpathSelectorEngine_1.XPathEngine);\n        this._enginesV1.set('text', textSelectorEngine_1.createTextSelector(true));\n        this._enginesV1.set('text:light', textSelectorEngine_1.createTextSelector(false));\n        this._enginesV1.set('id', this._createAttributeEngine('id', true));\n        this._enginesV1.set('id:light', this._createAttributeEngine('id', false));\n        this._enginesV1.set('data-testid', this._createAttributeEngine('data-testid', true));\n        this._enginesV1.set('data-testid:light', this._createAttributeEngine('data-testid', false));\n        this._enginesV1.set('data-test-id', this._createAttributeEngine('data-test-id', true));\n        this._enginesV1.set('data-test-id:light', this._createAttributeEngine('data-test-id', false));\n        this._enginesV1.set('data-test', this._createAttributeEngine('data-test', true));\n        this._enginesV1.set('data-test:light', this._createAttributeEngine('data-test', false));\n        for (const { name, engine } of customEngines)\n            this._enginesV1.set(name, engine);\n        // No custom engines in V2 for now.\n        this._evaluator = new selectorEvaluator_1.SelectorEvaluatorImpl(new Map());\n    }\n    parseSelector(selector) {\n        const result = selectorParser_1.parseSelector(selector);\n        for (const part of result.parts) {\n            if (!Array.isArray(part) && !this._enginesV1.has(part.name))\n                throw new Error(`Unknown engine \"${part.name}\" while parsing selector ${selector}`);\n        }\n        return result;\n    }\n    querySelector(selector, root) {\n        if (!root['querySelector'])\n            throw new Error('Node is not queryable.');\n        return this._querySelectorRecursively(root, selector, 0);\n    }\n    _querySelectorRecursively(root, selector, index) {\n        const current = selector.parts[index];\n        if (index === selector.parts.length - 1)\n            return this._queryEngine(current, root);\n        const all = this._queryEngineAll(current, root);\n        for (const next of all) {\n            const result = this._querySelectorRecursively(next, selector, index + 1);\n            if (result)\n                return selector.capture === index ? next : result;\n        }\n    }\n    querySelectorAll(selector, root) {\n        if (!root['querySelectorAll'])\n            throw new Error('Node is not queryable.');\n        const capture = selector.capture === undefined ? selector.parts.length - 1 : selector.capture;\n        // Query all elements up to the capture.\n        const partsToQueryAll = selector.parts.slice(0, capture + 1);\n        // Check they have a descendant matching everything after the capture.\n        const partsToCheckOne = selector.parts.slice(capture + 1);\n        let set = new Set([root]);\n        for (const part of partsToQueryAll) {\n            const newSet = new Set();\n            for (const prev of set) {\n                for (const next of this._queryEngineAll(part, prev)) {\n                    if (newSet.has(next))\n                        continue;\n                    newSet.add(next);\n                }\n            }\n            set = newSet;\n        }\n        const candidates = Array.from(set);\n        if (!partsToCheckOne.length)\n            return candidates;\n        const partial = { parts: partsToCheckOne };\n        return candidates.filter(e => !!this._querySelectorRecursively(e, partial, 0));\n    }\n    _queryEngine(part, root) {\n        if (Array.isArray(part))\n            return this._evaluator.evaluate({ scope: root, pierceShadow: true }, part)[0];\n        return this._enginesV1.get(part.name).query(root, part.body);\n    }\n    _queryEngineAll(part, root) {\n        if (Array.isArray(part))\n            return this._evaluator.evaluate({ scope: root, pierceShadow: true }, part);\n        return this._enginesV1.get(part.name).queryAll(root, part.body);\n    }\n    _createAttributeEngine(attribute, shadow) {\n        const toCSS = (selector) => {\n            const css = `[${attribute}=${JSON.stringify(selector)}]`;\n            return [{ simples: [{ selector: { css, functions: [] }, combinator: '' }] }];\n        };\n        return {\n            query: (root, selector) => {\n                return this._evaluator.evaluate({ scope: root, pierceShadow: shadow }, toCSS(selector))[0];\n            },\n            queryAll: (root, selector) => {\n                return this._evaluator.evaluate({ scope: root, pierceShadow: shadow }, toCSS(selector));\n            }\n        };\n    }\n    extend(source, params) {\n        const constrFunction = global.eval(`\n    (() => {\n      ${source}\n      return pwExport;\n    })()`);\n        return new constrFunction(this, params);\n    }\n    isVisible(element) {\n        return selectorEvaluator_1.isVisible(element);\n    }\n    pollRaf(predicate) {\n        return this._runAbortableTask(progress => {\n            let fulfill;\n            let reject;\n            const result = new Promise((f, r) => { fulfill = f; reject = r; });\n            const onRaf = () => {\n                if (progress.aborted)\n                    return;\n                try {\n                    const continuePolling = Symbol('continuePolling');\n                    const success = predicate(progress, continuePolling);\n                    if (success !== continuePolling)\n                        fulfill(success);\n                    else\n                        requestAnimationFrame(onRaf);\n                }\n                catch (e) {\n                    reject(e);\n                }\n            };\n            onRaf();\n            return result;\n        });\n    }\n    pollInterval(pollInterval, predicate) {\n        return this._runAbortableTask(progress => {\n            let fulfill;\n            let reject;\n            const result = new Promise((f, r) => { fulfill = f; reject = r; });\n            const onTimeout = () => {\n                if (progress.aborted)\n                    return;\n                try {\n                    const continuePolling = Symbol('continuePolling');\n                    const success = predicate(progress, continuePolling);\n                    if (success !== continuePolling)\n                        fulfill(success);\n                    else\n                        setTimeout(onTimeout, pollInterval);\n                }\n                catch (e) {\n                    reject(e);\n                }\n            };\n            onTimeout();\n            return result;\n        });\n    }\n    _runAbortableTask(task) {\n        let unsentLogs = [];\n        let takeNextLogsCallback;\n        let taskFinished = false;\n        const logReady = () => {\n            if (!takeNextLogsCallback)\n                return;\n            takeNextLogsCallback(unsentLogs);\n            unsentLogs = [];\n            takeNextLogsCallback = undefined;\n        };\n        const takeNextLogs = () => new Promise(fulfill => {\n            takeNextLogsCallback = fulfill;\n            if (unsentLogs.length || taskFinished)\n                logReady();\n        });\n        let lastLog = '';\n        const progress = {\n            aborted: false,\n            log: (message) => {\n                lastLog = message;\n                unsentLogs.push(message);\n                logReady();\n            },\n            logRepeating: (message) => {\n                if (message !== lastLog)\n                    progress.log(message);\n            },\n        };\n        const run = () => {\n            const result = task(progress);\n            // After the task has finished, there should be no more logs.\n            // Release any pending `takeNextLogs` call, and do not block any future ones.\n            // This prevents non-finished protocol evaluation calls and memory leaks.\n            result.finally(() => {\n                taskFinished = true;\n                logReady();\n            });\n            return result;\n        };\n        return {\n            takeNextLogs,\n            run,\n            cancel: () => { progress.aborted = true; },\n            takeLastLogs: () => unsentLogs,\n        };\n    }\n    getElementBorderWidth(node) {\n        if (node.nodeType !== Node.ELEMENT_NODE || !node.ownerDocument || !node.ownerDocument.defaultView)\n            return { left: 0, top: 0 };\n        const style = node.ownerDocument.defaultView.getComputedStyle(node);\n        return { left: parseInt(style.borderLeftWidth || '', 10), top: parseInt(style.borderTopWidth || '', 10) };\n    }\n    waitForOptionsAndSelect(node, optionsToSelect) {\n        return this.pollRaf((progress, continuePolling) => {\n            const element = this.findLabelTarget(node);\n            if (!element || !element.isConnected)\n                return 'error:notconnected';\n            if (element.nodeName.toLowerCase() !== 'select')\n                return 'error:notselect';\n            const select = element;\n            const options = Array.from(select.options);\n            const selectedOptions = [];\n            let remainingOptionsToSelect = optionsToSelect.slice();\n            for (let index = 0; index < options.length; index++) {\n                const option = options[index];\n                const filter = (optionToSelect) => {\n                    if (optionToSelect instanceof Node)\n                        return option === optionToSelect;\n                    let matches = true;\n                    if (optionToSelect.value !== undefined)\n                        matches = matches && optionToSelect.value === option.value;\n                    if (optionToSelect.label !== undefined)\n                        matches = matches && optionToSelect.label === option.label;\n                    if (optionToSelect.index !== undefined)\n                        matches = matches && optionToSelect.index === index;\n                    return matches;\n                };\n                if (!remainingOptionsToSelect.some(filter))\n                    continue;\n                selectedOptions.push(option);\n                if (select.multiple) {\n                    remainingOptionsToSelect = remainingOptionsToSelect.filter(o => !filter(o));\n                }\n                else {\n                    remainingOptionsToSelect = [];\n                    break;\n                }\n            }\n            if (remainingOptionsToSelect.length) {\n                progress.logRepeating('    did not find some options - waiting... ');\n                return continuePolling;\n            }\n            select.value = undefined;\n            selectedOptions.forEach(option => option.selected = true);\n            progress.log('    selected specified option(s)');\n            select.dispatchEvent(new Event('input', { 'bubbles': true }));\n            select.dispatchEvent(new Event('change', { 'bubbles': true }));\n            return selectedOptions.map(option => option.value);\n        });\n    }\n    waitForEnabledAndFill(node, value) {\n        return this.pollRaf((progress, continuePolling) => {\n            if (node.nodeType !== Node.ELEMENT_NODE)\n                return 'error:notelement';\n            const element = this.findLabelTarget(node);\n            if (element && !element.isConnected)\n                return 'error:notconnected';\n            if (!element || !this.isVisible(element)) {\n                progress.logRepeating('    element is not visible - waiting...');\n                return continuePolling;\n            }\n            if (element.nodeName.toLowerCase() === 'input') {\n                const input = element;\n                const type = input.type.toLowerCase();\n                const kDateTypes = new Set(['date', 'time', 'datetime', 'datetime-local', 'month', 'week']);\n                const kTextInputTypes = new Set(['', 'email', 'number', 'password', 'search', 'tel', 'text', 'url']);\n                if (!kTextInputTypes.has(type) && !kDateTypes.has(type)) {\n                    progress.log(`    input of type \"${type}\" cannot be filled`);\n                    return 'error:notfillableinputtype';\n                }\n                if (type === 'number') {\n                    value = value.trim();\n                    if (isNaN(Number(value)))\n                        return 'error:notfillablenumberinput';\n                }\n                if (input.disabled) {\n                    progress.logRepeating('    element is disabled - waiting...');\n                    return continuePolling;\n                }\n                if (input.readOnly) {\n                    progress.logRepeating('    element is readonly - waiting...');\n                    return continuePolling;\n                }\n                if (kDateTypes.has(type)) {\n                    value = value.trim();\n                    input.focus();\n                    input.value = value;\n                    if (input.value !== value)\n                        return 'error:notvaliddate';\n                    element.dispatchEvent(new Event('input', { 'bubbles': true }));\n                    element.dispatchEvent(new Event('change', { 'bubbles': true }));\n                    return 'done'; // We have already changed the value, no need to input it.\n                }\n            }\n            else if (element.nodeName.toLowerCase() === 'textarea') {\n                const textarea = element;\n                if (textarea.disabled) {\n                    progress.logRepeating('    element is disabled - waiting...');\n                    return continuePolling;\n                }\n                if (textarea.readOnly) {\n                    progress.logRepeating('    element is readonly - waiting...');\n                    return continuePolling;\n                }\n            }\n            else if (!element.isContentEditable) {\n                return 'error:notfillableelement';\n            }\n            const result = this._selectText(element);\n            if (result === 'error:notvisible') {\n                progress.logRepeating('    element is not visible - waiting...');\n                return continuePolling;\n            }\n            return 'needsinput'; // Still need to input the value.\n        });\n    }\n    waitForVisibleAndSelectText(node) {\n        return this.pollRaf((progress, continuePolling) => {\n            if (node.nodeType !== Node.ELEMENT_NODE)\n                return 'error:notelement';\n            if (!node.isConnected)\n                return 'error:notconnected';\n            const element = node;\n            if (!this.isVisible(element)) {\n                progress.logRepeating('    element is not visible - waiting...');\n                return continuePolling;\n            }\n            const result = this._selectText(element);\n            if (result === 'error:notvisible') {\n                progress.logRepeating('    element is not visible - waiting...');\n                return continuePolling;\n            }\n            return result;\n        });\n    }\n    _selectText(element) {\n        if (element.nodeName.toLowerCase() === 'input') {\n            const input = element;\n            input.select();\n            input.focus();\n            return 'done';\n        }\n        if (element.nodeName.toLowerCase() === 'textarea') {\n            const textarea = element;\n            textarea.selectionStart = 0;\n            textarea.selectionEnd = textarea.value.length;\n            textarea.focus();\n            return 'done';\n        }\n        const range = element.ownerDocument.createRange();\n        range.selectNodeContents(element);\n        const selection = element.ownerDocument.defaultView.getSelection();\n        if (!selection)\n            return 'error:notvisible';\n        selection.removeAllRanges();\n        selection.addRange(range);\n        element.focus();\n        return 'done';\n    }\n    waitForNodeVisible(node) {\n        return this.pollRaf((progress, continuePolling) => {\n            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n            if (!node.isConnected || !element)\n                return 'error:notconnected';\n            if (!this.isVisible(element)) {\n                progress.logRepeating('    element is not visible - waiting...');\n                return continuePolling;\n            }\n            return 'done';\n        });\n    }\n    waitForNodeHidden(node) {\n        return this.pollRaf((progress, continuePolling) => {\n            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n            if (!node.isConnected || !element)\n                return 'done';\n            if (this.isVisible(element)) {\n                progress.logRepeating('    element is visible - waiting...');\n                return continuePolling;\n            }\n            return 'done';\n        });\n    }\n    waitForNodeEnabled(node, waitForEditable) {\n        return this.pollRaf((progress, continuePolling) => {\n            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n            if (!node.isConnected || !element)\n                return 'error:notconnected';\n            if (this.isElementDisabled(element)) {\n                progress.logRepeating('    element is not enabled - waiting...');\n                return continuePolling;\n            }\n            if (waitForEditable && this.isElementReadOnly(element)) {\n                progress.logRepeating('    element is readonly - waiting...');\n                return continuePolling;\n            }\n            return 'done';\n        });\n    }\n    waitForNodeDisabled(node) {\n        return this.pollRaf((progress, continuePolling) => {\n            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n            if (!node.isConnected || !element)\n                return 'error:notconnected';\n            if (!this.isElementDisabled(element)) {\n                progress.logRepeating('    element is enabled - waiting...');\n                return continuePolling;\n            }\n            return 'done';\n        });\n    }\n    focusNode(node, resetSelectionIfNotFocused) {\n        if (!node.isConnected)\n            return 'error:notconnected';\n        if (node.nodeType !== Node.ELEMENT_NODE)\n            return 'error:notelement';\n        const wasFocused = node.getRootNode().activeElement === node && node.ownerDocument && node.ownerDocument.hasFocus();\n        node.focus();\n        if (resetSelectionIfNotFocused && !wasFocused && node.nodeName.toLowerCase() === 'input') {\n            try {\n                const input = node;\n                input.setSelectionRange(0, 0);\n            }\n            catch (e) {\n                // Some inputs do not allow selection.\n            }\n        }\n        return 'done';\n    }\n    findLabelTarget(element) {\n        return element.nodeName === 'LABEL' ? element.control || undefined : element;\n    }\n    isCheckboxChecked(node) {\n        if (node.nodeType !== Node.ELEMENT_NODE)\n            throw new Error('Not a checkbox or radio button');\n        const element = node;\n        if (element.getAttribute('role') === 'checkbox')\n            return element.getAttribute('aria-checked') === 'true';\n        const input = this.findLabelTarget(element);\n        if (!input || input.nodeName !== 'INPUT')\n            throw new Error('Not a checkbox or radio button');\n        if (!['radio', 'checkbox'].includes(input.type.toLowerCase()))\n            throw new Error('Not a checkbox or radio button');\n        return input.checked;\n    }\n    setInputFiles(node, payloads) {\n        if (node.nodeType !== Node.ELEMENT_NODE)\n            return 'Node is not of type HTMLElement';\n        const element = node;\n        if (element.nodeName !== 'INPUT')\n            return 'Not an <input> element';\n        const input = element;\n        const type = (input.getAttribute('type') || '').toLowerCase();\n        if (type !== 'file')\n            return 'Not an input[type=file] element';\n        const files = payloads.map(file => {\n            const bytes = Uint8Array.from(atob(file.buffer), c => c.charCodeAt(0));\n            return new File([bytes], file.name, { type: file.mimeType });\n        });\n        const dt = new DataTransfer();\n        for (const file of files)\n            dt.items.add(file);\n        input.files = dt.files;\n        input.dispatchEvent(new Event('input', { 'bubbles': true }));\n        input.dispatchEvent(new Event('change', { 'bubbles': true }));\n    }\n    waitForDisplayedAtStablePosition(node, rafOptions, waitForEnabled) {\n        let lastRect;\n        let counter = 0;\n        let samePositionCounter = 0;\n        let lastTime = 0;\n        const predicate = (progress, continuePolling) => {\n            // First raf happens in the same animation frame as evaluation, so it does not produce\n            // any client rect difference compared to synchronous call. We skip the synchronous call\n            // and only force layout during actual rafs as a small optimisation.\n            if (++counter === 1)\n                return continuePolling;\n            if (!node.isConnected)\n                return 'error:notconnected';\n            const element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n            if (!element)\n                return 'error:notconnected';\n            // Drop frames that are shorter than 16ms - WebKit Win bug.\n            const time = performance.now();\n            if (rafOptions.rafCount > 1 && time - lastTime < 15)\n                return continuePolling;\n            lastTime = time;\n            // Note: this logic should be similar to isVisible() to avoid surprises.\n            const clientRect = element.getBoundingClientRect();\n            const rect = { x: clientRect.top, y: clientRect.left, width: clientRect.width, height: clientRect.height };\n            const samePosition = lastRect && rect.x === lastRect.x && rect.y === lastRect.y && rect.width === lastRect.width && rect.height === lastRect.height;\n            const isDisplayed = rect.width > 0 && rect.height > 0;\n            if (samePosition)\n                ++samePositionCounter;\n            else\n                samePositionCounter = 0;\n            const isStable = samePositionCounter >= rafOptions.rafCount;\n            const isStableForLogs = isStable || !lastRect;\n            lastRect = rect;\n            const style = element.ownerDocument && element.ownerDocument.defaultView ? element.ownerDocument.defaultView.getComputedStyle(element) : undefined;\n            const isVisible = !!style && style.visibility !== 'hidden';\n            const isDisabled = waitForEnabled && this.isElementDisabled(element);\n            if (isDisplayed && isStable && isVisible && !isDisabled)\n                return 'done';\n            if (!isDisplayed || !isVisible)\n                progress.logRepeating(`    element is not visible - waiting...`);\n            else if (!isStableForLogs)\n                progress.logRepeating(`    element is moving - waiting...`);\n            else if (isDisabled)\n                progress.logRepeating(`    element is disabled - waiting...`);\n            return continuePolling;\n        };\n        if (rafOptions.useTimeout)\n            return this.pollInterval(16, predicate);\n        else\n            return this.pollRaf(predicate);\n    }\n    checkHitTargetAt(node, point) {\n        let element = node.nodeType === Node.ELEMENT_NODE ? node : node.parentElement;\n        if (!element || !element.isConnected)\n            return 'error:notconnected';\n        element = element.closest('button, [role=button]') || element;\n        let hitElement = this.deepElementFromPoint(document, point.x, point.y);\n        const hitParents = [];\n        while (hitElement && hitElement !== element) {\n            hitParents.push(hitElement);\n            hitElement = selectorEvaluator_1.parentElementOrShadowHost(hitElement);\n        }\n        if (hitElement === element)\n            return 'done';\n        const hitTargetDescription = this.previewNode(hitParents[0]);\n        // Root is the topmost element in the hitTarget's chain that is not in the\n        // element's chain. For example, it might be a dialog element that overlays\n        // the target.\n        let rootHitTargetDescription;\n        while (element) {\n            const index = hitParents.indexOf(element);\n            if (index !== -1) {\n                if (index > 1)\n                    rootHitTargetDescription = this.previewNode(hitParents[index - 1]);\n                break;\n            }\n            element = selectorEvaluator_1.parentElementOrShadowHost(element);\n        }\n        if (rootHitTargetDescription)\n            return { hitTargetDescription: `${hitTargetDescription} from ${rootHitTargetDescription} subtree` };\n        return { hitTargetDescription };\n    }\n    dispatchEvent(node, type, eventInit) {\n        let event;\n        eventInit = { bubbles: true, cancelable: true, composed: true, ...eventInit };\n        switch (eventType.get(type)) {\n            case 'mouse':\n                event = new MouseEvent(type, eventInit);\n                break;\n            case 'keyboard':\n                event = new KeyboardEvent(type, eventInit);\n                break;\n            case 'touch':\n                event = new TouchEvent(type, eventInit);\n                break;\n            case 'pointer':\n                event = new PointerEvent(type, eventInit);\n                break;\n            case 'focus':\n                event = new FocusEvent(type, eventInit);\n                break;\n            case 'drag':\n                event = new DragEvent(type, eventInit);\n                break;\n            default:\n                event = new Event(type, eventInit);\n                break;\n        }\n        node.dispatchEvent(event);\n    }\n    isElementDisabled(element) {\n        const elementOrButton = element.closest('button, [role=button]') || element;\n        return ['BUTTON', 'INPUT', 'SELECT', 'TEXTAREA'].includes(elementOrButton.nodeName) && elementOrButton.hasAttribute('disabled');\n    }\n    isElementReadOnly(element) {\n        const target = this.findLabelTarget(element);\n        return !!target && ['INPUT', 'TEXTAREA'].includes(target.nodeName) && target.hasAttribute('readonly');\n    }\n    deepElementFromPoint(document, x, y) {\n        let container = document;\n        let element;\n        while (container) {\n            const innerElement = container.elementFromPoint(x, y);\n            if (!innerElement || element === innerElement)\n                break;\n            element = innerElement;\n            container = element.shadowRoot;\n        }\n        return element;\n    }\n    previewNode(node) {\n        if (node.nodeType === Node.TEXT_NODE)\n            return oneLine(`#text=${node.nodeValue || ''}`);\n        if (node.nodeType !== Node.ELEMENT_NODE)\n            return oneLine(`<${node.nodeName.toLowerCase()} />`);\n        const element = node;\n        const attrs = [];\n        for (let i = 0; i < element.attributes.length; i++) {\n            const { name, value } = element.attributes[i];\n            if (name === 'style')\n                continue;\n            if (!value && booleanAttributes.has(name))\n                attrs.push(` ${name}`);\n            else\n                attrs.push(` ${name}=\"${value}\"`);\n        }\n        attrs.sort((a, b) => a.length - b.length);\n        let attrText = attrs.join('');\n        if (attrText.length > 50)\n            attrText = attrText.substring(0, 49) + '\\u2026';\n        if (autoClosingTags.has(element.nodeName))\n            return oneLine(`<${element.nodeName.toLowerCase()}${attrText}/>`);\n        const children = element.childNodes;\n        let onlyText = false;\n        if (children.length <= 5) {\n            onlyText = true;\n            for (let i = 0; i < children.length; i++)\n                onlyText = onlyText && children[i].nodeType === Node.TEXT_NODE;\n        }\n        let text = onlyText ? (element.textContent || '') : (children.length ? '\\u2026' : '');\n        if (text.length > 50)\n            text = text.substring(0, 49) + '\\u2026';\n        return oneLine(`<${element.nodeName.toLowerCase()}${attrText}>${text}</${element.nodeName.toLowerCase()}>`);\n    }\n}\nexports.InjectedScript = InjectedScript;\nconst autoClosingTags = new Set(['AREA', 'BASE', 'BR', 'COL', 'COMMAND', 'EMBED', 'HR', 'IMG', 'INPUT', 'KEYGEN', 'LINK', 'MENUITEM', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR']);\nconst booleanAttributes = new Set(['checked', 'selected', 'disabled', 'readonly', 'multiple']);\nfunction oneLine(s) {\n    return s.replace(/\\n/g, 'â†µ').replace(/\\t/g, 'â‡†');\n}\nconst eventType = new Map([\n    ['auxclick', 'mouse'],\n    ['click', 'mouse'],\n    ['dblclick', 'mouse'],\n    ['mousedown', 'mouse'],\n    ['mouseeenter', 'mouse'],\n    ['mouseleave', 'mouse'],\n    ['mousemove', 'mouse'],\n    ['mouseout', 'mouse'],\n    ['mouseover', 'mouse'],\n    ['mouseup', 'mouse'],\n    ['mouseleave', 'mouse'],\n    ['mousewheel', 'mouse'],\n    ['keydown', 'keyboard'],\n    ['keyup', 'keyboard'],\n    ['keypress', 'keyboard'],\n    ['textInput', 'keyboard'],\n    ['touchstart', 'touch'],\n    ['touchmove', 'touch'],\n    ['touchend', 'touch'],\n    ['touchcancel', 'touch'],\n    ['pointerover', 'pointer'],\n    ['pointerout', 'pointer'],\n    ['pointerenter', 'pointer'],\n    ['pointerleave', 'pointer'],\n    ['pointerdown', 'pointer'],\n    ['pointerup', 'pointer'],\n    ['pointermove', 'pointer'],\n    ['pointercancel', 'pointer'],\n    ['gotpointercapture', 'pointer'],\n    ['lostpointercapture', 'pointer'],\n    ['focus', 'focus'],\n    ['blur', 'focus'],\n    ['drag', 'drag'],\n    ['dragstart', 'drag'],\n    ['dragend', 'drag'],\n    ['dragover', 'drag'],\n    ['dragenter', 'drag'],\n    ['dragleave', 'drag'],\n    ['dragexit', 'drag'],\n    ['drop', 'drag'],\n]);\nexports.default = InjectedScript;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n/***/ }),\n\n/***/ \"./src/server/injected/selectorEvaluator.ts\":\n/*!**************************************************!*\\\n  !*** ./src/server/injected/selectorEvaluator.ts ***!\n  \\**************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isVisible = exports.parentElementOrShadowHost = exports.SelectorEvaluatorImpl = void 0;\nclass SelectorEvaluatorImpl {\n    constructor(extraEngines) {\n        this._engines = new Map();\n        this._cacheQueryCSS = new Map();\n        this._cacheMatches = new Map();\n        this._cacheQuery = new Map();\n        this._cacheMatchesSimple = new Map();\n        this._cacheMatchesParents = new Map();\n        this._cacheCallMatches = new Map();\n        this._cacheCallQuery = new Map();\n        this._cacheQuerySimple = new Map();\n        // Note: keep predefined names in sync with Selectors class.\n        for (const [name, engine] of extraEngines)\n            this._engines.set(name, engine);\n        this._engines.set('not', notEngine);\n        this._engines.set('is', isEngine);\n        this._engines.set('where', isEngine);\n        this._engines.set('has', hasEngine);\n        this._engines.set('scope', scopeEngine);\n        this._engines.set('light', lightEngine);\n        this._engines.set('visible', visibleEngine);\n        this._engines.set('text', textEngine);\n        this._engines.set('text-is', textIsEngine);\n        this._engines.set('text-matches', textMatchesEngine);\n        this._engines.set('right-of', createPositionEngine('right-of', boxRightOf));\n        this._engines.set('left-of', createPositionEngine('left-of', boxLeftOf));\n        this._engines.set('above', createPositionEngine('above', boxAbove));\n        this._engines.set('below', createPositionEngine('below', boxBelow));\n        this._engines.set('near', createPositionEngine('near', boxNear));\n    }\n    // This is the only function we should use for querying, because it does\n    // the right thing with caching.\n    evaluate(context, s) {\n        const result = this.query(context, s);\n        this._cacheQueryCSS.clear();\n        this._cacheMatches.clear();\n        this._cacheQuery.clear();\n        this._cacheMatchesSimple.clear();\n        this._cacheMatchesParents.clear();\n        this._cacheCallMatches.clear();\n        this._cacheCallQuery.clear();\n        this._cacheQuerySimple.clear();\n        return result;\n    }\n    _cached(cache, main, rest, cb) {\n        if (!cache.has(main))\n            cache.set(main, []);\n        const entries = cache.get(main);\n        const entry = entries.find(e => rest.every((value, index) => e.rest[index] === value));\n        if (entry)\n            return entry.result;\n        const result = cb();\n        entries.push({ rest, result });\n        return result;\n    }\n    _checkSelector(s) {\n        const wellFormed = typeof s === 'object' && s &&\n            (Array.isArray(s) || ('simples' in s) && (s.simples.length));\n        if (!wellFormed)\n            throw new Error(`Malformed selector \"${s}\"`);\n        return s;\n    }\n    matches(element, s, context) {\n        const selector = this._checkSelector(s);\n        return this._cached(this._cacheMatches, element, [selector, context], () => {\n            if (Array.isArray(selector))\n                return this._matchesEngine(isEngine, element, selector, context);\n            if (!this._matchesSimple(element, selector.simples[selector.simples.length - 1].selector, context))\n                return false;\n            return this._matchesParents(element, selector, selector.simples.length - 2, context);\n        });\n    }\n    query(context, s) {\n        const selector = this._checkSelector(s);\n        return this._cached(this._cacheQuery, selector, [context], () => {\n            if (Array.isArray(selector))\n                return this._queryEngine(isEngine, context, selector);\n            // query() recursively calls itself, so we set up a new map for this particular query() call.\n            const previousScoreMap = this._scoreMap;\n            this._scoreMap = new Map();\n            let elements = this._querySimple(context, selector.simples[selector.simples.length - 1].selector);\n            elements = elements.filter(element => this._matchesParents(element, selector, selector.simples.length - 2, context));\n            if (this._scoreMap.size) {\n                elements.sort((a, b) => {\n                    const aScore = this._scoreMap.get(a);\n                    const bScore = this._scoreMap.get(b);\n                    if (aScore === bScore)\n                        return 0;\n                    if (aScore === undefined)\n                        return 1;\n                    if (bScore === undefined)\n                        return -1;\n                    return aScore - bScore;\n                });\n            }\n            this._scoreMap = previousScoreMap;\n            return elements;\n        });\n    }\n    _markScore(element, score) {\n        // HACK ALERT: temporary marks an element with a score, to be used\n        // for sorting at the end of the query().\n        if (this._scoreMap)\n            this._scoreMap.set(element, score);\n    }\n    _matchesSimple(element, simple, context) {\n        return this._cached(this._cacheMatchesSimple, element, [simple, context], () => {\n            const isPossiblyScopeClause = simple.functions.some(f => f.name === 'scope' || f.name === 'is');\n            if (!isPossiblyScopeClause && element === context.scope)\n                return false;\n            if (simple.css && !this._matchesCSS(element, simple.css))\n                return false;\n            for (const func of simple.functions) {\n                if (!this._matchesEngine(this._getEngine(func.name), element, func.args, context))\n                    return false;\n            }\n            return true;\n        });\n    }\n    _querySimple(context, simple) {\n        if (!simple.functions.length)\n            return this._queryCSS(context, simple.css || '*');\n        return this._cached(this._cacheQuerySimple, simple, [context], () => {\n            let css = simple.css;\n            const funcs = simple.functions;\n            if (css === '*' && funcs.length)\n                css = undefined;\n            let elements;\n            let firstIndex = -1;\n            if (css !== undefined) {\n                elements = this._queryCSS(context, css);\n            }\n            else {\n                firstIndex = funcs.findIndex(func => this._getEngine(func.name).query !== undefined);\n                if (firstIndex === -1)\n                    firstIndex = 0;\n                elements = this._queryEngine(this._getEngine(funcs[firstIndex].name), context, funcs[firstIndex].args);\n            }\n            for (let i = 0; i < funcs.length; i++) {\n                if (i === firstIndex)\n                    continue;\n                const engine = this._getEngine(funcs[i].name);\n                if (engine.matches !== undefined)\n                    elements = elements.filter(e => this._matchesEngine(engine, e, funcs[i].args, context));\n            }\n            for (let i = 0; i < funcs.length; i++) {\n                if (i === firstIndex)\n                    continue;\n                const engine = this._getEngine(funcs[i].name);\n                if (engine.matches === undefined)\n                    elements = elements.filter(e => this._matchesEngine(engine, e, funcs[i].args, context));\n            }\n            return elements;\n        });\n    }\n    _matchesParents(element, complex, index, context) {\n        if (index < 0)\n            return true;\n        return this._cached(this._cacheMatchesParents, element, [complex, index, context], () => {\n            const { selector: simple, combinator } = complex.simples[index];\n            if (combinator === '>') {\n                const parent = parentElementOrShadowHostInContext(element, context);\n                if (!parent || !this._matchesSimple(parent, simple, context))\n                    return false;\n                return this._matchesParents(parent, complex, index - 1, context);\n            }\n            if (combinator === '+') {\n                const previousSibling = previousSiblingInContext(element, context);\n                if (!previousSibling || !this._matchesSimple(previousSibling, simple, context))\n                    return false;\n                return this._matchesParents(previousSibling, complex, index - 1, context);\n            }\n            if (combinator === '') {\n                let parent = parentElementOrShadowHostInContext(element, context);\n                while (parent) {\n                    if (this._matchesSimple(parent, simple, context)) {\n                        if (this._matchesParents(parent, complex, index - 1, context))\n                            return true;\n                        if (complex.simples[index - 1].combinator === '')\n                            break;\n                    }\n                    parent = parentElementOrShadowHostInContext(parent, context);\n                }\n                return false;\n            }\n            if (combinator === '~') {\n                let previousSibling = previousSiblingInContext(element, context);\n                while (previousSibling) {\n                    if (this._matchesSimple(previousSibling, simple, context)) {\n                        if (this._matchesParents(previousSibling, complex, index - 1, context))\n                            return true;\n                        if (complex.simples[index - 1].combinator === '~')\n                            break;\n                    }\n                    previousSibling = previousSiblingInContext(previousSibling, context);\n                }\n                return false;\n            }\n            if (combinator === '>=') {\n                let parent = element;\n                while (parent) {\n                    if (this._matchesSimple(parent, simple, context)) {\n                        if (this._matchesParents(parent, complex, index - 1, context))\n                            return true;\n                        if (complex.simples[index - 1].combinator === '')\n                            break;\n                    }\n                    parent = parentElementOrShadowHostInContext(parent, context);\n                }\n                return false;\n            }\n            throw new Error(`Unsupported combinator \"${combinator}\"`);\n        });\n    }\n    _matchesEngine(engine, element, args, context) {\n        if (engine.matches)\n            return this._callMatches(engine, element, args, context);\n        if (engine.query)\n            return this._callQuery(engine, args, context).includes(element);\n        throw new Error(`Selector engine should implement \"matches\" or \"query\"`);\n    }\n    _queryEngine(engine, context, args) {\n        if (engine.query)\n            return this._callQuery(engine, args, context);\n        if (engine.matches)\n            return this._queryCSS(context, '*').filter(element => this._callMatches(engine, element, args, context));\n        throw new Error(`Selector engine should implement \"matches\" or \"query\"`);\n    }\n    _callMatches(engine, element, args, context) {\n        return this._cached(this._cacheCallMatches, element, [engine, args, context.scope, context.pierceShadow], () => {\n            return engine.matches(element, args, context, this);\n        });\n    }\n    _callQuery(engine, args, context) {\n        return this._cached(this._cacheCallQuery, args, [engine, context.scope, context.pierceShadow], () => {\n            return engine.query(context, args, this);\n        });\n    }\n    _matchesCSS(element, css) {\n        return element.matches(css);\n    }\n    _queryCSS(context, css) {\n        return this._cached(this._cacheQueryCSS, css, [context], () => {\n            let result = [];\n            function query(root) {\n                result = result.concat([...root.querySelectorAll(css)]);\n                if (!context.pierceShadow)\n                    return;\n                if (root.shadowRoot)\n                    query(root.shadowRoot);\n                for (const element of root.querySelectorAll('*')) {\n                    if (element.shadowRoot)\n                        query(element.shadowRoot);\n                }\n            }\n            query(context.scope);\n            return result;\n        });\n    }\n    _getEngine(name) {\n        const engine = this._engines.get(name);\n        if (!engine)\n            throw new Error(`Unknown selector engine \"${name}\"`);\n        return engine;\n    }\n}\nexports.SelectorEvaluatorImpl = SelectorEvaluatorImpl;\nconst isEngine = {\n    matches(element, args, context, evaluator) {\n        if (args.length === 0)\n            throw new Error(`\"is\" engine expects non-empty selector list`);\n        return args.some(selector => evaluator.matches(element, selector, context));\n    },\n    query(context, args, evaluator) {\n        if (args.length === 0)\n            throw new Error(`\"is\" engine expects non-empty selector list`);\n        let elements = [];\n        for (const arg of args)\n            elements = elements.concat(evaluator.query(context, arg));\n        return args.length === 1 ? elements : sortInDOMOrder(elements);\n    },\n};\nconst hasEngine = {\n    matches(element, args, context, evaluator) {\n        if (args.length === 0)\n            throw new Error(`\"has\" engine expects non-empty selector list`);\n        return evaluator.query({ ...context, scope: element }, args).length > 0;\n    },\n};\nconst scopeEngine = {\n    matches(element, args, context, evaluator) {\n        if (args.length !== 0)\n            throw new Error(`\"scope\" engine expects no arguments`);\n        if (context.scope.nodeType === 9 /* Node.DOCUMENT_NODE */)\n            return element === context.scope.documentElement;\n        return element === context.scope;\n    },\n    query(context, args, evaluator) {\n        if (args.length !== 0)\n            throw new Error(`\"scope\" engine expects no arguments`);\n        if (context.scope.nodeType === 9 /* Node.DOCUMENT_NODE */) {\n            const root = context.scope.documentElement;\n            return root ? [root] : [];\n        }\n        if (context.scope.nodeType === 1 /* Node.ELEMENT_NODE */)\n            return [context.scope];\n        return [];\n    },\n};\nconst notEngine = {\n    matches(element, args, context, evaluator) {\n        if (args.length === 0)\n            throw new Error(`\"not\" engine expects non-empty selector list`);\n        return !evaluator.matches(element, args, context);\n    },\n};\nconst lightEngine = {\n    query(context, args, evaluator) {\n        return evaluator.query({ ...context, pierceShadow: false }, args);\n    },\n    matches(element, args, context, evaluator) {\n        return evaluator.matches(element, args, { ...context, pierceShadow: false });\n    }\n};\nconst visibleEngine = {\n    matches(element, args, context, evaluator) {\n        if (args.length)\n            throw new Error(`\"visible\" engine expects no arguments`);\n        return isVisible(element);\n    }\n};\nconst textEngine = {\n    matches(element, args, context, evaluator) {\n        if (args.length === 0 || typeof args[0] !== 'string')\n            throw new Error(`\"text\" engine expects a single string`);\n        return elementMatchesText(element, context, textMatcher(args[0], true));\n    },\n};\nconst textIsEngine = {\n    matches(element, args, context, evaluator) {\n        if (args.length === 0 || typeof args[0] !== 'string')\n            throw new Error(`\"text-is\" engine expects a single string`);\n        return elementMatchesText(element, context, textMatcher(args[0], false));\n    },\n};\nconst textMatchesEngine = {\n    matches(element, args, context, evaluator) {\n        if (args.length === 0 || typeof args[0] !== 'string' || args.length > 2 || (args.length === 2 && typeof args[1] !== 'string'))\n            throw new Error(`\"text-matches\" engine expects a regexp body and optional regexp flags`);\n        const re = new RegExp(args[0], args.length === 2 ? args[1] : undefined);\n        return elementMatchesText(element, context, s => re.test(s));\n    },\n};\nfunction textMatcher(text, substring) {\n    text = text.trim().replace(/\\s+/g, ' ');\n    text = text.toLowerCase();\n    return (s) => {\n        s = s.trim().replace(/\\s+/g, ' ');\n        s = s.toLowerCase();\n        return substring ? s.includes(text) : s === text;\n    };\n}\nfunction elementMatchesText(element, context, matcher) {\n    if (element.nodeName === 'SCRIPT' || element.nodeName === 'STYLE' || document.head && document.head.contains(element))\n        return false;\n    if ((element instanceof HTMLInputElement) && (element.type === 'submit' || element.type === 'button') && matcher(element.value))\n        return true;\n    let lastText = '';\n    for (let child = element.firstChild; child; child = child.nextSibling) {\n        if (child.nodeType === 3 /* Node.TEXT_NODE */) {\n            lastText += child.nodeValue;\n        }\n        else {\n            if (lastText && matcher(lastText))\n                return true;\n            lastText = '';\n        }\n    }\n    return !!lastText && matcher(lastText);\n}\nfunction boxRightOf(box1, box2) {\n    if (box1.left < box2.right)\n        return;\n    return (box1.left - box2.right) + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);\n}\nfunction boxLeftOf(box1, box2) {\n    if (box1.right > box2.left)\n        return;\n    return (box2.left - box1.right) + Math.max(box2.bottom - box1.bottom, 0) + Math.max(box1.top - box2.top, 0);\n}\nfunction boxAbove(box1, box2) {\n    if (box1.bottom > box2.top)\n        return;\n    return (box2.top - box1.bottom) + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);\n}\nfunction boxBelow(box1, box2) {\n    if (box1.top < box2.bottom)\n        return;\n    return (box1.top - box2.bottom) + Math.max(box1.left - box2.left, 0) + Math.max(box2.right - box1.right, 0);\n}\nfunction boxNear(box1, box2) {\n    const kThreshold = 50;\n    let score = 0;\n    if (box1.left - box2.right >= 0)\n        score += box1.left - box2.right;\n    if (box2.left - box1.right >= 0)\n        score += box2.left - box1.right;\n    if (box2.top - box1.bottom >= 0)\n        score += box2.top - box1.bottom;\n    if (box1.top - box2.bottom >= 0)\n        score += box1.top - box2.bottom;\n    return score > kThreshold ? undefined : score;\n}\nfunction createPositionEngine(name, scorer) {\n    return {\n        matches(element, args, context, evaluator) {\n            if (!args.length)\n                throw new Error(`\"${name}\" engine expects a selector list`);\n            const box = element.getBoundingClientRect();\n            let bestScore;\n            for (const e of evaluator.query(context, args)) {\n                if (e === element)\n                    continue;\n                const score = scorer(box, e.getBoundingClientRect());\n                if (score === undefined)\n                    continue;\n                if (bestScore === undefined || score < bestScore)\n                    bestScore = score;\n            }\n            if (bestScore === undefined)\n                return false;\n            evaluator._markScore(element, bestScore);\n            return true;\n        }\n    };\n}\nfunction parentElementOrShadowHost(element) {\n    if (element.parentElement)\n        return element.parentElement;\n    if (!element.parentNode)\n        return;\n    if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host)\n        return element.parentNode.host;\n}\nexports.parentElementOrShadowHost = parentElementOrShadowHost;\nfunction parentElementOrShadowHostInContext(element, context) {\n    if (element === context.scope)\n        return;\n    if (!context.pierceShadow)\n        return element.parentElement || undefined;\n    return parentElementOrShadowHost(element);\n}\nfunction previousSiblingInContext(element, context) {\n    if (element === context.scope)\n        return;\n    return element.previousElementSibling || undefined;\n}\nfunction isVisible(element) {\n    // Note: this logic should be similar to waitForDisplayedAtStablePosition() to avoid surprises.\n    if (!element.ownerDocument || !element.ownerDocument.defaultView)\n        return true;\n    const style = element.ownerDocument.defaultView.getComputedStyle(element);\n    if (!style || style.visibility === 'hidden')\n        return false;\n    const rect = element.getBoundingClientRect();\n    return rect.width > 0 && rect.height > 0;\n}\nexports.isVisible = isVisible;\nfunction sortInDOMOrder(elements) {\n    const elementToEntry = new Map();\n    const roots = [];\n    const result = [];\n    function append(element) {\n        let entry = elementToEntry.get(element);\n        if (entry)\n            return entry;\n        const parent = parentElementOrShadowHost(element);\n        if (parent) {\n            const parentEntry = append(parent);\n            parentEntry.children.push(element);\n        }\n        else {\n            roots.push(element);\n        }\n        entry = { children: [], taken: false };\n        elementToEntry.set(element, entry);\n        return entry;\n    }\n    elements.forEach(e => append(e).taken = true);\n    function visit(element) {\n        const entry = elementToEntry.get(element);\n        if (entry.taken)\n            result.push(element);\n        if (entry.children.length > 1) {\n            const set = new Set(entry.children);\n            entry.children = [];\n            let child = element.firstElementChild;\n            while (child && entry.children.length < set.size) {\n                if (set.has(child))\n                    entry.children.push(child);\n                child = child.nextElementSibling;\n            }\n            child = element.shadowRoot ? element.shadowRoot.firstElementChild : null;\n            while (child && entry.children.length < set.size) {\n                if (set.has(child))\n                    entry.children.push(child);\n                child = child.nextElementSibling;\n            }\n        }\n        entry.children.forEach(visit);\n    }\n    roots.forEach(visit);\n    return result;\n}\n\n\n/***/ }),\n\n/***/ \"./src/server/injected/textSelectorEngine.ts\":\n/*!***************************************************!*\\\n  !*** ./src/server/injected/textSelectorEngine.ts ***!\n  \\***************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createTextSelector = void 0;\nfunction createTextSelector(shadow) {\n    const engine = {\n        query(root, selector) {\n            return queryInternal(root, createMatcher(selector), shadow);\n        },\n        queryAll(root, selector) {\n            const result = [];\n            queryAllInternal(root, createMatcher(selector), shadow, result);\n            return result;\n        }\n    };\n    return engine;\n}\nexports.createTextSelector = createTextSelector;\nfunction unescape(s) {\n    if (!s.includes('\\\\'))\n        return s;\n    const r = [];\n    let i = 0;\n    while (i < s.length) {\n        if (s[i] === '\\\\' && i + 1 < s.length)\n            i++;\n        r.push(s[i++]);\n    }\n    return r.join('');\n}\nfunction createMatcher(selector) {\n    if (selector[0] === '/' && selector.lastIndexOf('/') > 0) {\n        const lastSlash = selector.lastIndexOf('/');\n        const re = new RegExp(selector.substring(1, lastSlash), selector.substring(lastSlash + 1));\n        return text => re.test(text);\n    }\n    let strict = false;\n    if (selector.length > 1 && selector[0] === '\"' && selector[selector.length - 1] === '\"') {\n        selector = unescape(selector.substring(1, selector.length - 1));\n        strict = true;\n    }\n    if (selector.length > 1 && selector[0] === \"'\" && selector[selector.length - 1] === \"'\") {\n        selector = unescape(selector.substring(1, selector.length - 1));\n        strict = true;\n    }\n    selector = selector.trim().replace(/\\s+/g, ' ');\n    if (!strict)\n        selector = selector.toLowerCase();\n    return text => {\n        text = text.trim().replace(/\\s+/g, ' ');\n        if (!strict)\n            return text.toLowerCase().includes(selector);\n        return text === selector;\n    };\n}\n// Skips <head>, <script> and <style> elements and all their children.\nconst nodeFilter = {\n    acceptNode: node => {\n        return node.nodeName === 'HEAD' || node.nodeName === 'SCRIPT' || node.nodeName === 'STYLE' ?\n            NodeFilter.FILTER_REJECT : NodeFilter.FILTER_ACCEPT;\n    }\n};\n// If we are querying inside a filtered element, nodeFilter is never called, so we need a separate check.\nfunction isFilteredNode(root, document) {\n    return root.nodeName === 'SCRIPT' || root.nodeName === 'STYLE' || document.head && document.head.contains(root);\n}\nfunction queryInternal(root, matcher, shadow) {\n    const document = root instanceof Document ? root : root.ownerDocument;\n    if (isFilteredNode(root, document))\n        return;\n    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT, nodeFilter);\n    const shadowRoots = [];\n    if (shadow && root.shadowRoot)\n        shadowRoots.push(root.shadowRoot);\n    let lastTextParent = null;\n    let lastText = '';\n    while (true) {\n        const node = walker.nextNode();\n        const textParent = (node && node.nodeType === Node.TEXT_NODE) ? node.parentElement : null;\n        if (lastTextParent && textParent !== lastTextParent) {\n            if (matcher(lastText))\n                return lastTextParent;\n            lastText = '';\n        }\n        lastTextParent = textParent;\n        if (!node)\n            break;\n        if (node.nodeType === Node.TEXT_NODE) {\n            lastText += node.nodeValue;\n        }\n        else {\n            const element = node;\n            if ((element instanceof HTMLInputElement) && (element.type === 'submit' || element.type === 'button') && matcher(element.value))\n                return element;\n            if (shadow && element.shadowRoot)\n                shadowRoots.push(element.shadowRoot);\n        }\n    }\n    for (const shadowRoot of shadowRoots) {\n        const element = queryInternal(shadowRoot, matcher, shadow);\n        if (element)\n            return element;\n    }\n}\nfunction queryAllInternal(root, matcher, shadow, result) {\n    const document = root instanceof Document ? root : root.ownerDocument;\n    if (isFilteredNode(root, document))\n        return;\n    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT, nodeFilter);\n    const shadowRoots = [];\n    if (shadow && root.shadowRoot)\n        shadowRoots.push(root.shadowRoot);\n    let lastTextParent = null;\n    let lastText = '';\n    while (true) {\n        const node = walker.nextNode();\n        const textParent = (node && node.nodeType === Node.TEXT_NODE) ? node.parentElement : null;\n        if (lastTextParent && textParent !== lastTextParent) {\n            if (matcher(lastText))\n                result.push(lastTextParent);\n            lastText = '';\n        }\n        lastTextParent = textParent;\n        if (!node)\n            break;\n        if (node.nodeType === Node.TEXT_NODE) {\n            lastText += node.nodeValue;\n        }\n        else {\n            const element = node;\n            if ((element instanceof HTMLInputElement) && (element.type === 'submit' || element.type === 'button') && matcher(element.value))\n                result.push(element);\n            if (shadow && element.shadowRoot)\n                shadowRoots.push(element.shadowRoot);\n        }\n    }\n    for (const shadowRoot of shadowRoots)\n        queryAllInternal(shadowRoot, matcher, shadow, result);\n}\n\n\n/***/ }),\n\n/***/ \"./src/server/injected/xpathSelectorEngine.ts\":\n/*!****************************************************!*\\\n  !*** ./src/server/injected/xpathSelectorEngine.ts ***!\n  \\****************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.XPathEngine = void 0;\nexports.XPathEngine = {\n    query(root, selector) {\n        const document = root instanceof Document ? root : root.ownerDocument;\n        if (!document)\n            return;\n        const it = document.evaluate(selector, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\n        for (let node = it.iterateNext(); node; node = it.iterateNext()) {\n            if (node.nodeType === Node.ELEMENT_NODE)\n                return node;\n        }\n    },\n    queryAll(root, selector) {\n        const result = [];\n        const document = root instanceof Document ? root : root.ownerDocument;\n        if (!document)\n            return result;\n        const it = document.evaluate(selector, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\n        for (let node = it.iterateNext(); node; node = it.iterateNext()) {\n            if (node.nodeType === Node.ELEMENT_NODE)\n                result.push(node);\n        }\n        return result;\n    }\n};\n\n\n/***/ })\n\n/******/ })[\"default\"];"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.source=void 0,t.source="var pwExport =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/server/injected/utilityScript.ts\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./node_modules/webpack/buildin/global.js\":\n/*!***********************************!*\\\n  !*** (webpack)/buildin/global.js ***!\n  \\***********************************/\n/*! no static exports found */\n/***/ (function(module, exports) {\n\nvar g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n\n/***/ }),\n\n/***/ \"./src/server/common/utilityScriptSerializers.ts\":\n/*!*******************************************************!*\\\n  !*** ./src/server/common/utilityScriptSerializers.ts ***!\n  \\*******************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.serializeAsCallArgument = exports.parseEvaluationResultValue = void 0;\nfunction isRegExp(obj) {\n    return obj instanceof RegExp || Object.prototype.toString.call(obj) === '[object RegExp]';\n}\nfunction isDate(obj) {\n    return obj instanceof Date || Object.prototype.toString.call(obj) === '[object Date]';\n}\nfunction isError(obj) {\n    return obj instanceof Error || (obj && obj.__proto__ && obj.__proto__.name === 'Error');\n}\nfunction parseEvaluationResultValue(value, handles = []) {\n    if (Object.is(value, undefined))\n        return undefined;\n    if (typeof value === 'object' && value) {\n        if ('v' in value) {\n            if (value.v === 'undefined')\n                return undefined;\n            if (value.v === 'null')\n                return null;\n            if (value.v === 'NaN')\n                return NaN;\n            if (value.v === 'Infinity')\n                return Infinity;\n            if (value.v === '-Infinity')\n                return -Infinity;\n            if (value.v === '-0')\n                return -0;\n            return undefined;\n        }\n        if ('d' in value)\n            return new Date(value.d);\n        if ('r' in value)\n            return new RegExp(value.r.p, value.r.f);\n        if ('a' in value)\n            return value.a.map((a) => parseEvaluationResultValue(a, handles));\n        if ('o' in value) {\n            const result = {};\n            for (const { k, v } of value.o)\n                result[k] = parseEvaluationResultValue(v, handles);\n            return result;\n        }\n        if ('h' in value)\n            return handles[value.h];\n    }\n    return value;\n}\nexports.parseEvaluationResultValue = parseEvaluationResultValue;\nfunction serializeAsCallArgument(value, handleSerializer) {\n    return serialize(value, handleSerializer, new Set());\n}\nexports.serializeAsCallArgument = serializeAsCallArgument;\nfunction serialize(value, handleSerializer, visited) {\n    const result = handleSerializer(value);\n    if ('fallThrough' in result)\n        value = result.fallThrough;\n    else\n        return result;\n    if (visited.has(value))\n        throw new Error('Argument is a circular structure');\n    if (typeof value === 'symbol')\n        return { v: 'undefined' };\n    if (Object.is(value, undefined))\n        return { v: 'undefined' };\n    if (Object.is(value, null))\n        return { v: 'null' };\n    if (Object.is(value, NaN))\n        return { v: 'NaN' };\n    if (Object.is(value, Infinity))\n        return { v: 'Infinity' };\n    if (Object.is(value, -Infinity))\n        return { v: '-Infinity' };\n    if (Object.is(value, -0))\n        return { v: '-0' };\n    if (typeof value === 'boolean')\n        return value;\n    if (typeof value === 'number')\n        return value;\n    if (typeof value === 'string')\n        return value;\n    if (isError(value)) {\n        const error = value;\n        if ('captureStackTrace' in global.Error) {\n            // v8\n            return error.stack || '';\n        }\n        return `${error.name}: ${error.message}\\n${error.stack}`;\n    }\n    if (isDate(value))\n        return { d: value.toJSON() };\n    if (isRegExp(value))\n        return { r: { p: value.source, f: value.flags } };\n    if (Array.isArray(value)) {\n        const a = [];\n        visited.add(value);\n        for (let i = 0; i < value.length; ++i)\n            a.push(serialize(value[i], handleSerializer, visited));\n        visited.delete(value);\n        return { a };\n    }\n    if (typeof value === 'object') {\n        const o = [];\n        visited.add(value);\n        for (const name of Object.keys(value)) {\n            let item;\n            try {\n                item = value[name];\n            }\n            catch (e) {\n                continue; // native bindings will throw sometimes\n            }\n            if (name === 'toJSON' && typeof item === 'function')\n                o.push({ k: name, v: { o: [] } });\n            else\n                o.push({ k: name, v: serialize(item, handleSerializer, visited) });\n        }\n        visited.delete(value);\n        return { o };\n    }\n}\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n/***/ }),\n\n/***/ \"./src/server/injected/utilityScript.ts\":\n/*!**********************************************!*\\\n  !*** ./src/server/injected/utilityScript.ts ***!\n  \\**********************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst utilityScriptSerializers_1 = __webpack_require__(/*! ../common/utilityScriptSerializers */ \"./src/server/common/utilityScriptSerializers.ts\");\nclass UtilityScript {\n    evaluate(returnByValue, expression) {\n        const result = global.eval(expression);\n        return returnByValue ? this._promiseAwareJsonValueNoThrow(result) : result;\n    }\n    callFunction(returnByValue, functionText, argCount, ...argsAndHandles) {\n        const args = argsAndHandles.slice(0, argCount);\n        const handles = argsAndHandles.slice(argCount);\n        const parameters = args.map(a => utilityScriptSerializers_1.parseEvaluationResultValue(a, handles));\n        const func = global.eval('(' + functionText + ')');\n        const result = func(...parameters);\n        return returnByValue ? this._promiseAwareJsonValueNoThrow(result) : result;\n    }\n    jsonValue(returnByValue, value) {\n        // Special handling of undefined to work-around multi-step returnByValue handling in WebKit.\n        if (Object.is(value, undefined))\n            return undefined;\n        return utilityScriptSerializers_1.serializeAsCallArgument(value, (value) => ({ fallThrough: value }));\n    }\n    _promiseAwareJsonValueNoThrow(value) {\n        const safeJson = (value) => {\n            try {\n                return this.jsonValue(true, value);\n            }\n            catch (e) {\n                return undefined;\n            }\n        };\n        if (value && typeof value === 'object' && typeof value.then === 'function') {\n            return (async () => {\n                // By using async function we ensure that return value is a native Promise,\n                // and not some overriden Promise in the page.\n                // This makes Firefox and WebKit debugging protocols recognize it as a Promise,\n                // properly await and return the value.\n                const promiseValue = await value;\n                return safeJson(promiseValue);\n            })();\n        }\n        return safeJson(value);\n    }\n}\nexports.default = UtilityScript;\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../../node_modules/webpack/buildin/global.js */ \"./node_modules/webpack/buildin/global.js\")))\n\n/***/ })\n\n/******/ })[\"default\"];"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USKeyboardLayout=t.keypadLocation=void 0,t.keypadLocation=3,t.USKeyboardLayout={Escape:{keyCode:27,key:"Escape"},F1:{keyCode:112,key:"F1"},F2:{keyCode:113,key:"F2"},F3:{keyCode:114,key:"F3"},F4:{keyCode:115,key:"F4"},F5:{keyCode:116,key:"F5"},F6:{keyCode:117,key:"F6"},F7:{keyCode:118,key:"F7"},F8:{keyCode:119,key:"F8"},F9:{keyCode:120,key:"F9"},F10:{keyCode:121,key:"F10"},F11:{keyCode:122,key:"F11"},F12:{keyCode:123,key:"F12"},Backquote:{keyCode:192,shiftKey:"~",key:"`"},Digit1:{keyCode:49,shiftKey:"!",key:"1"},Digit2:{keyCode:50,shiftKey:"@",key:"2"},Digit3:{keyCode:51,shiftKey:"#",key:"3"},Digit4:{keyCode:52,shiftKey:"$",key:"4"},Digit5:{keyCode:53,shiftKey:"%",key:"5"},Digit6:{keyCode:54,shiftKey:"^",key:"6"},Digit7:{keyCode:55,shiftKey:"&",key:"7"},Digit8:{keyCode:56,shiftKey:"*",key:"8"},Digit9:{keyCode:57,shiftKey:"(",key:"9"},Digit0:{keyCode:48,shiftKey:")",key:"0"},Minus:{keyCode:189,shiftKey:"_",key:"-"},Equal:{keyCode:187,shiftKey:"+",key:"="},Backslash:{keyCode:220,shiftKey:"|",key:"\\"},Backspace:{keyCode:8,key:"Backspace"},Tab:{keyCode:9,key:"Tab"},KeyQ:{keyCode:81,shiftKey:"Q",key:"q"},KeyW:{keyCode:87,shiftKey:"W",key:"w"},KeyE:{keyCode:69,shiftKey:"E",key:"e"},KeyR:{keyCode:82,shiftKey:"R",key:"r"},KeyT:{keyCode:84,shiftKey:"T",key:"t"},KeyY:{keyCode:89,shiftKey:"Y",key:"y"},KeyU:{keyCode:85,shiftKey:"U",key:"u"},KeyI:{keyCode:73,shiftKey:"I",key:"i"},KeyO:{keyCode:79,shiftKey:"O",key:"o"},KeyP:{keyCode:80,shiftKey:"P",key:"p"},BracketLeft:{keyCode:219,shiftKey:"{",key:"["},BracketRight:{keyCode:221,shiftKey:"}",key:"]"},CapsLock:{keyCode:20,key:"CapsLock"},KeyA:{keyCode:65,shiftKey:"A",key:"a"},KeyS:{keyCode:83,shiftKey:"S",key:"s"},KeyD:{keyCode:68,shiftKey:"D",key:"d"},KeyF:{keyCode:70,shiftKey:"F",key:"f"},KeyG:{keyCode:71,shiftKey:"G",key:"g"},KeyH:{keyCode:72,shiftKey:"H",key:"h"},KeyJ:{keyCode:74,shiftKey:"J",key:"j"},KeyK:{keyCode:75,shiftKey:"K",key:"k"},KeyL:{keyCode:76,shiftKey:"L",key:"l"},Semicolon:{keyCode:186,shiftKey:":",key:";"},Quote:{keyCode:222,shiftKey:'"',key:"'"},Enter:{keyCode:13,key:"Enter",text:"\r"},ShiftLeft:{keyCode:160,keyCodeWithoutLocation:16,key:"Shift",location:1},KeyZ:{keyCode:90,shiftKey:"Z",key:"z"},KeyX:{keyCode:88,shiftKey:"X",key:"x"},KeyC:{keyCode:67,shiftKey:"C",key:"c"},KeyV:{keyCode:86,shiftKey:"V",key:"v"},KeyB:{keyCode:66,shiftKey:"B",key:"b"},KeyN:{keyCode:78,shiftKey:"N",key:"n"},KeyM:{keyCode:77,shiftKey:"M",key:"m"},Comma:{keyCode:188,shiftKey:"<",key:","},Period:{keyCode:190,shiftKey:">",key:"."},Slash:{keyCode:191,shiftKey:"?",key:"/"},ShiftRight:{keyCode:161,keyCodeWithoutLocation:16,key:"Shift",location:2},ControlLeft:{keyCode:162,keyCodeWithoutLocation:17,key:"Control",location:1},MetaLeft:{keyCode:91,key:"Meta",location:1},AltLeft:{keyCode:164,keyCodeWithoutLocation:18,key:"Alt",location:1},Space:{keyCode:32,key:" "},AltRight:{keyCode:165,keyCodeWithoutLocation:18,key:"Alt",location:2},AltGraph:{keyCode:225,key:"AltGraph"},MetaRight:{keyCode:92,key:"Meta",location:2},ContextMenu:{keyCode:93,key:"ContextMenu"},ControlRight:{keyCode:163,keyCodeWithoutLocation:17,key:"Control",location:2},PrintScreen:{keyCode:44,key:"PrintScreen"},ScrollLock:{keyCode:145,key:"ScrollLock"},Pause:{keyCode:19,key:"Pause"},PageUp:{keyCode:33,key:"PageUp"},PageDown:{keyCode:34,key:"PageDown"},Insert:{keyCode:45,key:"Insert"},Delete:{keyCode:46,key:"Delete"},Home:{keyCode:36,key:"Home"},End:{keyCode:35,key:"End"},ArrowLeft:{keyCode:37,key:"ArrowLeft"},ArrowUp:{keyCode:38,key:"ArrowUp"},ArrowRight:{keyCode:39,key:"ArrowRight"},ArrowDown:{keyCode:40,key:"ArrowDown"},NumLock:{keyCode:144,key:"NumLock"},NumpadDivide:{keyCode:111,key:"/",location:3},NumpadMultiply:{keyCode:106,key:"*",location:3},NumpadSubtract:{keyCode:109,key:"-",location:3},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",shiftKey:"7",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",shiftKey:"8",location:3},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",shiftKey:"9",location:3},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",shiftKey:"4",location:3},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",shiftKey:"5",location:3},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",shiftKey:"6",location:3},NumpadAdd:{keyCode:107,key:"+",location:3},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",shiftKey:"1",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",shiftKey:"2",location:3},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",shiftKey:"3",location:3},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",shiftKey:"0",location:3},NumpadDecimal:{keyCode:46,shiftKeyCode:110,key:"\0",shiftKey:".",location:3},NumpadEnter:{keyCode:13,key:"Enter",text:"\r",location:3}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Accessibility=void 0;function i(e,t){const n=[];for(const r of e.children())n.push(...i(r,t));if(t&&!t.has(e))return n;const r=e.serialize();return n.length&&(r.children=n),[r]}t.Accessibility=class{constructor(e){this._getAXTree=e}async snapshot(e={}){const{interestingOnly:t=!0,root:n=null}=e,{tree:r,needle:s}=await this._getAXTree(n||void 0);if(!t)return n?s&&i(s)[0]:i(r)[0];const o=new Set;return function e(t,n,i){n.isInteresting(i)&&t.add(n);if(n.isLeafNode())return;i=i||n.isControl();for(const r of n.children())e(t,r,i)}(o,r,!1),!n||s&&o.has(s)?i(s||r,o)[0]:null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileChooser=void 0;t.FileChooser=class{constructor(e,t,n){this._page=e,this._elementHandle=t,this._isMultiple=n}element(){return this._elementHandle}isMultiple(){return this._isMultiple}page(){return this._page}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSelector=void 0;const i=n(167),r=new Set(["not","is","where","has","scope","light","visible","text","text-matches","text-is","above","below","right-of","left-of","near"]);t.parseSelector=function(e){const t=function(e){let t,n=0,i=0;const r={parts:[]},s=()=>{const t=e.substring(i,n).trim(),s=t.indexOf("=");let o,a;-1!==s&&t.substring(0,s).trim().match(/^[a-zA-Z_0-9-+:*]+$/)?(o=t.substring(0,s).trim(),a=t.substring(s+1)):t.length>1&&'"'===t[0]&&'"'===t[t.length-1]||t.length>1&&"'"===t[0]&&"'"===t[t.length-1]?(o="text",a=t):/^\(*\/\//.test(t)||t.startsWith("..")?(o="xpath",a=t):(o="css",a=t);let c=!1;if("*"===o[0]&&(c=!0,o=o.substring(1)),r.parts.push({name:o,body:a}),c){if(void 0!==r.capture)throw new Error("Only one of the selectors can capture using * modifier");r.capture=r.parts.length-1}};if(!e.includes(">>"))return n=e.length,s(),r;for(;n<e.length;){const r=e[n];"\\"===r&&n+1<e.length?n+=2:r===t?(t=void 0,n++):t||'"'!==r&&"'"!==r&&"`"!==r?t||">"!==r||">"!==e[n+1]?n++:(s(),n+=2,i=n):(t=r,n++)}return s(),r}(e);return t.parts=t.parts.map(e=>{if(Array.isArray(e))return e;if("css"===e.name||"css:light"===e.name){"css:light"===e.name&&(e.body=":light("+e.body+")");return i.parseCSS(e.body,r).selector}return e}),{parts:t.parts,capture:t.capture}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeSelector=t.parseCSS=void 0;const i=n(168);t.parseCSS=function(e,t){let n;try{n=i.tokenize(e),n[n.length-1]instanceof i.EOFToken||n.push(new i.EOFToken)}catch(t){const n=t.message+` while parsing selector "${e}"`,i=(t.stack||"").indexOf(t.message);throw-1!==i&&(t.stack=t.stack.substring(0,i)+n+t.stack.substring(i+t.message.length)),t.message=n,t}const r=n.find(e=>e instanceof i.AtKeywordToken||e instanceof i.BadStringToken||e instanceof i.BadURLToken||e instanceof i.ColumnToken||e instanceof i.CDOToken||e instanceof i.CDCToken||e instanceof i.SemicolonToken||e instanceof i.OpenCurlyToken||e instanceof i.CloseCurlyToken||e instanceof i.URLToken||e instanceof i.PercentageToken);if(r)throw new Error(`Unsupported token "${r.toSource()}" while parsing selector "${e}"`);let s=0;const o=new Set;function a(){return new Error(`Unexpected token "${n[s].toSource()}" while parsing selector "${e}"`)}function c(){for(;n[s]instanceof i.WhitespaceToken;)s++}function l(e=s){return n[e]instanceof i.IdentToken}function d(e=s){return n[e]instanceof i.CommaToken}function u(e=s){return n[e]instanceof i.CloseParenToken}function h(e=s){return n[e]instanceof i.DelimToken&&"*"===n[e].value}function p(e=s){return n[e]instanceof i.EOFToken}function m(e=s){return n[e]instanceof i.DelimToken&&[">","+","~"].includes(n[e].value)}function f(e=s){return d(e)||u(e)||p(e)||m(e)||n[e]instanceof i.WhitespaceToken}function _(){const e=[g()];for(;c(),d();)s++,e.push(g());return e}function g(){return c(),function(e=s){return n[e]instanceof i.NumberToken}()||function(e=s){return n[e]instanceof i.StringToken}()?n[s++].value:function(){c();const e={simples:[{selector:w(),combinator:""}]};for(;;){if(c(),m())e.simples[e.simples.length-1].combinator=n[s++].value,c();else if(f())break;e.simples.push({combinator:"",selector:w()})}return e}()}function w(){let e="";const r=[];for(;!f();)if(l()||h())e+=n[s++].toSource();else if(n[s]instanceof i.HashToken)e+=n[s++].toSource();else if(n[s]instanceof i.DelimToken&&"."===n[s].value){if(s++,!l())throw a();e+="."+n[s++].toSource()}else if(n[s]instanceof i.ColonToken)if(s++,l())if(t.has(n[s].value.toLowerCase())){const e=n[s++].value.toLowerCase();r.push({name:e,args:[]}),o.add(e)}else e+=":"+n[s++].toSource();else{if(!(n[s]instanceof i.FunctionToken))throw a();{const i=n[s++].value.toLowerCase();if(t.has(i)?(r.push({name:i,args:_()}),o.add(i)):e+=`:${i}(${b()})`,c(),!u())throw a();s++}}else{if(!(n[s]instanceof i.OpenSquareToken))throw a();for(e+="[",s++;!(n[s]instanceof i.CloseSquareToken||p());)e+=n[s++].toSource();if(!(n[s]instanceof i.CloseSquareToken))throw a();e+="]",s++}if(!e&&!r.length)throw a();return{css:e||void 0,functions:r}}function b(){let e="";for(;!u()&&!p();)e+=n[s++].toSource();return e}const y=_();if(!p())throw new Error(`Error while parsing selector "${e}"`);if(y.some(e=>"object"!=typeof e||!("simples"in e)))throw new Error(`Error while parsing selector "${e}"`);return{selector:y,names:Array.from(o)}},t.serializeSelector=function e(t){return t.map(t=>"string"==typeof t?`"${t}"`:"number"==typeof t?String(t):t.simples.map(({selector:t,combinator:n})=>{let i=t.css||"";return i+=t.functions.map(t=>`:${t.name}(${e(t.args)})`).join(""),n&&(i+=" "+n),i}).join(" ")).join(", ")}},function(e,t,n){"use strict";var i,r,s;r=[t],void 0===(s="function"==typeof(i=function(e){var t=function(e,t,n){return e>=t&&e<=n};function n(e){return t(e,48,57)}function i(e){return n(e)||t(e,65,70)||t(e,97,102)}function r(e){return function(e){return t(e,65,90)}(e)||function(e){return t(e,97,122)}(e)}function s(e){return r(e)||function(e){return e>=128}(e)||95==e}function o(e){return s(e)||n(e)||45==e}function a(e){return t(e,0,8)||11==e||t(e,14,31)||127==e}function c(e){return 10==e}function l(e){return c(e)||9==e||32==e}var d=function(e){this.message=e};function u(e){if(e<=65535)return String.fromCharCode(e);e-=Math.pow(2,16);var t=Math.floor(e/Math.pow(2,10))+55296,n=e%Math.pow(2,10)+56320;return String.fromCharCode(t)+String.fromCharCode(n)}function h(){throw"Abstract Base Class"}function p(){return this}function m(){return this}function f(){return this}function _(){return this}function g(){return this}function w(){return this}function b(){return this}function y(){return this}function v(){throw"Abstract Base Class"}function x(){return this.value="{",this.mirror="}",this}function S(){return this.value="}",this.mirror="{",this}function k(){return this.value="[",this.mirror="]",this}function C(){return this.value="]",this.mirror="[",this}function E(){return this.value="(",this.mirror=")",this}function T(){return this.value=")",this.mirror="(",this}function P(){return this}function O(){return this}function A(){return this}function I(){return this}function M(){return this}function N(){return this}function F(){return this}function D(e){return this.value=u(e),this}function R(){throw"Abstract Base Class"}function L(e){this.value=e}function j(e){this.value=e,this.mirror=")"}function B(e){this.value=e}function q(e){this.value=e,this.type="unrestricted"}function H(e){this.value=e}function W(e){this.value=e}function U(){this.value=null,this.type="integer",this.repr=""}function z(){this.value=null,this.repr=""}function V(){this.value=null,this.type="integer",this.repr="",this.unit=""}function $(e){for(var n="",i=(e=""+e).charCodeAt(0),r=0;r<e.length;r++){var s=e.charCodeAt(r);if(0==s)throw new d("Invalid character: the input contains U+0000.");t(s,1,31)||127==s||0==r&&t(s,48,57)||1==r&&t(s,48,57)&&45==i?n+="\\"+s.toString(16)+" ":s>=128||45==s||95==s||t(s,48,57)||t(s,65,90)||t(s,97,122)?n+=e[r]:n+="\\"+e[r]}return n}function K(e){e=""+e;for(var n="",i=0;i<e.length;i++){var r=e.charCodeAt(i);if(0==r)throw new d("Invalid character: the input contains U+0000.");t(r,1,31)||127==r?n+="\\"+r.toString(16)+" ":n+=34==r||92==r?"\\"+e[i]:e[i]}return n}(d.prototype=new Error).name="InvalidCharacterError",h.prototype.toJSON=function(){return{token:this.tokenType}},h.prototype.toString=function(){return this.tokenType},h.prototype.toSource=function(){return""+this},p.prototype=Object.create(h.prototype),p.prototype.tokenType="BADSTRING",m.prototype=Object.create(h.prototype),m.prototype.tokenType="BADURL",f.prototype=Object.create(h.prototype),f.prototype.tokenType="WHITESPACE",f.prototype.toString=function(){return"WS"},f.prototype.toSource=function(){return" "},_.prototype=Object.create(h.prototype),_.prototype.tokenType="CDO",_.prototype.toSource=function(){return"\x3c!--"},g.prototype=Object.create(h.prototype),g.prototype.tokenType="CDC",g.prototype.toSource=function(){return"--\x3e"},w.prototype=Object.create(h.prototype),w.prototype.tokenType=":",b.prototype=Object.create(h.prototype),b.prototype.tokenType=";",y.prototype=Object.create(h.prototype),y.prototype.tokenType=",",v.prototype=Object.create(h.prototype),x.prototype=Object.create(v.prototype),x.prototype.tokenType="{",S.prototype=Object.create(v.prototype),S.prototype.tokenType="}",k.prototype=Object.create(v.prototype),k.prototype.tokenType="[",C.prototype=Object.create(v.prototype),C.prototype.tokenType="]",E.prototype=Object.create(v.prototype),E.prototype.tokenType="(",T.prototype=Object.create(v.prototype),T.prototype.tokenType=")",P.prototype=Object.create(h.prototype),P.prototype.tokenType="~=",O.prototype=Object.create(h.prototype),O.prototype.tokenType="|=",A.prototype=Object.create(h.prototype),A.prototype.tokenType="^=",I.prototype=Object.create(h.prototype),I.prototype.tokenType="$=",M.prototype=Object.create(h.prototype),M.prototype.tokenType="*=",N.prototype=Object.create(h.prototype),N.prototype.tokenType="||",F.prototype=Object.create(h.prototype),F.prototype.tokenType="EOF",F.prototype.toSource=function(){return""},D.prototype=Object.create(h.prototype),D.prototype.tokenType="DELIM",D.prototype.toString=function(){return"DELIM("+this.value+")"},D.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},D.prototype.toSource=function(){return"\\"==this.value?"\\\n":this.value},R.prototype=Object.create(h.prototype),R.prototype.ASCIIMatch=function(e){return this.value.toLowerCase()==e.toLowerCase()},R.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e},L.prototype=Object.create(R.prototype),L.prototype.tokenType="IDENT",L.prototype.toString=function(){return"IDENT("+this.value+")"},L.prototype.toSource=function(){return $(this.value)},j.prototype=Object.create(R.prototype),j.prototype.tokenType="FUNCTION",j.prototype.toString=function(){return"FUNCTION("+this.value+")"},j.prototype.toSource=function(){return $(this.value)+"("},B.prototype=Object.create(R.prototype),B.prototype.tokenType="AT-KEYWORD",B.prototype.toString=function(){return"AT("+this.value+")"},B.prototype.toSource=function(){return"@"+$(this.value)},q.prototype=Object.create(R.prototype),q.prototype.tokenType="HASH",q.prototype.toString=function(){return"HASH("+this.value+")"},q.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e},q.prototype.toSource=function(){return"id"==this.type?"#"+$(this.value):"#"+function(e){for(var n="",i=((e=""+e).charCodeAt(0),0);i<e.length;i++){var r=e.charCodeAt(i);if(0==r)throw new d("Invalid character: the input contains U+0000.");r>=128||45==r||95==r||t(r,48,57)||t(r,65,90)||t(r,97,122)?n+=e[i]:n+="\\"+r.toString(16)+" "}return n}(this.value)},H.prototype=Object.create(R.prototype),H.prototype.tokenType="STRING",H.prototype.toString=function(){return'"'+K(this.value)+'"'},W.prototype=Object.create(R.prototype),W.prototype.tokenType="URL",W.prototype.toString=function(){return"URL("+this.value+")"},W.prototype.toSource=function(){return'url("'+K(this.value)+'")'},U.prototype=Object.create(h.prototype),U.prototype.tokenType="NUMBER",U.prototype.toString=function(){return"integer"==this.type?"INT("+this.value+")":"NUMBER("+this.value+")"},U.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e},U.prototype.toSource=function(){return this.repr},z.prototype=Object.create(h.prototype),z.prototype.tokenType="PERCENTAGE",z.prototype.toString=function(){return"PERCENTAGE("+this.value+")"},z.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.repr=this.repr,e},z.prototype.toSource=function(){return this.repr+"%"},V.prototype=Object.create(h.prototype),V.prototype.tokenType="DIMENSION",V.prototype.toString=function(){return"DIM("+this.value+","+this.unit+")"},V.prototype.toJSON=function(){var e=this.constructor.prototype.constructor.prototype.toJSON.call(this);return e.value=this.value,e.type=this.type,e.repr=this.repr,e.unit=this.unit,e},V.prototype.toSource=function(){var e=this.repr,n=$(this.unit);return"e"!=n[0].toLowerCase()||"-"!=n[1]&&!t(n.charCodeAt(1),48,57)||(n="\\65 "+n.slice(1,n.length)),e+n},e.tokenize=function(e){e=function(e){for(var n=[],i=0;i<e.length;i++){var r=e.charCodeAt(i);if(13==r&&10==e.charCodeAt(i+1)&&(r=10,i++),13!=r&&12!=r||(r=10),0==r&&(r=65533),t(r,55296,56319)&&t(e.charCodeAt(i+1),56320,57343)){var s=r-55296,o=e.charCodeAt(i+1)-56320;r=Math.pow(2,16)+s*Math.pow(2,10)+o,i++}n.push(r)}return n}(e);for(var r,d=-1,h=[],v=0,R=0,$=0,K={line:v,column:R},G=function(t){return t>=e.length?-1:e[t]},Y=function(e){if(void 0===e&&(e=1),e>3)throw"Spec Error: no more than three codepoints of lookahead.";return G(d+e)},J=function(e){return void 0===e&&(e=1),c(r=G(d+=e))?(v+=1,$=R,R=0):R+=e,!0},X=function(){return d-=1,c(r)?(v-=1,R=$):R-=1,K.line=v,K.column=R,!0},Q=function(e){return void 0===e&&(e=r),-1==e},Z=function(){return console.log("Parse error at index "+d+", processing codepoint 0x"+r.toString(16)+"."),!0},ee=function(){if(te(),J(),l(r)){for(;l(Y());)J();return new f}if(34==r)return re();if(35==r){if(o(Y())||ae(Y(1),Y(2))){var e=new q;return le(Y(1),Y(2),Y(3))&&(e.type="id"),e.value=he(),e}return new D(r)}return 36==r?61==Y()?(J(),new I):new D(r):39==r?re():40==r?new E:41==r?new T:42==r?61==Y()?(J(),new M):new D(r):43==r?ue()?(X(),ne()):new D(r):44==r?new y:45==r?ue()?(X(),ne()):45==Y(1)&&62==Y(2)?(J(2),new g):de()?(X(),ie()):new D(r):46==r?ue()?(X(),ne()):new D(r):58==r?new w:59==r?new b:60==r?33==Y(1)&&45==Y(2)&&45==Y(3)?(J(3),new _):new D(r):64==r?le(Y(1),Y(2),Y(3))?new B(he()):new D(r):91==r?new k:92==r?ce()?(X(),ie()):(Z(),new D(r)):93==r?new C:94==r?61==Y()?(J(),new A):new D(r):123==r?new x:124==r?61==Y()?(J(),new O):124==Y()?(J(),new N):new D(r):125==r?new S:126==r?61==Y()?(J(),new P):new D(r):n(r)?(X(),ne()):s(r)?(X(),ie()):Q()?new F:new D(r)},te=function(){for(;47==Y(1)&&42==Y(2);)for(J(2);;){if(J(),42==r&&47==Y()){J();break}if(Q())return void Z()}},ne=function(){var e,t=pe();return le(Y(1),Y(2),Y(3))?((e=new V).value=t.value,e.repr=t.repr,e.type=t.type,e.unit=he(),e):37==Y()?(J(),(e=new z).value=t.value,e.repr=t.repr,e):((e=new U).value=t.value,e.repr=t.repr,e.type=t.type,e)},ie=function(){var e=he();if("url"==e.toLowerCase()&&40==Y()){for(J();l(Y(1))&&l(Y(2));)J();return 34==Y()||39==Y()?new j(e):!l(Y())||34!=Y(2)&&39!=Y(2)?se():new j(e)}return 40==Y()?(J(),new j(e)):new L(e)},re=function(e){void 0===e&&(e=r);for(var t="";J();){if(r==e||Q())return new H(t);if(c(r))return Z(),X(),new p;92==r?Q(Y())||(c(Y())?J():t+=u(oe())):t+=u(r)}},se=function(){for(var e=new W("");l(Y());)J();if(Q(Y()))return e;for(;J();){if(41==r||Q())return e;if(l(r)){for(;l(Y());)J();return 41==Y()||Q(Y())?(J(),e):(fe(),new m)}if(34==r||39==r||40==r||a(r))return Z(),fe(),new m;if(92==r){if(!ce())return Z(),fe(),new m;e.value+=u(oe())}else e.value+=u(r)}},oe=function(){if(J(),i(r)){for(var e=[r],t=0;t<5&&i(Y());t++)J(),e.push(r);l(Y())&&J();var n=parseInt(e.map((function(e){return String.fromCharCode(e)})).join(""),16);return n>1114111&&(n=65533),n}return Q()?65533:r},ae=function(e,t){return 92==e&&!c(t)},ce=function(){return ae(r,Y())},le=function(e,t,n){return 45==e?s(t)||45==t||ae(t,n):!!s(e)||92==e&&ae(e,t)},de=function(){return le(r,Y(1),Y(2))},ue=function(){return e=r,t=Y(1),i=Y(2),43==e||45==e?!!n(t)||!(46!=t||!n(i)):46==e?!!n(t):!!n(e);var e,t,i},he=function(){for(var e="";J();)if(o(r))e+=u(r);else{if(!ce())return X(),e;e+=u(oe())}},pe=function(){var e=[],t="integer";for(43!=Y()&&45!=Y()||(J(),e+=u(r));n(Y());)J(),e+=u(r);if(46==Y(1)&&n(Y(2)))for(J(),e+=u(r),J(),e+=u(r),t="number";n(Y());)J(),e+=u(r);var i=Y(1),s=Y(2),o=Y(3);if(69!=i&&101!=i||!n(s)){if((69==i||101==i)&&(43==s||45==s)&&n(o))for(J(),e+=u(r),J(),e+=u(r),J(),e+=u(r),t="number";n(Y());)J(),e+=u(r)}else for(J(),e+=u(r),J(),e+=u(r),t="number";n(Y());)J(),e+=u(r);return{type:t,value:me(e),repr:e}},me=function(e){return+e},fe=function(){for(;J();){if(41==r||Q())return;ce()&&oe()}},_e=0;!Q(Y());)if(h.push(ee()),++_e>2*e.length)return"I'm infinite-looping!";return h},e.IdentToken=L,e.FunctionToken=j,e.AtKeywordToken=B,e.HashToken=q,e.StringToken=H,e.BadStringToken=p,e.URLToken=W,e.BadURLToken=m,e.DelimToken=D,e.NumberToken=U,e.PercentageToken=z,e.DimensionToken=V,e.IncludeMatchToken=P,e.DashMatchToken=O,e.PrefixMatchToken=A,e.SuffixMatchToken=I,e.SubstringMatchToken=M,e.ColumnToken=N,e.WhitespaceToken=f,e.CDOToken=_,e.CDCToken=g,e.ColonToken=w,e.SemicolonToken=b,e.CommaToken=y,e.OpenParenToken=E,e.CloseParenToken=T,e.OpenSquareToken=k,e.CloseSquareToken=C,e.OpenCurlyToken=x,e.CloseCurlyToken=S,e.EOFToken=F,e.CSSParserToken=h,e.GroupingToken=v})?i.apply(t,r):i)||(e.exports=s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Download=void 0;const i=n(3),r=n(1),s=n(2),o=n(9),a=n(0);t.Download=class{constructor(e,t,n,i,r){this._saveCallbacks=[],this._finished=!1,this._failure=null,this._deleted=!1,this._page=e,this._downloadsPath=t,this._uuid=n,this._url=i,this._suggestedFilename=r,this._finishedCallback=()=>{},this._finishedPromise=new Promise(e=>this._finishedCallback=e),e._browserContext._downloads.add(this),this._acceptDownloads=!!this._page._browserContext._options.acceptDownloads,void 0!==r&&this._page.emit(o.Page.Events.Download,this)}_filenameSuggested(e){a.assert(void 0===this._suggestedFilename),this._suggestedFilename=e,this._page.emit(o.Page.Events.Download,this)}url(){return this._url}suggestedFilename(){return this._suggestedFilename}async localPath(){if(!this._acceptDownloads)throw new Error("Pass { acceptDownloads: true } when you are creating your browser context.");const e=i.join(this._downloadsPath,this._uuid);return await this._finishedPromise,this._failure?null:e}saveAs(e){if(!this._acceptDownloads)throw new Error("Pass { acceptDownloads: true } when you are creating your browser context.");if(this._deleted)throw new Error("Download already deleted. Save before deleting.");if(this._failure)throw new Error("Download not found on disk. Check download.failure() for details.");this._finished?e(i.join(this._downloadsPath,this._uuid)):this._saveCallbacks.push(e)}async failure(){return this._acceptDownloads?(await this._finishedPromise,this._failure):"Pass { acceptDownloads: true } when you are creating your browser context."}async delete(){if(!this._acceptDownloads)return;const e=await this.localPath();this._deleted||(this._deleted=!0,e&&await s.promisify(r.unlink)(e).catch(e=>{}))}async _reportFinished(e){if(this._finished=!0,this._failure=e||null,e)for(const t of this._saveCallbacks)t("",e);else{const e=i.join(this._downloadsPath,this._uuid);for(const t of this._saveCallbacks)await t(e)}this._saveCallbacks=[],this._finishedCallback()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRPage=void 0;const i=n(44),r=n(4),s=n(13),o=n(35),a=n(60),c=n(171),l=n(9),d=n(48),u=n(61),h=n(3),p=n(172),m=n(173),f=n(174),_=n(175),g=n(93),w=n(34),b=n(11),y=n(0),v=n(176),x="__playwright_utility_world__";t.CRPage=class{constructor(e,t,n,i,s){if(this._sessions=new Map,this._initializedPage=null,this._nextWindowOpenPopupFeatures=[],this._targetId=t,this._opener=i,this.rawKeyboard=new p.RawKeyboardImpl(e,n._browser._isMac),this.rawMouse=new p.RawMouseImpl(e),this.rawTouchscreen=new p.RawTouchscreenImpl(e),this._pdf=new _.CRPDF(e),this._coverage=new f.CRCoverage(e),this._browserContext=n,this._page=new l.Page(this,n),this._mainFrameSession=new S(this,e,t,null),this._sessions.set(t,this._mainFrameSession),e.once(o.CRSessionEvents.Disconnected,()=>this._page._didDisconnect()),i&&!n._options.noDefaultViewport){const e=i._nextWindowOpenPopupFeatures.shift()||[],t=r.helper.getViewportSizeFromWindowFeatures(e);t&&(this._page._state.viewportSize=t)}this._pagePromise=this._mainFrameSession._initialize(s).then(()=>this._initializedPage=this._page).catch(e=>e)}async _forAllFrameSessions(e){await Promise.all(Array.from(this._sessions.values()).map(t=>e(t)))}_sessionForFrame(e){for(;!this._sessions.has(e._id);){const t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");e=t}return this._sessions.get(e._id)}_sessionForHandle(e){const t=e._context.frame;return this._sessionForFrame(t)}async pageOrError(){return this._pagePromise}openerDelegate(){return this._opener}didClose(){for(const e of this._sessions.values())e.dispose();this._page._didClose(),this._mainFrameSession._stopScreencast().catch(()=>{})}async navigateFrame(e,t,n){return this._sessionForFrame(e)._navigate(e,t,n)}async exposeBinding(e){await this._forAllFrameSessions(t=>t._initBinding(e)),await Promise.all(this._page.frames().map(t=>t._evaluateExpression(e.source,!1,{},e.world).catch(e=>{})))}async updateExtraHTTPHeaders(){await this._forAllFrameSessions(e=>e._updateExtraHTTPHeaders(!1))}async updateGeolocation(){await this._forAllFrameSessions(e=>e._updateGeolocation(!1))}async updateOffline(){await this._forAllFrameSessions(e=>e._updateOffline(!1))}async updateHttpCredentials(){await this._forAllFrameSessions(e=>e._updateHttpCredentials(!1))}async setViewportSize(e){y.assert(this._page._state.viewportSize===e),await this._mainFrameSession._updateViewport()}async bringToFront(){await this._mainFrameSession._client.send("Page.bringToFront")}async updateEmulateMedia(){await this._forAllFrameSessions(e=>e._updateEmulateMedia(!1))}async updateRequestInterception(){await this._forAllFrameSessions(e=>e._updateRequestInterception(!1))}async setFileChooserIntercepted(e){await this._forAllFrameSessions(t=>t._setFileChooserIntercepted(e))}async opener(){if(!this._opener)return null;const e=await this._opener.pageOrError();return e instanceof l.Page&&!e.isClosed()?e:null}async reload(){await this._mainFrameSession._client.send("Page.reload")}async _go(e){const t=await this._mainFrameSession._client.send("Page.getNavigationHistory"),n=t.entries[t.currentIndex+e];return!!n&&(await this._mainFrameSession._client.send("Page.navigateToHistoryEntry",{entryId:n.id}),!0)}goBack(){return this._go(-1)}goForward(){return this._go(1)}async evaluateOnNewDocument(e,t="main"){await this._forAllFrameSessions(n=>n._evaluateOnNewDocument(e,t))}async closePage(e){e?await this._mainFrameSession._client.send("Page.close"):await this._browserContext._browser._closePage(this)}canScreenshotOutsideViewport(){return!1}async setBackgroundColor(e){await this._mainFrameSession._client.send("Emulation.setDefaultBackgroundColorOverride",{color:e})}async takeScreenshot(e,t,n,i){const{visualViewport:s}=await this._mainFrameSession._client.send("Page.getLayoutMetrics");t||(t={x:s.pageX+n.x,y:s.pageY+n.y,...r.helper.enclosingIntSize({width:n.width/s.scale,height:n.height/s.scale})});const o={...t,scale:n?s.scale:1},a=await this._mainFrameSession._client.send("Page.captureScreenshot",{format:e,quality:i,clip:o});return Buffer.from(a.data,"base64")}async resetViewport(){await this._mainFrameSession._client.send("Emulation.setDeviceMetricsOverride",{mobile:!1,width:0,height:0,deviceScaleFactor:0})}async getContentFrame(e){return this._sessionForHandle(e)._getContentFrame(e)}async getOwnerFrame(e){return this._sessionForHandle(e)._getOwnerFrame(e)}isElementHandle(e){return"node"===e.subtype}async getBoundingBox(e){return this._sessionForHandle(e)._getBoundingBox(e)}async scrollRectIntoViewIfNeeded(e,t){return this._sessionForHandle(e)._scrollRectIntoViewIfNeeded(e,t)}rafCountForStablePosition(){return 1}async getContentQuads(e){return this._sessionForHandle(e)._getContentQuads(e)}async setInputFiles(e,t){await e._evaluateInUtility(([e,t,n])=>e.setInputFiles(t,n),t)}async adoptElementHandle(e,t){return this._sessionForHandle(e)._adoptElementHandle(e,t)}async getAccessibilityTree(e){return m.getAccessibilityTree(this._mainFrameSession._client,e)}async inputActionEpilogue(){await this._mainFrameSession._client.send("Page.enable").catch(e=>{})}async pdf(e){return this._pdf.generate(e)}coverage(){return this._coverage}async getFrameElement(e){let t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");const n=this._sessionForFrame(t),{backendNodeId:i}=await n._client.send("DOM.getFrameOwner",{frameId:e._id}).catch(e=>{throw e instanceof Error&&e.message.includes("Frame with the given id was not found.")&&b.rewriteErrorMessage(e,"Frame has been detached."),e});if(t=e.parentFrame(),!t)throw new Error("Frame has been detached.");return n._adoptBackendNodeId(i,await t._mainContext())}};class S{constructor(e,t,n,i){this._contextIdToContext=new Map,this._eventListeners=[],this._firstNonInitialNavigationCommittedFulfill=()=>{},this._firstNonInitialNavigationCommittedReject=e=>{},this._swappedIn=!1,this._videoRecorder=null,this._screencastId=null,this._client=t,this._crPage=e,this._page=e._page,this._targetId=n,this._networkManager=new c.CRNetworkManager(t,this._page,i?i._networkManager:null),this._firstNonInitialNavigationCommittedPromise=new Promise((e,t)=>{this._firstNonInitialNavigationCommittedFulfill=e,this._firstNonInitialNavigationCommittedReject=t}),t.once(o.CRSessionEvents.Disconnected,()=>{this._firstNonInitialNavigationCommittedReject(new Error("Page closed"))})}_isMainFrame(){return this._targetId===this._crPage._targetId}_addRendererListeners(){this._eventListeners.push(r.helper.addEventListener(this._client,"Log.entryAdded",e=>this._onLogEntryAdded(e)),r.helper.addEventListener(this._client,"Page.fileChooserOpened",e=>this._onFileChooserOpened(e)),r.helper.addEventListener(this._client,"Page.frameAttached",e=>this._onFrameAttached(e.frameId,e.parentFrameId)),r.helper.addEventListener(this._client,"Page.frameDetached",e=>this._onFrameDetached(e.frameId,e.reason)),r.helper.addEventListener(this._client,"Page.frameNavigated",e=>this._onFrameNavigated(e.frame,!1)),r.helper.addEventListener(this._client,"Page.frameRequestedNavigation",e=>this._onFrameRequestedNavigation(e)),r.helper.addEventListener(this._client,"Page.frameStoppedLoading",e=>this._onFrameStoppedLoading(e.frameId)),r.helper.addEventListener(this._client,"Page.javascriptDialogOpening",e=>this._onDialog(e)),r.helper.addEventListener(this._client,"Page.navigatedWithinDocument",e=>this._onFrameNavigatedWithinDocument(e.frameId,e.url)),r.helper.addEventListener(this._client,"Runtime.bindingCalled",e=>this._onBindingCalled(e)),r.helper.addEventListener(this._client,"Runtime.consoleAPICalled",e=>this._onConsoleAPI(e)),r.helper.addEventListener(this._client,"Runtime.exceptionThrown",e=>this._handleException(e.exceptionDetails)),r.helper.addEventListener(this._client,"Runtime.executionContextCreated",e=>this._onExecutionContextCreated(e.context)),r.helper.addEventListener(this._client,"Runtime.executionContextDestroyed",e=>this._onExecutionContextDestroyed(e.executionContextId)),r.helper.addEventListener(this._client,"Runtime.executionContextsCleared",e=>this._onExecutionContextsCleared()),r.helper.addEventListener(this._client,"Target.attachedToTarget",e=>this._onAttachedToTarget(e)),r.helper.addEventListener(this._client,"Target.detachedFromTarget",e=>this._onDetachedFromTarget(e)))}_addBrowserListeners(){this._eventListeners.push(r.helper.addEventListener(this._client,"Inspector.targetCrashed",e=>this._onTargetCrashed()),r.helper.addEventListener(this._client,"Page.downloadWillBegin",e=>this._onDownloadWillBegin(e)),r.helper.addEventListener(this._client,"Page.downloadProgress",e=>this._onDownloadProgress(e)),r.helper.addEventListener(this._client,"Page.screencastFrame",e=>this._onScreencastFrame(e)),r.helper.addEventListener(this._client,"Page.windowOpen",e=>this._onWindowOpen(e)))}async _initialize(e){if(e&&!this._crPage._browserContext._browser.isClank()&&!this._crPage._browserContext._options.noDefaultViewport){const{windowId:e}=await this._client.send("Browser.getWindowForTarget");this._windowId=e}let t;this._isMainFrame()||this._addRendererListeners(),this._addBrowserListeners();const n=[this._client.send("Page.enable"),this._client.send("Page.getFrameTree").then(({frameTree:e})=>{this._isMainFrame()&&(this._handleFrameTree(e),this._addRendererListeners());const n=this._isMainFrame()?this._page.frames():[this._page._frameManager.frame(this._targetId)];for(const e of n){this._client._sendMayFail("Page.createIsolatedWorld",{frameId:e._id,grantUniveralAccess:!0,worldName:x});for(const t of this._crPage._browserContext._pageBindings.values())e._evaluateExpression(t.source,!1,{},t.world).catch(e=>{})}this._isMainFrame()&&":"===this._page.mainFrame().url()?t.then(()=>{this._eventListeners.push(r.helper.addEventListener(this._client,"Page.lifecycleEvent",e=>this._onLifecycleEvent(e)))}):(this._firstNonInitialNavigationCommittedFulfill(),this._eventListeners.push(r.helper.addEventListener(this._client,"Page.lifecycleEvent",e=>this._onLifecycleEvent(e))))}),this._client.send("Log.enable",{}),t=this._client.send("Page.setLifecycleEventsEnabled",{enabled:!0}),this._client.send("Runtime.enable",{}),this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:w.generateSourceUrl(),worldName:x}),this._networkManager.initialize(),this._client.send("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),this._client.send("Emulation.setFocusEmulationEnabled",{enabled:!0})],i=this._crPage._browserContext._options;i.bypassCSP&&n.push(this._client.send("Page.setBypassCSP",{enabled:!0})),i.ignoreHTTPSErrors&&n.push(this._client.send("Security.setIgnoreCertificateErrors",{ignore:!0})),this._isMainFrame()&&n.push(this._updateViewport()),i.hasTouch&&n.push(this._client.send("Emulation.setTouchEmulationEnabled",{enabled:!0})),!1===i.javaScriptEnabled&&n.push(this._client.send("Emulation.setScriptExecutionDisabled",{value:!0})),(i.userAgent||i.locale)&&n.push(this._client.send("Emulation.setUserAgentOverride",{userAgent:i.userAgent||"",acceptLanguage:i.locale})),i.locale&&n.push(async function(e,t){try{await e.send("Emulation.setLocaleOverride",{locale:t})}catch(e){if(e.message.includes("Another locale override is already in effect"))return;throw e}}(this._client,i.locale)),i.timezoneId&&n.push(async function(e,t){try{await e.send("Emulation.setTimezoneOverride",{timezoneId:t})}catch(e){if(e.message.includes("Timezone override is already in effect"))return;if(e.message.includes("Invalid timezone"))throw new Error("Invalid timezone ID: "+t);throw e}}(this._client,i.timezoneId)),n.push(this._updateGeolocation(!0)),n.push(this._updateExtraHTTPHeaders(!0)),n.push(this._updateRequestInterception(!0)),n.push(this._updateOffline(!0)),n.push(this._updateHttpCredentials(!0)),n.push(this._updateEmulateMedia(!0));for(const e of this._crPage._page.allBindings())n.push(this._initBinding(e));for(const e of this._crPage._browserContext._evaluateOnNewDocumentSources)n.push(this._evaluateOnNewDocument(e,"main"));for(const e of this._crPage._page._evaluateOnNewDocumentSources)n.push(this._evaluateOnNewDocument(e,"main"));if(this._isMainFrame()&&this._crPage._browserContext._options.recordVideo&&e){const e=this._crPage._browserContext._options.recordVideo.size||this._crPage._browserContext._options.viewport||{width:1280,height:720},t=y.createGuid(),i=h.join(this._crPage._browserContext._options.recordVideo.dir,t+".webm");n.push(this._crPage._browserContext._ensureVideosPath().then(()=>this._startScreencast(t,{...e,outputFile:i})))}n.push(this._client.send("Runtime.runIfWaitingForDebugger")),n.push(this._firstNonInitialNavigationCommittedPromise),await Promise.all(n)}dispose(){r.helper.removeEventListeners(this._eventListeners),this._networkManager.dispose(),this._crPage._sessions.delete(this._targetId)}async _navigate(e,t,n){const i=await this._client.send("Page.navigate",{url:t,referrer:n,frameId:e._id});if(i.errorText)throw new Error(`${i.errorText} at ${t}`);return{newDocumentId:i.loaderId}}_onLifecycleEvent(e){"load"===e.name?this._page._frameManager.frameLifecycleEvent(e.frameId,"load"):"DOMContentLoaded"===e.name&&this._page._frameManager.frameLifecycleEvent(e.frameId,"domcontentloaded")}_onFrameStoppedLoading(e){this._page._frameManager.frameStoppedLoading(e)}_handleFrameTree(e){if(this._onFrameAttached(e.frame.id,e.frame.parentId||null),this._onFrameNavigated(e.frame,!0),e.childFrames)for(const t of e.childFrames)this._handleFrameTree(t)}_onFrameAttached(e,t){const n=this._crPage._sessions.get(e);if(n&&e!==this._targetId){n._swappedIn=!0;const t=this._page._frameManager.frame(e);this._page._frameManager.removeChildFramesRecursively(t)}else this._page._frameManager.frameAttached(e,t)}_onFrameNavigated(e,t){this._page._frameManager.frameCommittedNewDocumentNavigation(e.id,e.url+(e.urlFragment||""),e.name||"",e.loaderId,t),t||this._firstNonInitialNavigationCommittedFulfill()}_onFrameRequestedNavigation(e){"currentTab"===e.disposition&&this._page._frameManager.frameRequestedNavigation(e.frameId)}_onFrameNavigatedWithinDocument(e,t){this._page._frameManager.frameCommittedSameDocumentNavigation(e,t)}_onFrameDetached(e,t){if(!this._crPage._sessions.has(e))if("swap"!==t)this._page._frameManager.frameDetached(e);else{const t=this._page._frameManager.frame(e);t&&this._page._frameManager.removeChildFramesRecursively(t)}}_onExecutionContextCreated(e){const t=e.auxData?this._page._frameManager.frame(e.auxData.frameId):null;if(!t)return;const n=new a.CRExecutionContext(this._client,e);let r=null;e.auxData&&e.auxData.isDefault?r="main":e.name===x&&(r="utility");const s=new i.FrameExecutionContext(n,t,r);r&&t._contextCreated(r,s),this._contextIdToContext.set(e.id,s)}_onExecutionContextDestroyed(e){const t=this._contextIdToContext.get(e);t&&(this._contextIdToContext.delete(e),t.frame._contextDestroyed(t))}_onExecutionContextsCleared(){for(const e of Array.from(this._contextIdToContext.keys()))this._onExecutionContextDestroyed(e)}_onAttachedToTarget(e){const t=o.CRConnection.fromSession(this._client).session(e.sessionId);if("iframe"===e.targetInfo.type){const n=e.targetInfo.targetId,i=this._page._frameManager.frame(n);this._page._frameManager.removeChildFramesRecursively(i);const r=new S(this._crPage,t,n,this);return this._crPage._sessions.set(n,r),void r._initialize(!1).catch(e=>e)}if("worker"!==e.targetInfo.type)return void t._sendMayFail("Runtime.runIfWaitingForDebugger").then(()=>{this._client._sendMayFail("Target.detachFromTarget",{sessionId:e.sessionId})});const n=e.targetInfo.url,i=new l.Worker(n);this._page._addWorker(e.sessionId,i),t.once("Runtime.executionContextCreated",async e=>{i._createExecutionContext(new a.CRExecutionContext(t,e.context))}),Promise.all([t._sendMayFail("Runtime.enable"),t._sendMayFail("Network.enable"),t._sendMayFail("Runtime.runIfWaitingForDebugger")]),t.on("Runtime.consoleAPICalled",e=>{const t=e.args.map(e=>i._existingExecutionContext.createHandle(e));this._page._addConsoleMessage(e.type,t,d.toConsoleMessageLocation(e.stackTrace))}),t.on("Runtime.exceptionThrown",e=>this._page.emit(l.Page.Events.PageError,d.exceptionToError(e.exceptionDetails))),this._networkManager.instrumentNetworkEvents(t,this._page._frameManager.frame(this._targetId))}_onDetachedFromTarget(e){this._page._removeWorker(e.sessionId);const t=this._crPage._sessions.get(e.targetId);t&&(t._swappedIn?t.dispose():this._client.send("Page.enable").catch(e=>null).then(()=>{t._swappedIn||this._page._frameManager.frameDetached(e.targetId),t.dispose()}))}_onWindowOpen(e){this._crPage._nextWindowOpenPopupFeatures.push(e.windowFeatures)}async _onConsoleAPI(e){if(0===e.executionContextId)return;const t=this._contextIdToContext.get(e.executionContextId),n=e.args.map(e=>t.createHandle(e));this._page._addConsoleMessage(e.type,n,d.toConsoleMessageLocation(e.stackTrace))}async _initBinding(e){const t="utility"===e.world?x:void 0;await Promise.all([this._client.send("Runtime.addBinding",{name:e.name,executionContextName:t}),this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:e.source,worldName:t})])}async _onBindingCalled(e){const t=this._contextIdToContext.get(e.executionContextId);await this._crPage.pageOrError()instanceof Error||await this._page._onBindingCalled(e.payload,t)}_onDialog(e){this._page.emit(l.Page.Events.Dialog,new u.Dialog(this._page,e.type,e.message,async(e,t)=>{await this._client.send("Page.handleJavaScriptDialog",{accept:e,promptText:t})},e.defaultPrompt))}_handleException(e){this._page.emit(l.Page.Events.PageError,d.exceptionToError(e))}async _onTargetCrashed(){this._client._markAsCrashed(),this._page._didCrash()}_onLogEntryAdded(e){const{level:t,text:n,args:i,source:r,url:s,lineNumber:o}=e.entry;if(i&&i.map(e=>d.releaseObject(this._client,e.objectId)),"worker"!==r){const e={url:s||"",lineNumber:o||0,columnNumber:0};this._page.emit(l.Page.Events.Console,new g.ConsoleMessage(t,n,[],e))}}async _onFileChooserOpened(e){const t=this._page._frameManager.frame(e.frameId),n=await t._utilityContext(),i=await this._adoptBackendNodeId(e.backendNodeId,n);this._page._onFileChooserOpened(i)}_onDownloadWillBegin(e){let t=this._crPage._initializedPage;t||(this._firstNonInitialNavigationCommittedReject(new Error("Starting new page download")),this._crPage._opener&&(t=this._crPage._opener._initializedPage)),t&&this._crPage._browserContext._browser._downloadCreated(t,e.guid,e.url,e.suggestedFilename)}_onDownloadProgress(e){"completed"===e.state&&this._crPage._browserContext._browser._downloadFinished(e.guid,""),"canceled"===e.state&&this._crPage._browserContext._browser._downloadFinished(e.guid,"canceled")}_onScreencastFrame(e){if(!this._videoRecorder)return;const t=Buffer.from(e.data,"base64");this._videoRecorder.writeFrame(t,e.metadata.timestamp),this._client.send("Page.screencastFrameAck",{sessionId:e.sessionId}).catch(()=>{})}async _startScreencast(e,t){y.assert(!this._screencastId),this._videoRecorder=await v.VideoRecorder.launch(t),this._screencastId=e;const n=new Promise(e=>this._client.once("Page.screencastFrame",e));await this._client.send("Page.startScreencast",{format:"jpeg",quality:90,maxWidth:t.width,maxHeight:t.height}),this._crPage._browserContext._browser._videoStarted(this._crPage._browserContext,e,t.outputFile,this._crPage.pageOrError()),await n}async _stopScreencast(){if(!this._screencastId)return;await this._client._sendMayFail("Page.stopScreencast");const e=this._videoRecorder,t=this._screencastId;this._videoRecorder=null,this._screencastId=null,await e.stop().catch(()=>{}),this._crPage._browserContext._browser._videoFinished(t)}async _updateExtraHTTPHeaders(e){const t=s.mergeHeaders([this._crPage._browserContext._options.extraHTTPHeaders,this._page._state.extraHTTPHeaders]);e&&!t.length||await this._client.send("Network.setExtraHTTPHeaders",{headers:y.headersArrayToObject(t,!1)})}async _updateGeolocation(e){const t=this._crPage._browserContext._options.geolocation;e&&!t||await this._client.send("Emulation.setGeolocationOverride",t||{})}async _updateOffline(e){const t=!!this._crPage._browserContext._options.offline;e&&!t||await this._networkManager.setOffline(t)}async _updateHttpCredentials(e){const t=this._crPage._browserContext._options.httpCredentials||null;e&&!t||await this._networkManager.authenticate(t)}async _updateViewport(){if(this._crPage._browserContext._browser.isClank())return;y.assert(this._isMainFrame());const e=this._crPage._browserContext._options,t=this._page._state.viewportSize;if(null===t)return;const n=t.width>t.height,i=[this._client.send("Emulation.setDeviceMetricsOverride",{mobile:!!e.isMobile,width:t.width,height:t.height,screenWidth:t.width,screenHeight:t.height,deviceScaleFactor:e.deviceScaleFactor||1,screenOrientation:n?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"}})];if(this._windowId){let e={width:0,height:0};this._crPage._browserContext._browser._options.headful&&(e={width:24,height:88},"win32"===process.platform?e={width:16,height:88}:"linux"===process.platform?e={width:8,height:85}:"darwin"===process.platform&&(e={width:2,height:80})),i.push(this._client.send("Browser.setWindowBounds",{windowId:this._windowId,bounds:{width:t.width+e.width,height:t.height+e.height}}))}await Promise.all(i)}async _updateEmulateMedia(e){if(this._crPage._browserContext._browser.isClank())return;const t=this._page._state.colorScheme||this._crPage._browserContext._options.colorScheme||"light",n=t?[{name:"prefers-color-scheme",value:t}]:[];await this._client.send("Emulation.setEmulatedMedia",{media:this._page._state.mediaType||"",features:n})}async _updateRequestInterception(e){await this._networkManager.setRequestInterception(this._page._needsRequestInterception())}async _setFileChooserIntercepted(e){await this._client.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(e=>{})}async _evaluateOnNewDocument(e,t){const n="utility"===t?x:void 0;await this._client.send("Page.addScriptToEvaluateOnNewDocument",{source:e,worldName:n})}async _getContentFrame(e){const t=await this._client.send("DOM.describeNode",{objectId:e._objectId});return t&&"string"==typeof t.node.frameId?this._page._frameManager.frame(t.node.frameId):null}async _getOwnerFrame(e){const t=await e.evaluateHandle(e=>{const t=e;return t.documentElement&&t.documentElement.ownerDocument===t?t.documentElement:e.ownerDocument?e.ownerDocument.documentElement:null});if(!t)return null;if(!t._objectId)return null;const n=await this._client.send("DOM.describeNode",{objectId:t._objectId}),i=n&&"string"==typeof n.node.frameId?n.node.frameId:null;return t.dispose(),i}async _getBoundingBox(e){const t=await this._client._sendMayFail("DOM.getBoxModel",{objectId:e._objectId});if(!t)return null;const n=t.model.border,i=Math.min(n[0],n[2],n[4],n[6]),r=Math.min(n[1],n[3],n[5],n[7]),s=Math.max(n[0],n[2],n[4],n[6])-i,o=Math.max(n[1],n[3],n[5],n[7])-r,a=await this._framePosition();return a?{x:i+a.x,y:r+a.y,width:s,height:o}:null}async _framePosition(){const e=this._page._frameManager.frame(this._targetId);if(!e)return null;if(e===this._page.mainFrame())return{x:0,y:0};const t=await e.frameElement();return await t.boundingBox()}async _scrollRectIntoViewIfNeeded(e,t){return await this._client.send("DOM.scrollIntoViewIfNeeded",{objectId:e._objectId,rect:t}).then(()=>"done").catch(e=>{if(e instanceof Error&&e.message.includes("Node does not have a layout object"))return"error:notvisible";if(e instanceof Error&&e.message.includes("Node is detached from document"))return"error:notconnected";throw e})}async _getContentQuads(e){const t=await this._client._sendMayFail("DOM.getContentQuads",{objectId:e._objectId});if(!t)return null;const n=await this._framePosition();return n?t.quads.map(e=>[{x:e[0]+n.x,y:e[1]+n.y},{x:e[2]+n.x,y:e[3]+n.y},{x:e[4]+n.x,y:e[5]+n.y},{x:e[6]+n.x,y:e[7]+n.y}]):null}async _adoptElementHandle(e,t){const n=await this._client.send("DOM.describeNode",{objectId:e._objectId});return this._adoptBackendNodeId(n.node.backendNodeId,t)}async _adoptBackendNodeId(e,t){const n=await this._client._sendMayFail("DOM.resolveNode",{backendNodeId:e,executionContextId:t._delegate._contextId});if(!n||"null"===n.object.subtype)throw new Error("Unable to adopt element handle from a different document");return t.createHandle(n.object).asElement()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRNetworkManager=void 0;const i=n(4),r=n(13),s=n(0);t.CRNetworkManager=class{constructor(e,t,n){this._requestIdToRequest=new Map,this._requestIdToRequestWillBeSentEvent=new Map,this._credentials=null,this._attemptedAuthentications=new Set,this._userRequestInterceptionEnabled=!1,this._protocolRequestInterceptionEnabled=!1,this._requestIdToRequestPausedEvent=new Map,this._requestIdToExtraInfo=new Map,this._client=e,this._page=t,this._parentManager=n,this._eventListeners=this.instrumentNetworkEvents(e)}instrumentNetworkEvents(e,t){return[i.helper.addEventListener(e,"Fetch.requestPaused",this._onRequestPaused.bind(this,t)),i.helper.addEventListener(e,"Fetch.authRequired",this._onAuthRequired.bind(this)),i.helper.addEventListener(e,"Network.requestWillBeSent",this._onRequestWillBeSent.bind(this,t)),i.helper.addEventListener(e,"Network.requestWillBeSentExtraInfo",this._onRequestWillBeSentExtraInfo.bind(this)),i.helper.addEventListener(e,"Network.responseReceived",this._onResponseReceived.bind(this)),i.helper.addEventListener(e,"Network.loadingFinished",this._onLoadingFinished.bind(this)),i.helper.addEventListener(e,"Network.loadingFailed",this._onLoadingFailed.bind(this)),i.helper.addEventListener(e,"Network.webSocketCreated",e=>this._page._frameManager.onWebSocketCreated(e.requestId,e.url)),i.helper.addEventListener(e,"Network.webSocketWillSendHandshakeRequest",e=>this._page._frameManager.onWebSocketRequest(e.requestId)),i.helper.addEventListener(e,"Network.webSocketHandshakeResponseReceived",e=>this._page._frameManager.onWebSocketResponse(e.requestId,e.response.status,e.response.statusText)),i.helper.addEventListener(e,"Network.webSocketFrameSent",e=>e.response.payloadData&&this._page._frameManager.onWebSocketFrameSent(e.requestId,e.response.opcode,e.response.payloadData)),i.helper.addEventListener(e,"Network.webSocketFrameReceived",e=>e.response.payloadData&&this._page._frameManager.webSocketFrameReceived(e.requestId,e.response.opcode,e.response.payloadData)),i.helper.addEventListener(e,"Network.webSocketClosed",e=>this._page._frameManager.webSocketClosed(e.requestId)),i.helper.addEventListener(e,"Network.webSocketFrameError",e=>this._page._frameManager.webSocketError(e.requestId,e.errorMessage))]}async initialize(){await this._client.send("Network.enable")}dispose(){i.helper.removeEventListeners(this._eventListeners)}async authenticate(e){this._credentials=e,await this._updateProtocolRequestInterception()}async setOffline(e){await this._client.send("Network.emulateNetworkConditions",{offline:e,latency:0,downloadThroughput:-1,uploadThroughput:-1})}async setRequestInterception(e){this._userRequestInterceptionEnabled=e,await this._updateProtocolRequestInterception()}async _updateProtocolRequestInterception(){const e=this._userRequestInterceptionEnabled||!!this._credentials;e!==this._protocolRequestInterceptionEnabled&&(this._protocolRequestInterceptionEnabled=e,e?await Promise.all([this._client.send("Network.setCacheDisabled",{cacheDisabled:!0}),this._client.send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*"}]})]):await Promise.all([this._client.send("Network.setCacheDisabled",{cacheDisabled:!1}),this._client.send("Fetch.disable")]))}_onRequestWillBeSent(e,t){if(this._protocolRequestInterceptionEnabled&&!t.request.url.startsWith("data:")){const n=t.requestId,i=this._requestIdToRequestPausedEvent.get(n);i?(this._onRequest(e,t,i),this._requestIdToRequestPausedEvent.delete(n)):this._requestIdToRequestWillBeSentEvent.set(t.requestId,t)}else this._onRequest(e,t,null);const n=this._requestIdToExtraInfo.get(t.requestId);n&&this._onRequestWillBeSentExtraInfo(n)}_onRequestWillBeSentExtraInfo(e){const t=this._requestIdToRequest.get(e.requestId);t?(t.request.updateWithRawHeaders(s.headersObjectToArray(e.headers)),this._requestIdToExtraInfo.delete(e.requestId)):this._requestIdToExtraInfo.set(e.requestId,e)}_onAuthRequired(e){let t="Default";this._attemptedAuthentications.has(e.requestId)?t="CancelAuth":this._credentials&&(t="ProvideCredentials",this._attemptedAuthentications.add(e.requestId));const{username:n,password:i}=this._credentials||{username:void 0,password:void 0};this._client._sendMayFail("Fetch.continueWithAuth",{requestId:e.requestId,authChallengeResponse:{response:t,username:n,password:i}})}_onRequestPaused(e,t){if(!this._userRequestInterceptionEnabled&&this._protocolRequestInterceptionEnabled&&this._client._sendMayFail("Fetch.continueRequest",{requestId:t.requestId}),!t.networkId)return void this._client._sendMayFail("Fetch.failRequest",{requestId:t.requestId,errorReason:"Aborted"});if(t.request.url.startsWith("data:"))return;const n=t.networkId,i=this._requestIdToRequestWillBeSentEvent.get(n);i?(this._onRequest(e,i,t),this._requestIdToRequestWillBeSentEvent.delete(n)):this._requestIdToRequestPausedEvent.set(n,t)}_onRequest(e,t,n){if(t.request.url.startsWith("data:"))return;let i=null;if(t.redirectResponse){const e=this._requestIdToRequest.get(t.requestId);e&&(this._handleRequestRedirect(e,t.redirectResponse,t.timestamp),i=e.request)}let s=t.frameId?this._page._frameManager.frame(t.frameId):e;if(!s&&n&&n.frameId&&(s=this._page._frameManager.frame(n.frameId)),!s&&n&&t.frameId===this._page._delegate._targetId&&(s=this._page._frameManager.frameAttached(t.frameId,null)),n&&"OPTIONS"===n.request.method&&this._page._needsRequestInterception()){const e=n.request.headers,t=[{name:"Access-Control-Allow-Origin",value:e.Origin||"*"},{name:"Access-Control-Allow-Methods",value:e["Access-Control-Request-Method"]||"GET, POST, OPTIONS, DELETE"},{name:"Access-Control-Allow-Credentials",value:"true"}];return e["Access-Control-Request-Headers"]&&t.push({name:"Access-Control-Allow-Headers",value:e["Access-Control-Request-Headers"]}),void this._client._sendMayFail("Fetch.fulfillRequest",{requestId:n.requestId,responseCode:204,responsePhrase:r.STATUS_TEXTS[204],responseHeaders:t,body:""})}if(!s)return void(n&&this._client._sendMayFail("Fetch.continueRequest",{requestId:n.requestId}));let a=this._userRequestInterceptionEnabled;i&&(a=!1,n&&this._client._sendMayFail("Fetch.continueRequest",{requestId:n.requestId}));const c=t.requestId===t.loaderId&&"Document"===t.type?t.loaderId:void 0,l=new o({client:this._client,frame:s,documentId:c,allowInterception:a,requestWillBeSentEvent:t,requestPausedEvent:n,redirectedFrom:i});this._requestIdToRequest.set(t.requestId,l),this._page._frameManager.requestStarted(l.request)}_createResponse(e,t){const n=t.timing;let i;return i=n?{startTime:1e3*(n.requestTime-e._timestamp+e._wallTime),domainLookupStart:n.dnsStart,domainLookupEnd:n.dnsEnd,connectStart:n.connectStart,secureConnectionStart:n.sslStart,connectEnd:n.connectEnd,requestStart:n.sendStart,responseStart:n.receiveHeadersEnd}:{startTime:1e3*e._wallTime,domainLookupStart:-1,domainLookupEnd:-1,connectStart:-1,secureConnectionStart:-1,connectEnd:-1,requestStart:-1,responseStart:-1},new r.Response(e.request,t.status,t.statusText,s.headersObjectToArray(t.headers),i,async()=>{const t=await this._client.send("Network.getResponseBody",{requestId:e._requestId});return Buffer.from(t.body,t.base64Encoded?"base64":"utf8")})}_handleRequestRedirect(e,t,n){const i=this._createResponse(e,t);i._requestFinished(1e3*(n-e._timestamp),"Response body is unavailable for redirect responses"),this._requestIdToRequest.delete(e._requestId),e._interceptionId&&this._attemptedAuthentications.delete(e._interceptionId),this._page._frameManager.requestReceivedResponse(i),this._page._frameManager.requestFinished(e.request)}_onResponseReceived(e){const t=this._requestIdToRequest.get(e.requestId);if(!t)return;const n=this._createResponse(t,e.response);this._page._frameManager.requestReceivedResponse(n)}_onLoadingFinished(e){let t=this._requestIdToRequest.get(e.requestId);if(t||(t=this._maybeAdoptMainRequest(e.requestId)),!t)return;const n=t.request._existingResponse();n&&n._requestFinished(i.helper.secondsToRoundishMillis(e.timestamp-t._timestamp)),this._requestIdToRequest.delete(t._requestId),t._interceptionId&&this._attemptedAuthentications.delete(t._interceptionId),this._page._frameManager.requestFinished(t.request)}_onLoadingFailed(e){let t=this._requestIdToRequest.get(e.requestId);if(t||(t=this._maybeAdoptMainRequest(e.requestId)),!t)return;const n=t.request._existingResponse();n&&n._requestFinished(i.helper.secondsToRoundishMillis(e.timestamp-t._timestamp)),this._requestIdToRequest.delete(t._requestId),t._interceptionId&&this._attemptedAuthentications.delete(t._interceptionId),t.request._setFailureText(e.errorText),this._page._frameManager.requestFailed(t.request,!!e.canceled)}_maybeAdoptMainRequest(e){if(!this._parentManager)return;const t=this._parentManager._requestIdToRequest.get(e);return t&&t._documentId===e?(this._requestIdToRequest.set(e,t),this._parentManager._requestIdToRequest.delete(e),t._interceptionId&&this._parentManager._attemptedAuthentications.has(t._interceptionId)&&(this._parentManager._attemptedAuthentications.delete(t._interceptionId),this._attemptedAuthentications.add(t._interceptionId)),t):void 0}};class o{constructor(e){const{client:t,frame:n,documentId:i,allowInterception:o,requestWillBeSentEvent:a,requestPausedEvent:c,redirectedFrom:l}=e;this._client=t,this._timestamp=a.timestamp,this._wallTime=a.wallTime,this._requestId=a.requestId,this._interceptionId=c&&c.requestId,this._documentId=i;const{headers:d,method:u,url:h,postDataEntries:p=null}=c?c.request:a.request,m=(a.type||"").toLowerCase();let f=null;p&&p.length&&p[0].bytes&&(f=Buffer.from(p[0].bytes,"base64")),this.request=new r.Request(o?this:null,n,l,i,h,m,u,f,s.headersObjectToArray(d))}async continue(e){await this._client._sendMayFail("Fetch.continueRequest",{requestId:this._interceptionId,url:e.url,headers:e.headers,method:e.method,postData:e.postData?e.postData.toString("base64"):void 0})}async fulfill(e){const t=e.isBase64?e.body:Buffer.from(e.body).toString("base64");await this._client._sendMayFail("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:e.status,responsePhrase:r.STATUS_TEXTS[String(e.status)],responseHeaders:e.headers,body:t})}async abort(e="failed"){const t=a[e];s.assert(t,"Unknown error code: "+e),await this._client._sendMayFail("Fetch.failRequest",{requestId:this._interceptionId,errorReason:t})}}const a={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawTouchscreenImpl=t.RawMouseImpl=t.RawKeyboardImpl=void 0;const i=n(58),r=n(94),s=n(0);function o(e){let t=0;return e.has("Alt")&&(t|=1),e.has("Control")&&(t|=2),e.has("Meta")&&(t|=4),e.has("Shift")&&(t|=8),t}t.RawKeyboardImpl=class{constructor(e,t){this._client=e,this._isMac=t}_commandsForCode(e,t){if(!this._isMac)return[];const n=[];for(const e of["Shift","Control","Alt","Meta"])t.has(e)&&n.push(e);n.push(e);const i=n.join("+");let o=r.macEditingCommands[i]||[];return s.isString(o)&&(o=[o]),o=o.filter(e=>!e.startsWith("insert")),o.map(e=>e.substring(0,e.length-1))}async keydown(e,t,n,r,s,a,c,l){const d=this._commandsForCode(t,e);await this._client.send("Input.dispatchKeyEvent",{type:l?"keyDown":"rawKeyDown",modifiers:o(e),windowsVirtualKeyCode:r,code:t,commands:d,key:s,text:l,unmodifiedText:l,autoRepeat:c,location:a,isKeypad:a===i.keypadLocation})}async keyup(e,t,n,i,r,s){await this._client.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:o(e),key:r,windowsVirtualKeyCode:i,code:t,location:s})}async sendText(e){await this._client.send("Input.insertText",{text:e})}};t.RawMouseImpl=class{constructor(e){this._client=e}async move(e,t,n,i,r){await this._client.send("Input.dispatchMouseEvent",{type:"mouseMoved",button:n,x:e,y:t,modifiers:o(r)})}async down(e,t,n,i,r,s){await this._client.send("Input.dispatchMouseEvent",{type:"mousePressed",button:n,x:e,y:t,modifiers:o(r),clickCount:s})}async up(e,t,n,i,r,s){await this._client.send("Input.dispatchMouseEvent",{type:"mouseReleased",button:n,x:e,y:t,modifiers:o(r),clickCount:s})}};t.RawTouchscreenImpl=class{constructor(e){this._client=e}async tap(e,t,n){await Promise.all([this._client.send("Input.dispatchTouchEvent",{type:"touchStart",modifiers:o(n),touchPoints:[{x:e,y:t}]}),this._client.send("Input.dispatchTouchEvent",{type:"touchEnd",modifiers:o(n),touchPoints:[]})])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessibilityTree=void 0,t.getAccessibilityTree=async function(e,t){const{nodes:n}=await e.send("Accessibility.getFullAXTree"),r=i.createTree(e,n);return{tree:r,needle:t?await r._findElement(t):null}};class i{constructor(e,t){this._children=[],this._richlyEditable=!1,this._editable=!1,this._focusable=!1,this._expanded=!1,this._hidden=!1,this._client=e,this._payload=t,this._name=this._payload.name?this._payload.name.value:"",this._role=this._payload.role?this._payload.role.value:"Unknown";for(const e of this._payload.properties||[])"editable"===e.name&&(this._richlyEditable="richtext"===e.value.value,this._editable=!0),"focusable"===e.name&&(this._focusable=e.value.value),"expanded"===e.name&&(this._expanded=e.value.value),"hidden"===e.name&&(this._hidden=e.value.value)}_isPlainTextField(){return!this._richlyEditable&&(!!this._editable||("textbox"===this._role||"ComboBox"===this._role||"searchbox"===this._role))}_isTextOnlyObject(){const e=this._role;return"LineBreak"===e||"text"===e||"InlineTextBox"===e}_hasFocusableChild(){if(void 0===this._cachedHasFocusableChild){this._cachedHasFocusableChild=!1;for(const e of this._children)if(e._focusable||e._hasFocusableChild()){this._cachedHasFocusableChild=!0;break}}return this._cachedHasFocusableChild}children(){return this._children}async _findElement(e){const t=e._objectId,{node:{backendNodeId:n}}=await this._client.send("DOM.describeNode",{objectId:t});return this.find(e=>e._payload.backendDOMNodeId===n)||null}find(e){if(e(this))return this;for(const t of this._children){const n=t.find(e);if(n)return n}return null}isLeafNode(){if(!this._children.length)return!0;if(this._isPlainTextField()||this._isTextOnlyObject())return!0;switch(this._role){case"doc-cover":case"graphics-symbol":case"img":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return!this._hasFocusableChild()&&(!(!this._focusable||"WebArea"===this._role||!this._name)||!("heading"!==this._role||!this._name))}isControl(){switch(this._role){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":return!0;default:return!1}}isInteresting(e){return"Ignored"!==this._role&&!this._hidden&&(!(!this._focusable&&!this._richlyEditable)||(!!this.isControl()||!e&&(this.isLeafNode()&&!!this._name)))}serialize(){const e=new Map;for(const t of this._payload.properties||[])e.set(t.name.toLowerCase(),t.value.value);this._payload.description&&e.set("description",this._payload.description.value);const t={role:this._role,name:this._payload.name&&this._payload.name.value||""},n=["description","keyshortcuts","roledescription","valuetext"];for(const i of n)e.has(i)&&(t[i]=e.get(i));const i=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(const n of i){if("focused"===n&&"WebArea"===this._role)continue;const i=e.get(n);i&&(t[n]=i)}const r=["level","valuemax","valuemin"];for(const n of r)e.has(n)&&(t[n]=e.get(n));const s=["autocomplete","haspopup","invalid","orientation"];for(const n of s){const i=e.get(n);i&&"false"!==i&&(t[n]=i)}const o=t;return this._payload.value&&("string"==typeof this._payload.value.value&&(o.valueString=this._payload.value.value),"number"==typeof this._payload.value.value&&(o.valueNumber=this._payload.value.value)),e.has("checked")&&(o.checked="true"===e.get("checked")?"checked":"false"===e.get("checked")?"unchecked":"mixed"),e.has("pressed")&&(o.pressed="true"===e.get("pressed")?"pressed":"false"===e.get("pressed")?"released":"mixed"),o}static createTree(e,t){const n=new Map;for(const r of t)n.set(r.nodeId,new i(e,r));for(const e of n.values())for(const t of e._payload.childIds||[])e._children.push(n.get(t));return n.values().next().value}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRCoverage=void 0;const i=n(4),r=n(0);t.CRCoverage=class{constructor(e){this._jsCoverage=new s(e),this._cssCoverage=new o(e)}async startJSCoverage(e){return await this._jsCoverage.start(e)}async stopJSCoverage(){return await this._jsCoverage.stop()}async startCSSCoverage(e){return await this._cssCoverage.start(e)}async stopCSSCoverage(){return await this._cssCoverage.stop()}};class s{constructor(e){this._reportAnonymousScripts=!1,this._client=e,this._enabled=!1,this._scriptIds=new Set,this._scriptSources=new Map,this._eventListeners=[],this._resetOnNavigation=!1}async start(e={}){r.assert(!this._enabled,"JSCoverage is already enabled");const{resetOnNavigation:t=!0,reportAnonymousScripts:n=!1}=e;this._resetOnNavigation=t,this._reportAnonymousScripts=n,this._enabled=!0,this._scriptIds.clear(),this._scriptSources.clear(),this._eventListeners=[i.helper.addEventListener(this._client,"Debugger.scriptParsed",this._onScriptParsed.bind(this)),i.helper.addEventListener(this._client,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this)),i.helper.addEventListener(this._client,"Debugger.paused",this._onDebuggerPaused.bind(this))],await Promise.all([this._client.send("Profiler.enable"),this._client.send("Profiler.startPreciseCoverage",{callCount:!0,detailed:!0}),this._client.send("Debugger.enable"),this._client.send("Debugger.setSkipAllPauses",{skip:!0})])}_onDebuggerPaused(){this._client.send("Debugger.resume")}_onExecutionContextsCleared(){this._resetOnNavigation&&(this._scriptIds.clear(),this._scriptSources.clear())}async _onScriptParsed(e){if(this._scriptIds.add(e.scriptId),!e.url&&!this._reportAnonymousScripts)return;const t=await this._client._sendMayFail("Debugger.getScriptSource",{scriptId:e.scriptId});t&&this._scriptSources.set(e.scriptId,t.scriptSource)}async stop(){r.assert(this._enabled,"JSCoverage is not enabled"),this._enabled=!1;const[e]=await Promise.all([this._client.send("Profiler.takePreciseCoverage"),this._client.send("Profiler.stopPreciseCoverage"),this._client.send("Profiler.disable"),this._client.send("Debugger.disable")]);i.helper.removeEventListeners(this._eventListeners);const t=[];for(const n of e.result){if(!this._scriptIds.has(n.scriptId))continue;if(!n.url&&!this._reportAnonymousScripts)continue;const e=this._scriptSources.get(n.scriptId);e?t.push({...n,source:e}):t.push(n)}return t}}class o{constructor(e){this._client=e,this._enabled=!1,this._stylesheetURLs=new Map,this._stylesheetSources=new Map,this._eventListeners=[],this._resetOnNavigation=!1}async start(e={}){r.assert(!this._enabled,"CSSCoverage is already enabled");const{resetOnNavigation:t=!0}=e;this._resetOnNavigation=t,this._enabled=!0,this._stylesheetURLs.clear(),this._stylesheetSources.clear(),this._eventListeners=[i.helper.addEventListener(this._client,"CSS.styleSheetAdded",this._onStyleSheet.bind(this)),i.helper.addEventListener(this._client,"Runtime.executionContextsCleared",this._onExecutionContextsCleared.bind(this))],await Promise.all([this._client.send("DOM.enable"),this._client.send("CSS.enable"),this._client.send("CSS.startRuleUsageTracking")])}_onExecutionContextsCleared(){this._resetOnNavigation&&(this._stylesheetURLs.clear(),this._stylesheetSources.clear())}async _onStyleSheet(e){const t=e.header;if(!t.sourceURL)return;const n=await this._client._sendMayFail("CSS.getStyleSheetText",{styleSheetId:t.styleSheetId});n&&(this._stylesheetURLs.set(t.styleSheetId,t.sourceURL),this._stylesheetSources.set(t.styleSheetId,n.text))}async stop(){r.assert(this._enabled,"CSSCoverage is not enabled"),this._enabled=!1;const e=await this._client.send("CSS.stopRuleUsageTracking");await Promise.all([this._client.send("CSS.disable"),this._client.send("DOM.disable")]),i.helper.removeEventListeners(this._eventListeners);const t=new Map;for(const n of e.ruleUsage){let e=t.get(n.styleSheetId);e||(e=[],t.set(n.styleSheetId,e)),e.push({startOffset:n.startOffset,endOffset:n.endOffset,count:n.used?1:0})}const n=[];for(const e of this._stylesheetURLs.keys()){const i=this._stylesheetURLs.get(e),r=this._stylesheetSources.get(e),s=a(t.get(e)||[]);n.push({url:i,ranges:s,text:r})}return n}}function a(e){const t=[];for(const n of e)t.push({offset:n.startOffset,type:0,range:n}),t.push({offset:n.endOffset,type:1,range:n});t.sort((e,t)=>{if(e.offset!==t.offset)return e.offset-t.offset;if(e.type!==t.type)return t.type-e.type;const n=e.range.endOffset-e.range.startOffset,i=t.range.endOffset-t.range.startOffset;return 0===e.type?i-n:n-i});const n=[],i=[];let r=0;for(const e of t){if(n.length&&r<e.offset&&n[n.length-1]>0){const t=i.length?i[i.length-1]:null;t&&t.end===r?t.end=e.offset:i.push({start:r,end:e.offset})}r=e.offset,0===e.type?n.push(e.range.count):n.pop()}return i.filter(e=>e.end-e.start>1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRPDF=void 0;const i=n(0),r=n(48),s={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1,height:46.8},a1:{width:23.4,height:33.1},a2:{width:16.54,height:23.4},a3:{width:11.7,height:16.54},a4:{width:8.27,height:11.7},a5:{width:5.83,height:8.27},a6:{width:4.13,height:5.83}},o={px:1,in:96,cm:37.8,mm:3.78};function a(e){if(void 0===e)return;let t=e.substring(e.length-2).toLowerCase(),n="";o.hasOwnProperty(t)?n=e.substring(0,e.length-2):(t="px",n=e);const r=Number(n);i.assert(!isNaN(r),"Failed to parse parameter value: "+e);return r*o[t]/96}t.CRPDF=class{constructor(e){this._client=e}async generate(e={}){const{scale:t=1,displayHeaderFooter:n=!1,headerTemplate:o="",footerTemplate:c="",printBackground:l=!1,landscape:d=!1,pageRanges:u="",preferCSSPageSize:h=!1,margin:p={}}=e;let m=8.5,f=11;if(e.format){const t=s[e.format.toLowerCase()];i.assert(t,"Unknown paper format: "+e.format),m=t.width,f=t.height}else m=a(e.width)||m,f=a(e.height)||f;const _=a(p.top)||0,g=a(p.left)||0,w=a(p.bottom)||0,b=a(p.right)||0,y=await this._client.send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:d,displayHeaderFooter:n,headerTemplate:o,footerTemplate:c,printBackground:l,scale:t,paperWidth:m,paperHeight:f,marginTop:_,marginBottom:w,marginLeft:g,marginRight:b,pageRanges:u,preferCSSPageSize:h});return await r.readProtocolStream(this._client,y.stream,null)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoRecorder=void 0;const i=n(95),r=n(0),s=n(62),o=n(17);class a{constructor(e){this._process=null,this._gracefullyClose=null,this._lastWritePromise=Promise.resolve(),this._lastFrameTimestamp=0,this._lastFrameBuffer=null,this._lastWriteTimestamp=0,this._frameQueue=[],this._isStopped=!1,this._progress=e}static async launch(e){if(!e.outputFile.endsWith(".webm"))throw new Error("File must have .webm extension");const t=new o.ProgressController;return t.setLogName("browser"),await t.run(async t=>{const n=new a(t);return await n._launch(e),n})}async _launch(e){const t=e.width,n=e.height,r=`-loglevel error -f image2pipe -c:v mjpeg -i - -y -an -r 25 -c:v vp8 -qmin 0 -qmax 50 -crf 8 -b:v 1M -vf pad=${t}:${n}:0:0:gray,crop=${t}:${n}:0:0`.split(" ");r.push(e.outputFile);const o=this._progress,a=i.ffmpegExecutable();if(!a)throw new Error("ffmpeg executable was not found");const{launchedProcess:c,gracefullyClose:l}=await s.launchProcess({executablePath:a,args:r,stdio:"stdin",log:e=>o.log(e),tempDirectories:[],attemptToGracefullyClose:async()=>{o.log("Closing stdin..."),c.stdin.end()},onExit:(e,t)=>{o.log(`ffmpeg onkill exitCode=${e} signal=${t}`)}});c.stdin.on("finish",()=>{o.log("ffmpeg finished input.")}),c.stdin.on("error",()=>{o.log("ffmpeg error.")}),this._process=c,this._gracefullyClose=l}writeFrame(e,t){if(r.assert(this._process),!this._isStopped){if(this._progress.log("writing frame "+t),this._lastFrameBuffer){const e=t-this._lastFrameTimestamp,n=Math.max(1,Math.round(25*e));for(let e=0;e<n;++e)this._frameQueue.push(this._lastFrameBuffer);this._lastWritePromise=this._lastWritePromise.then(()=>this._sendFrames())}this._lastFrameBuffer=e,this._lastFrameTimestamp=t,this._lastWriteTimestamp=r.monotonicTime()}}async _sendFrames(){for(;this._frameQueue.length;)await this._sendFrame(this._frameQueue.shift())}async _sendFrame(e){return new Promise(t=>this._process.stdin.write(e,t)).then(e=>{e&&this._progress.log("ffmpeg failed to write: "+e)})}async stop(){this._isStopped||(this.writeFrame(Buffer.from([]),this._lastFrameTimestamp+(r.monotonicTime()-this._lastWriteTimestamp)/1e3),this._isStopped=!0,await this._lastWritePromise,await this._gracefullyClose())}}t.VideoRecorder=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;const i=n(0);t.Transport=class{constructor(e,t,n,r="le"){this._data=Buffer.from([]),this._waitForNextTask=i.makeWaitForNextTask(),this._closed=!1,this._bytesLeft=0,this._pipeWrite=e,this._endian=r,this._closeableStream=n,t.on("data",e=>this._dispatch(e)),t.on("close",()=>{this._closed=!0,this.onclose&&this.onclose()}),this.onmessage=void 0,this.onclose=void 0}send(e){if(this._closed)throw new Error("Pipe has been closed");const t=Buffer.from(e,"utf-8"),n=Buffer.alloc(4);"be"===this._endian?n.writeUInt32BE(t.length,0):n.writeUInt32LE(t.length,0),this._pipeWrite.write(n),this._pipeWrite.write(t)}close(){this._closeableStream.close()}_dispatch(e){for(this._data=Buffer.concat([this._data,e]);(this._bytesLeft||!(this._data.length<4))&&(this._bytesLeft||(this._bytesLeft="be"===this._endian?this._data.readUInt32BE(0):this._data.readUInt32LE(0),this._data=this._data.slice(4)),this._bytesLeft&&!(this._data.length<this._bytesLeft));){const e=this._data.slice(0,this._bytesLeft);this._data=this._data.slice(this._bytesLeft),this._bytesLeft=0,this._waitForNextTask(()=>{this.onmessage&&this.onmessage(e.toString("utf-8"))})}}}},function(e,t,n){var i={"./PrintDeps.exe":179};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id=178},function(e,t){throw new Error("Module parse failed: Unexpected character 'ï¿½' (1:2)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n(Source code omitted for this binary file)")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AdbBackend=void 0;const i=n(33),r=n(54),s=n(79),o=n(24);t.AdbBackend=class{async devices(){return(await c("host:devices")).toString().trim().split("\n").map(e=>{const[t,n]=e.trim().split("\t");return new a(t,n)})}};class a{constructor(e,t){this.serial=e,this.status=t}async init(){}async close(){}runCommand(e){return c(e,this.serial)}async open(e){const t=await async function(e,t){const n=new d(e,s.createConnection({port:5037}));if(t){await n.write(l("host:transport:"+t));const e=await n.read(4);i("OKAY"===e.toString(),e.toString())}await n.write(l(e));const r=await n.read(4);return i("OKAY"===r.toString(),r.toString()),n}(e,this.serial);return t.becomeSocket(),t}}async function c(e,t){r("pw:adb:runCommand")(e,t);const n=new d(e,s.createConnection({port:5037}));if(t){await n.write(l("host:transport:"+t));const e=await n.read(4);i("OKAY"===e.toString(),e.toString())}await n.write(l(e));const o=await n.read(4);let a;if(i("OKAY"===o.toString(),o.toString()),e.startsWith("shell:"))a=await n.readAll();else{const e=parseInt((await n.read(4)).toString(),16);a=await n.read(e)}return await n.close(),a}function l(e){let t=e.length.toString(16);return t="0".repeat(4-t.length)+t,Buffer.from(t+e)}class d extends o.EventEmitter{constructor(e,t){super(),this._buffer=Buffer.from([]),this._isSocket=!1,this._isClosed=!1,this._command=e,this._socket=t,this._connectPromise=new Promise(e=>this._socket.on("connect",e)),this._socket.on("data",e=>{r("pw:adb:data")(e.toString()),this._isSocket?this.emit("data",e):(this._buffer=Buffer.concat([this._buffer,e]),this._notifyReader&&this._notifyReader())}),this._socket.on("close",()=>{this._isClosed=!0,this._notifyReader&&this._notifyReader(),this.close(),this.emit("close")}),this._socket.on("error",e=>this.emit("error",e))}async write(e){r("pw:adb:send")(e.toString().substring(0,100)+"..."),await this._connectPromise,await new Promise(t=>this._socket.write(e,t))}async close(){this._isClosed||(r("pw:adb")("Close "+this._command),this._socket.destroy())}async read(e){for(await this._connectPromise,i(!this._isSocket,"Can not read by length in socket mode");this._buffer.length<e;)await new Promise(e=>this._notifyReader=e);const t=this._buffer.slice(0,e);return this._buffer=this._buffer.slice(e),r("pw:adb:recv")(t.toString().substring(0,100)+"..."),t}async readAll(){for(;!this._isClosed;)await new Promise(e=>this._notifyReader=e);return this._buffer}becomeSocket(){i(!this._buffer.length),this._isSocket=!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Chromium=void 0;const i=n(3),r=n(46),s=n(35),o=n(11),a=n(64),c=n(184),l=n(0);class d extends a.BrowserType{constructor(e,t){super(e,t),l.isDebugMode()&&(this._devtools=this._createDevTools())}_createDevTools(){return new c.CRDevTools(i.join(this._browserPath,"devtools-preferences.json"))}async _connectToTransport(e,t){let n=this._devtools;return t.__testHookForDevTools&&(n=this._createDevTools(),await t.__testHookForDevTools(n)),r.CRBrowser.connect(e,t,n)}_rewriteStartupError(e){return e.message.includes("crbug.com/357670")||e.message.includes("No usable sandbox!")||e.message.includes("crbug.com/638180")?o.rewriteErrorMessage(e,["Chromium sandboxing failed!","================================","To workaround sandboxing issues, do either of the following:","  - (preferred): Configure environment to support sandboxing: https://github.com/microsoft/playwright/blob/master/docs/troubleshooting.md","  - (alternative): Launch Chromium without sandbox using 'chromiumSandbox: false' option","================================",""].join("\n")):e}_amendEnvironment(e,t,n,i){return e}_attemptToGracefullyCloseBrowser(e){const t={method:"Browser.close",id:s.kBrowserCloseMessageId,params:{}};e.send(t)}_defaultArgs(e,t,n){const{args:i=[],proxy:r}=e;if(i.find(e=>e.startsWith("--user-data-dir")))throw new Error("Pass userDataDir parameter instead of specifying --user-data-dir argument");if(i.find(e=>e.startsWith("--remote-debugging-pipe")))throw new Error("Playwright manages remote debugging connection itself.");if(i.find(e=>!e.startsWith("-")))throw new Error("Arguments can not specify page to be opened");const s=[...u];if(s.push("--user-data-dir="+n),s.push("--remote-debugging-pipe"),e.devtools&&s.push("--auto-open-devtools-for-tabs"),e.headless&&s.push("--headless","--hide-scrollbars","--mute-audio","--blink-settings=primaryHoverType=2,availableHoverTypes=2,primaryPointerType=4,availablePointerTypes=4"),!0!==e.chromiumSandbox&&s.push("--no-sandbox"),r){const e=new URL(r.server);if("socks5:"===e.protocol&&s.push(`--host-resolver-rules="MAP * ~NOTFOUND , EXCLUDE ${e.hostname}"`),s.push("--proxy-server="+r.server),r.bypass){const e=r.bypass.split(",").map(e=>e.trim()).map(e=>e.startsWith(".")?"*"+e:e);s.push("--proxy-bypass-list="+e.join(";"))}}return s.push(...i),t?s.push("about:blank"):s.push("--no-startup-window"),s}}t.Chromium=d;const u=["--disable-background-networking","--enable-features=NetworkService,NetworkServiceInProcess","--disable-background-timer-throttling","--disable-backgrounding-occluded-windows","--disable-breakpad","--disable-client-side-phishing-detection","--disable-component-extensions-with-background-pages","--disable-default-apps","--disable-dev-shm-usage","--disable-extensions","--disable-features=TranslateUI,BlinkGenPropertyTrees,ImprovedCookieControls,SameSiteByDefaultCookies,LazyFrameLoading","--disable-hang-monitor","--disable-ipc-flooding-protection","--disable-popup-blocking","--disable-prompt-on-repost","--disable-renderer-backgrounding","--disable-sync","--force-color-profile=srgb","--metrics-recording-only","--no-first-run","--enable-automation","--password-store=basic","--use-mock-keychain"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PipeTransport=void 0;const i=n(0),r=n(10);t.PipeTransport=class{constructor(e,t){this._pendingMessage="",this._waitForNextTask=i.makeWaitForNextTask(),this._closed=!1,this._pipeWrite=e,t.on("data",e=>this._dispatch(e)),t.on("close",()=>{this._closed=!0,this.onclose&&this.onclose.call(null)}),t.on("error",e=>r.debugLogger.log("error",e)),e.on("error",e=>r.debugLogger.log("error",e)),this.onmessage=void 0,this.onclose=void 0}send(e){if(this._closed)throw new Error("Pipe has been closed");this._pipeWrite.write(JSON.stringify(e)),this._pipeWrite.write("\0")}close(){throw new Error("unimplemented")}_dispatch(e){let t=e.indexOf("\0");if(-1===t)return void(this._pendingMessage+=e.toString());const n=this._pendingMessage+e.toString(void 0,0,t);this._waitForNextTask(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(n))});let i=t+1;for(t=e.indexOf("\0",i);-1!==t;){const n=e.toString(void 0,i,t);this._waitForNextTask(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(n))}),i=t+1,t=e.indexOf("\0",i)}this._pendingMessage=e.toString(void 0,i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spawnAsync=t.validateHostRequirements=void 0;const i=n(1),r=n(2),s=n(3),o=n(14),a=n(63),c=n(98),l=n(97),d=n(95),u=r.promisify(i.access.bind(i)),h=r.promisify(i.stat.bind(i)),p=r.promisify(i.readdir.bind(i));t.validateHostRequirements=async function(e,t){const n=await c.getUbuntuVersion();if("firefox"===t.name&&"16.04"===n)throw new Error("Cannot launch firefox on Ubuntu 16.04! Minimum required Ubuntu version for Firefox browser is 18.04");return"linux"===o.platform()?await async function(e,t){const n=l.linuxLddDirectories(e,t),i=[];for(const e of n)i.push(...await f(e));const r=await Promise.all(i.map(e=>async function(e,t){const n=s.dirname(e);let i=t.join(":");process.env.LD_LIBRARY_PATH&&(i=`${process.env.LD_LIBRARY_PATH}:${i}`);const{stdout:r,code:o}=await _("ldd",[e],{cwd:n,env:{...process.env,LD_LIBRARY_PATH:i}});if(0!==o)return[];return r.split("\n").map(e=>e.trim()).filter(e=>e.endsWith("not found")&&e.includes("=>")).map(e=>e.split("=>")[0].trim())}(e,n))),o=new Set;for(const e of r)for(const t of e)o.add(t);for(const e of await async function(e){const t=m[e.name];if(!t.length)return[];const{stdout:n,code:i,error:r}=await _("/sbin/ldconfig",["-p"],{});if(0!==i||r)return[];return t.filter(e=>!(e=>n.toLowerCase().includes(e.toLowerCase()))(e))}(t))o.add(e);if(!o.size)return;const a=new Set,d=await c.getUbuntuVersion();let u=null;"18.04"===d?u=g:"20.04"===d&&(u=w);if(u=Object.assign({},u,b),u)for(const e of o){const t=u[e];t&&(a.add(t),o.delete(e))}let h="";a.size&&(h=["  Install missing packages with:","      sudo apt-get install "+[...a].join("\\\n          "),"",""].join("\n"));let p="";if(o.size){const e=a.size?"Missing libraries we didn't find packages for:":"Missing libraries are:";p=["  "+e,"      "+[...o].join("\n      "),""].join("\n")}throw new Error("Host system is missing dependencies!\n\n"+h+p)}(e,t):"win32"===o.platform()&&"x64"===o.arch()?await async function(e,t){const n=l.windowsExeAndDllDirectories(e,t),i=[];for(const e of n)i.push(...await f(e));const r=await Promise.all(i.map(e=>async function(e){const t=d.printDepsWindowsExecutable();if(!t)return[];const n=s.dirname(e),{stdout:i,code:r}=await _(t,[e],{cwd:n,env:{...process.env,LD_LIBRARY_PATH:process.env.LD_LIBRARY_PATH?`${process.env.LD_LIBRARY_PATH}:${n}`:n}});if(0!==r)return[];return i.split("\n").map(e=>e.trim()).filter(e=>e.endsWith("not found")&&e.includes("=>")).map(e=>e.split("=>")[0].trim().toLowerCase())}(e))),a=new Set;for(const e of r)for(const t of e)a.add(t);if(!a.size)return;let c=!1,u=!1;for(const e of a)e.startsWith("api-ms-win-crt")||"vcruntime140.dll"===e||"vcruntime140_1.dll"===e||"msvcp140.dll"===e?c=!0:"mf.dll"!==e&&"mfplat.dll"!==e&&"msmpeg2vdec.dll"!==e&&"evr.dll"!==e&&"avrt.dll"!==e||(u=!0);const h=[];c&&h.push("Some of the Universal C Runtime files cannot be found on the system. You can fix","that by installing Microsoft Visual C++ Redistributable for Visual Studio from:","https://support.microsoft.com/en-us/help/2977003/the-latest-supported-visual-c-downloads","");u&&h.push("Some of the Media Foundation files cannot be found on the system. If you are","on Windows Server try fixing this by running the following command in PowerShell","as Administrator:","","    Install-WindowsFeature Server-Media-Foundation","","For Windows N editions visit:","https://support.microsoft.com/en-us/help/3145500/media-feature-pack-list-for-windows-n-editions","");h.push("Full list of missing libraries:","    "+[...a].join("\n    "),"");const p="Host system is missing dependencies!\n\n"+h.join("\n");if(function(){if("win32"!==o.platform()||"x64"!==o.arch())return!1;const[e,t]=o.release().split(".").map(e=>parseInt(e,10));return e>6||6===e&&t>1}())throw new Error(p);console.warn("WARNING: running on unsupported windows version!"),console.warn(p)}(e,t):void 0};const m={chromium:[],webkit:["libGLESv2.so.2","libx264.so"],firefox:[],clank:[]};async function f(e){const t=(await p(e)).map(t=>s.resolve(e,t)),n=await Promise.all(t.map(e=>h(e))),r=t.filter((e,t)=>n[t].isFile());return(await Promise.all(r.map(async e=>(function(e){switch(o.platform()){case"linux":return e.endsWith(".so")||e.includes(".so.");case"win32":return e.endsWith(".dll");default:return!1}}(s.basename(e).toLowerCase())||!!await(e=>u(e,i.constants.X_OK).then(()=>!0).catch(e=>!1))(e))&&e))).filter(Boolean)}function _(e,t,n){const i=a.spawn(e,t,n);return new Promise(e=>{let t="",n="";i.stdout.on("data",e=>t+=e),i.stderr.on("data",e=>n+=e),i.on("close",i=>e({stdout:t,stderr:n,code:i})),i.on("error",i=>e({stdout:t,stderr:n,code:0,error:i}))})}t.spawnAsync=_;const g={"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libbrotlidec.so.1":"libbrotli1","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libenchant.so.1":"libenchant1c2a","libepoxy.so.0":"libepoxy0","libevent-2.1.so.6":"libevent-2.1-6","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstapp-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstaudio-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"libgstreamer-plugins-bad1.0-0","libgstfft-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstvideo-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicudata.so.60":"libicu60","libicui18n.so.60":"libicu60","libicuuc.so.60":"libicu60","libjpeg.so.8":"libjpeg-turbo8","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libvpx.so.5":"libvpx5","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-dri3.so.0":"libxcb-dri3-0","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6","libXtst.so.6":"libxtst6"},w={"libasound.so.2":"libasound2","libatk-1.0.so.0":"libatk1.0-0","libatk-bridge-2.0.so.0":"libatk-bridge2.0-0","libatspi.so.0":"libatspi2.0-0","libcairo-gobject.so.2":"libcairo-gobject2","libcairo.so.2":"libcairo2","libcups.so.2":"libcups2","libdbus-1.so.3":"libdbus-1-3","libdbus-glib-1.so.2":"libdbus-glib-1-2","libdrm.so.2":"libdrm2","libEGL.so.1":"libegl1","libenchant.so.1":"libenchant1c2a","libepoxy.so.0":"libepoxy0","libfontconfig.so.1":"libfontconfig1","libfreetype.so.6":"libfreetype6","libgbm.so.1":"libgbm1","libgdk_pixbuf-2.0.so.0":"libgdk-pixbuf2.0-0","libgdk-3.so.0":"libgtk-3-0","libgdk-x11-2.0.so.0":"libgtk2.0-0","libgio-2.0.so.0":"libglib2.0-0","libGL.so.1":"libgl1","libGLESv2.so.2":"libgles2","libglib-2.0.so.0":"libglib2.0-0","libgmodule-2.0.so.0":"libglib2.0-0","libgobject-2.0.so.0":"libglib2.0-0","libgstapp-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstaudio-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstbase-1.0.so.0":"libgstreamer1.0-0","libgstcodecparsers-1.0.so.0":"libgstreamer-plugins-bad1.0-0","libgstfft-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstgl-1.0.so.0":"libgstreamer-gl1.0-0","libgstpbutils-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstreamer-1.0.so.0":"libgstreamer1.0-0","libgsttag-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgstvideo-1.0.so.0":"libgstreamer-plugins-base1.0-0","libgthread-2.0.so.0":"libglib2.0-0","libgtk-3.so.0":"libgtk-3-0","libgtk-x11-2.0.so.0":"libgtk2.0-0","libharfbuzz-icu.so.0":"libharfbuzz-icu0","libharfbuzz.so.0":"libharfbuzz0b","libhyphen.so.0":"libhyphen0","libicui18n.so.66":"libicu66","libicuuc.so.66":"libicu66","libjpeg.so.8":"libjpeg-turbo8","libnotify.so.4":"libnotify4","libnspr4.so":"libnspr4","libnss3.so":"libnss3","libnssutil3.so":"libnss3","libopenjp2.so.7":"libopenjp2-7","libopus.so.0":"libopus0","libpango-1.0.so.0":"libpango-1.0-0","libpangocairo-1.0.so.0":"libpangocairo-1.0-0","libpangoft2-1.0.so.0":"libpangoft2-1.0-0","libpng16.so.16":"libpng16-16","libsecret-1.so.0":"libsecret-1-0","libsmime3.so":"libnss3","libsoup-2.4.so.1":"libsoup2.4-1","libvpx.so.6":"libvpx6","libwayland-client.so.0":"libwayland-client0","libwayland-egl.so.1":"libwayland-egl1","libwayland-server.so.0":"libwayland-server0","libwebp.so.6":"libwebp6","libwebpdemux.so.2":"libwebpdemux2","libwoff2dec.so.1.0.2":"libwoff1","libX11-xcb.so.1":"libx11-xcb1","libX11.so.6":"libx11-6","libxcb-dri3.so.0":"libxcb-dri3-0","libxcb-shm.so.0":"libxcb-shm0","libxcb.so.1":"libxcb1","libXcomposite.so.1":"libxcomposite1","libXcursor.so.1":"libxcursor1","libXdamage.so.1":"libxdamage1","libXext.so.6":"libxext6","libXfixes.so.3":"libxfixes3","libXi.so.6":"libxi6","libxkbcommon.so.0":"libxkbcommon0","libxml2.so.2":"libxml2","libXrandr.so.2":"libxrandr2","libXrender.so.1":"libxrender1","libxslt.so.1":"libxslt1.1","libXt.so.6":"libxt6","libXtst.so.6":"libxtst6"},b={"libx264.so":"gstreamer1.0-libav"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CRDevTools=void 0;const i=n(1),r=n(2);t.CRDevTools=class{constructor(e){this._preferencesPath=e,this._savePromise=Promise.resolve()}async install(e){e.on("Runtime.bindingCalled",async t=>{if("__pw_devtools__"!==t.name)return;const n=JSON.parse(t.payload);let s=void 0;if(this.__testHookOnBinding&&this.__testHookOnBinding(n),"getPreferences"===n.method){if(void 0===this._prefs)try{const e=await r.promisify(i.readFile)(this._preferencesPath,"utf8");this._prefs=JSON.parse(e)}catch(e){this._prefs={}}s=this._prefs}else"setPreference"===n.method?(this._prefs[n.params[0]]=n.params[1],this._save()):"removePreference"===n.method?(delete this._prefs[n.params[0]],this._save()):"clearPreferences"===n.method&&(this._prefs={},this._save());e.send("Runtime.evaluate",{expression:`window.DevToolsAPI.embedderMessageAck(${n.id}, ${JSON.stringify(s)})`,contextId:t.executionContextId}).catch(e=>null)}),await Promise.all([e.send("Runtime.enable"),e.send("Runtime.addBinding",{name:"__pw_devtools__"}),e.send("Page.enable"),e.send("Page.addScriptToEvaluateOnNewDocument",{source:"\n        (() => {\n          const init = () => {\n            // Lazy init happens when InspectorFrontendHost is initialized.\n            // At this point DevToolsHost is ready to be used.\n            const host = window.DevToolsHost;\n            const old = host.sendMessageToEmbedder.bind(host);\n            host.sendMessageToEmbedder = message => {\n              if (['getPreferences', 'setPreference', 'removePreference', 'clearPreferences'].includes(JSON.parse(message).method))\n                window.__pw_devtools__(message);\n              else\n                old(message);\n            };\n          };\n          let value;\n          Object.defineProperty(window, 'InspectorFrontendHost', {\n            configurable: true,\n            enumerable: true,\n            get() { return value; },\n            set(v) { value = v; init(); },\n          });\n        })()\n      "}),e.send("Runtime.runIfWaitingForDebugger")]).catch(e=>null)}_save(){this._savePromise=this._savePromise.then(async()=>{await r.promisify(i.writeFile)(this._preferencesPath,JSON.stringify(this._prefs)).catch(e=>null)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketTransport=void 0;const i=n(24),r=n(0);class s{constructor(e,t){this._ws=new i(t,[],{perMessageDeflate:!1,maxPayload:268435456,handshakeTimeout:e.timeUntilDeadline()}),this._progress=e;const n=r.makeWaitForNextTask();this._ws.addEventListener("message",e=>{n(()=>{this.onmessage&&this.onmessage.call(null,JSON.parse(e.data))})}),this._ws.addEventListener("close",e=>{this._progress&&this._progress.log("<ws disconnected> "+t),this.onclose&&this.onclose.call(null)}),this._ws.addEventListener("error",()=>{})}static async connect(e,t){e.log("<ws connecting> "+t);const n=new s(e,t);let i=!1;return e.aborted.then(()=>{i||n.closeAndWait().catch(e=>null)}),await new Promise((i,r)=>{n._ws.addEventListener("open",async()=>{e.log("<ws connected> "+t),i(n)}),n._ws.addEventListener("error",i=>{e.log(`<ws connect error> ${t} ${i.message}`),r(new Error("WebSocket error: "+i.message)),n._ws.close()})}),i=!0,n}send(e){this._ws.send(JSON.stringify(e))}close(){this._progress&&this._progress.log("<ws disconnecting> "+this._ws.url),this._ws.close()}async closeAndWait(){const e=new Promise(e=>this.onclose=e);return this.close(),e}}t.WebSocketTransport=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Firefox=void 0;const i=n(14),r=n(1),s=n(3),o=n(187),a=n(65),c=n(64);class l extends c.BrowserType{_connectToTransport(e,t){return o.FFBrowser.connect(e,t)}_rewriteStartupError(e){return e}_amendEnvironment(e,t,n,r){return"linux"===i.platform()?{...e,LD_LIBRARY_PATH:`${s.dirname(n)}:${process.env.LD_LIBRARY_PATH}`}:e}_attemptToGracefullyCloseBrowser(e){const t={method:"Browser.close",params:{},id:a.kBrowserCloseMessageId};e.send(t)}_defaultArgs(e,t,n){const{args:i=[],devtools:o,headless:a}=e;o&&console.warn("devtools parameter is not supported as a launch argument in Firefox. You can launch the devtools window manually.");if(i.find(e=>e.startsWith("-profile")||e.startsWith("--profile")))throw new Error("Pass userDataDir parameter instead of specifying -profile argument");if(i.find(e=>e.startsWith("-juggler")))throw new Error("Use the port parameter instead of -juggler argument");const c=t?void 0:e.firefoxUserPrefs;if(c){const e=[];for(const[t,n]of Object.entries(c))e.push(`user_pref(${JSON.stringify(t)}, ${JSON.stringify(n)});`);r.writeFileSync(s.join(n,"user.js"),e.join("\n"))}const l=["-no-remote"];return a?l.push("-headless"):(l.push("-wait-for-browser"),l.push("-foreground")),l.push("-profile",n),l.push("-juggler-pipe"),l.push(...i),t?l.push("about:blank"):l.push("-silent"),l}}t.Firefox=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFBrowserContext=t.FFBrowser=void 0;const i=n(0),r=n(47),s=n(8),o=n(13),a=n(65),c=n(188);class l extends r.Browser{constructor(e,t){super(t),this._version="",this._connection=e,this._ffPages=new Map,this._contexts=new Map,this._connection.on(a.ConnectionEvents.Disconnected,()=>this._didClose()),this._connection.on("Browser.attachedToTarget",this._onAttachedToTarget.bind(this)),this._connection.on("Browser.detachedFromTarget",this._onDetachedFromTarget.bind(this)),this._connection.on("Browser.downloadCreated",this._onDownloadCreated.bind(this)),this._connection.on("Browser.downloadFinished",this._onDownloadFinished.bind(this)),this._connection.on("Browser.screencastFinished",this._onScreencastFinished.bind(this))}static async connect(e,t){const n=new a.FFConnection(e,t.protocolLogger,t.browserLogsCollector),i=new l(n,t),r=[n.send("Browser.enable",{attachToDefaultContext:!!t.persistent}),i._initVersion()];return t.persistent&&(i._defaultContext=new d(i,void 0,t.persistent),r.push(i._defaultContext._initialize())),t.proxy&&r.push(i._connection.send("Browser.setBrowserProxy",u(t.proxy))),await Promise.all(r),i}async _initVersion(){const e=await this._connection.send("Browser.getInfo");this._version=e.version.substring(e.version.indexOf("/")+1)}isConnected(){return!this._connection._closed}async newContext(e={}){if(s.validateBrowserContextOptions(e,this._options),e.isMobile)throw new Error("options.isMobile is not supported in Firefox");const{browserContextId:t}=await this._connection.send("Browser.createBrowserContext",{removeOnDetach:!0}),n=new d(this,t,e);return await n._initialize(),this._contexts.set(t,n),n}contexts(){return Array.from(this._contexts.values())}version(){return this._version}_onDetachedFromTarget(e){const t=this._ffPages.get(e.targetId);this._ffPages.delete(e.targetId),t.didClose()}_onAttachedToTarget(e){const{targetId:t,browserContextId:n,openerId:r,type:s}=e.targetInfo;i.assert("page"===s);const o=n?this._contexts.get(n):this._defaultContext;i.assert(o,`Unknown context id:${n}, _defaultContext: ${this._defaultContext}`);const a=this._connection.createSession(e.sessionId,s),l=r?this._ffPages.get(r):null,d=new c.FFPage(a,o,l);this._ffPages.set(t,d),d._page.reportAsNew()}_onDownloadCreated(e){const t=this._ffPages.get(e.pageTargetId);if(i.assert(t),!t)return;let n=t._initializedPage;n||(t._pageCallback(new Error("Starting new page download")),t._opener&&(n=t._opener._initializedPage)),n&&this._downloadCreated(n,e.uuid,e.url,e.suggestedFileName)}_onDownloadFinished(e){const t=e.canceled?"canceled":e.error;this._downloadFinished(e.uuid,t)}_onScreencastFinished(e){this._videoFinished(e.screencastId)}}t.FFBrowser=l;class d extends s.BrowserContext{constructor(e,t,n){super(e,n,t),this._browser=e}async _initialize(){i.assert(!this._ffPages().length);const e=this._browserContextId,t=[super._initialize()];if(this._browser._options.downloadsPath&&t.push(this._browser._connection.send("Browser.setDownloadOptions",{browserContextId:e,downloadOptions:{behavior:this._options.acceptDownloads?"saveToDisk":"cancel",downloadsDir:this._browser._options.downloadsPath}})),this._options.viewport){const n={viewportSize:{width:this._options.viewport.width,height:this._options.viewport.height},deviceScaleFactor:this._options.deviceScaleFactor||1};t.push(this._browser._connection.send("Browser.setDefaultViewport",{browserContextId:e,viewport:n}))}if(this._options.hasTouch&&t.push(this._browser._connection.send("Browser.setTouchOverride",{browserContextId:e,hasTouch:!0})),this._options.userAgent&&t.push(this._browser._connection.send("Browser.setUserAgentOverride",{browserContextId:e,userAgent:this._options.userAgent})),this._options.bypassCSP&&t.push(this._browser._connection.send("Browser.setBypassCSP",{browserContextId:e,bypassCSP:!0})),this._options.ignoreHTTPSErrors&&t.push(this._browser._connection.send("Browser.setIgnoreHTTPSErrors",{browserContextId:e,ignoreHTTPSErrors:!0})),!1===this._options.javaScriptEnabled&&t.push(this._browser._connection.send("Browser.setJavaScriptDisabled",{browserContextId:e,javaScriptDisabled:!0})),this._options.locale&&t.push(this._browser._connection.send("Browser.setLocaleOverride",{browserContextId:e,locale:this._options.locale})),this._options.timezoneId&&t.push(this._browser._connection.send("Browser.setTimezoneOverride",{browserContextId:e,timezoneId:this._options.timezoneId})),this._options.permissions&&t.push(this.grantPermissions(this._options.permissions)),(this._options.extraHTTPHeaders||this._options.locale)&&t.push(this.setExtraHTTPHeaders(this._options.extraHTTPHeaders||[])),this._options.httpCredentials&&t.push(this.setHTTPCredentials(this._options.httpCredentials)),this._options.geolocation&&t.push(this.setGeolocation(this._options.geolocation)),this._options.offline&&t.push(this.setOffline(this._options.offline)),this._options.colorScheme&&t.push(this._browser._connection.send("Browser.setColorScheme",{browserContextId:e,colorScheme:this._options.colorScheme})),this._options.recordVideo){const e=this._options.recordVideo.size||this._options.viewport||{width:1280,height:720};t.push(this._ensureVideosPath().then(()=>this._browser._connection.send("Browser.setScreencastOptions",{...e,dir:this._options.recordVideo.dir,browserContextId:this._browserContextId})))}this._options.proxy&&t.push(this._browser._connection.send("Browser.setContextProxy",{browserContextId:this._browserContextId,...u(this._options.proxy)})),await Promise.all(t)}_ffPages(){return Array.from(this._browser._ffPages.values()).filter(e=>e._browserContext===this)}pages(){return this._ffPages().map(e=>e._initializedPage).filter(e=>!!e)}async newPageDelegate(){s.assertBrowserContextIsNotOwned(this);const{targetId:e}=await this._browser._connection.send("Browser.newPage",{browserContextId:this._browserContextId}).catch(e=>{if(e.message.includes("Failed to override timezone"))throw new Error("Invalid timezone ID: "+this._options.timezoneId);throw e});return this._browser._ffPages.get(e)}async _doCookies(e){const{cookies:t}=await this._browser._connection.send("Browser.getCookies",{browserContextId:this._browserContextId});return o.filterCookies(t.map(e=>{const t={...e};return delete t.size,delete t.session,t}),e)}async addCookies(e){const t=o.rewriteCookies(e).map(e=>({...e,expires:e.expires&&-1!==e.expires?e.expires:void 0}));await this._browser._connection.send("Browser.setCookies",{browserContextId:this._browserContextId,cookies:t})}async clearCookies(){await this._browser._connection.send("Browser.clearCookies",{browserContextId:this._browserContextId})}async _doGrantPermissions(e,t){const n=new Map([["geolocation","geo"],["persistent-storage","persistent-storage"],["push","push"],["notifications","desktop-notification"]]),i=t.map(e=>{const t=n.get(e);if(!t)throw new Error("Unknown permission: "+e);return t});await this._browser._connection.send("Browser.grantPermissions",{origin:e,browserContextId:this._browserContextId,permissions:i})}async _doClearPermissions(){await this._browser._connection.send("Browser.resetPermissions",{browserContextId:this._browserContextId})}async setGeolocation(e){s.verifyGeolocation(e),this._options.geolocation=e,await this._browser._connection.send("Browser.setGeolocationOverride",{browserContextId:this._browserContextId,geolocation:e||null})}async setExtraHTTPHeaders(e){this._options.extraHTTPHeaders=e;let t=this._options.extraHTTPHeaders;this._options.locale&&(t=o.mergeHeaders([t,o.singleHeader("Accept-Language",this._options.locale)])),await this._browser._connection.send("Browser.setExtraHTTPHeaders",{browserContextId:this._browserContextId,headers:t})}async setOffline(e){this._options.offline=e,await this._browser._connection.send("Browser.setOnlineOverride",{browserContextId:this._browserContextId,override:e?"offline":"online"})}async _doSetHTTPCredentials(e){this._options.httpCredentials=e,await this._browser._connection.send("Browser.setHTTPCredentials",{browserContextId:this._browserContextId,credentials:e||null})}async _doAddInitScript(e){await this._browser._connection.send("Browser.addScriptToEvaluateOnNewDocument",{browserContextId:this._browserContextId,script:e})}async _doExposeBinding(e){if("main"!==e.world)throw new Error("Only main context bindings are supported in Firefox.");await this._browser._connection.send("Browser.addBinding",{browserContextId:this._browserContextId,name:e.name,script:e.source})}async _doUpdateRequestInterception(){await this._browser._connection.send("Browser.setRequestInterception",{browserContextId:this._browserContextId,enabled:!!this._requestInterceptor})}async _doClose(){i.assert(this._browserContextId),await this._browser._connection.send("Browser.removeBrowserContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)}}function u(e){const t=new URL(e.server);let n=parseInt(t.port,10),i="http";return"socks5:"===t.protocol?i="socks":"socks4:"===t.protocol?i="socks4":"https:"===t.protocol&&(i="https"),""===t.port&&("http:"===t.protocol?n=80:"https:"===t.protocol&&(n=443)),{type:i,bypass:e.bypass?e.bypass.split(",").map(e=>e.trim()):[],host:t.hostname,port:n,username:e.username,password:e.password}}t.FFBrowserContext=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFPage=void 0;const i=n(61),r=n(44),s=n(4),o=n(0),a=n(9),c=n(92),l=n(189),d=n(65),u=n(190),h=n(191),p=n(192),m=n(11);function f(e,t){return`${e}---${t}`}t.FFPage=class{constructor(e,t,n){this.cspErrorsAsynchronousForInlineScipts=!0,this._pageCallback=()=>{},this._initializedPage=null,this._workers=new Map,this._session=e,this._opener=n,this.rawKeyboard=new h.RawKeyboardImpl(e),this.rawMouse=new h.RawMouseImpl(e),this.rawTouchscreen=new h.RawTouchscreenImpl(e),this._contextIdToContext=new Map,this._browserContext=t,this._page=new a.Page(this,t),this._networkManager=new p.FFNetworkManager(e,this._page),this._page.on(a.Page.Events.FrameDetached,e=>this._removeContextsForFrame(e)),this._eventListeners=[s.helper.addEventListener(this._session,"Page.eventFired",this._onEventFired.bind(this)),s.helper.addEventListener(this._session,"Page.frameAttached",this._onFrameAttached.bind(this)),s.helper.addEventListener(this._session,"Page.frameDetached",this._onFrameDetached.bind(this)),s.helper.addEventListener(this._session,"Page.navigationAborted",this._onNavigationAborted.bind(this)),s.helper.addEventListener(this._session,"Page.navigationCommitted",this._onNavigationCommitted.bind(this)),s.helper.addEventListener(this._session,"Page.navigationStarted",this._onNavigationStarted.bind(this)),s.helper.addEventListener(this._session,"Page.sameDocumentNavigation",this._onSameDocumentNavigation.bind(this)),s.helper.addEventListener(this._session,"Runtime.executionContextCreated",this._onExecutionContextCreated.bind(this)),s.helper.addEventListener(this._session,"Runtime.executionContextDestroyed",this._onExecutionContextDestroyed.bind(this)),s.helper.addEventListener(this._session,"Page.linkClicked",e=>this._onLinkClicked(e.phase)),s.helper.addEventListener(this._session,"Page.uncaughtError",this._onUncaughtError.bind(this)),s.helper.addEventListener(this._session,"Runtime.console",this._onConsole.bind(this)),s.helper.addEventListener(this._session,"Page.dialogOpened",this._onDialogOpened.bind(this)),s.helper.addEventListener(this._session,"Page.bindingCalled",this._onBindingCalled.bind(this)),s.helper.addEventListener(this._session,"Page.fileChooserOpened",this._onFileChooserOpened.bind(this)),s.helper.addEventListener(this._session,"Page.workerCreated",this._onWorkerCreated.bind(this)),s.helper.addEventListener(this._session,"Page.workerDestroyed",this._onWorkerDestroyed.bind(this)),s.helper.addEventListener(this._session,"Page.dispatchMessageFromWorker",this._onDispatchMessageFromWorker.bind(this)),s.helper.addEventListener(this._session,"Page.crashed",this._onCrashed.bind(this)),s.helper.addEventListener(this._session,"Page.screencastStarted",this._onScreencastStarted.bind(this)),s.helper.addEventListener(this._session,"Page.webSocketCreated",this._onWebSocketCreated.bind(this)),s.helper.addEventListener(this._session,"Page.webSocketClosed",this._onWebSocketClosed.bind(this)),s.helper.addEventListener(this._session,"Page.webSocketFrameReceived",this._onWebSocketFrameReceived.bind(this)),s.helper.addEventListener(this._session,"Page.webSocketFrameSent",this._onWebSocketFrameSent.bind(this))],this._pagePromise=new Promise(e=>this._pageCallback=e),e.once(d.FFSessionEvents.Disconnected,()=>this._page._didDisconnect()),this._session.once("Page.ready",()=>{this._pageCallback(this._page),this._initializedPage=this._page}),this._session.send("Page.addScriptToEvaluateOnNewDocument",{script:"",worldName:"__playwright_utility_world__"}).catch(this._pageCallback)}async pageOrError(){return this._pagePromise}openerDelegate(){return this._opener}_onWebSocketCreated(e){this._page._frameManager.onWebSocketCreated(f(e.frameId,e.wsid),e.requestURL),this._page._frameManager.onWebSocketRequest(f(e.frameId,e.wsid))}_onWebSocketClosed(e){e.error&&this._page._frameManager.webSocketError(f(e.frameId,e.wsid),e.error),this._page._frameManager.webSocketClosed(f(e.frameId,e.wsid))}_onWebSocketFrameReceived(e){this._page._frameManager.webSocketFrameReceived(f(e.frameId,e.wsid),e.opcode,e.data)}_onWebSocketFrameSent(e){this._page._frameManager.onWebSocketFrameSent(f(e.frameId,e.wsid),e.opcode,e.data)}_onExecutionContextCreated(e){const{executionContextId:t,auxData:n}=e,i=this._page._frameManager.frame(n?n.frameId:null);if(!i)return;const s=new u.FFExecutionContext(this._session,t);let o=null;"__playwright_utility_world__"===n.name?o="utility":n.name||(o="main");const a=new r.FrameExecutionContext(s,i,o);o&&i._contextCreated(o,a),this._contextIdToContext.set(t,a)}_onExecutionContextDestroyed(e){const{executionContextId:t}=e,n=this._contextIdToContext.get(t);n&&(this._contextIdToContext.delete(t),n.frame._contextDestroyed(n))}_removeContextsForFrame(e){for(const[t,n]of this._contextIdToContext)n.frame===e&&this._contextIdToContext.delete(t)}_onLinkClicked(e){"before"===e?this._page._frameManager.frameWillPotentiallyRequestNavigation():this._page._frameManager.frameDidPotentiallyRequestNavigation()}_onNavigationStarted(e){this._page._frameManager.frameRequestedNavigation(e.frameId,e.navigationId)}_onNavigationAborted(e){this._page._frameManager.frameAbortedNavigation(e.frameId,e.errorText,e.navigationId)}_onNavigationCommitted(e){for(const[t,n]of this._workers)n.frameId===e.frameId&&this._onWorkerDestroyed({workerId:t});this._page._frameManager.frameCommittedNewDocumentNavigation(e.frameId,e.url,e.name||"",e.navigationId||"",!1)}_onSameDocumentNavigation(e){this._page._frameManager.frameCommittedSameDocumentNavigation(e.frameId,e.url)}_onFrameAttached(e){this._page._frameManager.frameAttached(e.frameId,e.parentFrameId)}_onFrameDetached(e){this._page._frameManager.frameDetached(e.frameId)}_onEventFired(e){const{frameId:t,name:n}=e;"load"===n&&this._page._frameManager.frameLifecycleEvent(t,"load"),"DOMContentLoaded"===n&&this._page._frameManager.frameLifecycleEvent(t,"domcontentloaded")}_onUncaughtError(e){const t=e.message.startsWith("Error: ")?e.message.substring(7):e.message,n=new Error(t);n.stack=e.stack,this._page.emit(a.Page.Events.PageError,n)}_onConsole(e){const{type:t,args:n,executionContextId:i,location:r}=e,s=this._contextIdToContext.get(i);this._page._addConsoleMessage(t,n.map(e=>s.createHandle(e)),r)}_onDialogOpened(e){this._page.emit(a.Page.Events.Dialog,new i.Dialog(this._page,e.type,e.message,async(t,n)=>{await this._session.sendMayFail("Page.handleDialog",{dialogId:e.dialogId,accept:t,promptText:n})},e.defaultValue))}async _onBindingCalled(e){const t=this._contextIdToContext.get(e.executionContextId);await this.pageOrError()instanceof Error||this._page._onBindingCalled(e.payload,t)}async _onFileChooserOpened(e){const{executionContextId:t,element:n}=e,i=this._contextIdToContext.get(t).createHandle(n).asElement();this._page._onFileChooserOpened(i)}async _onWorkerCreated(e){const t=e.workerId,n=new a.Worker(e.url),i=new d.FFSession(this._session._connection,"worker",t,n=>{this._session.send("Page.sendMessageToWorker",{frameId:e.frameId,workerId:t,message:JSON.stringify(n)}).catch(e=>{i.dispatchMessage({id:n.id,method:"",params:{},error:{message:e.message,data:void 0}})})});this._workers.set(t,{session:i,frameId:e.frameId}),this._page._addWorker(t,n),i.once("Runtime.executionContextCreated",e=>{n._createExecutionContext(new u.FFExecutionContext(i,e.executionContextId))}),i.on("Runtime.console",e=>{const{type:t,args:i,location:r}=e,s=n._existingExecutionContext;this._page._addConsoleMessage(t,i.map(e=>s.createHandle(e)),r)})}async _onWorkerDestroyed(e){const t=e.workerId,n=this._workers.get(t);n&&(n.session.dispose(),this._workers.delete(t),this._page._removeWorker(t))}async _onDispatchMessageFromWorker(e){const t=this._workers.get(e.workerId);t&&t.session.dispatchMessage(JSON.parse(e.message))}async _onCrashed(e){this._session.markAsCrashed(),this._page._didCrash()}_onScreencastStarted(e){this._browserContext._browser._videoStarted(this._browserContext,e.screencastId,e.file,this.pageOrError())}async exposeBinding(e){if("main"!==e.world)throw new Error("Only main context bindings are supported in Firefox.");await this._session.send("Page.addBinding",{name:e.name,script:e.source})}didClose(){this._session.dispose(),s.helper.removeEventListeners(this._eventListeners),this._networkManager.dispose(),this._page._didClose()}async navigateFrame(e,t,n){return{newDocumentId:(await this._session.send("Page.navigate",{url:t,referer:n,frameId:e._id})).navigationId||void 0}}async updateExtraHTTPHeaders(){await this._session.send("Network.setExtraHTTPHeaders",{headers:this._page._state.extraHTTPHeaders||[]})}async setViewportSize(e){o.assert(this._page._state.viewportSize===e),await this._session.send("Page.setViewportSize",{viewportSize:{width:e.width,height:e.height}})}async bringToFront(){await this._session.send("Page.bringToFront",{})}async updateEmulateMedia(){const e=this._page._state.colorScheme||this._browserContext._options.colorScheme||"light";await this._session.send("Page.setEmulatedMedia",{type:null===this._page._state.mediaType?"":this._page._state.mediaType,colorScheme:e})}async updateRequestInterception(){await this._networkManager.setRequestInterception(this._page._needsRequestInterception())}async setFileChooserIntercepted(e){await this._session.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(e=>{})}async opener(){if(!this._opener)return null;const e=await this._opener.pageOrError();return e instanceof a.Page&&!e.isClosed()?e:null}async reload(){await this._session.send("Page.reload",{frameId:this._page.mainFrame()._id})}async goBack(){const{success:e}=await this._session.send("Page.goBack",{frameId:this._page.mainFrame()._id});return e}async goForward(){const{success:e}=await this._session.send("Page.goForward",{frameId:this._page.mainFrame()._id});return e}async evaluateOnNewDocument(e){await this._session.send("Page.addScriptToEvaluateOnNewDocument",{script:e})}async closePage(e){await this._session.send("Page.close",{runBeforeUnload:e})}canScreenshotOutsideViewport(){return!0}async setBackgroundColor(e){if(e)throw new Error("Not implemented")}async takeScreenshot(e,t,n,i){if(!t){const e=await this._page.mainFrame()._utilityContext(),i=await e.evaluateInternal(()=>({x:window.scrollX,y:window.scrollY}));t={x:n.x+i.x,y:n.y+i.y,width:n.width,height:n.height}}const{data:r}=await this._session.send("Page.screenshot",{mimeType:"image/"+e,clip:t}).catch(e=>{throw e instanceof Error&&e.message.includes("document.documentElement is null")&&m.rewriteErrorMessage(e,c.kScreenshotDuringNavigationError),e});return Buffer.from(r,"base64")}async resetViewport(){o.assert(!1,"Should not be called")}async getContentFrame(e){const{contentFrameId:t}=await this._session.send("Page.describeNode",{frameId:e._context.frame._id,objectId:e._objectId});return t?this._page._frameManager.frame(t):null}async getOwnerFrame(e){const{ownerFrameId:t}=await this._session.send("Page.describeNode",{frameId:e._context.frame._id,objectId:e._objectId});return t||null}isElementHandle(e){return"node"===e.subtype}async getBoundingBox(e){const t=await this.getContentQuads(e);if(!t||!t.length)return null;let n=1/0,i=-1/0,r=1/0,s=-1/0;for(const e of t)for(const t of e)n=Math.min(n,t.x),i=Math.max(i,t.x),r=Math.min(r,t.y),s=Math.max(s,t.y);return{x:n,y:r,width:i-n,height:s-r}}async scrollRectIntoViewIfNeeded(e,t){return await this._session.send("Page.scrollIntoViewIfNeeded",{frameId:e._context.frame._id,objectId:e._objectId,rect:t}).then(()=>"done").catch(e=>{if(e instanceof Error&&e.message.includes("Node is detached from document"))return"error:notconnected";if(e instanceof Error&&e.message.includes("Node does not have a layout object"))return"error:notvisible";throw e})}rafCountForStablePosition(){return 1}async getContentQuads(e){const t=await this._session.sendMayFail("Page.getContentQuads",{frameId:e._context.frame._id,objectId:e._objectId});return t?t.quads.map(e=>[e.p1,e.p2,e.p3,e.p4]):null}async setInputFiles(e,t){await e._evaluateInUtility(([e,t,n])=>e.setInputFiles(t,n),t)}async adoptElementHandle(e,t){const n=await this._session.send("Page.adoptNode",{frameId:e._context.frame._id,objectId:e._objectId,executionContextId:t._delegate._executionContextId});if(!n.remoteObject)throw new Error("Unable to adopt element handle from a different document");return t.createHandle(n.remoteObject)}async getAccessibilityTree(e){return l.getAccessibilityTree(this._session,e)}async inputActionEpilogue(){}async getFrameElement(e){const t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");const n=await this._page.selectors._queryAll(t,"iframe",void 0),i=await Promise.all(n.map(async e=>{const t=await e.contentFrame().catch(e=>null);return{handle:e,frame:t}})),r=i.find(t=>t.frame===e);if(i.map(e=>e===r?Promise.resolve():e.handle.dispose()),!r)throw new Error("Frame has been detached.");return r.handle}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessibilityTree=void 0,t.getAccessibilityTree=async function(e,t){const n=t?t._objectId:void 0,{tree:i}=await e.send("Accessibility.getFullAXTree",{objectId:n}),s=new r(i);return{tree:s,needle:t?s._findNeedle():null}};const i=new Map(Object.entries({pushbutton:"button",checkbutton:"checkbox",editcombobox:"combobox","content deletion":"deletion",footnote:"doc-footnote","non-native document":"document",grouping:"group",graphic:"img","content insertion":"insertion",animation:"marquee","flat equation":"math",menupopup:"menu","check menu item":"menuitemcheckbox","radio menu item":"menuitemradio","listbox option":"option",radiobutton:"radio",statusbar:"status",pagetab:"tab",pagetablist:"tablist",propertypage:"tabpanel",entry:"textbox",outline:"tree","tree table":"treegrid",outlineitem:"treeitem"}));class r{constructor(e){this._payload=e,this._children=(e.children||[]).map(e=>new r(e)),this._editable=!!e.editable,this._richlyEditable=this._editable&&"textarea"!==e.tag&&"input"!==e.tag,this._focusable=!!e.focusable,this._expanded=!!e.expanded,this._name=this._payload.name,this._role=this._payload.role}_isPlainTextField(){return!this._richlyEditable&&(!!this._editable||"entry"===this._role)}_isTextOnlyObject(){const e=this._role;return"text leaf"===e||"text"===e||"statictext"===e}_hasFocusableChild(){if(void 0===this._cachedHasFocusableChild){this._cachedHasFocusableChild=!1;for(const e of this._children)if(e._focusable||e._hasFocusableChild()){this._cachedHasFocusableChild=!0;break}}return this._cachedHasFocusableChild}children(){return this._children}_findNeedle(){if(this._payload.foundObject)return this;for(const e of this._children){const t=e._findNeedle();if(t)return t}return null}isLeafNode(){if(!this._children.length)return!0;if(this._isPlainTextField()||this._isTextOnlyObject())return!0;switch(this._role){case"graphic":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return!this._hasFocusableChild()&&(!(!this._focusable||"document"===this._role||!this._name)||!("heading"!==this._role||!this._name))}isControl(){switch(this._role){case"checkbutton":case"check menu item":case"check rich option":case"combobox":case"combobox option":case"color chooser":case"listbox":case"listbox option":case"listbox rich option":case"popup menu":case"menupopup":case"menuitem":case"menubar":case"button":case"pushbutton":case"radiobutton":case"radio menuitem":case"scrollbar":case"slider":case"spinbutton":case"switch":case"pagetab":case"entry":case"tree table":return!0;default:return!1}}isInteresting(e){return!(!this._focusable&&!this._richlyEditable)||(!!this.isControl()||!e&&(this.isLeafNode()&&!!this._name.trim()))}serialize(){const e={role:i.get(this._role)||this._role,name:this._name||""},t=["name","description","roledescription","valuetext","keyshortcuts"];for(const n of t)n in this._payload&&(e[n]=this._payload[n]);const n=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(const t of n){if("document"===this._role&&"focused"===t)continue;const n=this._payload[t];n&&(e[t]=n)}const r=["level"];for(const t of r)t in this._payload&&(e[t]=this._payload[t]);const s=["autocomplete","haspopup","invalid","orientation"];for(const t of s){const n=this._payload[t];n&&"false"!==n&&(e[t]=n)}const o=e;return o.valueString=this._payload.value,"checked"in this._payload&&(o.checked=!0===this._payload.checked?"checked":"mixed"===this._payload.checked?"mixed":"unchecked"),"pressed"in this._payload&&(o.pressed=!0===this._payload.pressed?"pressed":"released"),o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFExecutionContext=void 0;const i=n(22),r=n(34),s=n(11),o=n(45);function a(e){if(e)throw e.value?new Error("Evaluation failed: "+JSON.stringify(e.value)):new Error("Evaluation failed: "+e.text+"\n"+e.stack)}function c(e){if(e.message.includes("cyclic object value")||e.message.includes("Object is not serializable"))return{result:{type:"undefined",value:void 0}};if(e.message.includes("Failed to find execution context with id")||e.message.includes("Execution context was destroyed!"))throw new Error("Execution context was destroyed, most likely because of a navigation.");throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&s.rewriteErrorMessage(e,e.message+" Are you passing a nested JSHandle?"),e}t.FFExecutionContext=class{constructor(e,t){this._session=e,this._executionContextId=t}async rawEvaluate(e){const t=await this._session.send("Runtime.evaluate",{expression:r.ensureSourceUrl(e),returnByValue:!1,executionContextId:this._executionContextId}).catch(c);return a(t.exceptionDetails),t.result.objectId}async evaluateWithArguments(e,t,n,i,r){const s=await this._session.send("Runtime.callFunction",{functionDeclaration:e,args:[{objectId:n._objectId,value:void 0},...i.map(e=>({value:e})),...r.map(e=>({objectId:e,value:void 0}))],returnByValue:t,executionContextId:this._executionContextId}).catch(c);return a(s.exceptionDetails),t?o.parseEvaluationResultValue(s.result.value):n._context.createHandle(s.result)}async getProperties(e){const t=e._objectId;if(!t)return new Map;const n=await this._session.send("Runtime.getObjectProperties",{executionContextId:this._executionContextId,objectId:t}),i=new Map;for(const t of n.properties)i.set(t.name,e._context.createHandle(t.value));return i}createHandle(e,t){return new i.JSHandle(e,t.subtype||t.type||"",t.objectId,function(e){const t=e.value,n=e.unserializableValue;return n?i.parseUnserializableValue(n):t}(t))}async releaseHandle(e){e._objectId&&await this._session.send("Runtime.disposeObject",{executionContextId:this._executionContextId,objectId:e._objectId}).catch(e=>{})}}},function(e,t,n){"use strict";function i(e){let t=0;return e.has("Alt")&&(t|=1),e.has("Control")&&(t|=2),e.has("Shift")&&(t|=4),e.has("Meta")&&(t|=8),t}function r(e){return"left"===e?0:"middle"===e?1:"right"===e?2:0}function s(e){let t=0;return e.has("left")&&(t|=1),e.has("right")&&(t|=2),e.has("middle")&&(t|=4),t}Object.defineProperty(t,"__esModule",{value:!0}),t.RawTouchscreenImpl=t.RawMouseImpl=t.RawKeyboardImpl=void 0;t.RawKeyboardImpl=class{constructor(e){this._client=e}async keydown(e,t,n,i,r,s,o,a){"MetaLeft"===t&&(t="OSLeft"),"MetaRight"===t&&(t="OSRight"),"\r"===a&&(a=""),await this._client.send("Page.dispatchKeyEvent",{type:"keydown",keyCode:i,code:t,key:r,repeat:o,location:s,text:a})}async keyup(e,t,n,i,r,s){"MetaLeft"===t&&(t="OSLeft"),"MetaRight"===t&&(t="OSRight"),await this._client.send("Page.dispatchKeyEvent",{type:"keyup",key:r,keyCode:i,code:t,location:s,repeat:!1})}async sendText(e){await this._client.send("Page.insertText",{text:e})}};t.RawMouseImpl=class{constructor(e){this._client=e}async move(e,t,n,r,o){await this._client.send("Page.dispatchMouseEvent",{type:"mousemove",button:0,buttons:s(r),x:e,y:t,modifiers:i(o)})}async down(e,t,n,o,a,c){await this._client.send("Page.dispatchMouseEvent",{type:"mousedown",button:r(n),buttons:s(o),x:e,y:t,modifiers:i(a),clickCount:c})}async up(e,t,n,o,a,c){await this._client.send("Page.dispatchMouseEvent",{type:"mouseup",button:r(n),buttons:s(o),x:e,y:t,modifiers:i(a),clickCount:c})}};t.RawTouchscreenImpl=class{constructor(e){this._client=e}async tap(e,t,n){await this._client.send("Page.dispatchTapEvent",{x:e,y:t,modifiers:i(n)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FFNetworkManager=void 0;const i=n(4),r=n(13);t.FFNetworkManager=class{constructor(e,t){this._startTime=0,this._session=e,this._requests=new Map,this._page=t,this._eventListeners=[i.helper.addEventListener(e,"Network.requestWillBeSent",this._onRequestWillBeSent.bind(this)),i.helper.addEventListener(e,"Network.responseReceived",this._onResponseReceived.bind(this)),i.helper.addEventListener(e,"Network.requestFinished",this._onRequestFinished.bind(this)),i.helper.addEventListener(e,"Network.requestFailed",this._onRequestFailed.bind(this))]}dispose(){i.helper.removeEventListeners(this._eventListeners)}async setRequestInterception(e){await this._session.send("Network.setRequestInterception",{enabled:e})}_onRequestWillBeSent(e){const t=e.redirectedFrom&&this._requests.get(e.redirectedFrom)||null,n=t?t.request.frame():e.frameId?this._page._frameManager.frame(e.frameId):null;if(!n)return;t&&this._requests.delete(t._id);const i=new a(this._session,n,t,e);this._requests.set(i._id,i),this._page._frameManager.requestStarted(i.request)}_onResponseReceived(e){const t=this._requests.get(e.requestId);if(!t)return;this._startTime=e.timing.startTime;const n={startTime:this._startTime/1e3,domainLookupStart:this._relativeTiming(e.timing.domainLookupStart),domainLookupEnd:this._relativeTiming(e.timing.domainLookupEnd),connectStart:this._relativeTiming(e.timing.connectStart),secureConnectionStart:this._relativeTiming(e.timing.secureConnectionStart),connectEnd:this._relativeTiming(e.timing.connectEnd),requestStart:this._relativeTiming(e.timing.requestStart),responseStart:this._relativeTiming(e.timing.responseStart)},i=new r.Response(t.request,e.status,e.statusText,e.headers,n,async()=>{const e=await this._session.send("Network.getResponseBody",{requestId:t._id});if(e.evicted)throw new Error(`Response body for ${t.request.method()} ${t.request.url()} was evicted!`);return Buffer.from(e.base64body,"base64")});this._page._frameManager.requestReceivedResponse(i)}_onRequestFinished(e){const t=this._requests.get(e.requestId);if(!t)return;const n=t.request._existingResponse();n.status()>=300&&n.status()<=399?n._requestFinished(this._relativeTiming(e.responseEndTime),"Response body is unavailable for redirect responses"):(this._requests.delete(t._id),n._requestFinished(this._relativeTiming(e.responseEndTime))),this._page._frameManager.requestFinished(t.request)}_onRequestFailed(e){const t=this._requests.get(e.requestId);if(!t)return;this._requests.delete(t._id);const n=t.request._existingResponse();n&&n._requestFinished(-1),t.request._setFailureText(e.errorCode),this._page._frameManager.requestFailed(t.request,"NS_BINDING_ABORTED"===e.errorCode)}_relativeTiming(e){return e?(e-this._startTime)/1e3:-1}};const s={TYPE_INVALID:"other",TYPE_OTHER:"other",TYPE_SCRIPT:"script",TYPE_IMAGE:"image",TYPE_STYLESHEET:"stylesheet",TYPE_OBJECT:"other",TYPE_DOCUMENT:"document",TYPE_SUBDOCUMENT:"document",TYPE_REFRESH:"document",TYPE_XBL:"other",TYPE_PING:"other",TYPE_XMLHTTPREQUEST:"xhr",TYPE_OBJECT_SUBREQUEST:"other",TYPE_DTD:"other",TYPE_FONT:"font",TYPE_MEDIA:"media",TYPE_WEBSOCKET:"websocket",TYPE_CSP_REPORT:"other",TYPE_XSLT:"other",TYPE_BEACON:"other",TYPE_FETCH:"fetch",TYPE_IMAGESET:"images",TYPE_WEB_MANIFEST:"manifest"},o={TYPE_INTERNAL_EVENTSOURCE:"eventsource"};class a{constructor(e,t,n,i){this._id=i.requestId,this._session=e;let a=null;i.postData&&(a=Buffer.from(i.postData,"base64")),this.request=new r.Request(i.isIntercepted?this:null,t,n?n.request:null,i.navigationId,i.url,o[i.internalCause]||s[i.cause]||"other",i.method,a,i.headers)}async continue(e){await this._session.sendMayFail("Network.resumeInterceptedRequest",{requestId:this._id,url:e.url,method:e.method,headers:e.headers,postData:e.postData?Buffer.from(e.postData).toString("base64"):void 0})}async fulfill(e){const t=e.isBase64?e.body:Buffer.from(e.body).toString("base64");await this._session.sendMayFail("Network.fulfillInterceptedRequest",{requestId:this._id,status:e.status,statusText:r.STATUS_TEXTS[String(e.status)]||"",headers:e.headers,base64body:t})}async abort(e){await this._session.sendMayFail("Network.abortInterceptedRequest",{requestId:this._id,errorCode:e})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebKit=void 0;const i=n(194),r=n(3),s=n(36),o=n(64);class a extends o.BrowserType{_connectToTransport(e,t){return i.WKBrowser.connect(e,t)}_amendEnvironment(e,t,n,i){return{...e,CURL_COOKIE_JAR_PATH:r.join(t,"cookiejar.db")}}_rewriteStartupError(e){return e}_attemptToGracefullyCloseBrowser(e){e.send({method:"Playwright.close",params:{},id:s.kBrowserCloseMessageId})}_defaultArgs(e,t,n){const{args:i=[],proxy:r,devtools:s,headless:o}=e;s&&console.warn("devtools parameter as a launch argument in WebKit is not supported. Also starting Web Inspector manually will terminate the execution in WebKit.");if(i.find(e=>e.startsWith("--user-data-dir=")))throw new Error("Pass userDataDir parameter instead of specifying --user-data-dir argument");if(i.find(e=>!e.startsWith("-")))throw new Error("Arguments can not specify page to be opened");const a=["--inspector-pipe"];return o&&a.push("--headless"),t?a.push("--user-data-dir="+n):a.push("--no-startup-window"),r&&("darwin"===process.platform?(a.push("--proxy="+r.server),r.bypass&&a.push("--proxy-bypass-list="+r.bypass)):"linux"===process.platform?(a.push("--proxy="+r.server),r.bypass&&a.push(...r.bypass.split(",").map(e=>"--ignore-host="+e))):"win32"===process.platform&&(a.push("--curl-proxy="+r.server),r.bypass&&a.push("--curl-noproxy="+r.bypass))),a.push(...i),t&&a.push("about:blank"),a}}t.WebKit=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKBrowserContext=t.WKBrowser=void 0;const i=n(47),r=n(8),s=n(4),o=n(0),a=n(13),c=n(36),l=n(195);class d extends i.Browser{constructor(e,t){super(t),this._contexts=new Map,this._wkPages=new Map,this._connection=new c.WKConnection(e,this._onDisconnect.bind(this),t.protocolLogger,t.browserLogsCollector),this._browserSession=this._connection.browserSession,this._eventListeners=[s.helper.addEventListener(this._browserSession,"Playwright.pageProxyCreated",this._onPageProxyCreated.bind(this)),s.helper.addEventListener(this._browserSession,"Playwright.pageProxyDestroyed",this._onPageProxyDestroyed.bind(this)),s.helper.addEventListener(this._browserSession,"Playwright.provisionalLoadFailed",e=>this._onProvisionalLoadFailed(e)),s.helper.addEventListener(this._browserSession,"Playwright.windowOpen",e=>this._onWindowOpen(e)),s.helper.addEventListener(this._browserSession,"Playwright.downloadCreated",this._onDownloadCreated.bind(this)),s.helper.addEventListener(this._browserSession,"Playwright.downloadFilenameSuggested",this._onDownloadFilenameSuggested.bind(this)),s.helper.addEventListener(this._browserSession,"Playwright.downloadFinished",this._onDownloadFinished.bind(this)),s.helper.addEventListener(this._browserSession,"Playwright.screencastFinished",this._onScreencastFinished.bind(this)),s.helper.addEventListener(this._browserSession,c.kPageProxyMessageReceived,this._onPageProxyMessageReceived.bind(this))]}static async connect(e,t){const n=new d(e,t),i=[n._browserSession.send("Playwright.enable")];return t.persistent&&(n._defaultContext=new u(n,void 0,t.persistent),i.push(n._defaultContext._initialize())),await Promise.all(i),n}_onDisconnect(){for(const e of this._wkPages.values())e.dispose(!0);this._didClose()}async newContext(e={}){r.validateBrowserContextOptions(e,this._options);const t=e.proxy?{proxyServer:e.proxy.server,proxyBypassList:e.proxy.bypass}:void 0,{browserContextId:n}=await this._browserSession.send("Playwright.createContext",t);e.userAgent=e.userAgent||"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.1 Safari/605.1.15";const i=new u(this,n,e);return await i._initialize(),this._contexts.set(n,i),i}contexts(){return Array.from(this._contexts.values())}version(){return"14.1"}_onDownloadCreated(e){const t=this._wkPages.get(e.pageProxyId);if(!t)return;t._page._frameManager.frameAbortedNavigation(e.frameId,"Download is starting");let n=t._initializedPage;n||(t._firstNonInitialNavigationCommittedReject(new Error("Starting new page download")),t._opener&&(n=t._opener._initializedPage)),n&&this._downloadCreated(n,e.uuid,e.url)}_onDownloadFilenameSuggested(e){this._downloadFilenameSuggested(e.uuid,e.suggestedFilename)}_onDownloadFinished(e){this._downloadFinished(e.uuid,e.error)}_onScreencastFinished(e){this._videoFinished(e.screencastId)}_onPageProxyCreated(e){const t=e.pageProxyId;let n=null;if(e.browserContextId&&(n=this._contexts.get(e.browserContextId)||null),n||(n=this._defaultContext),!n)return;const i=new c.WKSession(this._connection,t,"The page has been closed.",e=>{this._connection.rawSend({...e,pageProxyId:t})}),r=e.openerId?this._wkPages.get(e.openerId):void 0,s=new l.WKPage(n,i,r||null);this._wkPages.set(t,s),s._page.reportAsNew()}_onPageProxyDestroyed(e){const t=e.pageProxyId,n=this._wkPages.get(t);n&&(n.didClose(),n.dispose(!1),this._wkPages.delete(t))}_onPageProxyMessageReceived(e){const t=this._wkPages.get(e.pageProxyId);t&&t.dispatchMessageToSession(e.message)}_onProvisionalLoadFailed(e){const t=this._wkPages.get(e.pageProxyId);t&&t.handleProvisionalLoadFailed(e)}_onWindowOpen(e){const t=this._wkPages.get(e.pageProxyId);t&&t.handleWindowOpen(e)}isConnected(){return!this._connection.isClosed()}}t.WKBrowser=d;class u extends r.BrowserContext{constructor(e,t,n){super(e,n,t),this._browser=e,this._evaluateOnNewDocumentSources=[],this._authenticateProxyViaHeader()}async _initialize(){o.assert(!this._wkPages().length);const e=this._browserContextId,t=[super._initialize()];this._browser._options.downloadsPath&&t.push(this._browser._browserSession.send("Playwright.setDownloadBehavior",{behavior:this._options.acceptDownloads?"allow":"deny",downloadPath:this._browser._options.downloadsPath,browserContextId:e})),this._options.ignoreHTTPSErrors&&t.push(this._browser._browserSession.send("Playwright.setIgnoreCertificateErrors",{browserContextId:e,ignore:!0})),this._options.locale&&t.push(this._browser._browserSession.send("Playwright.setLanguages",{browserContextId:e,languages:[this._options.locale]})),this._options.permissions&&t.push(this.grantPermissions(this._options.permissions)),this._options.geolocation&&t.push(this.setGeolocation(this._options.geolocation)),this._options.offline&&t.push(this.setOffline(this._options.offline)),this._options.httpCredentials&&t.push(this.setHTTPCredentials(this._options.httpCredentials)),await Promise.all(t)}_wkPages(){return Array.from(this._browser._wkPages.values()).filter(e=>e._browserContext===this)}pages(){return this._wkPages().map(e=>e._initializedPage).filter(e=>!!e)}async newPageDelegate(){r.assertBrowserContextIsNotOwned(this);const{pageProxyId:e}=await this._browser._browserSession.send("Playwright.createPage",{browserContextId:this._browserContextId});return this._browser._wkPages.get(e)}async _doCookies(e){const{cookies:t}=await this._browser._browserSession.send("Playwright.getAllCookies",{browserContextId:this._browserContextId});return a.filterCookies(t.map(e=>{const t={...e};return t.expires=-1===e.expires?-1:e.expires/1e3,delete t.session,t}),e)}async addCookies(e){const t=a.rewriteCookies(e).map(e=>({...e,session:-1===e.expires||void 0===e.expires,expires:e.expires&&-1!==e.expires?1e3*e.expires:e.expires}));await this._browser._browserSession.send("Playwright.setCookies",{cookies:t,browserContextId:this._browserContextId})}async clearCookies(){await this._browser._browserSession.send("Playwright.deleteAllCookies",{browserContextId:this._browserContextId})}async _doGrantPermissions(e,t){await Promise.all(this.pages().map(n=>n._delegate._grantPermissions(e,t)))}async _doClearPermissions(){await Promise.all(this.pages().map(e=>e._delegate._clearPermissions()))}async setGeolocation(e){r.verifyGeolocation(e),this._options.geolocation=e;const t=e?{...e,timestamp:Date.now()}:void 0;await this._browser._browserSession.send("Playwright.setGeolocationOverride",{browserContextId:this._browserContextId,geolocation:t})}async setExtraHTTPHeaders(e){this._options.extraHTTPHeaders=e;for(const e of this.pages())await e._delegate.updateExtraHTTPHeaders()}async setOffline(e){this._options.offline=e;for(const e of this.pages())await e._delegate.updateOffline()}async _doSetHTTPCredentials(e){this._options.httpCredentials=e;for(const e of this.pages())await e._delegate.updateHttpCredentials()}async _doAddInitScript(e){this._evaluateOnNewDocumentSources.push(e);for(const e of this.pages())await e._delegate._updateBootstrapScript()}async _doExposeBinding(e){for(const t of this.pages())await t._delegate.exposeBinding(e)}async _doUpdateRequestInterception(){for(const e of this.pages())await e._delegate.updateRequestInterception()}async _doClose(){o.assert(this._browserContextId),await this._browser._browserSession.send("Playwright.deleteContext",{browserContextId:this._browserContextId}),this._browser._contexts.delete(this._browserContextId)}}t.WKBrowserContext=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKPage=void 0;const i=n(196),r=n(3),s=n(199),o=n(0),a=n(61),c=n(44),l=n(4),d=n(13),u=n(9),h=n(210),p=n(36),m=n(110),f=n(211),_=n(212),g=n(213),w=n(214);class b{constructor(e,t,n){if(this._provisionalPage=null,this._pagePromiseCallback=()=>{},this._requestIdToRequest=new Map,this._sessionListeners=[],this._initializedPage=null,this._firstNonInitialNavigationCommittedFulfill=()=>{},this._firstNonInitialNavigationCommittedReject=e=>{},this._lastConsoleMessage=null,this._recordingVideoFile=null,this._pageProxySession=t,this._opener=n,this.rawKeyboard=new f.RawKeyboardImpl(t),this.rawMouse=new f.RawMouseImpl(t),this.rawTouchscreen=new f.RawTouchscreenImpl(t),this._contextIdToContext=new Map,this._page=new u.Page(this,e),this._workers=new w.WKWorkers(this._page),this._session=void 0,this._browserContext=e,this._page.on(u.Page.Events.FrameDetached,e=>this._removeContextsForFrame(e,!1)),this._eventListeners=[l.helper.addEventListener(this._pageProxySession,"Target.targetCreated",this._onTargetCreated.bind(this)),l.helper.addEventListener(this._pageProxySession,"Target.targetDestroyed",this._onTargetDestroyed.bind(this)),l.helper.addEventListener(this._pageProxySession,"Target.dispatchMessageFromTarget",this._onDispatchMessageFromTarget.bind(this)),l.helper.addEventListener(this._pageProxySession,"Target.didCommitProvisionalTarget",this._onDidCommitProvisionalTarget.bind(this))],this._pagePromise=new Promise(e=>this._pagePromiseCallback=e),this._firstNonInitialNavigationCommittedPromise=new Promise((e,t)=>{this._firstNonInitialNavigationCommittedFulfill=e,this._firstNonInitialNavigationCommittedReject=t}),n&&!e._options.noDefaultViewport&&n._nextWindowOpenPopupFeatures){const e=l.helper.getViewportSizeFromWindowFeatures(n._nextWindowOpenPopupFeatures);n._nextWindowOpenPopupFeatures=void 0,e&&(this._page._state.viewportSize=e)}}async _initializePageProxySession(){const e=[this._pageProxySession.send("Dialog.enable"),this._pageProxySession.send("Emulation.setActiveAndFocused",{active:!0})];if(!1===this._browserContext._options.javaScriptEnabled&&e.push(this._pageProxySession.send("Emulation.setJavaScriptEnabled",{enabled:!1})),e.push(this._updateViewport()),e.push(this.updateHttpCredentials()),this._browserContext._permissions.size)for(const[e,t]of this._browserContext._permissions)this._grantPermissions(e,t);if(this._browserContext._options.recordVideo){const t=this._browserContext._options.recordVideo.size||this._browserContext._options.viewport||{width:1280,height:720},n=r.join(this._browserContext._options.recordVideo.dir,o.createGuid()+".webm");e.push(this._browserContext._ensureVideosPath().then(()=>this._startScreencast({...t,outputFile:n})))}await Promise.all(e)}_setSession(e){l.helper.removeEventListeners(this._sessionListeners),this._session=e,this.rawKeyboard.setSession(e),this._addSessionListeners(),this._workers.setSession(e)}async _initializeSession(e,t,n){await this._initializeSessionMayThrow(e,n).catch(n=>{if(!(t&&e.isDisposed()||this._session!==e))throw n})}async _initializeSessionMayThrow(e,t){const[,n]=await Promise.all([e.send("Page.enable"),e.send("Page.getResourceTree")]);t(n);const i=[e.send("Runtime.enable"),e.send("Page.createUserWorld",{name:"__playwright_utility_world__"}).catch(e=>{}),e.send("Console.enable"),e.send("Network.enable"),this._workers.initializeSession(e)];this._page._needsRequestInterception()&&(i.push(e.send("Network.setInterceptionEnabled",{enabled:!0})),i.push(e.send("Network.addInterception",{url:".*",stage:"request",isRegex:!0})));const r=this._browserContext._options;r.userAgent&&i.push(e.send("Page.overrideUserAgent",{value:r.userAgent})),(this._page._state.mediaType||this._page._state.colorScheme)&&i.push(b._setEmulateMedia(e,this._page._state.mediaType,this._page._state.colorScheme)),i.push(e.send("Page.setBootstrapScript",{source:this._calculateBootstrapScript()}));for(const e of this._browserContext._pageBindings.values())i.push(this._evaluateBindingScript(e));r.bypassCSP&&i.push(e.send("Page.setBypassCSP",{enabled:!0})),this._page._state.viewportSize&&i.push(e.send("Page.setScreenSizeOverride",{width:this._page._state.viewportSize.width,height:this._page._state.viewportSize.height})),i.push(this.updateEmulateMedia()),i.push(e.send("Network.setExtraHTTPHeaders",{headers:o.headersArrayToObject(this._calculateExtraHTTPHeaders(),!1)})),r.offline&&i.push(e.send("Network.setEmulateOfflineState",{offline:!0})),i.push(e.send("Page.setTouchEmulationEnabled",{enabled:!!r.hasTouch})),r.timezoneId&&i.push(e.send("Page.setTimeZone",{timeZone:r.timezoneId}).catch(e=>{throw new Error("Invalid timezone ID: "+r.timezoneId)})),await Promise.all(i)}_onDidCommitProvisionalTarget(e){const{oldTargetId:t,newTargetId:n}=e;o.assert(this._provisionalPage),o.assert(this._provisionalPage._session.sessionId===n,"Unknown new target: "+n),o.assert(this._session.sessionId===t,"Unknown old target: "+t),this._session.errorText="Target was swapped out.";const i=this._provisionalPage._session;this._provisionalPage.commit(),this._provisionalPage.dispose(),this._provisionalPage=null,this._setSession(i)}_onTargetDestroyed(e){const{targetId:t,crashed:n}=e;this._provisionalPage&&this._provisionalPage._session.sessionId===t?(this._provisionalPage._session.dispose(!1),this._provisionalPage.dispose(),this._provisionalPage=null):this._session.sessionId===t&&(this._session.dispose(!1),l.helper.removeEventListeners(this._sessionListeners),n&&(this._session.markAsCrashed(),this._page._didCrash()))}didClose(){this._page._didClose()}dispose(e){this._pageProxySession.dispose(e),l.helper.removeEventListeners(this._sessionListeners),l.helper.removeEventListeners(this._eventListeners),this._session&&this._session.dispose(e),this._provisionalPage&&(this._provisionalPage._session.dispose(e),this._provisionalPage.dispose(),this._provisionalPage=null),this._page._didDisconnect(),this._firstNonInitialNavigationCommittedReject(new Error("Page closed"))}dispatchMessageToSession(e){this._pageProxySession.dispatchMessage(e)}handleProvisionalLoadFailed(e){if(!this._initializedPage)return void this._firstNonInitialNavigationCommittedReject(new Error("Initial load failed"));if(!this._provisionalPage)return;let t=e.error;t.includes("cancelled")&&(t+="; maybe frame was detached?"),this._page._frameManager.frameAbortedNavigation(this._page.mainFrame()._id,t,e.loaderId)}handleWindowOpen(e){o.debugAssert(!this._nextWindowOpenPopupFeatures),this._nextWindowOpenPopupFeatures=e.windowFeatures}async pageOrError(){return this._pagePromise}openerDelegate(){return this._opener}async _onTargetCreated(e){const{targetInfo:t}=e,n=new p.WKSession(this._pageProxySession.connection,t.targetId,`The ${t.type} has been closed.`,e=>{this._pageProxySession.send("Target.sendMessageToTarget",{message:JSON.stringify(e),targetId:t.targetId}).catch(t=>{n.dispatchMessage({id:e.id,error:{message:t.message}})})});if(o.assert("page"===t.type,"Only page targets are expected in WebKit, received: "+t.type),t.isProvisional)o.assert(t.isProvisional),o.assert(!this._provisionalPage),this._provisionalPage=new g.WKProvisionalPage(n,this),t.isPaused&&this._provisionalPage.initializationPromise.then(()=>{this._pageProxySession.sendMayFail("Target.resume",{targetId:t.targetId})});else{let e;o.assert(!this._initializedPage);try{this._setSession(n),await Promise.all([this._initializePageProxySession(),this._initializeSession(n,!1,({frameTree:e})=>this._handleFrameTree(e))]),e=this._page}catch(t){e=t}if(t.isPaused&&this._pageProxySession.sendMayFail("Target.resume",{targetId:t.targetId}),e instanceof u.Page&&""===this._page.mainFrame().url())try{await this._firstNonInitialNavigationCommittedPromise}catch(t){e=t}else this._firstNonInitialNavigationCommittedPromise.catch(()=>{});this._initializedPage=e instanceof u.Page?e:null,this._pagePromiseCallback(e)}}_onDispatchMessageFromTarget(e){const{targetId:t,message:n}=e;if(this._provisionalPage&&this._provisionalPage._session.sessionId===t)this._provisionalPage._session.dispatchMessage(JSON.parse(n));else{if(this._session.sessionId!==t)throw new Error("Unknown target: "+t);this._session.dispatchMessage(JSON.parse(n))}}_addSessionListeners(){this._sessionListeners=[l.helper.addEventListener(this._session,"Page.frameNavigated",e=>this._onFrameNavigated(e.frame,!1)),l.helper.addEventListener(this._session,"Page.navigatedWithinDocument",e=>this._onFrameNavigatedWithinDocument(e.frameId,e.url)),l.helper.addEventListener(this._session,"Page.frameAttached",e=>this._onFrameAttached(e.frameId,e.parentFrameId)),l.helper.addEventListener(this._session,"Page.frameDetached",e=>this._onFrameDetached(e.frameId)),l.helper.addEventListener(this._session,"Page.frameScheduledNavigation",e=>this._onFrameScheduledNavigation(e.frameId)),l.helper.addEventListener(this._session,"Page.frameStoppedLoading",e=>this._onFrameStoppedLoading(e.frameId)),l.helper.addEventListener(this._session,"Page.loadEventFired",e=>this._onLifecycleEvent(e.frameId,"load")),l.helper.addEventListener(this._session,"Page.domContentEventFired",e=>this._onLifecycleEvent(e.frameId,"domcontentloaded")),l.helper.addEventListener(this._session,"Runtime.executionContextCreated",e=>this._onExecutionContextCreated(e.context)),l.helper.addEventListener(this._session,"Console.messageAdded",e=>this._onConsoleMessage(e)),l.helper.addEventListener(this._session,"Console.messageRepeatCountUpdated",e=>this._onConsoleRepeatCountUpdated(e)),l.helper.addEventListener(this._pageProxySession,"Dialog.javascriptDialogOpening",e=>this._onDialog(e)),l.helper.addEventListener(this._session,"Page.fileChooserOpened",e=>this._onFileChooserOpened(e)),l.helper.addEventListener(this._session,"Network.requestWillBeSent",e=>this._onRequestWillBeSent(this._session,e)),l.helper.addEventListener(this._session,"Network.requestIntercepted",e=>this._onRequestIntercepted(e)),l.helper.addEventListener(this._session,"Network.responseReceived",e=>this._onResponseReceived(e)),l.helper.addEventListener(this._session,"Network.loadingFinished",e=>this._onLoadingFinished(e)),l.helper.addEventListener(this._session,"Network.loadingFailed",e=>this._onLoadingFailed(e)),l.helper.addEventListener(this._session,"Network.webSocketCreated",e=>this._page._frameManager.onWebSocketCreated(e.requestId,e.url)),l.helper.addEventListener(this._session,"Network.webSocketWillSendHandshakeRequest",e=>this._page._frameManager.onWebSocketRequest(e.requestId)),l.helper.addEventListener(this._session,"Network.webSocketHandshakeResponseReceived",e=>this._page._frameManager.onWebSocketResponse(e.requestId,e.response.status,e.response.statusText)),l.helper.addEventListener(this._session,"Network.webSocketFrameSent",e=>e.response.payloadData&&this._page._frameManager.onWebSocketFrameSent(e.requestId,e.response.opcode,e.response.payloadData)),l.helper.addEventListener(this._session,"Network.webSocketFrameReceived",e=>e.response.payloadData&&this._page._frameManager.webSocketFrameReceived(e.requestId,e.response.opcode,e.response.payloadData)),l.helper.addEventListener(this._session,"Network.webSocketClosed",e=>this._page._frameManager.webSocketClosed(e.requestId)),l.helper.addEventListener(this._session,"Network.webSocketFrameError",e=>this._page._frameManager.webSocketError(e.requestId,e.errorMessage))]}async _updateState(e,t){await this._forAllSessions(n=>n.send(e,t).then())}async _forAllSessions(e){const t=[this._session];this._provisionalPage&&t.push(this._provisionalPage._session),await Promise.all(t.map(t=>e(t).catch(e=>{})))}_onFrameScheduledNavigation(e){this._page._frameManager.frameRequestedNavigation(e)}_onFrameStoppedLoading(e){this._page._frameManager.frameStoppedLoading(e)}_onLifecycleEvent(e,t){this._page._frameManager.frameLifecycleEvent(e,t)}_handleFrameTree(e){if(this._onFrameAttached(e.frame.id,e.frame.parentId||null),this._onFrameNavigated(e.frame,!0),this._page._frameManager.frameLifecycleEvent(e.frame.id,"domcontentloaded"),this._page._frameManager.frameLifecycleEvent(e.frame.id,"load"),e.childFrames)for(const t of e.childFrames)this._handleFrameTree(t)}_onFrameAttached(e,t){return this._page._frameManager.frameAttached(e,t)}_onFrameNavigated(e,t){const n=this._page._frameManager.frame(e.id);o.assert(n),this._removeContextsForFrame(n,!0),e.parentId||this._workers.clear(),this._page._frameManager.frameCommittedNewDocumentNavigation(e.id,e.url,e.name||"",e.loaderId,t),t||this._firstNonInitialNavigationCommittedFulfill()}_onFrameNavigatedWithinDocument(e,t){this._page._frameManager.frameCommittedSameDocumentNavigation(e,t)}_onFrameDetached(e){this._page._frameManager.frameDetached(e)}_removeContextsForFrame(e,t){for(const[n,i]of this._contextIdToContext)i.frame===e&&(i._delegate._dispose(),this._contextIdToContext.delete(n),t&&e._contextDestroyed(i))}_onExecutionContextCreated(e){if(this._contextIdToContext.has(e.id))return;const t=this._page._frameManager.frame(e.frameId);if(!t)return;const n=new m.WKExecutionContext(this._session,e.id);let i=null;"normal"===e.type?i="main":"user"===e.type&&"__playwright_utility_world__"===e.name&&(i="utility");const r=new c.FrameExecutionContext(n,t,i);i&&t._contextCreated(i,r),"normal"===e.type&&t===this._page.mainFrame()&&(this._mainFrameContextId=e.id),this._contextIdToContext.set(e.id,r)}async navigateFrame(e,t,n){if(this._pageProxySession.isDisposed())throw new Error("Target closed");const i=this._pageProxySession.sessionId;return{newDocumentId:(await this._pageProxySession.connection.browserSession.send("Playwright.navigate",{url:t,pageProxyId:i,frameId:e._id,referrer:n})).loaderId}}_onConsoleMessage(e){const{type:t,level:n,text:i,parameters:r,url:s,line:o,column:a,source:c}=e.message;if("debug"===n&&r&&"__playwright_binding_call__"===r[0].value){const e=JSON.parse(r[1].objectId),t=this._contextIdToContext.get(e.injectedScriptId);return void this.pageOrError().then(e=>{e instanceof Error||this._page._onBindingCalled(r[2].value,t)})}if("error"===n&&"javascript"===c){const t=i.startsWith("Error: ")?i.substring(7):i,n=new Error(t);return e.message.stackTrace?n.stack=e.message.stackTrace.map(e=>`${e.functionName}@${e.url}:${e.lineNumber}:${e.columnNumber}`).join("\n"):n.stack="",void this._page.emit(u.Page.Events.PageError,n)}let l=t||"";"log"===t?l=n:"timing"===t&&(l="timeEnd");const d=(r||[]).map(e=>{let t=null;if(e.objectId){const n=JSON.parse(e.objectId);t=this._contextIdToContext.get(n.injectedScriptId)}else t=this._contextIdToContext.get(this._mainFrameContextId);return t.createHandle(e)});this._lastConsoleMessage={derivedType:l,text:i,handles:d,count:0,location:{url:s||"",lineNumber:(o||1)-1,columnNumber:(a||1)-1}},this._onConsoleRepeatCountUpdated({count:1})}_onConsoleRepeatCountUpdated(e){if(this._lastConsoleMessage){const{derivedType:t,text:n,handles:i,count:r,location:s}=this._lastConsoleMessage;for(let o=r;o<e.count;++o)this._page._addConsoleMessage(t,i,s,i.length?void 0:n);this._lastConsoleMessage.count=e.count}}_onDialog(e){this._page.emit(u.Page.Events.Dialog,new a.Dialog(this._page,e.type,e.message,async(e,t)=>{await this._pageProxySession.send("Dialog.handleJavaScriptDialog",{accept:e,promptText:t})},e.defaultPrompt))}async _onFileChooserOpened(e){const t=(await this._page._frameManager.frame(e.frameId)._mainContext()).createHandle(e.element).asElement();this._page._onFileChooserOpened(t)}static async _setEmulateMedia(e,t,n){const i=[];if(i.push(e.send("Page.setEmulatedMedia",{media:t||""})),null!==n){let t="";switch(n){case"light":t="Light";break;case"dark":t="Dark"}i.push(e.send("Page.setForcedAppearance",{appearance:t}))}await Promise.all(i)}async updateExtraHTTPHeaders(){await this._updateState("Network.setExtraHTTPHeaders",{headers:o.headersArrayToObject(this._calculateExtraHTTPHeaders(),!1)})}_calculateExtraHTTPHeaders(){const e=this._browserContext._options.locale;return d.mergeHeaders([this._browserContext._options.extraHTTPHeaders,this._page._state.extraHTTPHeaders,e?d.singleHeader("Accept-Language",e):void 0])}async updateEmulateMedia(){const e=this._page._state.colorScheme||this._browserContext._options.colorScheme||"light";await this._forAllSessions(t=>b._setEmulateMedia(t,this._page._state.mediaType,e))}async setViewportSize(e){o.assert(this._page._state.viewportSize===e),await this._updateViewport()}async bringToFront(){this._pageProxySession.send("Target.activate",{targetId:this._session.sessionId})}async _updateViewport(){const e=this._browserContext._options,t=this._page._state.viewportSize;if(null===t)return;const n=[this._pageProxySession.send("Emulation.setDeviceMetricsOverride",{width:t.width,height:t.height,fixedLayout:!!e.isMobile,deviceScaleFactor:e.deviceScaleFactor||1}),this._session.send("Page.setScreenSizeOverride",{width:t.width,height:t.height})];if(e.isMobile){const e=t.width>t.height?90:0;n.push(this._session.send("Page.setOrientationOverride",{angle:e}))}await Promise.all(n)}async updateRequestInterception(){const e=this._page._needsRequestInterception();await Promise.all([this._updateState("Network.setInterceptionEnabled",{enabled:e}),this._updateState("Network.addInterception",{url:".*",stage:"request",isRegex:!0})])}async updateOffline(){await this._updateState("Network.setEmulateOfflineState",{offline:!!this._browserContext._options.offline})}async updateHttpCredentials(){const e=this._browserContext._options.httpCredentials||{username:"",password:""};await this._pageProxySession.send("Emulation.setAuthCredentials",{username:e.username,password:e.password})}async setFileChooserIntercepted(e){await this._session.send("Page.setInterceptFileChooserDialog",{enabled:e}).catch(e=>{})}async opener(){if(!this._opener)return null;const e=await this._opener.pageOrError();return e instanceof u.Page&&!e.isClosed()?e:null}async reload(){await this._session.send("Page.reload")}goBack(){return this._session.send("Page.goBack").then(()=>!0).catch(e=>{if(e instanceof Error&&e.message.includes("Protocol error (Page.goBack): Failed to go"))return!1;throw e})}goForward(){return this._session.send("Page.goForward").then(()=>!0).catch(e=>{if(e instanceof Error&&e.message.includes("Protocol error (Page.goForward): Failed to go"))return!1;throw e})}async exposeBinding(e){if("main"!==e.world)throw new Error("Only main context bindings are supported in WebKit.");await this._updateBootstrapScript(),await this._evaluateBindingScript(e)}async _evaluateBindingScript(e){if("main"!==e.world)throw new Error("Only main context bindings are supported in WebKit.");const t=this._bindingToScript(e);await Promise.all(this._page.frames().map(e=>e._evaluateExpression(t,!1,{}).catch(e=>{})))}async evaluateOnNewDocument(e){await this._updateBootstrapScript()}_bindingToScript(e){return`self.${e.name} = (param) => console.debug('__playwright_binding_call__', {}, param); ${e.source}`}_calculateBootstrapScript(){const e=[];for(const t of this._page.allBindings())e.push(this._bindingToScript(t));return e.push(...this._browserContext._evaluateOnNewDocumentSources),e.push(...this._page._evaluateOnNewDocumentSources),e.join(";")}async _updateBootstrapScript(){await this._updateState("Page.setBootstrapScript",{source:this._calculateBootstrapScript()})}async closePage(e){await this._stopScreencast(),await this._pageProxySession.sendMayFail("Target.close",{targetId:this._session.sessionId,runBeforeUnload:e})}canScreenshotOutsideViewport(){return!0}async setBackgroundColor(e){await this._session.send("Page.setDefaultBackgroundColorOverride",{color:e})}async _startScreencast(e){o.assert(!this._recordingVideoFile);const{screencastId:t}=await this._pageProxySession.send("Screencast.start",{file:e.outputFile,width:e.width,height:e.height});this._recordingVideoFile=e.outputFile,this._browserContext._browser._videoStarted(this._browserContext,t,e.outputFile,this.pageOrError())}async _stopScreencast(){this._recordingVideoFile&&(await this._pageProxySession.sendMayFail("Screencast.stop"),this._recordingVideoFile=null)}async takeScreenshot(e,t,n,r){const o=t||n,a=await this._session.send("Page.snapshotRect",{...o,coordinateSystem:t?"Page":"Viewport"});let c=Buffer.from(a.dataURL.substr("data:image/png;base64,".length),"base64");return"jpeg"===e&&(c=i.encode(s.PNG.sync.read(c),r).data),c}async resetViewport(){o.assert(!1,"Should not be called")}async getContentFrame(e){const t=await this._session.send("DOM.describeNode",{objectId:e._objectId});return t.contentFrameId?this._page._frameManager.frame(t.contentFrameId):null}async getOwnerFrame(e){if(!e._objectId)return null;return(await this._session.send("DOM.describeNode",{objectId:e._objectId})).ownerFrameId||null}isElementHandle(e){return"node"===e.subtype}async getBoundingBox(e){const t=await this.getContentQuads(e);if(!t||!t.length)return null;let n=1/0,i=-1/0,r=1/0,s=-1/0;for(const e of t)for(const t of e)n=Math.min(n,t.x),i=Math.max(i,t.x),r=Math.min(r,t.y),s=Math.max(s,t.y);return{x:n,y:r,width:i-n,height:s-r}}async scrollRectIntoViewIfNeeded(e,t){return await this._session.send("DOM.scrollIntoViewIfNeeded",{objectId:e._objectId,rect:t}).then(()=>"done").catch(e=>{if(e instanceof Error&&e.message.includes("Node does not have a layout object"))return"error:notvisible";if(e instanceof Error&&e.message.includes("Node is detached from document"))return"error:notconnected";throw e})}rafCountForStablePosition(){return"win32"===process.platform?5:1}async getContentQuads(e){const t=await this._session.sendMayFail("DOM.getContentQuads",{objectId:e._objectId});return t?t.quads.map(e=>[{x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},{x:e[6],y:e[7]}]):null}async setInputFiles(e,t){const n=e._objectId,i=t.map(e=>({name:e.name,type:e.mimeType,data:e.buffer}));await this._session.send("DOM.setInputFiles",{objectId:n,files:i})}async adoptElementHandle(e,t){const n=await this._session.sendMayFail("DOM.resolveNode",{objectId:e._objectId,executionContextId:t._delegate._contextId});if(!n||"null"===n.object.subtype)throw new Error("Unable to adopt element handle from a different document");return t.createHandle(n.object)}async getAccessibilityTree(e){return h.getAccessibilityTree(this._session,e)}async inputActionEpilogue(){}async getFrameElement(e){const t=e.parentFrame();if(!t)throw new Error("Frame has been detached.");const n=await this._page.selectors._queryAll(t,"iframe",void 0),i=await Promise.all(n.map(async e=>{const t=await e.contentFrame().catch(e=>null);return{handle:e,frame:t}})),r=i.find(t=>t.frame===e);if(i.map(e=>e===r?Promise.resolve():e.handle.dispose()),!r)throw new Error("Frame has been detached.");return r.handle}_onRequestWillBeSent(e,t){if(t.request.url.startsWith("data:"))return;let n=null;if(t.redirectResponse){const e=this._requestIdToRequest.get(t.requestId);e&&(this._handleRequestRedirect(e,t.redirectResponse,t.timestamp),n=e.request)}const i=this._page._frameManager.frame(t.frameId),r="Document"===t.type?t.loaderId:void 0,s=this._page._needsRequestInterception()&&!n,o=new _.WKInterceptableRequest(e,s,i,t,n,r);this._requestIdToRequest.set(t.requestId,o),this._page._frameManager.requestStarted(o.request)}_handleRequestRedirect(e,t,n){const i=e.createResponse(t);i._requestFinished(t.timing?l.helper.secondsToRoundishMillis(n-e._timestamp):-1,"Response body is unavailable for redirect responses"),this._requestIdToRequest.delete(e._requestId),this._page._frameManager.requestReceivedResponse(i),this._page._frameManager.requestFinished(e.request)}_onRequestIntercepted(e){const t=this._requestIdToRequest.get(e.requestId);t&&(t._allowInterception?t._interceptedCallback():this._session.sendMayFail("Network.interceptWithRequest",{requestId:t._requestId}))}_onResponseReceived(e){const t=this._requestIdToRequest.get(e.requestId);if(!t)return;const n=t.createResponse(e.response);e.response.requestHeaders&&Object.keys(e.response.requestHeaders).length&&t.request.updateWithRawHeaders(o.headersObjectToArray(e.response.requestHeaders)),this._page._frameManager.requestReceivedResponse(n),204===n.status()&&this._onLoadingFailed({requestId:e.requestId,errorText:"Aborted: 204 No Content",timestamp:e.timestamp})}_onLoadingFinished(e){const t=this._requestIdToRequest.get(e.requestId);if(!t)return;const n=t.request._existingResponse();n&&n._requestFinished(l.helper.secondsToRoundishMillis(e.timestamp-t._timestamp)),this._requestIdToRequest.delete(t._requestId),this._page._frameManager.requestFinished(t.request)}_onLoadingFailed(e){const t=this._requestIdToRequest.get(e.requestId);if(!t)return;const n=t.request._existingResponse();n&&n._requestFinished(l.helper.secondsToRoundishMillis(e.timestamp-t._timestamp)),this._requestIdToRequest.delete(t._requestId),t.request._setFailureText(e.errorText),this._page._frameManager.requestFailed(t.request,e.errorText.includes("cancelled"))}async _grantPermissions(e,t){const n=new Map([["geolocation","geolocation"]]),i=t.map(e=>{const t=n.get(e);if(!t)throw new Error("Unknown permission: "+e);return t});await this._pageProxySession.send("Emulation.grantPermissions",{origin:e,permissions:i})}async _clearPermissions(){await this._pageProxySession.send("Emulation.resetPermissions",{})}}t.WKPage=b},function(e,t,n){var i=n(197),r=n(198);e.exports={encode:i,decode:r}},function(e,t,n){function i(e){Math.round;var t,n,i,r,s,o=Math.floor,a=new Array(64),c=new Array(64),l=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),p=new Array(64),m=new Array(64),f=[],_=0,g=7,w=new Array(64),b=new Array(64),y=new Array(64),v=new Array(256),x=new Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],I=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function M(e,t){for(var n=0,i=0,r=new Array,s=1;s<=16;s++){for(var o=1;o<=e[s];o++)r[t[i]]=[],r[t[i]][0]=n,r[t[i]][1]=s,i++,n++;n*=2}return r}function N(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(_|=1<<g),n--,--g<0&&(255==_?(F(255),F(0)):F(_),g=7,_=0)}function F(e){f.push(e)}function D(e){F(e>>8&255),F(255&e)}function R(e,t,n,i,r){for(var s,o=r[0],a=r[240],c=function(e,t){var n,i,r,s,o,a,c,l,d,u,h=0;for(d=0;d<8;++d){n=e[h],i=e[h+1],r=e[h+2],s=e[h+3],o=e[h+4],a=e[h+5],c=e[h+6];var m=n+(l=e[h+7]),f=n-l,_=i+c,g=i-c,w=r+a,b=r-a,y=s+o,v=s-o,x=m+y,S=m-y,k=_+w,C=_-w;e[h]=x+k,e[h+4]=x-k;var E=.707106781*(C+S);e[h+2]=S+E,e[h+6]=S-E;var T=.382683433*((x=v+b)-(C=g+f)),P=.5411961*x+T,O=1.306562965*C+T,A=.707106781*(k=b+g),I=f+A,M=f-A;e[h+5]=M+P,e[h+3]=M-P,e[h+1]=I+O,e[h+7]=I-O,h+=8}for(h=0,d=0;d<8;++d){n=e[h],i=e[h+8],r=e[h+16],s=e[h+24],o=e[h+32],a=e[h+40],c=e[h+48];var N=n+(l=e[h+56]),F=n-l,D=i+c,R=i-c,L=r+a,j=r-a,B=s+o,q=s-o,H=N+B,W=N-B,U=D+L,z=D-L;e[h]=H+U,e[h+32]=H-U;var V=.707106781*(z+W);e[h+16]=W+V,e[h+48]=W-V;var $=.382683433*((H=q+j)-(z=R+F)),K=.5411961*H+$,G=1.306562965*z+$,Y=.707106781*(U=j+R),J=F+Y,X=F-Y;e[h+40]=X+K,e[h+24]=X-K,e[h+8]=J+G,e[h+56]=J-G,h++}for(d=0;d<64;++d)u=e[d]*t[d],p[d]=u>0?u+.5|0:u-.5|0;return p}(e,t),l=0;l<64;++l)m[S[l]]=c[l];var d=m[0]-n;n=m[0],0==d?N(i[0]):(N(i[h[s=32767+d]]),N(u[s]));for(var f=63;f>0&&0==m[f];f--);if(0==f)return N(o),n;for(var _,g=1;g<=f;){for(var w=g;0==m[g]&&g<=f;++g);var b=g-w;if(b>=16){_=b>>4;for(var y=1;y<=_;++y)N(a);b&=15}s=32767+m[g],N(r[(b<<4)+h[s]]),N(u[s]),g++}return 63!=f&&N(o),n}function L(e){if(e<=0&&(e=1),e>100&&(e=100),s!=e){(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=o((t[n]*e+50)/100);i<1?i=1:i>255&&(i=255),a[S[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var u=o((r[s]*e+50)/100);u<1?u=1:u>255&&(u=255),c[S[s]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,m=0;m<8;m++)for(var f=0;f<8;f++)l[p]=1/(a[S[p]]*h[m]*h[f]*8),d[p]=1/(c[S[p]]*h[m]*h[f]*8),p++})(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),s=e}}this.encode=function(e,s){(new Date).getTime();s&&L(s),f=new Array,_=0,g=7,D(65496),D(65504),D(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),D(1),D(1),F(0),F(0),function(e){if(e){D(65505),69===e[0]&&120===e[1]&&105===e[2]&&102===e[3]?D(e.length+2):(D(e.length+5+2),F(69),F(120),F(105),F(102),F(0));for(var t=0;t<e.length;t++)F(e[t])}}(e.exifBuffer),function(){D(65499),D(132),F(0);for(var e=0;e<64;e++)F(a[e]);F(1);for(var t=0;t<64;t++)F(c[t])}(),function(e,t){D(65472),D(17),F(8),D(t),D(e),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)}(e.width,e.height),function(){D(65476),D(418),F(0);for(var e=0;e<16;e++)F(k[e+1]);for(var t=0;t<=11;t++)F(C[t]);F(16);for(var n=0;n<16;n++)F(E[n+1]);for(var i=0;i<=161;i++)F(T[i]);F(1);for(var r=0;r<16;r++)F(P[r+1]);for(var s=0;s<=11;s++)F(O[s]);F(17);for(var o=0;o<16;o++)F(A[o+1]);for(var a=0;a<=161;a++)F(I[a])}(),D(65498),D(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var o=0,u=0,h=0;_=0,g=7,this.encode.displayName="_encode_";for(var p,m,v,S,M,j,B,q,H,W=e.data,U=e.width,z=e.height,V=4*U,$=0;$<z;){for(p=0;p<V;){for(j=M=V*$+p,B=-1,q=0,H=0;H<64;H++)j=M+(q=H>>3)*V+(B=4*(7&H)),$+q>=z&&(j-=V*($+1+q-z)),p+B>=V&&(j-=p+B-V+4),m=W[j++],v=W[j++],S=W[j++],w[H]=(x[m]+x[v+256>>0]+x[S+512>>0]>>16)-128,b[H]=(x[m+768>>0]+x[v+1024>>0]+x[S+1280>>0]>>16)-128,y[H]=(x[m+1280>>0]+x[v+1536>>0]+x[S+1792>>0]>>16)-128;o=R(w,l,o,t,i),u=R(b,d,u,n,r),h=R(y,d,h,n,r),p+=32}$+=8}if(g>=0){var K=[];K[1]=g+1,K[0]=(1<<g+1)-1,N(K)}return D(65497),Buffer.from(f)},function(){(new Date).getTime();e||(e=50),function(){for(var e=String.fromCharCode,t=0;t<256;t++)v[t]=e(t)}(),t=M(k,C),n=M(P,O),i=M(E,T),r=M(A,I),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var i=e;i<t;i++)h[32767+i]=n,u[32767+i]=[],u[32767+i][1]=n,u[32767+i][0]=i;for(var r=-(t-1);r<=-e;r++)h[32767+r]=n,u[32767+r]=[],u[32767+r][1]=n,u[32767+r][0]=t-1+r;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)x[e]=19595*e,x[e+256>>0]=38470*e,x[e+512>>0]=7471*e+32768,x[e+768>>0]=-11059*e,x[e+1024>>0]=-21709*e,x[e+1280>>0]=32768*e+8421375,x[e+1536>>0]=-27439*e,x[e+1792>>0]=-5329*e}(),L(e),(new Date).getTime()}()}e.exports=function(e,t){void 0===t&&(t=50);return{data:new i(t).encode(e,t),width:e.width,height:e.height}}},function(e,t,n){var i=function(){"use strict";var e=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function t(){}function n(e,t){for(var n,i,r=0,s=[],o=16;o>0&&!e[o-1];)o--;s.push({children:[],index:0});var a,c=s[0];for(n=0;n<o;n++){for(i=0;i<e[n];i++){for((c=s.pop()).children[c.index]=t[r];c.index>0;){if(0===s.length)throw new Error("Could not recreate Huffman Table");c=s.pop()}for(c.index++,s.push(c);s.length<=n;)s.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a;r++}n+1<o&&(s.push(a={children:[],index:0}),c.children[c.index]=a.children,c=a)}return s[0].children}function i(t,n,i,r,s,o,a,c,l,d){i.precision,i.samplesPerLine,i.scanLines;var u=i.mcusPerLine,h=i.progressive,p=(i.maxH,i.maxV,n),m=0,f=0;function _(){if(f>0)return f--,m>>f&1;if(255==(m=t[n++])){var e=t[n++];if(e)throw new Error("unexpected marker: "+(m<<8|e).toString(16))}return f=7,m>>>7}function g(e){for(var t,n=e;null!==(t=_());){if("number"==typeof(n=n[t]))return n;if("object"!=typeof n)throw new Error("invalid huffman sequence")}return null}function w(e){for(var t=0;e>0;){var n=_();if(null===n)return;t=t<<1|n,e--}return t}function b(e){var t=w(e);return t>=1<<e-1?t:t+(-1<<e)+1}var y=0;var v,x=0;function S(e,t,n,i,r){var s=n%u,o=(n/u|0)*e.v+i,a=s*e.h+r;void 0===e.blocks[o]&&d.tolerantDecoding||t(e,e.blocks[o][a])}function k(e,t,n){var i=n/e.blocksPerLine|0,r=n%e.blocksPerLine;void 0===e.blocks[i]&&d.tolerantDecoding||t(e,e.blocks[i][r])}var C,E,T,P,O,A,I=r.length;A=h?0===o?0===c?function(e,t){var n=g(e.huffmanTableDC),i=0===n?0:b(n)<<l;t[0]=e.pred+=i}:function(e,t){t[0]|=_()<<l}:0===c?function(t,n){if(y>0)y--;else for(var i=o,r=a;i<=r;){var s=g(t.huffmanTableAC),c=15&s,d=s>>4;if(0!==c){n[e[i+=d]]=b(c)*(1<<l),i++}else{if(d<15){y=w(d)+(1<<d)-1;break}i+=16}}}:function(t,n){for(var i=o,r=a,s=0;i<=r;){var c=e[i],d=n[c]<0?-1:1;switch(x){case 0:var u=g(t.huffmanTableAC),h=15&u;s=u>>4;if(0===h)s<15?(y=w(s)+(1<<s),x=4):(s=16,x=1);else{if(1!==h)throw new Error("invalid ACn encoding");v=b(h),x=s?2:3}continue;case 1:case 2:n[c]?n[c]+=(_()<<l)*d:0===--s&&(x=2==x?3:0);break;case 3:n[c]?n[c]+=(_()<<l)*d:(n[c]=v<<l,x=0);break;case 4:n[c]&&(n[c]+=(_()<<l)*d)}i++}4===x&&0===--y&&(x=0)}:function(t,n){var i=g(t.huffmanTableDC),r=0===i?0:b(i);n[0]=t.pred+=r;for(var s=1;s<64;){var o=g(t.huffmanTableAC),a=15&o,c=o>>4;if(0!==a){n[e[s+=c]]=b(a),s++}else{if(c<15)break;s+=16}}};var M,N,F,D,R=0;for(N=1==I?r[0].blocksPerLine*r[0].blocksPerColumn:u*i.mcusPerColumn,s||(s=N);R<N;){for(E=0;E<I;E++)r[E].pred=0;if(y=0,1==I)for(C=r[0],O=0;O<s;O++)k(C,A,R),R++;else for(O=0;O<s;O++){for(E=0;E<I;E++)for(F=(C=r[E]).h,D=C.v,T=0;T<D;T++)for(P=0;P<F;P++)S(C,A,R,T,P);if(++R===N)break}if(R===N)do{if(255===t[n]&&0!==t[n+1])break;n+=1}while(n<t.length-2);if(f=0,(M=t[n]<<8|t[n+1])<65280)throw new Error("marker was not found");if(!(M>=65488&&M<=65495))break;n+=2}return n-p}function r(e,t){var n,i,r=[],s=t.blocksPerLine,o=t.blocksPerColumn,a=s<<3,l=new Int32Array(64),d=new Uint8Array(64);function u(e,n,i){var r,s,o,a,c,l,d,u,h,p,m=t.quantizationTable,f=i;for(p=0;p<64;p++)f[p]=e[p]*m[p];for(p=0;p<8;++p){var _=8*p;0!=f[1+_]||0!=f[2+_]||0!=f[3+_]||0!=f[4+_]||0!=f[5+_]||0!=f[6+_]||0!=f[7+_]?(r=5793*f[0+_]+128>>8,s=5793*f[4+_]+128>>8,o=f[2+_],a=f[6+_],c=2896*(f[1+_]-f[7+_])+128>>8,u=2896*(f[1+_]+f[7+_])+128>>8,l=f[3+_]<<4,h=r-s+1>>1,r=r+s+1>>1,s=h,h=3784*o+1567*a+128>>8,o=1567*o-3784*a+128>>8,a=h,h=c-(d=f[5+_]<<4)+1>>1,c=c+d+1>>1,d=h,h=u+l+1>>1,l=u-l+1>>1,u=h,h=r-a+1>>1,r=r+a+1>>1,a=h,h=s-o+1>>1,s=s+o+1>>1,o=h,h=2276*c+3406*u+2048>>12,c=3406*c-2276*u+2048>>12,u=h,h=799*l+4017*d+2048>>12,l=4017*l-799*d+2048>>12,d=h,f[0+_]=r+u,f[7+_]=r-u,f[1+_]=s+d,f[6+_]=s-d,f[2+_]=o+l,f[5+_]=o-l,f[3+_]=a+c,f[4+_]=a-c):(h=5793*f[0+_]+512>>10,f[0+_]=h,f[1+_]=h,f[2+_]=h,f[3+_]=h,f[4+_]=h,f[5+_]=h,f[6+_]=h,f[7+_]=h)}for(p=0;p<8;++p){var g=p;0!=f[8+g]||0!=f[16+g]||0!=f[24+g]||0!=f[32+g]||0!=f[40+g]||0!=f[48+g]||0!=f[56+g]?(r=5793*f[0+g]+2048>>12,s=5793*f[32+g]+2048>>12,o=f[16+g],a=f[48+g],c=2896*(f[8+g]-f[56+g])+2048>>12,u=2896*(f[8+g]+f[56+g])+2048>>12,l=f[24+g],h=r-s+1>>1,r=r+s+1>>1,s=h,h=3784*o+1567*a+2048>>12,o=1567*o-3784*a+2048>>12,a=h,h=c-(d=f[40+g])+1>>1,c=c+d+1>>1,d=h,h=u+l+1>>1,l=u-l+1>>1,u=h,h=r-a+1>>1,r=r+a+1>>1,a=h,h=s-o+1>>1,s=s+o+1>>1,o=h,h=2276*c+3406*u+2048>>12,c=3406*c-2276*u+2048>>12,u=h,h=799*l+4017*d+2048>>12,l=4017*l-799*d+2048>>12,d=h,f[0+g]=r+u,f[56+g]=r-u,f[8+g]=s+d,f[48+g]=s-d,f[16+g]=o+l,f[40+g]=o-l,f[24+g]=a+c,f[32+g]=a-c):(h=5793*i[p+0]+8192>>14,f[0+g]=h,f[8+g]=h,f[16+g]=h,f[24+g]=h,f[32+g]=h,f[40+g]=h,f[48+g]=h,f[56+g]=h)}for(p=0;p<64;++p){var w=128+(f[p]+8>>4);n[p]=w<0?0:w>255?255:w}}c(a*o*8);for(var h=0;h<o;h++){var p=h<<3;for(n=0;n<8;n++)r.push(new Uint8Array(a));for(var m=0;m<s;m++){u(t.blocks[h][m],d,l);var f=0,_=m<<3;for(i=0;i<8;i++){var g=r[p+i];for(n=0;n<8;n++)g[_+n]=d[f++]}}}return r}function s(e){return e<0?0:e>255?255:e}t.prototype={load:function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){var e=new Uint8Array(t.response||t.mozResponseArrayBuffer);this.parse(e),this.onload&&this.onload()}.bind(this),t.send(null)},parse:function(t){var s=1e3*this.opts.maxResolutionInMP*1e3,o=0;t.length;function a(){var e=t[o]<<8|t[o+1];return o+=2,e}function l(){var e=a(),n=t.subarray(o,o+e-2);return o+=n.length,n}function d(e){var t,n,i=0,r=0;for(n in e.components)e.components.hasOwnProperty(n)&&(i<(t=e.components[n]).h&&(i=t.h),r<t.v&&(r=t.v));var s=Math.ceil(e.samplesPerLine/8/i),o=Math.ceil(e.scanLines/8/r);for(n in e.components)if(e.components.hasOwnProperty(n)){t=e.components[n];var a=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/i),l=Math.ceil(Math.ceil(e.scanLines/8)*t.v/r),d=s*t.h,u=o*t.v,h=[];c(256*(u*d));for(var p=0;p<u;p++){for(var m=[],f=0;f<d;f++)m.push(new Int32Array(64));h.push(m)}t.blocksPerLine=a,t.blocksPerColumn=l,t.blocks=h}e.maxH=i,e.maxV=r,e.mcusPerLine=s,e.mcusPerColumn=o}var u,h,p=null,m=null,f=[],_=[],g=[],w=[],b=a();if(this.comments=[],65496!=b)throw new Error("SOI not found");for(b=a();65497!=b;){switch(b){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var y=l();if(65534===b){var v=String.fromCharCode.apply(null,y);this.comments.push(v)}65504===b&&74===y[0]&&70===y[1]&&73===y[2]&&70===y[3]&&0===y[4]&&(p={version:{major:y[5],minor:y[6]},densityUnits:y[7],xDensity:y[8]<<8|y[9],yDensity:y[10]<<8|y[11],thumbWidth:y[12],thumbHeight:y[13],thumbData:y.subarray(14,14+3*y[12]*y[13])}),65505===b&&69===y[0]&&120===y[1]&&105===y[2]&&102===y[3]&&0===y[4]&&(this.exifBuffer=y.subarray(5,y.length)),65518===b&&65===y[0]&&100===y[1]&&111===y[2]&&98===y[3]&&101===y[4]&&0===y[5]&&(m={version:y[6],flags0:y[7]<<8|y[8],flags1:y[9]<<8|y[10],transformCode:y[11]});break;case 65499:for(var x=a()+o-2;o<x;){var S=t[o++];c(256);var k=new Int32Array(64);if(S>>4==0)for($=0;$<64;$++){k[e[$]]=t[o++]}else{if(S>>4!=1)throw new Error("DQT: invalid table spec");for($=0;$<64;$++){k[e[$]]=a()}}f[15&S]=k}break;case 65472:case 65473:case 65474:a(),(u={}).extended=65473===b,u.progressive=65474===b,u.precision=t[o++],u.scanLines=a(),u.samplesPerLine=a(),u.components={},u.componentsOrder=[];var C=u.scanLines*u.samplesPerLine;if(C>s){var E=Math.ceil((C-s)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${E}MP`)}var T,P=t[o++];for(z=0;z<P;z++){T=t[o];var O=t[o+1]>>4,A=15&t[o+1],I=t[o+2];u.componentsOrder.push(T),u.components[T]={h:O,v:A,quantizationIdx:I},o+=3}d(u),_.push(u);break;case 65476:var M=a();for(z=2;z<M;){var N=t[o++],F=new Uint8Array(16),D=0;for($=0;$<16;$++,o++)D+=F[$]=t[o];c(16+D);var R=new Uint8Array(D);for($=0;$<D;$++,o++)R[$]=t[o];z+=17+D,(N>>4==0?w:g)[15&N]=n(F,R)}break;case 65501:a(),h=a();break;case 65500:a(),a();break;case 65498:a();var L=t[o++],j=[];for(z=0;z<L;z++){K=u.components[t[o++]];var B=t[o++];K.huffmanTableDC=w[B>>4],K.huffmanTableAC=g[15&B],j.push(K)}var q=t[o++],H=t[o++],W=t[o++],U=i(t,o,u,j,h,q,H,W>>4,15&W,this.opts);o+=U;break;case 65535:255!==t[o]&&o--;break;default:if(255==t[o-3]&&t[o-2]>=192&&t[o-2]<=254){o-=3;break}throw new Error("unknown JPEG marker "+b.toString(16))}b=a()}if(1!=_.length)throw new Error("only single frame JPEGs supported");for(var z=0;z<_.length;z++){var V=_[z].components;for(var $ in V)V[$].quantizationTable=f[V[$].quantizationIdx],delete V[$].quantizationIdx}this.width=u.samplesPerLine,this.height=u.scanLines,this.jfif=p,this.adobe=m,this.components=[];for(z=0;z<u.componentsOrder.length;z++){var K=u.components[u.componentsOrder[z]];this.components.push({lines:r(0,K),scaleX:K.h/u.maxH,scaleY:K.v/u.maxV})}},getData:function(e,t){var n,i,r,o,a,l,d,u,h,p,m,f,_,g,w,b,y,v,x,S,k,C=this.width/e,E=this.height/t,T=0,P=e*t*this.components.length;c(P);var O=new Uint8Array(P);switch(this.components.length){case 1:for(n=this.components[0],p=0;p<t;p++)for(a=n.lines[0|p*n.scaleY*E],h=0;h<e;h++)m=a[0|h*n.scaleX*C],O[T++]=m;break;case 2:for(n=this.components[0],i=this.components[1],p=0;p<t;p++)for(a=n.lines[0|p*n.scaleY*E],l=i.lines[0|p*i.scaleY*E],h=0;h<e;h++)m=a[0|h*n.scaleX*C],O[T++]=m,m=l[0|h*i.scaleX*C],O[T++]=m;break;case 3:for(k=!0,this.adobe&&this.adobe.transformCode?k=!0:void 0!==this.opts.colorTransform&&(k=!!this.opts.colorTransform),n=this.components[0],i=this.components[1],r=this.components[2],p=0;p<t;p++)for(a=n.lines[0|p*n.scaleY*E],l=i.lines[0|p*i.scaleY*E],d=r.lines[0|p*r.scaleY*E],h=0;h<e;h++)k?(m=a[0|h*n.scaleX*C],f=l[0|h*i.scaleX*C],v=s(m+1.402*((_=d[0|h*r.scaleX*C])-128)),x=s(m-.3441363*(f-128)-.71413636*(_-128)),S=s(m+1.772*(f-128))):(v=a[0|h*n.scaleX*C],x=l[0|h*i.scaleX*C],S=d[0|h*r.scaleX*C]),O[T++]=v,O[T++]=x,O[T++]=S;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(k=!1,this.adobe&&this.adobe.transformCode?k=!0:void 0!==this.opts.colorTransform&&(k=!!this.opts.colorTransform),n=this.components[0],i=this.components[1],r=this.components[2],o=this.components[3],p=0;p<t;p++)for(a=n.lines[0|p*n.scaleY*E],l=i.lines[0|p*i.scaleY*E],d=r.lines[0|p*r.scaleY*E],u=o.lines[0|p*o.scaleY*E],h=0;h<e;h++)k?(m=a[0|h*n.scaleX*C],f=l[0|h*i.scaleX*C],_=d[0|h*r.scaleX*C],g=u[0|h*o.scaleX*C],w=255-s(m+1.402*(_-128)),b=255-s(m-.3441363*(f-128)-.71413636*(_-128)),y=255-s(m+1.772*(f-128))):(w=a[0|h*n.scaleX*C],b=l[0|h*i.scaleX*C],y=d[0|h*r.scaleX*C],g=u[0|h*o.scaleX*C]),O[T++]=255-w,O[T++]=255-b,O[T++]=255-y,O[T++]=255-g;break;default:throw new Error("Unsupported color mode")}return O},copyToImageData:function(e,t){var n,i,r,o,a,c,l,d,u,h=e.width,p=e.height,m=e.data,f=this.getData(h,p),_=0,g=0;switch(this.components.length){case 1:for(i=0;i<p;i++)for(n=0;n<h;n++)r=f[_++],m[g++]=r,m[g++]=r,m[g++]=r,t&&(m[g++]=255);break;case 3:for(i=0;i<p;i++)for(n=0;n<h;n++)l=f[_++],d=f[_++],u=f[_++],m[g++]=l,m[g++]=d,m[g++]=u,t&&(m[g++]=255);break;case 4:for(i=0;i<p;i++)for(n=0;n<h;n++)a=f[_++],c=f[_++],r=f[_++],l=255-s(a*(1-(o=f[_++])/255)+o),d=255-s(c*(1-o/255)+o),u=255-s(r*(1-o/255)+o),m[g++]=l,m[g++]=d,m[g++]=u,t&&(m[g++]=255);break;default:throw new Error("Unsupported color mode")}}};var o=0,a=0;function c(e=0){var t=o+e;if(t>a){var n=Math.ceil((t-a)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${n}MB`)}o=t}return t.resetMaxMemoryUsage=function(e){o=0,a=e},t.getBytesAllocated=function(){return o},t.requestMemoryAllocation=c,t}();e.exports=function(e,t={}){var n={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...t},r=new Uint8Array(e),s=new i;s.opts=n,i.resetMaxMemoryUsage(1024*n.maxMemoryUsageInMB*1024),s.parse(r);var o=n.formatAsRGBA?4:3,a=s.width*s.height*o;try{i.requestMemoryAllocation(a);var c={width:s.width,height:s.height,exifBuffer:s.exifBuffer,data:n.useTArray?new Uint8Array(a):Buffer.alloc(a)};s.comments.length>0&&(c.comments=s.comments)}catch(e){throw e instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+a):e}return s.copyToImageData(c,n.formatAsRGBA),c}},function(e,t,n){"use strict";let i=n(2),r=n(18),s=n(200),o=n(202),a=n(205),c=t.PNG=function(e){r.call(this),e=e||{},this.width=0|e.width,this.height=0|e.height,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new s(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new o(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};i.inherits(c,r),c.sync=a,c.prototype.pack=function(){return this.data&&this.data.length?(process.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},c.prototype.parse=function(e,t){if(t){let e,n;e=function(e){this.removeListener("error",n),this.data=e,t(null,this)}.bind(this),n=function(n){this.removeListener("parsed",e),t(n,null)}.bind(this),this.once("parsed",e),this.once("error",n)}return this.end(e),this},c.prototype.write=function(e){return this._parser.write(e),!0},c.prototype.end=function(e){this._parser.end(e)},c.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)},c.prototype._gamma=function(e){this.gamma=e},c.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},c.bitblt=function(e,t,n,i,r,s,o,a){if(i|=0,r|=0,s|=0,o|=0,a|=0,(n|=0)>e.width||i>e.height||n+r>e.width||i+s>e.height)throw new Error("bitblt reading outside image");if(o>t.width||a>t.height||o+r>t.width||a+s>t.height)throw new Error("bitblt writing outside image");for(let c=0;c<s;c++)e.data.copy(t.data,(a+c)*t.width+o<<2,(i+c)*e.width+n<<2,(i+c)*e.width+n+r<<2)},c.prototype.bitblt=function(e,t,n,i,r,s,o){return c.bitblt(this,e,t,n,i,r,s,o),this},c.adjustGamma=function(e){if(e.gamma){for(let t=0;t<e.height;t++)for(let n=0;n<e.width;n++){let i=e.width*t+n<<2;for(let t=0;t<3;t++){let n=e.data[i+t]/255;n=Math.pow(n,1/2.2/e.gamma),e.data[i+t]=Math.round(255*n)}}e.gamma=0}},c.prototype.adjustGamma=function(){c.adjustGamma(this)}},function(e,t,n){"use strict";let i=n(2),r=n(21),s=n(100),o=n(201),a=n(104),c=n(106),l=n(107),d=e.exports=function(e){s.call(this),this._parser=new a(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};i.inherits(d,s),d.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",(function(){}))),this.errord=!0},d.prototype._inflateData=function(e){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=r.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let e=(1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3))*this._bitmapInfo.height,t=Math.max(e,r.Z_MIN_CHUNK);this._inflate=r.createInflate({chunkSize:t});let n=e,i=this.emit.bind(this,"error");this._inflate.on("error",(function(e){n&&i(e)})),this._filter.on("complete",this._complete.bind(this));let s=this._filter.write.bind(this._filter);this._inflate.on("data",(function(e){n&&(e.length>n&&(e=e.slice(0,n)),n-=e.length,s(e))})),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(e)},d.prototype._handleMetaData=function(e){this._metaData=e,this._bitmapInfo=Object.create(e),this._filter=new o(this._bitmapInfo)},d.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e},d.prototype._handlePalette=function(e){this._bitmapInfo.palette=e},d.prototype._simpleTransparency=function(){this._metaData.alpha=!0},d.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},d.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))},d.prototype._complete=function(e){if(this.errord)return;let t;try{let n=c.dataToBitMap(e,this._bitmapInfo);t=l(n,this._bitmapInfo),n=null}catch(e){return void this._handleError(e)}this.emit("parsed",t)}},function(e,t,n){"use strict";let i=n(2),r=n(100),s=n(101),o=e.exports=function(e){r.call(this);let t=[],n=this;this._filter=new s(e,{read:this.read.bind(this),write:function(e){t.push(e)},complete:function(){n.emit("complete",Buffer.concat(t))}}),this._filter.start()};i.inherits(o,r)},function(e,t,n){"use strict";let i=n(2),r=n(18),s=n(37),o=n(108),a=e.exports=function(e){r.call(this);let t=e||{};this._packer=new o(t),this._deflate=this._packer.createDeflate(),this.readable=!0};i.inherits(a,r),a.prototype.pack=function(e,t,n,i){this.emit("data",Buffer.from(s.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,n)),i&&this.emit("data",this._packer.packGAMA(i));let r=this._packer.filterData(e,t,n);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(e){this.emit("data",this._packer.packIDAT(e))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(r)}},function(e,t,n){"use strict";let i=n(37);e.exports=function(e,t,n,r){let s=-1!==[i.COLORTYPE_COLOR_ALPHA,i.COLORTYPE_ALPHA].indexOf(r.colorType);if(r.colorType===r.inputColorType){let t=function(){let e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256!==new Int16Array(e)[0]}();if(8===r.bitDepth||16===r.bitDepth&&t)return e}let o=16!==r.bitDepth?e:new Uint16Array(e.buffer),a=255,c=i.COLORTYPE_TO_BPP_MAP[r.inputColorType];4!==c||r.inputHasAlpha||(c=3);let l=i.COLORTYPE_TO_BPP_MAP[r.colorType];16===r.bitDepth&&(a=65535,l*=2);let d=Buffer.alloc(t*n*l),u=0,h=0,p=r.bgColor||{};function m(){let e,t,n,c=a;switch(r.inputColorType){case i.COLORTYPE_COLOR_ALPHA:c=o[u+3],e=o[u],t=o[u+1],n=o[u+2];break;case i.COLORTYPE_COLOR:e=o[u],t=o[u+1],n=o[u+2];break;case i.COLORTYPE_ALPHA:c=o[u+1],e=o[u],t=e,n=e;break;case i.COLORTYPE_GRAYSCALE:e=o[u],t=e,n=e;break;default:throw new Error("input color type:"+r.inputColorType+" is not supported at present")}return r.inputHasAlpha&&(s||(c/=a,e=Math.min(Math.max(Math.round((1-c)*p.red+c*e),0),a),t=Math.min(Math.max(Math.round((1-c)*p.green+c*t),0),a),n=Math.min(Math.max(Math.round((1-c)*p.blue+c*n),0),a))),{red:e,green:t,blue:n,alpha:c}}void 0===p.red&&(p.red=a),void 0===p.green&&(p.green=a),void 0===p.blue&&(p.blue=a);for(let e=0;e<n;e++)for(let e=0;e<t;e++){let e=m();switch(r.colorType){case i.COLORTYPE_COLOR_ALPHA:case i.COLORTYPE_COLOR:8===r.bitDepth?(d[h]=e.red,d[h+1]=e.green,d[h+2]=e.blue,s&&(d[h+3]=e.alpha)):(d.writeUInt16BE(e.red,h),d.writeUInt16BE(e.green,h+2),d.writeUInt16BE(e.blue,h+4),s&&d.writeUInt16BE(e.alpha,h+6));break;case i.COLORTYPE_ALPHA:case i.COLORTYPE_GRAYSCALE:{let t=(e.red+e.green+e.blue)/3;8===r.bitDepth?(d[h]=t,s&&(d[h+1]=e.alpha)):(d.writeUInt16BE(t,h),s&&d.writeUInt16BE(e.alpha,h+2));break}default:throw new Error("unrecognised color Type "+r.colorType)}u+=c,h+=l}return d}},function(e,t,n){"use strict";let i=n(103);let r={0:function(e,t,n,i,r){for(let s=0;s<n;s++)i[r+s]=e[t+s]},1:function(e,t,n,i,r,s){for(let o=0;o<n;o++){let n=o>=s?e[t+o-s]:0,a=e[t+o]-n;i[r+o]=a}},2:function(e,t,n,i,r){for(let s=0;s<n;s++){let o=t>0?e[t+s-n]:0,a=e[t+s]-o;i[r+s]=a}},3:function(e,t,n,i,r,s){for(let o=0;o<n;o++){let a=o>=s?e[t+o-s]:0,c=t>0?e[t+o-n]:0,l=e[t+o]-(a+c>>1);i[r+o]=l}},4:function(e,t,n,r,s,o){for(let a=0;a<n;a++){let c=a>=o?e[t+a-o]:0,l=t>0?e[t+a-n]:0,d=t>0&&a>=o?e[t+a-(n+o)]:0,u=e[t+a]-i(c,l,d);r[s+a]=u}}},s={0:function(e,t,n){let i=0,r=t+n;for(let n=t;n<r;n++)i+=Math.abs(e[n]);return i},1:function(e,t,n,i){let r=0;for(let s=0;s<n;s++){let n=s>=i?e[t+s-i]:0,o=e[t+s]-n;r+=Math.abs(o)}return r},2:function(e,t,n){let i=0,r=t+n;for(let s=t;s<r;s++){let r=t>0?e[s-n]:0,o=e[s]-r;i+=Math.abs(o)}return i},3:function(e,t,n,i){let r=0;for(let s=0;s<n;s++){let o=s>=i?e[t+s-i]:0,a=t>0?e[t+s-n]:0,c=e[t+s]-(o+a>>1);r+=Math.abs(c)}return r},4:function(e,t,n,r){let s=0;for(let o=0;o<n;o++){let a=o>=r?e[t+o-r]:0,c=t>0?e[t+o-n]:0,l=t>0&&o>=r?e[t+o-(n+r)]:0,d=e[t+o]-i(a,c,l);s+=Math.abs(d)}return s}};e.exports=function(e,t,n,i,o){let a;if("filterType"in i&&-1!==i.filterType){if("number"!=typeof i.filterType)throw new Error("unrecognised filter types");a=[i.filterType]}else a=[0,1,2,3,4];16===i.bitDepth&&(o*=2);let c=t*o,l=0,d=0,u=Buffer.alloc((c+1)*n),h=a[0];for(let t=0;t<n;t++){if(a.length>1){let t=1/0;for(let n=0;n<a.length;n++){let i=s[a[n]](e,d,c,o);i<t&&(h=a[n],t=i)}}u[l]=h,l++,r[h](e,d,c,u,l,o),l+=c,d+=c}return u}},function(e,t,n){"use strict";let i=n(206),r=n(209);t.read=function(e,t){return i(e,t||{})},t.write=function(e,t){return r(e,t)}},function(e,t,n){"use strict";let i=!0,r=n(21),s=n(207);r.deflateSync||(i=!1);let o=n(109),a=n(208),c=n(104),l=n(106),d=n(107);e.exports=function(e,t){if(!i)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let n,u,h;let p=[];let m=new o(e);if(new c(t,{read:m.read.bind(m),error:function(e){n=e},metadata:function(e){u=e},gamma:function(e){h=e},palette:function(e){u.palette=e},transColor:function(e){u.transColor=e},inflateData:function(e){p.push(e)},simpleTransparency:function(){u.alpha=!0}}).start(),m.process(),n)throw n;let f,_=Buffer.concat(p);if(p.length=0,u.interlace)f=r.inflateSync(_);else{let e=(1+(u.width*u.bpp*u.depth+7>>3))*u.height;f=s(_,{chunkSize:e,maxLength:e})}if(_=null,!f||!f.length)throw new Error("bad png - invalid inflate data response");let g=a.process(f,u);_=null;let w=l.dataToBitMap(g,u);g=null;let b=d(w,u);return u.data=b,u.gamma=h||0,u}},function(e,t,n){"use strict";let i=n(33).ok,r=n(21),s=n(2),o=n(26).kMaxLength;function a(e){if(!(this instanceof a))return new a(e);e&&e.chunkSize<r.Z_MIN_CHUNK&&(e.chunkSize=r.Z_MIN_CHUNK),r.Inflate.call(this,e),this._offset=void 0===this._offset?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,e&&null!=e.maxLength&&(this._maxLength=e.maxLength)}function c(e,t){t&&process.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function l(e,t){return function(e,t){if("string"==typeof t&&(t=Buffer.from(t)),!(t instanceof Buffer))throw new TypeError("Not a string or buffer");let n=e._finishFlushFlag;return null==n&&(n=r.Z_FINISH),e._processChunk(t,n)}(new a(t),e)}a.prototype._processChunk=function(e,t,n){if("function"==typeof n)return r.Inflate._processChunk.call(this,e,t,n);let s,a,l=this,d=e&&e.length,u=this._chunkSize-this._offset,h=this._maxLength,p=0,m=[],f=0;function _(e,t){if(l._hadError)return;let n=u-t;if(i(n>=0,"have should not go down"),n>0){let e=l._buffer.slice(l._offset,l._offset+n);if(l._offset+=n,e.length>h&&(e=e.slice(0,h)),m.push(e),f+=e.length,h-=e.length,0===h)return!1}return(0===t||l._offset>=l._chunkSize)&&(u=l._chunkSize,l._offset=0,l._buffer=Buffer.allocUnsafe(l._chunkSize)),0===t&&(p+=d-e,d=e,!0)}this.on("error",(function(e){s=e})),i(this._handle,"zlib binding closed");do{a=this._handle.writeSync(t,e,p,d,this._buffer,this._offset,u),a=a||this._writeState}while(!this._hadError&&_(a[0],a[1]));if(this._hadError)throw s;if(f>=o)throw c(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+o.toString(16)+" bytes");let g=Buffer.concat(m,f);return c(this),g},s.inherits(a,r.Inflate),e.exports=t=l,t.Inflate=a,t.createInflate=function(e){return new a(e)},t.inflateSync=l},function(e,t,n){"use strict";let i=n(109),r=n(101);t.process=function(e,t){let n=[],s=new i(e);return new r(t,{read:s.read.bind(s),write:function(e){n.push(e)},complete:function(){}}).start(),s.process(),Buffer.concat(n)}},function(e,t,n){"use strict";let i=!0,r=n(21);r.deflateSync||(i=!1);let s=n(37),o=n(108);e.exports=function(e,t){if(!i)throw new Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let n=new o(t||{}),a=[];a.push(Buffer.from(s.PNG_SIGNATURE)),a.push(n.packIHDR(e.width,e.height)),e.gamma&&a.push(n.packGAMA(e.gamma));let c=n.filterData(e.data,e.width,e.height),l=r.deflateSync(c,n.getDeflateOptions());if(c=null,!l||!l.length)throw new Error("bad png - invalid compressed data response");return a.push(n.packIDAT(l)),a.push(n.packIEND()),Buffer.concat(a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessibilityTree=void 0,t.getAccessibilityTree=async function(e,t){const n=t?t._objectId:void 0,{axNode:i}=await e.send("Page.accessibilitySnapshot",{objectId:n}),r=new s(i);return{tree:r,needle:t?r._findNeedle():null}};const i=new Map(Object.entries({TextField:"textbox"})),r=new Map(Object.entries({WebArea:"HTML content",Summary:"summary",DescriptionList:"description list",ImageMap:"image map",ListMarker:"list marker",Video:"video playback",Mark:"highlighted",contentinfo:"content information",Details:"details",DescriptionListDetail:"description",DescriptionListTerm:"term",alertdialog:"web alert dialog",dialog:"web dialog",status:"application status",tabpanel:"tab panel",application:"web application"}));class s{constructor(e){this._payload=e,this._children=[];for(const e of this._payload.children||[])this._children.push(new s(e))}children(){return this._children}_findNeedle(){if(this._payload.found)return this;for(const e of this._children){const t=e._findNeedle();if(t)return t}return null}isControl(){switch(this._payload.role){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"TextField":case"tree":return!0;default:return!1}}_isTextControl(){switch(this._payload.role){case"combobox":case"searchfield":case"textbox":case"TextField":return!0}return!1}_name(){return"text"===this._payload.role?this._payload.value||"":this._payload.name||""}isInteresting(e){const{role:t,focusable:n}=this._payload,i=this._name();return"ScrollArea"!==t&&("WebArea"===t||(!(!n&&"MenuListOption"!==t)||(!!this.isControl()||!e&&(this.isLeafNode()&&!!i))))}_hasRendundantTextChild(){if(1!==this._children.length)return!1;const e=this._children[0];return"text"===e._payload.role&&this._payload.name===e._payload.value}isLeafNode(){return!this._children.length||(!!this._isTextControl()||!!this._hasRendundantTextChild())}serialize(){const e={role:i.get(this._payload.role)||this._payload.role,name:this._name()};if("description"in this._payload&&this._payload.description!==e.name&&(e.description=this._payload.description),"roledescription"in this._payload){const t=this._payload.roledescription;t!==this._payload.role&&r.get(this._payload.role)!==t&&(e.roledescription=t)}"value"in this._payload&&"text"!==this._payload.role&&("string"==typeof this._payload.value?e.valueString=this._payload.value:"number"==typeof this._payload.value&&(e.valueNumber=this._payload.value)),"checked"in this._payload&&(e.checked="true"===this._payload.checked?"checked":"false"===this._payload.checked?"unchecked":"mixed"),"pressed"in this._payload&&(e.pressed="true"===this._payload.pressed?"pressed":"false"===this._payload.pressed?"released":"mixed");const t=["keyshortcuts","valuetext"];for(const n of t)n in this._payload&&(e[n]=this._payload[n]);const n=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"];for(const t of n){if("focused"===t&&("WebArea"===this._payload.role||"ScrollArea"===this._payload.role))continue;const n=this._payload[t];n&&(e[t]=n)}const s=["level","valuemax","valuemin"];for(const t of s)t in this._payload&&(e[t]=this._payload[t]);const o=["autocomplete","haspopup","invalid"];for(const t of o){const n=this._payload[t];n&&"false"!==n&&(e[t]=n)}const a=new Set(["ScrollArea","scrollbar","listbox","combobox","menu","tree","separator","slider","tablist","toolbar"]);return this._payload.orientation&&a.has(this._payload.role)&&(e.orientation=this._payload.orientation),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawTouchscreenImpl=t.RawMouseImpl=t.RawKeyboardImpl=void 0;const i=n(58),r=n(94),s=n(0);function o(e){let t=0;return e.has("Shift")&&(t|=1),e.has("Control")&&(t|=2),e.has("Alt")&&(t|=4),e.has("Meta")&&(t|=8),t}t.RawKeyboardImpl=class{constructor(e){this._pageProxySession=e}setSession(e){this._session=e}async keydown(e,t,n,a,c,l,d,u){const h=[];for(const t of["Shift","Control","Alt","Meta"])e.has(t)&&h.push(t);h.push(t);const p=h.join("+");let m=r.macEditingCommands[p];s.isString(m)&&(m=[m]),await this._pageProxySession.send("Input.dispatchKeyEvent",{type:"keyDown",modifiers:o(e),windowsVirtualKeyCode:n,code:t,key:c,text:u,unmodifiedText:u,autoRepeat:d,macCommands:m,isKeypad:l===i.keypadLocation})}async keyup(e,t,n,r,s,a){await this._pageProxySession.send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:o(e),key:s,windowsVirtualKeyCode:n,code:t,isKeypad:a===i.keypadLocation})}async sendText(e){await this._session.send("Page.insertText",{text:e})}};t.RawMouseImpl=class{constructor(e){this._pageProxySession=e}async move(e,t,n,i,r){await this._pageProxySession.send("Input.dispatchMouseEvent",{type:"move",button:n,x:e,y:t,modifiers:o(r)})}async down(e,t,n,i,r,s){await this._pageProxySession.send("Input.dispatchMouseEvent",{type:"down",button:n,x:e,y:t,modifiers:o(r),clickCount:s})}async up(e,t,n,i,r,s){await this._pageProxySession.send("Input.dispatchMouseEvent",{type:"up",button:n,x:e,y:t,modifiers:o(r),clickCount:s})}};t.RawTouchscreenImpl=class{constructor(e){this._pageProxySession=e}async tap(e,t,n){await this._pageProxySession.send("Input.dispatchTapEvent",{x:e,y:t,modifiers:o(n)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKInterceptableRequest=void 0;const i=n(13),r=n(0),s={aborted:"Cancellation",accessdenied:"AccessControl",addressunreachable:"General",blockedbyclient:"Cancellation",blockedbyresponse:"General",connectionaborted:"General",connectionclosed:"General",connectionfailed:"General",connectionrefused:"General",connectionreset:"General",internetdisconnected:"General",namenotresolved:"General",timedout:"Timeout",failed:"General"};function o(e){return-1e3===e||e<=0?-1:(1e3*e|0)/1e3}t.WKInterceptableRequest=class{constructor(e,t,n,s,o,a){this._interceptedCallback=()=>{},this._session=e,this._requestId=s.requestId,this._allowInterception=t;const c=s.type?s.type.toLowerCase():o?o.resourceType():"other";let l=null;this._timestamp=s.timestamp,this._wallTime=1e3*s.walltime,s.request.postData&&(l=Buffer.from(s.request.postData,"base64")),this.request=new i.Request(t?this:null,n,o,a,s.request.url,c,s.request.method,l,r.headersObjectToArray(s.request.headers)),this._interceptedPromise=new Promise(e=>this._interceptedCallback=e)}async abort(e){const t=s[e];r.assert(t,"Unknown error code: "+e),await this._interceptedPromise,await this._session.sendMayFail("Network.interceptRequestWithError",{requestId:this._requestId,errorType:t})}async fulfill(e){if(300<=e.status&&e.status<400)throw new Error("Cannot fulfill with redirect status: "+e.status);await this._interceptedPromise;let t=e.isBase64?"application/octet-stream":"text/plain";const n=r.headersArrayToObject(e.headers,!1),s=n["content-type"];s&&(t=s.split(";")[0].trim()),await this._session.sendMayFail("Network.interceptRequestWithResponse",{requestId:this._requestId,status:e.status,statusText:i.STATUS_TEXTS[String(e.status)],mimeType:t,headers:n,base64Encoded:e.isBase64,content:e.body})}async continue(e){await this._interceptedPromise,await this._session.sendMayFail("Network.interceptWithRequest",{requestId:this._requestId,url:e.url,method:e.method,headers:e.headers?r.headersArrayToObject(e.headers,!1):void 0,postData:e.postData?Buffer.from(e.postData).toString("base64"):void 0})}createResponse(e){const t=e.timing,n={startTime:this._wallTime,domainLookupStart:t?o(t.domainLookupStart):-1,domainLookupEnd:t?o(t.domainLookupEnd):-1,connectStart:t?o(t.connectStart):-1,secureConnectionStart:t?o(t.secureConnectionStart):-1,connectEnd:t?o(t.connectEnd):-1,requestStart:t?o(t.requestStart):-1,responseStart:t?o(t.responseStart):-1};return new i.Response(this.request,e.status,e.statusText,r.headersObjectToArray(e.headers),n,async()=>{const e=await this._session.send("Network.getResponseBody",{requestId:this._requestId});return Buffer.from(e.body,e.base64Encoded?"base64":"utf8")})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKProvisionalPage=void 0;const i=n(4),r=n(0);t.WKProvisionalPage=class{constructor(e,t){this._sessionListeners=[],this._mainFrameId=null,this._session=e,this._wkPage=t;const n=e=>t=>{t.frameId&&(t.frameId=this._wkPage._page._frameManager.mainFrame()._id),e(t)},r=this._wkPage;this._sessionListeners=[i.helper.addEventListener(e,"Network.requestWillBeSent",n(t=>r._onRequestWillBeSent(e,t))),i.helper.addEventListener(e,"Network.requestIntercepted",n(e=>r._onRequestIntercepted(e))),i.helper.addEventListener(e,"Network.responseReceived",n(e=>r._onResponseReceived(e))),i.helper.addEventListener(e,"Network.loadingFinished",n(e=>r._onLoadingFinished(e))),i.helper.addEventListener(e,"Network.loadingFailed",n(e=>r._onLoadingFailed(e)))],this.initializationPromise=this._wkPage._initializeSession(e,!0,({frameTree:e})=>this._handleFrameTree(e))}dispose(){i.helper.removeEventListeners(this._sessionListeners)}commit(){r.assert(this._mainFrameId),this._wkPage._onFrameAttached(this._mainFrameId,null)}_handleFrameTree(e){r.assert(!e.frame.parentId),this._mainFrameId=e.frame.id}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WKWorkers=void 0;const i=n(4),r=n(9),s=n(36),o=n(110);t.WKWorkers=class{constructor(e){this._sessionListeners=[],this._workerSessions=new Map,this._page=e}setSession(e){i.helper.removeEventListeners(this._sessionListeners),this.clear(),this._sessionListeners=[i.helper.addEventListener(e,"Worker.workerCreated",t=>{const n=new r.Worker(t.url),i=new s.WKSession(e.connection,t.workerId,"Most likely the worker has been closed.",n=>{e.send("Worker.sendMessageToWorker",{workerId:t.workerId,message:JSON.stringify(n)}).catch(e=>{i.dispatchMessage({id:n.id,error:{message:e.message}})})});this._workerSessions.set(t.workerId,i),n._createExecutionContext(new o.WKExecutionContext(i,void 0)),this._page._addWorker(t.workerId,n),i.on("Console.messageAdded",e=>this._onConsoleMessage(n,e)),Promise.all([i.send("Runtime.enable"),i.send("Console.enable"),e.send("Worker.initialized",{workerId:t.workerId})]).catch(e=>{this._page._removeWorker(t.workerId)})}),i.helper.addEventListener(e,"Worker.dispatchMessageFromWorker",e=>{const t=this._workerSessions.get(e.workerId);t&&t.dispatchMessage(JSON.parse(e.message))}),i.helper.addEventListener(e,"Worker.workerTerminated",e=>{const t=this._workerSessions.get(e.workerId);t&&(t.dispose(!1),this._workerSessions.delete(e.workerId),this._page._removeWorker(e.workerId))})]}clear(){this._page._clearWorkers(),this._workerSessions.clear()}async initializeSession(e){await e.send("Worker.enable")}async _onConsoleMessage(e,t){const{type:n,level:i,text:r,parameters:s,url:o,line:a,column:c}=t.message;let l=n||"";"log"===n?l=i:"timing"===n&&(l="timeEnd");const d=(s||[]).map(t=>e._existingExecutionContext.createHandle(t)),u={url:o||"",lineNumber:(a||1)-1,columnNumber:(c||1)-1};this._page._addConsoleMessage(l,d,u,d.length?void 0:r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlaywrightDispatcher=void 0;const i=n(216),r=n(221),s=n(5),o=n(222),a=n(115);class c extends s.Dispatcher{constructor(e,t){const s=n(223),c=Object.entries(s).map(([e,t])=>({name:e,descriptor:t}));super(e,t,"Playwright",{chromium:new r.BrowserTypeDispatcher(e,t.chromium),firefox:new r.BrowserTypeDispatcher(e,t.firefox),webkit:new r.BrowserTypeDispatcher(e,t.webkit),android:new i.AndroidDispatcher(e,t.android),electron:new o.ElectronDispatcher(e,t.electron),deviceDescriptors:c,selectors:new a.SelectorsDispatcher(e,t.selectors)},!1,"Playwright")}}t.PlaywrightDispatcher=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidSocketDispatcher=t.AndroidDeviceDispatcher=t.AndroidDispatcher=void 0;const i=n(5),r=n(75),s=n(49);class o extends i.Dispatcher{constructor(e,t){super(e,t,"Android",{},!0)}async devices(e){return{devices:(await this._object.devices()).map(e=>a.from(this._scope,e))}}async setDefaultTimeoutNoReply(e){this._object.setDefaultTimeout(e.timeout)}}t.AndroidDispatcher=o;class a extends i.Dispatcher{static from(e,t){return i.existingDispatcher(t)||new a(e,t)}constructor(e,t){super(e,t,"AndroidDevice",{model:t.model,serial:t.serial},!0);for(const e of t.webViews())this._dispatchEvent("webViewAdded",{webView:e});t.on(r.AndroidDevice.Events.WebViewAdded,e=>this._dispatchEvent("webViewAdded",{webView:e})),t.on(r.AndroidDevice.Events.WebViewRemoved,e=>this._dispatchEvent("webViewRemoved",{pid:e}))}async wait(e){await this._object.send("wait",e)}async fill(e){await this._object.send("click",{selector:e.selector}),await this._object.send("fill",e)}async tap(e){await this._object.send("click",e)}async drag(e){await this._object.send("drag",e)}async fling(e){await this._object.send("fling",e)}async longTap(e){await this._object.send("longClick",e)}async pinchClose(e){await this._object.send("pinchClose",e)}async pinchOpen(e){await this._object.send("pinchOpen",e)}async scroll(e){await this._object.send("scroll",e)}async swipe(e){await this._object.send("swipe",e)}async info(e){return{info:await this._object.send("info",e)}}async tree(e){return{tree:await this._object.send("tree",e)}}async inputType(e){const t=e.text,n=[];for(let e=0;e<t.length;++e){const i=l.get(t[e].toUpperCase());if(void 0===i)throw new Error("No mapping for "+t[e]+" found");n.push(i)}await Promise.all(n.map(e=>this._object.send("inputPress",{keyCode:e})))}async inputPress(e){if(!l.has(e.key))throw new Error("Unknown key: "+e.key);await this._object.send("inputPress",{keyCode:l.get(e.key)})}async inputTap(e){await this._object.send("inputClick",e)}async inputSwipe(e){await this._object.send("inputSwipe",e)}async inputDrag(e){await this._object.send("inputDrag",e)}async screenshot(e){return{binary:(await this._object.screenshot()).toString("base64")}}async shell(e){return{result:(await this._object.shell(e.command)).toString("base64")}}async open(e,t){const n=await this._object.open(e.command);return{socket:new c(this._scope,n)}}async installApk(e){await this._object.installApk(Buffer.from(e.file,"base64"),{args:e.args})}async push(e){await this._object.push(Buffer.from(e.file,"base64"),e.path,e.mode)}async launchBrowser(e){const t=await this._object.launchBrowser(e.pkg,e);return{context:new s.BrowserContextDispatcher(this._scope,t)}}async close(e){await this._object.close()}async setDefaultTimeoutNoReply(e){this._object.setDefaultTimeout(e.timeout)}async connectToWebView(e){return{context:new s.BrowserContextDispatcher(this._scope,await this._object.connectToWebView(e.pid))}}}t.AndroidDeviceDispatcher=a;class c extends i.Dispatcher{constructor(e,t){super(e,t,"AndroidSocket",{},!0),t.on("data",e=>this._dispatchEvent("data",{data:e.toString("base64")})),t.on("close",()=>{this._dispatchEvent("close"),this._dispose()})}async write(e,t){await this._object.write(Buffer.from(e.data,"base64"))}async close(e,t){await this._object.close()}}t.AndroidSocketDispatcher=c;const l=new Map([["Unknown",0],["SoftLeft",1],["SoftRight",2],["Home",3],["Back",4],["Call",5],["EndCall",6],["0",7],["1",8],["2",9],["3",10],["4",11],["5",12],["6",13],["7",14],["8",15],["9",16],["Star",17],["*",17],["Pound",18],["#",18],["DialUp",19],["DialDown",20],["DialLeft",21],["DialRight",22],["DialCenter",23],["VolumeUp",24],["VolumeDown",25],["Power",26],["Camera",27],["Clear",28],["A",29],["B",30],["C",31],["D",32],["E",33],["F",34],["G",35],["H",36],["I",37],["J",38],["K",39],["L",40],["M",41],["N",42],["O",43],["P",44],["Q",45],["R",46],["S",47],["T",48],["U",49],["V",50],["W",51],["X",52],["Y",53],["Z",54],["Comma",55],[",",55],["Period",56],[".",56],["AltLeft",57],["AltRight",58],["ShiftLeft",59],["ShiftRight",60],["Tab",61],["\t",61],["Space",62],[" ",62],["Sym",63],["Explorer",64],["Envelop",65],["Enter",66],["Del",67],["Grave",68],["Minus",69],["-",69],["Equals",70],["=",70],["LeftBracket",71],["(",71],["RightBracket",72],[")",72],["Backslash",73],["\\",73],["Semicolon",74],[";",74],["Apostrophe",75],["`",75],["Slash",76],["/",76],["At",77],["Num",78],["HeadsetHook",79],["Focus",80],["Plus",81],["Menu",82],["Notification",83],["Search",84]])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingCallDispatcher=t.WorkerDispatcher=t.PageDispatcher=void 0;const i=n(8),r=n(9),s=n(5),o=n(20),a=n(218),c=n(219),l=n(220),d=n(112),u=n(66),h=n(39),p=n(38);class m extends s.Dispatcher{constructor(e,t){super(e,t,"Page",{mainFrame:d.FrameDispatcher.from(e,t.mainFrame()),videoRelativePath:t._video?t._video._relativePath:void 0,viewportSize:t.viewportSize()||void 0,isClosed:t.isClosed()},!0),this._page=t,t.on(r.Page.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),t.on(r.Page.Events.Console,e=>this._dispatchEvent("console",{message:new a.ConsoleMessageDispatcher(this._scope,e)})),t.on(r.Page.Events.Crash,()=>this._dispatchEvent("crash")),t.on(r.Page.Events.DOMContentLoaded,()=>this._dispatchEvent("domcontentloaded")),t.on(r.Page.Events.Dialog,e=>this._dispatchEvent("dialog",{dialog:new c.DialogDispatcher(this._scope,e)})),t.on(r.Page.Events.Download,t=>this._dispatchEvent("download",{download:new l.DownloadDispatcher(e,t)})),this._page.on(r.Page.Events.FileChooser,e=>this._dispatchEvent("fileChooser",{element:new p.ElementHandleDispatcher(this._scope,e.element()),isMultiple:e.isMultiple()})),t.on(r.Page.Events.FrameAttached,e=>this._onFrameAttached(e)),t.on(r.Page.Events.FrameDetached,e=>this._onFrameDetached(e)),t.on(r.Page.Events.Load,()=>this._dispatchEvent("load")),t.on(r.Page.Events.PageError,e=>this._dispatchEvent("pageError",{error:o.serializeError(e)})),t.on(r.Page.Events.Popup,e=>this._dispatchEvent("popup",{page:s.lookupDispatcher(e)})),t.on(r.Page.Events.Request,e=>this._dispatchEvent("request",{request:u.RequestDispatcher.from(this._scope,e)})),t.on(r.Page.Events.RequestFailed,e=>this._dispatchEvent("requestFailed",{request:u.RequestDispatcher.from(this._scope,e),failureText:e._failureText,responseEndTiming:e._responseEndTiming})),t.on(r.Page.Events.RequestFinished,t=>this._dispatchEvent("requestFinished",{request:u.RequestDispatcher.from(e,t),responseEndTiming:t._responseEndTiming})),t.on(r.Page.Events.Response,e=>this._dispatchEvent("response",{response:new u.ResponseDispatcher(this._scope,e)})),t.on(r.Page.Events.VideoStarted,e=>this._dispatchEvent("video",{relativePath:e._relativePath})),t.on(r.Page.Events.WebSocket,e=>this._dispatchEvent("webSocket",{webSocket:new u.WebSocketDispatcher(this._scope,e)})),t.on(r.Page.Events.Worker,e=>this._dispatchEvent("worker",{worker:new f(this._scope,e)}))}async setDefaultNavigationTimeoutNoReply(e){this._page.setDefaultNavigationTimeout(e.timeout)}async setDefaultTimeoutNoReply(e){this._page.setDefaultTimeout(e.timeout)}async opener(){return{page:s.lookupNullableDispatcher(await this._page.opener())}}async exposeBinding(e){await this._page.exposeBinding(e.name,!!e.needsHandle,(t,...n)=>{const i=new _(this._scope,e.name,!!e.needsHandle,t,n);return this._dispatchEvent("bindingCall",{binding:i}),i.promise()})}async setExtraHTTPHeaders(e){await this._page.setExtraHTTPHeaders(e.headers)}async reload(e,t){return await i.runAction(async t=>({response:s.lookupNullableDispatcher(await this._page.reload(t,e))}),{...t,type:"reload",page:this._page})}async goBack(e,t){return await i.runAction(async t=>({response:s.lookupNullableDispatcher(await this._page.goBack(t,e))}),{...t,type:"goBack",page:this._page})}async goForward(e,t){return await i.runAction(async t=>({response:s.lookupNullableDispatcher(await this._page.goForward(t,e))}),{...t,type:"goForward",page:this._page})}async emulateMedia(e){await this._page.emulateMedia({media:"null"===e.media?null:e.media,colorScheme:"null"===e.colorScheme?null:e.colorScheme})}async setViewportSize(e){await this._page.setViewportSize(e.viewportSize)}async addInitScript(e){await this._page._addInitScriptExpression(e.source)}async setNetworkInterceptionEnabled(e){e.enabled?this._page._setClientRequestInterceptor((e,t)=>{this._dispatchEvent("route",{route:new u.RouteDispatcher(this._scope,e),request:u.RequestDispatcher.from(this._scope,t)})}):await this._page._setClientRequestInterceptor(void 0)}async screenshot(e){return{binary:(await this._page.screenshot(e)).toString("base64")}}async close(e){await this._page.close(e)}async setFileChooserInterceptedNoReply(e){await this._page._setFileChooserIntercepted(e.intercepted)}async keyboardDown(e){await this._page.keyboard.down(e.key)}async keyboardUp(e){await this._page.keyboard.up(e.key)}async keyboardInsertText(e){await this._page.keyboard.insertText(e.text)}async keyboardType(e){await this._page.keyboard.type(e.text,e)}async keyboardPress(e){await this._page.keyboard.press(e.key,e)}async mouseMove(e){await this._page.mouse.move(e.x,e.y,e)}async mouseDown(e){await this._page.mouse.down(e)}async mouseUp(e){await this._page.mouse.up(e)}async mouseClick(e){await this._page.mouse.click(e.x,e.y,e)}async touchscreenTap(e){await this._page.touchscreen.tap(e.x,e.y)}async accessibilitySnapshot(e){return{rootAXNode:await this._page.accessibility.snapshot({interestingOnly:e.interestingOnly,root:e.root?e.root._elementHandle:void 0})||void 0}}async pdf(e){if(!this._page.pdf)throw new Error("PDF generation is only supported for Headless Chromium");return{pdf:(await this._page.pdf(e)).toString("base64")}}async bringToFront(){await this._page.bringToFront()}async crStartJSCoverage(e){const t=this._page.coverage;await t.startJSCoverage(e)}async crStopJSCoverage(){const e=this._page.coverage;return{entries:await e.stopJSCoverage()}}async crStartCSSCoverage(e){const t=this._page.coverage;await t.startCSSCoverage(e)}async crStopCSSCoverage(){const e=this._page.coverage;return{entries:await e.stopCSSCoverage()}}_onFrameAttached(e){this._dispatchEvent("frameAttached",{frame:d.FrameDispatcher.from(this._scope,e)})}_onFrameDetached(e){this._dispatchEvent("frameDetached",{frame:s.lookupDispatcher(e)})}}t.PageDispatcher=m;class f extends s.Dispatcher{constructor(e,t){super(e,t,"Worker",{url:t.url()}),t.on(r.Worker.Events.Close,()=>this._dispatchEvent("close"))}async evaluateExpression(e){return{value:h.serializeResult(await this._object._evaluateExpression(e.expression,e.isFunction,h.parseArgument(e.arg)))}}async evaluateExpressionHandle(e){return{handle:p.createHandle(this._scope,await this._object._evaluateExpressionHandle(e.expression,e.isFunction,h.parseArgument(e.arg)))}}}t.WorkerDispatcher=f;class _ extends s.Dispatcher{constructor(e,t,n,i,r){super(e,{},"BindingCall",{frame:s.lookupDispatcher(i.frame),name:t,args:n?void 0:r.map(h.serializeResult),handle:n?p.createHandle(e,r[0]):void 0}),this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}promise(){return this._promise}async resolve(e){this._resolve(h.parseArgument(e.result))}async reject(e){this._reject(o.parseError(e.error))}}t.BindingCallDispatcher=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleMessageDispatcher=void 0;const i=n(5),r=n(38);class s extends i.Dispatcher{constructor(e,t){super(e,t,"ConsoleMessage",{type:t.type(),text:t.text(),args:t.args().map(t=>r.createHandle(e,t)),location:t.location()})}}t.ConsoleMessageDispatcher=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DialogDispatcher=void 0;const i=n(5);class r extends i.Dispatcher{constructor(e,t){super(e,t,"Dialog",{type:t.type(),message:t.message(),defaultValue:t.defaultValue()})}async accept(e){await this._object.accept(e.promptText)}async dismiss(){await this._object.dismiss()}}t.DialogDispatcher=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DownloadDispatcher=void 0;const i=n(5),r=n(111),s=n(1),o=n(2),a=n(0);class c extends i.Dispatcher{constructor(e,t){super(e,t,"Download",{url:t.url(),suggestedFilename:t.suggestedFilename()})}async path(){return{value:await this._object.localPath()||void 0}}async saveAs(e){return await new Promise((t,n)=>{this._object.saveAs(async(i,r)=>{if(void 0===r)try{await a.mkdirIfNeeded(e.path),await o.promisify(s.copyFile)(i,e.path),t()}catch(e){n(e)}else n(r)})})}async saveAsStream(){return await new Promise((e,t)=>{this._object.saveAs(async(n,i)=>{if(void 0===i)try{const t=s.createReadStream(n);await new Promise(e=>t.on("readable",e));const i=new r.StreamDispatcher(this._scope,t);e({stream:i}),await new Promise(e=>{t.on("close",e),t.on("end",e),t.on("error",e)})}catch(e){t(e)}else t(i)})})}async stream(){const e=await this._object.localPath();if(!e)return{};const t=s.createReadStream(e);return await new Promise(e=>t.on("readable",e)),{stream:new r.StreamDispatcher(this._scope,t)}}async failure(){return{error:await this._object.failure()||void 0}}async delete(){await this._object.delete()}}t.DownloadDispatcher=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserTypeDispatcher=void 0;const i=n(114),r=n(5),s=n(49);class o extends r.Dispatcher{constructor(e,t){super(e,t,"BrowserType",{executablePath:t.executablePath(),name:t.name()},!0)}async launch(e){const t=await this._object.launch(e);return{browser:new i.BrowserDispatcher(this._scope,t)}}async launchPersistentContext(e){const t=await this._object.launchPersistentContext(e.userDataDir,e);return{context:new s.BrowserContextDispatcher(this._scope,t)}}}t.BrowserTypeDispatcher=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElectronApplicationDispatcher=t.ElectronDispatcher=void 0;const i=n(5),r=n(99),s=n(49),o=n(39),a=n(38);class c extends i.Dispatcher{constructor(e,t){super(e,t,"Electron",{},!0)}async launch(e){const t=await this._object.launch(e.executablePath,e);return{electronApplication:new l(this._scope,t)}}}t.ElectronDispatcher=c;class l extends i.Dispatcher{constructor(e,t){super(e,t,"ElectronApplication",{},!0),this._dispatchEvent("context",{context:new s.BrowserContextDispatcher(this._scope,t.context())}),t.on(r.ElectronApplication.Events.Close,()=>{this._dispatchEvent("close"),this._dispose()}),t.on(r.ElectronApplication.Events.Window,e=>{this._dispatchEvent("window",{page:i.lookupDispatcher(e),browserWindow:a.createHandle(this._scope,e.browserWindow)})})}async newBrowserWindow(e){const t=await this._object.newBrowserWindow(o.parseArgument(e.arg));return{page:i.lookupDispatcher(t)}}async evaluateExpression(e){const t=this._object._nodeElectronHandle;return{value:o.serializeResult(await t._evaluateExpression(e.expression,e.isFunction,!0,o.parseArgument(e.arg)))}}async evaluateExpressionHandle(e){const t=this._object._nodeElectronHandle,n=await t._evaluateExpression(e.expression,e.isFunction,!1,o.parseArgument(e.arg));return{handle:a.createHandle(this._scope,n)}}async close(){await this._object.close()}}t.ElectronApplicationDispatcher=l},function(e,t,n){"use strict";e.exports={"Blackberry PlayBook":{userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:600,height:1024},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Blackberry PlayBook landscape":{userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:1024,height:600},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"BlackBerry Z30":{userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"BlackBerry Z30 landscape":{userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note 3":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note 3 landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note II":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy Note II landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S III":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S III landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Galaxy S5":{userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Galaxy S5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"iPad (gen 6)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 6) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 7)":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:810,height:1080},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad (gen 7) landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:1080,height:810},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Mini":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Mini landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Pro 11":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:834,height:1194},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPad Pro 11 landscape":{userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:1194,height:834},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 6 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 7 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 Plus":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 8 Plus landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone SE landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone X":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:812},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone X landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:812,height:375},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone XR":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone XR landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro Max":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"iPhone 11 Pro Max landscape":{userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"JioPhone 2":{userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:240,height:320},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"firefox"},"JioPhone 2 landscape":{userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:320,height:240},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"firefox"},"Kindle Fire HDX":{userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:800,height:1280},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Kindle Fire HDX landscape":{userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:1280,height:800},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"LG Optimus L70":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640},deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"LG Optimus L70 landscape":{userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384},deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 550":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 550 landscape":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 950":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640},deviceScaleFactor:4,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Microsoft Lumia 950 landscape":{userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360},deviceScaleFactor:4,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 10":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:800,height:1280},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 10 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:1280,height:800},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 4":{userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 4 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5":{userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360},deviceScaleFactor:3,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5X":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 5X landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6":{userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6P":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 6P landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 7":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:600,height:960},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nexus 7 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:960,height:600},deviceScaleFactor:2,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia Lumia 520":{userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:320,height:533},deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia Lumia 520 landscape":{userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:533,height:320},deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Nokia N9":{userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:480,height:854},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Nokia N9 landscape":{userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:854,height:480},deviceScaleFactor:1,isMobile:!0,hasTouch:!0,defaultBrowserType:"webkit"},"Pixel 2":{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:731},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:731,height:411},deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 XL":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:823},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"},"Pixel 2 XL landscape":{userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:823,height:411},deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,defaultBrowserType:"chromium"}}},function(e,t,n){"use strict";function i(e){const t={...e,value:void 0!==e.valueNumber?e.valueNumber:e.valueString,checked:"checked"===e.checked||"unchecked"!==e.checked&&e.checked,pressed:"pressed"===e.pressed||"released"!==e.pressed&&e.pressed,children:e.children?e.children.map(i):void 0};return delete t.valueNumber,delete t.valueString,t}Object.defineProperty(t,"__esModule",{value:!0}),t.Accessibility=void 0;t.Accessibility=class{constructor(e){this._channel=e}async snapshot(e={}){const t=e.root?e.root._elementChannel:void 0,n=await this._channel.accessibilitySnapshot({interestingOnly:e.interestingOnly,root:t});return n.rootAXNode?i(n.rootAXNode):null}}},function(e,t,n){"use strict";function i(){this._types=Object.create(null),this._extensions=Object.create(null);for(let e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}i.prototype.define=function(e,t){for(let n in e){let i=e[n].map((function(e){return e.toLowerCase()}));n=n.toLowerCase();for(let e=0;e<i.length;e++){const r=i[e];if("*"!==r[0]){if(!t&&r in this._types)throw new Error('Attempt to change mapping for "'+r+'" extension from "'+this._types[r]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+r+'" from the list of extensions for "'+n+'".');this._types[r]=n}}if(t||!this._extensions[n]){const e=i[0];this._extensions[n]="*"!==e[0]?e:e.substr(1)}}},i.prototype.getType=function(e){let t=(e=String(e)).replace(/^.*[/\\]/,"").toLowerCase(),n=t.replace(/^.*\./,"").toLowerCase(),i=t.length<e.length;return(n.length<t.length-1||!i)&&this._types[n]||null},i.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null},e.exports=i},function(e,t){e.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/mrb-consumer+xml":["*xdf"],"application/mrb-publish+xml":["*xdf"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["*xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-error+xml":["xer"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},function(e,t){e.exports={"application/prs.cww":["cww"],"application/vnd.1000minds.decision-model+xml":["1km"],"application/vnd.3gpp.pic-bw-large":["plb"],"application/vnd.3gpp.pic-bw-small":["psb"],"application/vnd.3gpp.pic-bw-var":["pvb"],"application/vnd.3gpp2.tcap":["tcap"],"application/vnd.3m.post-it-notes":["pwn"],"application/vnd.accpac.simply.aso":["aso"],"application/vnd.accpac.simply.imp":["imp"],"application/vnd.acucobol":["acu"],"application/vnd.acucorp":["atc","acutc"],"application/vnd.adobe.air-application-installer-package+zip":["air"],"application/vnd.adobe.formscentral.fcdt":["fcdt"],"application/vnd.adobe.fxp":["fxp","fxpl"],"application/vnd.adobe.xdp+xml":["xdp"],"application/vnd.adobe.xfdf":["xfdf"],"application/vnd.ahead.space":["ahead"],"application/vnd.airzip.filesecure.azf":["azf"],"application/vnd.airzip.filesecure.azs":["azs"],"application/vnd.amazon.ebook":["azw"],"application/vnd.americandynamics.acc":["acc"],"application/vnd.amiga.ami":["ami"],"application/vnd.android.package-archive":["apk"],"application/vnd.anser-web-certificate-issue-initiation":["cii"],"application/vnd.anser-web-funds-transfer-initiation":["fti"],"application/vnd.antix.game-component":["atx"],"application/vnd.apple.installer+xml":["mpkg"],"application/vnd.apple.keynote":["key"],"application/vnd.apple.mpegurl":["m3u8"],"application/vnd.apple.numbers":["numbers"],"application/vnd.apple.pages":["pages"],"application/vnd.apple.pkpass":["pkpass"],"application/vnd.aristanetworks.swi":["swi"],"application/vnd.astraea-software.iota":["iota"],"application/vnd.audiograph":["aep"],"application/vnd.balsamiq.bmml+xml":["bmml"],"application/vnd.blueice.multipass":["mpm"],"application/vnd.bmi":["bmi"],"application/vnd.businessobjects":["rep"],"application/vnd.chemdraw+xml":["cdxml"],"application/vnd.chipnuts.karaoke-mmd":["mmd"],"application/vnd.cinderella":["cdy"],"application/vnd.citationstyles.style+xml":["csl"],"application/vnd.claymore":["cla"],"application/vnd.cloanto.rp9":["rp9"],"application/vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"application/vnd.cluetrust.cartomobile-config":["c11amc"],"application/vnd.cluetrust.cartomobile-config-pkg":["c11amz"],"application/vnd.commonspace":["csp"],"application/vnd.contact.cmsg":["cdbcmsg"],"application/vnd.cosmocaller":["cmc"],"application/vnd.crick.clicker":["clkx"],"application/vnd.crick.clicker.keyboard":["clkk"],"application/vnd.crick.clicker.palette":["clkp"],"application/vnd.crick.clicker.template":["clkt"],"application/vnd.crick.clicker.wordbank":["clkw"],"application/vnd.criticaltools.wbs+xml":["wbs"],"application/vnd.ctc-posml":["pml"],"application/vnd.cups-ppd":["ppd"],"application/vnd.curl.car":["car"],"application/vnd.curl.pcurl":["pcurl"],"application/vnd.dart":["dart"],"application/vnd.data-vision.rdz":["rdz"],"application/vnd.dbf":["dbf"],"application/vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"application/vnd.dece.ttml+xml":["uvt","uvvt"],"application/vnd.dece.unspecified":["uvx","uvvx"],"application/vnd.dece.zip":["uvz","uvvz"],"application/vnd.denovo.fcselayout-link":["fe_launch"],"application/vnd.dna":["dna"],"application/vnd.dolby.mlp":["mlp"],"application/vnd.dpgraph":["dpg"],"application/vnd.dreamfactory":["dfac"],"application/vnd.ds-keypoint":["kpxx"],"application/vnd.dvb.ait":["ait"],"application/vnd.dvb.service":["svc"],"application/vnd.dynageo":["geo"],"application/vnd.ecowin.chart":["mag"],"application/vnd.enliven":["nml"],"application/vnd.epson.esf":["esf"],"application/vnd.epson.msf":["msf"],"application/vnd.epson.quickanime":["qam"],"application/vnd.epson.salt":["slt"],"application/vnd.epson.ssf":["ssf"],"application/vnd.eszigno3+xml":["es3","et3"],"application/vnd.ezpix-album":["ez2"],"application/vnd.ezpix-package":["ez3"],"application/vnd.fdf":["fdf"],"application/vnd.fdsn.mseed":["mseed"],"application/vnd.fdsn.seed":["seed","dataless"],"application/vnd.flographit":["gph"],"application/vnd.fluxtime.clip":["ftc"],"application/vnd.framemaker":["fm","frame","maker","book"],"application/vnd.frogans.fnc":["fnc"],"application/vnd.frogans.ltf":["ltf"],"application/vnd.fsc.weblaunch":["fsc"],"application/vnd.fujitsu.oasys":["oas"],"application/vnd.fujitsu.oasys2":["oa2"],"application/vnd.fujitsu.oasys3":["oa3"],"application/vnd.fujitsu.oasysgp":["fg5"],"application/vnd.fujitsu.oasysprs":["bh2"],"application/vnd.fujixerox.ddd":["ddd"],"application/vnd.fujixerox.docuworks":["xdw"],"application/vnd.fujixerox.docuworks.binder":["xbd"],"application/vnd.fuzzysheet":["fzs"],"application/vnd.genomatix.tuxedo":["txd"],"application/vnd.geogebra.file":["ggb"],"application/vnd.geogebra.tool":["ggt"],"application/vnd.geometry-explorer":["gex","gre"],"application/vnd.geonext":["gxt"],"application/vnd.geoplan":["g2w"],"application/vnd.geospace":["g3w"],"application/vnd.gmx":["gmx"],"application/vnd.google-apps.document":["gdoc"],"application/vnd.google-apps.presentation":["gslides"],"application/vnd.google-apps.spreadsheet":["gsheet"],"application/vnd.google-earth.kml+xml":["kml"],"application/vnd.google-earth.kmz":["kmz"],"application/vnd.grafeq":["gqf","gqs"],"application/vnd.groove-account":["gac"],"application/vnd.groove-help":["ghf"],"application/vnd.groove-identity-message":["gim"],"application/vnd.groove-injector":["grv"],"application/vnd.groove-tool-message":["gtm"],"application/vnd.groove-tool-template":["tpl"],"application/vnd.groove-vcard":["vcg"],"application/vnd.hal+xml":["hal"],"application/vnd.handheld-entertainment+xml":["zmm"],"application/vnd.hbci":["hbci"],"application/vnd.hhe.lesson-player":["les"],"application/vnd.hp-hpgl":["hpgl"],"application/vnd.hp-hpid":["hpid"],"application/vnd.hp-hps":["hps"],"application/vnd.hp-jlyt":["jlt"],"application/vnd.hp-pcl":["pcl"],"application/vnd.hp-pclxl":["pclxl"],"application/vnd.hydrostatix.sof-data":["sfd-hdstx"],"application/vnd.ibm.minipay":["mpy"],"application/vnd.ibm.modcap":["afp","listafp","list3820"],"application/vnd.ibm.rights-management":["irm"],"application/vnd.ibm.secure-container":["sc"],"application/vnd.iccprofile":["icc","icm"],"application/vnd.igloader":["igl"],"application/vnd.immervision-ivp":["ivp"],"application/vnd.immervision-ivu":["ivu"],"application/vnd.insors.igm":["igm"],"application/vnd.intercon.formnet":["xpw","xpx"],"application/vnd.intergeo":["i2g"],"application/vnd.intu.qbo":["qbo"],"application/vnd.intu.qfx":["qfx"],"application/vnd.ipunplugged.rcprofile":["rcprofile"],"application/vnd.irepository.package+xml":["irp"],"application/vnd.is-xpr":["xpr"],"application/vnd.isac.fcs":["fcs"],"application/vnd.jam":["jam"],"application/vnd.jcp.javame.midlet-rms":["rms"],"application/vnd.jisp":["jisp"],"application/vnd.joost.joda-archive":["joda"],"application/vnd.kahootz":["ktz","ktr"],"application/vnd.kde.karbon":["karbon"],"application/vnd.kde.kchart":["chrt"],"application/vnd.kde.kformula":["kfo"],"application/vnd.kde.kivio":["flw"],"application/vnd.kde.kontour":["kon"],"application/vnd.kde.kpresenter":["kpr","kpt"],"application/vnd.kde.kspread":["ksp"],"application/vnd.kde.kword":["kwd","kwt"],"application/vnd.kenameaapp":["htke"],"application/vnd.kidspiration":["kia"],"application/vnd.kinar":["kne","knp"],"application/vnd.koan":["skp","skd","skt","skm"],"application/vnd.kodak-descriptor":["sse"],"application/vnd.las.las+xml":["lasxml"],"application/vnd.llamagraphics.life-balance.desktop":["lbd"],"application/vnd.llamagraphics.life-balance.exchange+xml":["lbe"],"application/vnd.lotus-1-2-3":["123"],"application/vnd.lotus-approach":["apr"],"application/vnd.lotus-freelance":["pre"],"application/vnd.lotus-notes":["nsf"],"application/vnd.lotus-organizer":["org"],"application/vnd.lotus-screencam":["scm"],"application/vnd.lotus-wordpro":["lwp"],"application/vnd.macports.portpkg":["portpkg"],"application/vnd.mcd":["mcd"],"application/vnd.medcalcdata":["mc1"],"application/vnd.mediastation.cdkey":["cdkey"],"application/vnd.mfer":["mwf"],"application/vnd.mfmp":["mfm"],"application/vnd.micrografx.flo":["flo"],"application/vnd.micrografx.igx":["igx"],"application/vnd.mif":["mif"],"application/vnd.mobius.daf":["daf"],"application/vnd.mobius.dis":["dis"],"application/vnd.mobius.mbk":["mbk"],"application/vnd.mobius.mqy":["mqy"],"application/vnd.mobius.msl":["msl"],"application/vnd.mobius.plc":["plc"],"application/vnd.mobius.txf":["txf"],"application/vnd.mophun.application":["mpn"],"application/vnd.mophun.certificate":["mpc"],"application/vnd.mozilla.xul+xml":["xul"],"application/vnd.ms-artgalry":["cil"],"application/vnd.ms-cab-compressed":["cab"],"application/vnd.ms-excel":["xls","xlm","xla","xlc","xlt","xlw"],"application/vnd.ms-excel.addin.macroenabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroenabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroenabled.12":["xlsm"],"application/vnd.ms-excel.template.macroenabled.12":["xltm"],"application/vnd.ms-fontobject":["eot"],"application/vnd.ms-htmlhelp":["chm"],"application/vnd.ms-ims":["ims"],"application/vnd.ms-lrm":["lrm"],"application/vnd.ms-officetheme":["thmx"],"application/vnd.ms-outlook":["msg"],"application/vnd.ms-pki.seccat":["cat"],"application/vnd.ms-pki.stl":["*stl"],"application/vnd.ms-powerpoint":["ppt","pps","pot"],"application/vnd.ms-powerpoint.addin.macroenabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroenabled.12":["pptm"],"application/vnd.ms-powerpoint.slide.macroenabled.12":["sldm"],"application/vnd.ms-powerpoint.slideshow.macroenabled.12":["ppsm"],"application/vnd.ms-powerpoint.template.macroenabled.12":["potm"],"application/vnd.ms-project":["mpp","mpt"],"application/vnd.ms-word.document.macroenabled.12":["docm"],"application/vnd.ms-word.template.macroenabled.12":["dotm"],"application/vnd.ms-works":["wps","wks","wcm","wdb"],"application/vnd.ms-wpl":["wpl"],"application/vnd.ms-xpsdocument":["xps"],"application/vnd.mseq":["mseq"],"application/vnd.musician":["mus"],"application/vnd.muvee.style":["msty"],"application/vnd.mynfc":["taglet"],"application/vnd.neurolanguage.nlu":["nlu"],"application/vnd.nitf":["ntf","nitf"],"application/vnd.noblenet-directory":["nnd"],"application/vnd.noblenet-sealer":["nns"],"application/vnd.noblenet-web":["nnw"],"application/vnd.nokia.n-gage.ac+xml":["*ac"],"application/vnd.nokia.n-gage.data":["ngdat"],"application/vnd.nokia.n-gage.symbian.install":["n-gage"],"application/vnd.nokia.radio-preset":["rpst"],"application/vnd.nokia.radio-presets":["rpss"],"application/vnd.novadigm.edm":["edm"],"application/vnd.novadigm.edx":["edx"],"application/vnd.novadigm.ext":["ext"],"application/vnd.oasis.opendocument.chart":["odc"],"application/vnd.oasis.opendocument.chart-template":["otc"],"application/vnd.oasis.opendocument.database":["odb"],"application/vnd.oasis.opendocument.formula":["odf"],"application/vnd.oasis.opendocument.formula-template":["odft"],"application/vnd.oasis.opendocument.graphics":["odg"],"application/vnd.oasis.opendocument.graphics-template":["otg"],"application/vnd.oasis.opendocument.image":["odi"],"application/vnd.oasis.opendocument.image-template":["oti"],"application/vnd.oasis.opendocument.presentation":["odp"],"application/vnd.oasis.opendocument.presentation-template":["otp"],"application/vnd.oasis.opendocument.spreadsheet":["ods"],"application/vnd.oasis.opendocument.spreadsheet-template":["ots"],"application/vnd.oasis.opendocument.text":["odt"],"application/vnd.oasis.opendocument.text-master":["odm"],"application/vnd.oasis.opendocument.text-template":["ott"],"application/vnd.oasis.opendocument.text-web":["oth"],"application/vnd.olpc-sugar":["xo"],"application/vnd.oma.dd2+xml":["dd2"],"application/vnd.openblox.game+xml":["obgx"],"application/vnd.openofficeorg.extension":["oxt"],"application/vnd.openstreetmap.data+xml":["osm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slide":["sldx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/vnd.osgeo.mapguide.package":["mgp"],"application/vnd.osgi.dp":["dp"],"application/vnd.osgi.subsystem":["esa"],"application/vnd.palm":["pdb","pqa","oprc"],"application/vnd.pawaafile":["paw"],"application/vnd.pg.format":["str"],"application/vnd.pg.osasli":["ei6"],"application/vnd.picsel":["efif"],"application/vnd.pmi.widget":["wg"],"application/vnd.pocketlearn":["plf"],"application/vnd.powerbuilder6":["pbd"],"application/vnd.previewsystems.box":["box"],"application/vnd.proteus.magazine":["mgz"],"application/vnd.publishare-delta-tree":["qps"],"application/vnd.pvi.ptid1":["ptid"],"application/vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"application/vnd.rar":["rar"],"application/vnd.realvnc.bed":["bed"],"application/vnd.recordare.musicxml":["mxl"],"application/vnd.recordare.musicxml+xml":["musicxml"],"application/vnd.rig.cryptonote":["cryptonote"],"application/vnd.rim.cod":["cod"],"application/vnd.rn-realmedia":["rm"],"application/vnd.rn-realmedia-vbr":["rmvb"],"application/vnd.route66.link66+xml":["link66"],"application/vnd.sailingtracker.track":["st"],"application/vnd.seemail":["see"],"application/vnd.sema":["sema"],"application/vnd.semd":["semd"],"application/vnd.semf":["semf"],"application/vnd.shana.informed.formdata":["ifm"],"application/vnd.shana.informed.formtemplate":["itp"],"application/vnd.shana.informed.interchange":["iif"],"application/vnd.shana.informed.package":["ipk"],"application/vnd.simtech-mindmapper":["twd","twds"],"application/vnd.smaf":["mmf"],"application/vnd.smart.teacher":["teacher"],"application/vnd.software602.filler.form+xml":["fo"],"application/vnd.solent.sdkm+xml":["sdkm","sdkd"],"application/vnd.spotfire.dxp":["dxp"],"application/vnd.spotfire.sfs":["sfs"],"application/vnd.stardivision.calc":["sdc"],"application/vnd.stardivision.draw":["sda"],"application/vnd.stardivision.impress":["sdd"],"application/vnd.stardivision.math":["smf"],"application/vnd.stardivision.writer":["sdw","vor"],"application/vnd.stardivision.writer-global":["sgl"],"application/vnd.stepmania.package":["smzip"],"application/vnd.stepmania.stepchart":["sm"],"application/vnd.sun.wadl+xml":["wadl"],"application/vnd.sun.xml.calc":["sxc"],"application/vnd.sun.xml.calc.template":["stc"],"application/vnd.sun.xml.draw":["sxd"],"application/vnd.sun.xml.draw.template":["std"],"application/vnd.sun.xml.impress":["sxi"],"application/vnd.sun.xml.impress.template":["sti"],"application/vnd.sun.xml.math":["sxm"],"application/vnd.sun.xml.writer":["sxw"],"application/vnd.sun.xml.writer.global":["sxg"],"application/vnd.sun.xml.writer.template":["stw"],"application/vnd.sus-calendar":["sus","susp"],"application/vnd.svd":["svd"],"application/vnd.symbian.install":["sis","sisx"],"application/vnd.syncml+xml":["xsm"],"application/vnd.syncml.dm+wbxml":["bdm"],"application/vnd.syncml.dm+xml":["xdm"],"application/vnd.syncml.dmddf+xml":["ddf"],"application/vnd.tao.intent-module-archive":["tao"],"application/vnd.tcpdump.pcap":["pcap","cap","dmp"],"application/vnd.tmobile-livetv":["tmo"],"application/vnd.trid.tpt":["tpt"],"application/vnd.triscape.mxs":["mxs"],"application/vnd.trueapp":["tra"],"application/vnd.ufdl":["ufd","ufdl"],"application/vnd.uiq.theme":["utz"],"application/vnd.umajin":["umj"],"application/vnd.unity":["unityweb"],"application/vnd.uoml+xml":["uoml"],"application/vnd.vcx":["vcx"],"application/vnd.visio":["vsd","vst","vss","vsw"],"application/vnd.visionary":["vis"],"application/vnd.vsf":["vsf"],"application/vnd.wap.wbxml":["wbxml"],"application/vnd.wap.wmlc":["wmlc"],"application/vnd.wap.wmlscriptc":["wmlsc"],"application/vnd.webturbo":["wtb"],"application/vnd.wolfram.player":["nbp"],"application/vnd.wordperfect":["wpd"],"application/vnd.wqd":["wqd"],"application/vnd.wt.stf":["stf"],"application/vnd.xara":["xar"],"application/vnd.xfdl":["xfdl"],"application/vnd.yamaha.hv-dic":["hvd"],"application/vnd.yamaha.hv-script":["hvs"],"application/vnd.yamaha.hv-voice":["hvp"],"application/vnd.yamaha.openscoreformat":["osf"],"application/vnd.yamaha.openscoreformat.osfpvg+xml":["osfpvg"],"application/vnd.yamaha.smaf-audio":["saf"],"application/vnd.yamaha.smaf-phrase":["spf"],"application/vnd.yellowriver-custom-menu":["cmp"],"application/vnd.zul":["zir","zirz"],"application/vnd.zzazz.deck+xml":["zaz"],"application/x-7z-compressed":["7z"],"application/x-abiword":["abw"],"application/x-ace-compressed":["ace"],"application/x-apple-diskimage":["*dmg"],"application/x-arj":["arj"],"application/x-authorware-bin":["aab","x32","u32","vox"],"application/x-authorware-map":["aam"],"application/x-authorware-seg":["aas"],"application/x-bcpio":["bcpio"],"application/x-bdoc":["*bdoc"],"application/x-bittorrent":["torrent"],"application/x-blorb":["blb","blorb"],"application/x-bzip":["bz"],"application/x-bzip2":["bz2","boz"],"application/x-cbr":["cbr","cba","cbt","cbz","cb7"],"application/x-cdlink":["vcd"],"application/x-cfs-compressed":["cfs"],"application/x-chat":["chat"],"application/x-chess-pgn":["pgn"],"application/x-chrome-extension":["crx"],"application/x-cocoa":["cco"],"application/x-conference":["nsc"],"application/x-cpio":["cpio"],"application/x-csh":["csh"],"application/x-debian-package":["*deb","udeb"],"application/x-dgc-compressed":["dgc"],"application/x-director":["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"],"application/x-doom":["wad"],"application/x-dtbncx+xml":["ncx"],"application/x-dtbook+xml":["dtb"],"application/x-dtbresource+xml":["res"],"application/x-dvi":["dvi"],"application/x-envoy":["evy"],"application/x-eva":["eva"],"application/x-font-bdf":["bdf"],"application/x-font-ghostscript":["gsf"],"application/x-font-linux-psf":["psf"],"application/x-font-pcf":["pcf"],"application/x-font-snf":["snf"],"application/x-font-type1":["pfa","pfb","pfm","afm"],"application/x-freearc":["arc"],"application/x-futuresplash":["spl"],"application/x-gca-compressed":["gca"],"application/x-glulx":["ulx"],"application/x-gnumeric":["gnumeric"],"application/x-gramps-xml":["gramps"],"application/x-gtar":["gtar"],"application/x-hdf":["hdf"],"application/x-httpd-php":["php"],"application/x-install-instructions":["install"],"application/x-iso9660-image":["*iso"],"application/x-java-archive-diff":["jardiff"],"application/x-java-jnlp-file":["jnlp"],"application/x-keepass2":["kdbx"],"application/x-latex":["latex"],"application/x-lua-bytecode":["luac"],"application/x-lzh-compressed":["lzh","lha"],"application/x-makeself":["run"],"application/x-mie":["mie"],"application/x-mobipocket-ebook":["prc","mobi"],"application/x-ms-application":["application"],"application/x-ms-shortcut":["lnk"],"application/x-ms-wmd":["wmd"],"application/x-ms-wmz":["wmz"],"application/x-ms-xbap":["xbap"],"application/x-msaccess":["mdb"],"application/x-msbinder":["obd"],"application/x-mscardfile":["crd"],"application/x-msclip":["clp"],"application/x-msdos-program":["*exe"],"application/x-msdownload":["*exe","*dll","com","bat","*msi"],"application/x-msmediaview":["mvb","m13","m14"],"application/x-msmetafile":["*wmf","*wmz","*emf","emz"],"application/x-msmoney":["mny"],"application/x-mspublisher":["pub"],"application/x-msschedule":["scd"],"application/x-msterminal":["trm"],"application/x-mswrite":["wri"],"application/x-netcdf":["nc","cdf"],"application/x-ns-proxy-autoconfig":["pac"],"application/x-nzb":["nzb"],"application/x-perl":["pl","pm"],"application/x-pilot":["*prc","*pdb"],"application/x-pkcs12":["p12","pfx"],"application/x-pkcs7-certificates":["p7b","spc"],"application/x-pkcs7-certreqresp":["p7r"],"application/x-rar-compressed":["*rar"],"application/x-redhat-package-manager":["rpm"],"application/x-research-info-systems":["ris"],"application/x-sea":["sea"],"application/x-sh":["sh"],"application/x-shar":["shar"],"application/x-shockwave-flash":["swf"],"application/x-silverlight-app":["xap"],"application/x-sql":["sql"],"application/x-stuffit":["sit"],"application/x-stuffitx":["sitx"],"application/x-subrip":["srt"],"application/x-sv4cpio":["sv4cpio"],"application/x-sv4crc":["sv4crc"],"application/x-t3vm-image":["t3"],"application/x-tads":["gam"],"application/x-tar":["tar"],"application/x-tcl":["tcl","tk"],"application/x-tex":["tex"],"application/x-tex-tfm":["tfm"],"application/x-texinfo":["texinfo","texi"],"application/x-tgif":["*obj"],"application/x-ustar":["ustar"],"application/x-virtualbox-hdd":["hdd"],"application/x-virtualbox-ova":["ova"],"application/x-virtualbox-ovf":["ovf"],"application/x-virtualbox-vbox":["vbox"],"application/x-virtualbox-vbox-extpack":["vbox-extpack"],"application/x-virtualbox-vdi":["vdi"],"application/x-virtualbox-vhd":["vhd"],"application/x-virtualbox-vmdk":["vmdk"],"application/x-wais-source":["src"],"application/x-web-app-manifest+json":["webapp"],"application/x-x509-ca-cert":["der","crt","pem"],"application/x-xfig":["fig"],"application/x-xliff+xml":["*xlf"],"application/x-xpinstall":["xpi"],"application/x-xz":["xz"],"application/x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"audio/vnd.dece.audio":["uva","uvva"],"audio/vnd.digital-winds":["eol"],"audio/vnd.dra":["dra"],"audio/vnd.dts":["dts"],"audio/vnd.dts.hd":["dtshd"],"audio/vnd.lucent.voice":["lvp"],"audio/vnd.ms-playready.media.pya":["pya"],"audio/vnd.nuera.ecelp4800":["ecelp4800"],"audio/vnd.nuera.ecelp7470":["ecelp7470"],"audio/vnd.nuera.ecelp9600":["ecelp9600"],"audio/vnd.rip":["rip"],"audio/x-aac":["aac"],"audio/x-aiff":["aif","aiff","aifc"],"audio/x-caf":["caf"],"audio/x-flac":["flac"],"audio/x-m4a":["*m4a"],"audio/x-matroska":["mka"],"audio/x-mpegurl":["m3u"],"audio/x-ms-wax":["wax"],"audio/x-ms-wma":["wma"],"audio/x-pn-realaudio":["ram","ra"],"audio/x-pn-realaudio-plugin":["rmp"],"audio/x-realaudio":["*ra"],"audio/x-wav":["*wav"],"chemical/x-cdx":["cdx"],"chemical/x-cif":["cif"],"chemical/x-cmdf":["cmdf"],"chemical/x-cml":["cml"],"chemical/x-csml":["csml"],"chemical/x-xyz":["xyz"],"image/prs.btif":["btif"],"image/prs.pti":["pti"],"image/vnd.adobe.photoshop":["psd"],"image/vnd.airzip.accelerator.azv":["azv"],"image/vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"image/vnd.djvu":["djvu","djv"],"image/vnd.dvb.subtitle":["*sub"],"image/vnd.dwg":["dwg"],"image/vnd.dxf":["dxf"],"image/vnd.fastbidsheet":["fbs"],"image/vnd.fpx":["fpx"],"image/vnd.fst":["fst"],"image/vnd.fujixerox.edmics-mmr":["mmr"],"image/vnd.fujixerox.edmics-rlc":["rlc"],"image/vnd.microsoft.icon":["ico"],"image/vnd.ms-dds":["dds"],"image/vnd.ms-modi":["mdi"],"image/vnd.ms-photo":["wdp"],"image/vnd.net-fpx":["npx"],"image/vnd.pco.b16":["b16"],"image/vnd.tencent.tap":["tap"],"image/vnd.valve.source.texture":["vtf"],"image/vnd.wap.wbmp":["wbmp"],"image/vnd.xiff":["xif"],"image/vnd.zbrush.pcx":["pcx"],"image/x-3ds":["3ds"],"image/x-cmu-raster":["ras"],"image/x-cmx":["cmx"],"image/x-freehand":["fh","fhc","fh4","fh5","fh7"],"image/x-icon":["*ico"],"image/x-jng":["jng"],"image/x-mrsid-image":["sid"],"image/x-ms-bmp":["*bmp"],"image/x-pcx":["*pcx"],"image/x-pict":["pic","pct"],"image/x-portable-anymap":["pnm"],"image/x-portable-bitmap":["pbm"],"image/x-portable-graymap":["pgm"],"image/x-portable-pixmap":["ppm"],"image/x-rgb":["rgb"],"image/x-tga":["tga"],"image/x-xbitmap":["xbm"],"image/x-xpixmap":["xpm"],"image/x-xwindowdump":["xwd"],"message/vnd.wfa.wsc":["wsc"],"model/vnd.collada+xml":["dae"],"model/vnd.dwf":["dwf"],"model/vnd.gdl":["gdl"],"model/vnd.gtw":["gtw"],"model/vnd.mts":["mts"],"model/vnd.opengex":["ogex"],"model/vnd.parasolid.transmit.binary":["x_b"],"model/vnd.parasolid.transmit.text":["x_t"],"model/vnd.usdz+zip":["usdz"],"model/vnd.valve.source.compiled-map":["bsp"],"model/vnd.vtu":["vtu"],"text/prs.lines.tag":["dsc"],"text/vnd.curl":["curl"],"text/vnd.curl.dcurl":["dcurl"],"text/vnd.curl.mcurl":["mcurl"],"text/vnd.curl.scurl":["scurl"],"text/vnd.dvb.subtitle":["sub"],"text/vnd.fly":["fly"],"text/vnd.fmi.flexstor":["flx"],"text/vnd.graphviz":["gv"],"text/vnd.in3d.3dml":["3dml"],"text/vnd.in3d.spot":["spot"],"text/vnd.sun.j2me.app-descriptor":["jad"],"text/vnd.wap.wml":["wml"],"text/vnd.wap.wmlscript":["wmls"],"text/x-asm":["s","asm"],"text/x-c":["c","cc","cxx","cpp","h","hh","dic"],"text/x-component":["htc"],"text/x-fortran":["f","for","f77","f90"],"text/x-handlebars-template":["hbs"],"text/x-java-source":["java"],"text/x-lua":["lua"],"text/x-markdown":["mkd"],"text/x-nfo":["nfo"],"text/x-opml":["opml"],"text/x-org":["*org"],"text/x-pascal":["p","pas"],"text/x-processing":["pde"],"text/x-sass":["sass"],"text/x-scss":["scss"],"text/x-setext":["etx"],"text/x-sfv":["sfv"],"text/x-suse-ymp":["ymp"],"text/x-uuencode":["uu"],"text/x-vcalendar":["vcs"],"text/x-vcard":["vcf"],"video/vnd.dece.hd":["uvh","uvvh"],"video/vnd.dece.mobile":["uvm","uvvm"],"video/vnd.dece.pd":["uvp","uvvp"],"video/vnd.dece.sd":["uvs","uvvs"],"video/vnd.dece.video":["uvv","uvvv"],"video/vnd.dvb.file":["dvb"],"video/vnd.fvt":["fvt"],"video/vnd.mpegurl":["mxu","m4u"],"video/vnd.ms-playready.media.pyv":["pyv"],"video/vnd.uvvu.mp4":["uvu","uvvu"],"video/vnd.vivo":["viv"],"video/x-f4v":["f4v"],"video/x-fli":["fli"],"video/x-flv":["flv"],"video/x-m4v":["m4v"],"video/x-matroska":["mkv","mk3d","mks"],"video/x-mng":["mng"],"video/x-ms-asf":["asf","asx"],"video/x-ms-vob":["vob"],"video/x-ms-wm":["wm"],"video/x-ms-wmv":["wmv"],"video/x-ms-wmx":["wmx"],"video/x-ms-wvx":["wvx"],"video/x-msvideo":["avi"],"video/x-sgi-movie":["movie"],"video/x-smv":["smv"],"x-conference/x-cooltalk":["ice"]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kLifecycleEvents=void 0,t.kLifecycleEvents=new Set(["load","domcontentloaded","networkidle"])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Touchscreen=t.Mouse=t.Keyboard=void 0;t.Keyboard=class{constructor(e){this._channel=e}async down(e){await this._channel.keyboardDown({key:e})}async up(e){await this._channel.keyboardUp({key:e})}async insertText(e){await this._channel.keyboardInsertText({text:e})}async type(e,t={}){await this._channel.keyboardType({text:e,...t})}async press(e,t={}){await this._channel.keyboardPress({key:e,...t})}};t.Mouse=class{constructor(e){this._channel=e}async move(e,t,n={}){await this._channel.mouseMove({x:e,y:t,...n})}async down(e={}){await this._channel.mouseDown({...e})}async up(e={}){await this._channel.mouseUp(e)}async click(e,t,n={}){await this._channel.mouseClick({x:e,y:t,...n})}async dblclick(e,t,n={}){await this.click(e,t,{...n,clickCount:2})}};t.Touchscreen=class{constructor(e){this._channel=e}async tap(e,t){await this._channel.touchscreenTap({x:e,y:t})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileChooser=void 0;t.FileChooser=class{constructor(e,t,n){this._page=e,this._elementHandle=t,this._isMultiple=n}element(){return this._elementHandle}isMultiple(){return this._isMultiple}page(){return this._page}async setFiles(e,t){return this._elementHandle.setInputFiles(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromiumCoverage=void 0;t.ChromiumCoverage=class{constructor(e){this._channel=e}async startJSCoverage(e={}){await this._channel.crStartJSCoverage(e)}async stopJSCoverage(){return(await this._channel.crStopJSCoverage()).entries}async startCSSCoverage(e={}){await this._channel.crStartCSSCoverage(e)}async stopCSSCoverage(){return(await this._channel.crStopCSSCoverage()).entries}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Video=void 0;const i=n(3);t.Video=class{constructor(e){this._page=e,this._pathPromise=new Promise(e=>this._pathCallback=e)}_setRelativePath(e){this._pathCallback(i.join(this._page.context()._options.recordVideo.dir,e))}path(){return this._pathPromise}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Playwright=void 0;const i=n(121),r=n(7),s=n(70),o=n(122),a=n(16),c=n(123);class l extends r.ChannelOwner{constructor(e,t,n,r){super(e,t,n,r),this.chromium=i.BrowserType.from(r.chromium),this.firefox=i.BrowserType.from(r.firefox),this.webkit=i.BrowserType.from(r.webkit),this._android=c.Android.from(r.android),this._electron=o.Electron.from(r.electron),this.devices={};for(const{name:e,descriptor:t}of r.deviceDescriptors)this.devices[e]=t;this.selectors=s.sharedSelectors,this.errors={TimeoutError:a.TimeoutError},this.selectors._addChannel(s.SelectorsOwner.from(r.selectors))}}t.Playwright=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromiumBrowser=void 0;const i=n(71),r=n(27);class s extends r.Browser{contexts(){return super.contexts()}newContext(e){return super.newContext(e)}async newBrowserCDPSession(){return this._wrapApiCall("chromiumBrowser.newBrowserCDPSession",async()=>i.CDPSession.from((await this._channel.crNewBrowserCDPSession()).session))}async startTracing(e,t={}){return this._wrapApiCall("chromiumBrowser.startTracing",async()=>{await this._channel.crStartTracing({...t,page:e?e._channel:void 0})})}async stopTracing(){return this._wrapApiCall("chromiumBrowser.stopTracing",async()=>Buffer.from((await this._channel.crStopTracing()).binary,"base64"))}}t.ChromiumBrowser=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChromiumBrowserContext=void 0;const i=n(50),r=n(71),s=n(15),o=n(69),a=n(28);class c extends a.BrowserContext{constructor(e,t,n,r){super(e,t,n,r),this._backgroundPages=new Set,this._serviceWorkers=new Set,this._isChromium=!0,this._channel.on("crBackgroundPage",({page:e})=>{const t=i.Page.from(e);this._backgroundPages.add(t),this.emit(s.Events.ChromiumBrowserContext.BackgroundPage,t)}),this._channel.on("crServiceWorker",({worker:e})=>{const t=o.Worker.from(e);t._context=this,this._serviceWorkers.add(t),this.emit(s.Events.ChromiumBrowserContext.ServiceWorker,t)})}backgroundPages(){return[...this._backgroundPages]}serviceWorkers(){return[...this._serviceWorkers]}async newCDPSession(e){return this._wrapApiCall("chromiumBrowserContext.newCDPSession",async()=>{const t=await this._channel.crNewCDPSession({page:e._channel});return r.CDPSession.from(t.session)})}}t.ChromiumBrowserContext=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebKitBrowser=void 0;const i=n(27);class r extends i.Browser{}t.WebKitBrowser=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FirefoxBrowser=void 0;const i=n(27);class r extends i.Browser{}t.FirefoxBrowser=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserServerImpl=t.BrowserServerLauncherImpl=void 0;const i=n(24),r=n(1),s=n(24),o=n(5),a=n(114),c=n(23),l=n(0),d=n(115),u=n(59),h=n(8),p=n(111);t.BrowserServerLauncherImpl=class{constructor(e){this._browserType=e}async launchServer(e={}){const t=await this._browserType.launch({...e,ignoreDefaultArgs:Array.isArray(e.ignoreDefaultArgs)?e.ignoreDefaultArgs:void 0,ignoreAllDefaultArgs:!!e.ignoreDefaultArgs&&!Array.isArray(e.ignoreDefaultArgs),env:e.env?c.envObjectToArray(e.env):void 0},(n=e.logger,n?(e,t)=>{n.isEnabled("protocol","verbose")&&n.log("protocol","verbose",("send"===e?"SEND â–º ":"â—€ RECV ")+JSON.stringify(t),[],{})}:void 0));var n;return m.start(t,e.port)}};class m extends s.EventEmitter{constructor(e,t){super(),this._browser=e,this._wsEndpoint="",this._process=e._options.browserProcess.process;let n=()=>{};this._ready=new Promise(e=>n=e);const r=l.createGuid();this._server=new i.Server({port:t,path:"/"+r},()=>{const e=this._server.address();this._wsEndpoint="string"==typeof e?`${e}/${r}`:`ws://127.0.0.1:${e.port}/${r}`,n()}),this._server.on("connection",(e,t)=>{this._clientAttached(e)}),e._options.browserProcess.onclose=(e,t)=>{this._server.close(),this.emit("close",e,t)}}static async start(e,t=0){const n=new m(e,t);return await n._ready,n}process(){return this._process}wsEndpoint(){return this._wsEndpoint}async close(){await this._browser._options.browserProcess.close()}async kill(){await this._browser._options.browserProcess.kill()}_clientAttached(e){const t=new o.DispatcherConnection;t.onmessage=t=>{e.readyState!==i.CLOSING&&e.send(JSON.stringify(t))},e.on("message",e=>{t.dispatch(JSON.parse(Buffer.from(e).toString()))}),e.on("error",()=>{});const n=new u.Selectors,r=t.rootDispatcher(),s=new f(r,this._browser,n);e.on("close",()=>{t.onmessage=()=>{},s.connectedBrowser.close().catch(e=>{})})}}t.BrowserServerImpl=m;class f extends o.Dispatcher{constructor(e,t,n){const i=new _(e,t,n);super(e,{},"RemoteBrowser",{selectors:new d.SelectorsDispatcher(e,n),browser:i},!1,"remoteBrowser"),this.connectedBrowser=i,i._remoteBrowser=this}}class _ extends a.BrowserDispatcher{constructor(e,t,n){super(e,t),this._contexts=[],this._closed=!1,this._selectors=n}async newContext(e){e.recordVideo&&(e.recordVideo.dir=this._object._options.downloadsPath);const t=await super.newContext(e),n=t.context;return n._object.on(h.BrowserContext.Events.VideoStarted,e=>this._sendVideo(n,e)),n._object._setSelectors(this._selectors),this._contexts.push(n),t}async close(){await Promise.all(this._contexts.map(e=>e.close())),this._didClose()}_didClose(){this._closed||(this._closed=!0,super._didClose())}_sendVideo(e,t){t._waitForCallbackOnFinish(async()=>{const n=r.createReadStream(t._path);await new Promise(e=>n.on("readable",e));const i=new p.StreamDispatcher(this._remoteBrowser._scope,n);this._remoteBrowser._dispatchEvent("video",{stream:i,context:e,relativePath:t._relativePath}),await new Promise(e=>{n.on("close",e),n.on("end",e),n.on("error",e)})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installDebugController=void 0;const i=n(8),r=n(0),s=n(240);t.installDebugController=function(){i.contextListeners.add(new o)};class o{async onContextCreated(e){r.isDebugMode()&&e.extendInjectedScript(s.source)}async onContextWillDestroy(e){}async onContextDidDestroy(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.source=void 0,t.source="var pwExport =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = \"./src/debug/injected/consoleApi.ts\");\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ \"./src/debug/injected/consoleApi.ts\":\n/*!******************************************!*\\\n  !*** ./src/debug/injected/consoleApi.ts ***!\n  \\******************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConsoleAPI = void 0;\nconst selectorGenerator_1 = __webpack_require__(/*! ./selectorGenerator */ \"./src/debug/injected/selectorGenerator.ts\");\nclass ConsoleAPI {\n    constructor(injectedScript) {\n        this._injectedScript = injectedScript;\n        if (window.playwright)\n            return;\n        window.playwright = {\n            $: (selector) => this._querySelector(selector),\n            $$: (selector) => this._querySelectorAll(selector),\n            inspect: (selector) => this._inspect(selector),\n            selector: (element) => this._selector(element),\n        };\n    }\n    _querySelector(selector) {\n        if (typeof selector !== 'string')\n            throw new Error(`Usage: playwright.query('Playwright >> selector').`);\n        const parsed = this._injectedScript.parseSelector(selector);\n        return this._injectedScript.querySelector(parsed, document);\n    }\n    _querySelectorAll(selector) {\n        if (typeof selector !== 'string')\n            throw new Error(`Usage: playwright.$$('Playwright >> selector').`);\n        const parsed = this._injectedScript.parseSelector(selector);\n        return this._injectedScript.querySelectorAll(parsed, document);\n    }\n    _inspect(selector) {\n        if (typeof window.inspect !== 'function')\n            return;\n        if (typeof selector !== 'string')\n            throw new Error(`Usage: playwright.inspect('Playwright >> selector').`);\n        window.inspect(this._querySelector(selector));\n    }\n    _selector(element) {\n        if (!(element instanceof Element))\n            throw new Error(`Usage: playwright.selector(element).`);\n        return selectorGenerator_1.generateSelector(this._injectedScript, element).selector;\n    }\n}\nexports.ConsoleAPI = ConsoleAPI;\nexports.default = ConsoleAPI;\n\n\n/***/ }),\n\n/***/ \"./src/debug/injected/selectorGenerator.ts\":\n/*!*************************************************!*\\\n  !*** ./src/debug/injected/selectorGenerator.ts ***!\n  \\*************************************************/\n/*! no static exports found */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n/**\n * Copyright (c) Microsoft Corporation.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateSelector = void 0;\nfunction generateSelector(injectedScript, targetElement) {\n    const path = [];\n    let numberOfMatchingElements = Number.MAX_SAFE_INTEGER;\n    for (let element = targetElement; element && element !== document.documentElement; element = parentElementOrShadowHost(element)) {\n        const selector = buildSelectorCandidate(element);\n        if (!selector)\n            continue;\n        const fullSelector = joinSelector([selector, ...path]);\n        const parsedSelector = injectedScript.parseSelector(fullSelector);\n        const selectorTargets = injectedScript.querySelectorAll(parsedSelector, targetElement.ownerDocument);\n        if (!selectorTargets.length)\n            break;\n        if (selectorTargets[0] === targetElement)\n            return { selector: fullSelector, elements: selectorTargets };\n        if (selectorTargets.length && numberOfMatchingElements > selectorTargets.length) {\n            numberOfMatchingElements = selectorTargets.length;\n            path.unshift(selector);\n        }\n    }\n    if (document.documentElement === targetElement) {\n        return {\n            selector: '/html',\n            elements: [document.documentElement]\n        };\n    }\n    const selector = createXPath(document.documentElement, targetElement) ||\n        cssSelectorForElement(injectedScript, targetElement);\n    const parsedSelector = injectedScript.parseSelector(selector);\n    return {\n        selector,\n        elements: injectedScript.querySelectorAll(parsedSelector, targetElement.ownerDocument)\n    };\n}\nexports.generateSelector = generateSelector;\nfunction buildSelectorCandidate(element) {\n    const nodeName = element.nodeName.toLowerCase();\n    for (const attribute of ['data-testid', 'data-test-id', 'data-test']) {\n        if (element.hasAttribute(attribute))\n            return { engine: 'css', selector: `${nodeName}[${attribute}=${quoteString(element.getAttribute(attribute))}]` };\n    }\n    for (const attribute of ['aria-label', 'role']) {\n        if (element.hasAttribute(attribute))\n            return { engine: 'css', selector: `${element.nodeName.toLocaleLowerCase()}[${attribute}=${quoteString(element.getAttribute(attribute))}]` };\n    }\n    if (['INPUT', 'TEXTAREA'].includes(element.nodeName)) {\n        const nodeNameLowercase = element.nodeName.toLowerCase();\n        if (element.getAttribute('name'))\n            return { engine: 'css', selector: `${nodeNameLowercase}[name=${quoteString(element.getAttribute('name'))}]` };\n        if (element.getAttribute('placeholder'))\n            return { engine: 'css', selector: `${nodeNameLowercase}[placeholder=${quoteString(element.getAttribute('placeholder'))}]` };\n        if (element.getAttribute('type'))\n            return { engine: 'css', selector: `${nodeNameLowercase}[type=${quoteString(element.getAttribute('type'))}]` };\n    }\n    else if (element.nodeName === 'IMG') {\n        if (element.getAttribute('alt'))\n            return { engine: 'css', selector: `img[alt=${quoteString(element.getAttribute('alt'))}]` };\n    }\n    const textSelector = textSelectorForElement(element);\n    if (textSelector)\n        return { engine: 'text', selector: textSelector };\n    // De-prioritize id, but still use it as a last resort.\n    const idAttr = element.getAttribute('id');\n    if (idAttr && !isGuidLike(idAttr))\n        return { engine: 'css', selector: `${nodeName}[id=${quoteString(idAttr)}]` };\n    return null;\n}\nfunction parentElementOrShadowHost(element) {\n    if (element.parentElement)\n        return element.parentElement;\n    if (!element.parentNode)\n        return null;\n    if (element.parentNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE && element.parentNode.host)\n        return element.parentNode.host;\n    return null;\n}\nfunction cssSelectorForElement(injectedScript, targetElement) {\n    const root = targetElement.ownerDocument;\n    const tokens = [];\n    function uniqueCSSSelector(prefix) {\n        const path = tokens.slice();\n        if (prefix)\n            path.unshift(prefix);\n        const selector = path.join(' ');\n        const parsedSelector = injectedScript.parseSelector(selector);\n        const node = injectedScript.querySelector(parsedSelector, targetElement.ownerDocument);\n        return node === targetElement ? selector : undefined;\n    }\n    for (let element = targetElement; element && element !== root; element = parentElementOrShadowHost(element)) {\n        const nodeName = element.nodeName.toLowerCase();\n        // Element ID is the strongest signal, use it.\n        let bestTokenForLevel = '';\n        if (element.id) {\n            const token = /^[a-zA-Z][a-zA-Z0-9\\-\\_]+$/.test(element.id) ? '#' + element.id : `[id=\"${element.id}\"]`;\n            const selector = uniqueCSSSelector(token);\n            if (selector)\n                return selector;\n            bestTokenForLevel = token;\n        }\n        const parent = element.parentNode;\n        // Combine class names until unique.\n        const classes = Array.from(element.classList);\n        for (let i = 0; i < classes.length; ++i) {\n            const token = '.' + classes.slice(0, i + 1).join('.');\n            const selector = uniqueCSSSelector(token);\n            if (selector)\n                return selector;\n            // Even if not unique, does this subset of classes uniquely identify node as a child?\n            if (!bestTokenForLevel && parent) {\n                const sameClassSiblings = parent.querySelectorAll(token);\n                if (sameClassSiblings.length === 1)\n                    bestTokenForLevel = token;\n            }\n        }\n        // Ordinal is the weakest signal.\n        if (parent) {\n            const siblings = Array.from(parent.children);\n            const sameTagSiblings = siblings.filter(sibling => (sibling).nodeName.toLowerCase() === nodeName);\n            const token = sameTagSiblings.indexOf(element) === 0 ? nodeName : `${nodeName}:nth-child(${1 + siblings.indexOf(element)})`;\n            const selector = uniqueCSSSelector(token);\n            if (selector)\n                return selector;\n            if (!bestTokenForLevel)\n                bestTokenForLevel = token;\n        }\n        else if (!bestTokenForLevel) {\n            bestTokenForLevel = nodeName;\n        }\n        tokens.unshift(bestTokenForLevel);\n    }\n    return uniqueCSSSelector();\n}\nfunction textSelectorForElement(node) {\n    const maxLength = 30;\n    let needsRegex = false;\n    let trimmedText = null;\n    for (const child of node.childNodes) {\n        if (child.nodeType !== Node.TEXT_NODE)\n            continue;\n        if (child.textContent && child.textContent.trim()) {\n            if (trimmedText)\n                return null;\n            trimmedText = child.textContent.trim().substr(0, maxLength);\n            needsRegex = child.textContent !== trimmedText;\n        }\n        else {\n            needsRegex = true;\n        }\n    }\n    if (!trimmedText)\n        return null;\n    return needsRegex ? `/.*${escapeForRegex(trimmedText)}.*/` : `\"${trimmedText}\"`;\n}\nfunction escapeForRegex(text) {\n    return text.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\nfunction quoteString(text) {\n    return `\"${text.replaceAll(/\"/g, '\\\\\"')}\"`;\n}\nfunction joinSelector(path) {\n    const tokens = [];\n    let lastEngine = '';\n    for (const { engine, selector } of path) {\n        if (tokens.length && (lastEngine !== 'css' || engine !== 'css'))\n            tokens.push('>>');\n        lastEngine = engine;\n        if (engine === 'css')\n            tokens.push(selector);\n        else\n            tokens.push(`${engine}=${selector}`);\n    }\n    return tokens.join(' ');\n}\nfunction isGuidLike(id) {\n    let lastCharacterType;\n    let transitionCount = 0;\n    for (let i = 0; i < id.length; ++i) {\n        const c = id[i];\n        let characterType;\n        if (c === '-' || c === '_')\n            continue;\n        if (c >= 'a' && c <= 'z')\n            characterType = 'lower';\n        else if (c >= 'A' && c <= 'Z')\n            characterType = 'upper';\n        else if (c >= '0' && c <= '9')\n            characterType = 'digit';\n        else\n            characterType = 'other';\n        if (characterType === 'lower' && lastCharacterType === 'upper') {\n            lastCharacterType = characterType;\n            continue;\n        }\n        if (lastCharacterType && lastCharacterType !== characterType)\n            ++transitionCount;\n        lastCharacterType = characterType;\n    }\n    return transitionCount >= id.length / 4;\n}\nfunction createXPath(root, targetElement) {\n    const maxTextLength = 80;\n    const minMeaningfulSelectorLegth = 100;\n    const maybeDocument = root instanceof Document ? root : root.ownerDocument;\n    if (!maybeDocument)\n        return;\n    const document = maybeDocument;\n    const xpathCache = new Map();\n    const tokens = [];\n    function evaluateXPath(expression) {\n        let nodes = xpathCache.get(expression);\n        if (!nodes) {\n            nodes = [];\n            try {\n                const result = document.evaluate(expression, root, null, XPathResult.ORDERED_NODE_ITERATOR_TYPE);\n                for (let node = result.iterateNext(); node; node = result.iterateNext()) {\n                    if (node.nodeType === Node.ELEMENT_NODE)\n                        nodes.push(node);\n                }\n            }\n            catch (e) {\n            }\n            xpathCache.set(expression, nodes);\n        }\n        return nodes;\n    }\n    function uniqueXPathSelector(prefix) {\n        const path = tokens.slice();\n        if (prefix)\n            path.unshift(prefix);\n        let selector = '//' + path.join('/');\n        while (selector.includes('///'))\n            selector = selector.replace('///', '//');\n        if (selector.endsWith('/'))\n            selector = selector.substring(0, selector.length - 1);\n        const nodes = evaluateXPath(selector);\n        if (nodes[0] === targetElement)\n            return selector;\n        // If we are looking at a small set of elements with long selector, fall back to ordinal.\n        if (nodes.length < 5 && selector.length > minMeaningfulSelectorLegth) {\n            const index = nodes.indexOf(targetElement);\n            if (index !== -1)\n                return `(${selector})[${index + 1}]`;\n        }\n        return undefined;\n    }\n    function escapeAndCap(text) {\n        text = text.substring(0, maxTextLength);\n        // XPath 1.0 does not support quote escaping.\n        // 1. If there are no single quotes - use them.\n        if (text.indexOf(`'`) === -1)\n            return `'${text}'`;\n        // 2. If there are no double quotes - use them to enclose text.\n        if (text.indexOf(`\"`) === -1)\n            return `\"${text}\"`;\n        // 3. Otherwise, use popular |concat| trick.\n        const Q = `'`;\n        return `concat(${text.split(Q).map(token => Q + token + Q).join(`, \"'\", `)})`;\n    }\n    const defaultAttributes = new Set(['title', 'aria-label', 'disabled', 'role']);\n    const importantAttributes = new Map([\n        ['form', ['action']],\n        ['img', ['alt']],\n        ['input', ['placeholder', 'type', 'name']],\n        ['textarea', ['placeholder', 'type', 'name']],\n    ]);\n    let usedTextConditions = false;\n    for (let element = targetElement; element && element !== root; element = element.parentElement) {\n        const nodeName = element.nodeName.toLowerCase();\n        const tag = nodeName === 'svg' ? '*' : nodeName;\n        const tagConditions = [];\n        if (nodeName === 'svg')\n            tagConditions.push('local-name()=\"svg\"');\n        const attrConditions = [];\n        const importantAttrs = [...defaultAttributes, ...(importantAttributes.get(tag) || [])];\n        for (const attr of importantAttrs) {\n            const value = element.getAttribute(attr);\n            if (value && value.length < maxTextLength)\n                attrConditions.push(`normalize-space(@${attr})=${escapeAndCap(value)}`);\n            else if (value)\n                attrConditions.push(`starts-with(normalize-space(@${attr}), ${escapeAndCap(value)})`);\n        }\n        const text = document.evaluate('normalize-space(.)', element).stringValue;\n        const textConditions = [];\n        if (tag !== 'select' && text.length && !usedTextConditions) {\n            if (text.length < maxTextLength)\n                textConditions.push(`normalize-space(.)=${escapeAndCap(text)}`);\n            else\n                textConditions.push(`starts-with(normalize-space(.), ${escapeAndCap(text)})`);\n            usedTextConditions = true;\n        }\n        // Always retain the last tag.\n        const conditions = [...tagConditions, ...textConditions, ...attrConditions];\n        const token = conditions.length ? `${tag}[${conditions.join(' and ')}]` : (tokens.length ? '' : tag);\n        const selector = uniqueXPathSelector(token);\n        if (selector)\n            return selector;\n        const parent = element.parentElement;\n        let ordinal = -1;\n        if (parent) {\n            const siblings = Array.from(parent.children);\n            const sameTagSiblings = siblings.filter(sibling => (sibling).nodeName.toLowerCase() === nodeName);\n            if (sameTagSiblings.length > 1)\n                ordinal = sameTagSiblings.indexOf(element);\n        }\n        // Do not include text into this token, only tag / attributes.\n        // Topmost node will get all the text.\n        const conditionsString = conditions.length ? `[${conditions.join(' and ')}]` : '';\n        const ordinalString = ordinal >= 0 ? `[${ordinal + 1}]` : '';\n        tokens.unshift(`${tag}${ordinalString}${conditionsString}`);\n    }\n    return uniqueXPathSelector();\n}\n\n\n/***/ })\n\n/******/ })[\"default\"];"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installTracer=void 0;const i=n(8),r=n(3),s=n(2),o=n(1),a=n(0),c=n(9),l=n(242),d=n(4),u=n(12),h=n(57),p=s.promisify(o.writeFile.bind(o)),m=s.promisify(o.appendFile.bind(o)),f=s.promisify(o.access.bind(o)),_=a.getFromENV("PW_TRACE_DIR");t.installTracer=function(){i.contextListeners.add(new g)};class g{constructor(){this._contextTracers=new Map}async onContextCreated(e){let t,n;if(e._options._tracePath)t=e._options._traceResourcesPath||r.join(r.dirname(e._options._tracePath),"trace-resources"),n=e._options._tracePath;else{if(!_)return;t=_,n=r.join(_,a.createGuid()+".trace")}const i=new w(e,t,n);this._contextTracers.set(e,i)}async onContextWillDestroy(e){}async onContextDidDestroy(e){const t=this._contextTracers.get(e);t&&(await t.dispose().catch(e=>{}),this._contextTracers.delete(e))}}class w{constructor(e,t,n){this._disposed=!1,this._pageToId=new Map,this._context=e,this._contextId="context@"+a.createGuid(),this._traceFile=n,this._traceStoragePromise=a.mkdirIfNeeded(r.join(t,"sha1")).then(()=>t),this._appendEventChain=a.mkdirIfNeeded(n).then(()=>n),this._writeArtifactChain=Promise.resolve();const s={timestamp:a.monotonicTime(),type:"context-created",browserName:e._browser._options.name,contextId:this._contextId,isMobile:!!e._options.isMobile,deviceScaleFactor:e._options.deviceScaleFactor||1,viewportSize:e._options.viewport||void 0};this._appendTraceEvent(s),this._snapshotter=new l.Snapshotter(e,this),this._eventListeners=[d.helper.addEventListener(e,i.BrowserContext.Events.Page,this._onPage.bind(this))],this._context._actionListeners.add(this)}onBlob(e){this._writeArtifact(e.sha1,e.buffer)}onResource(e){const t={timestamp:a.monotonicTime(),type:"resource",contextId:this._contextId,pageId:e.pageId,frameId:e.frameId,url:e.url,contentType:e.contentType,responseHeaders:e.responseHeaders,sha1:e.sha1};this._appendTraceEvent(t)}pageId(e){return this._pageToId.get(e)}async onAfterAction(e,t){try{const n=await this._takeSnapshot(t.page,"string"==typeof t.target?void 0:t.target),i={timestamp:a.monotonicTime(),type:"action",contextId:this._contextId,pageId:this._pageToId.get(t.page),action:t.type,selector:"string"==typeof t.target?t.target:void 0,value:t.value,snapshot:n,startTime:e.startTime,endTime:e.endTime,stack:t.stack,logs:e.logs.slice(),error:e.error?e.error.stack:void 0};this._appendTraceEvent(i)}catch(e){}}_onPage(e){const t="page@"+a.createGuid();this._pageToId.set(e,t);const n={timestamp:a.monotonicTime(),type:"page-created",contextId:this._contextId,pageId:t};this._appendTraceEvent(n),e.on(c.Page.Events.VideoStarted,e=>{if(this._disposed)return;const n={timestamp:a.monotonicTime(),type:"page-video",contextId:this._contextId,pageId:t,fileName:r.relative(r.dirname(this._traceFile),e._path)};this._appendTraceEvent(n)}),e.on(c.Page.Events.Dialog,e=>{if(this._disposed)return;const n={timestamp:a.monotonicTime(),type:"dialog-opened",contextId:this._contextId,pageId:t,dialogType:e.type(),message:e.message()};this._appendTraceEvent(n)}),e.on(c.Page.Events.InternalDialogClosed,e=>{if(this._disposed)return;const n={timestamp:a.monotonicTime(),type:"dialog-closed",contextId:this._contextId,pageId:t,dialogType:e.type()};this._appendTraceEvent(n)}),e.mainFrame().on(h.Frame.Events.Navigation,n=>{if(this._disposed||"about:blank"===e.mainFrame().url())return;const i={timestamp:a.monotonicTime(),type:"navigation",contextId:this._contextId,pageId:t,url:n.url,sameDocument:!n.newDocument};this._appendTraceEvent(i)}),e.on(c.Page.Events.Load,()=>{if(this._disposed||"about:blank"===e.mainFrame().url())return;const n={timestamp:a.monotonicTime(),type:"load",contextId:this._contextId,pageId:t};this._appendTraceEvent(n)}),e.once(c.Page.Events.Close,()=>{if(this._pageToId.delete(e),this._disposed)return;const n={timestamp:a.monotonicTime(),type:"page-destroyed",contextId:this._contextId,pageId:t};this._appendTraceEvent(n)})}async _takeSnapshot(e,t,n=0){n||(n=(e._timeoutSettings.timeout({})||u.DEFAULT_TIMEOUT)/5);const i=a.monotonicTime(),r=await this._snapshotter.takeSnapshot(e,t,n);if(!r)return;const s=Buffer.from(JSON.stringify(r)),o=a.calculateSha1(s);return this._writeArtifact(o,s),{sha1:o,duration:a.monotonicTime()-i}}async dispose(){this._disposed=!0,this._context._actionListeners.delete(this),d.helper.removeEventListeners(this._eventListeners),this._pageToId.clear(),this._snapshotter.dispose();const e={timestamp:a.monotonicTime(),type:"context-destroyed",contextId:this._contextId};this._appendTraceEvent(e),await this._appendEventChain,await this._writeArtifactChain}_writeArtifact(e,t){const n=this._innerWriteArtifact(e,t);this._writeArtifactChain=this._writeArtifactChain.then(()=>n)}async _innerWriteArtifact(e,t){const n=await this._traceStoragePromise,i=r.join(n,e);try{await f(i)}catch(e){await p(i,t)}}_appendTraceEvent(e){this._appendEventChain=this._appendEventChain.then(async t=>(await m(t,JSON.stringify(e)+"\n"),t))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Snapshotter=void 0;const i=n(8),r=n(9),s=n(4),o=n(17),a=n(10),c=n(22),l=n(243),d=n(0);function u(e){try{const t=new URL(e);return t.hash="",t.toString()}catch(t){return e}}t.Snapshotter=class{constructor(e,t){this._context=e,this._delegate=t,this._eventListeners=[s.helper.addEventListener(this._context,i.BrowserContext.Events.Page,this._onPage.bind(this))]}dispose(){s.helper.removeEventListeners(this._eventListeners)}_onPage(e){this._eventListeners.push(s.helper.addEventListener(e,r.Page.Events.Response,t=>{this._saveResource(e,t).catch(e=>a.debugLogger.log("error",e))}))}async _saveResource(e,t){if(t.status()>=300&&t.status()<=399)return;let n=t.request();for(;n.redirectedFrom();)n=n.redirectedFrom();const i=n.url();let r="";for(const{name:e,value:n}of t.headers())"content-type"===e.toLowerCase()&&(r=n);const s=await t.body().catch(e=>a.debugLogger.log("error",e)),o=s?d.calculateSha1(s):"none",c={pageId:this._delegate.pageId(e),frameId:t.frame()._id,url:i,contentType:r,responseHeaders:t.headers(),sha1:o};this._delegate.onResource(c),s&&this._delegate.onBlob({sha1:o,buffer:s})}async takeSnapshot(e,t,n){d.assert(e.context()===this._context);const i=e.frames(),r=i.map(async e=>{const i=await o.runAbortableTask(n=>this._snapshotFrame(n,t,e),n).catch(e=>null);if(i)return i;return{snapshot:{frameId:e._id,url:u(e.url()),html:"<body>Snapshot is not available</body>",resourceOverrides:[]},mapping:new Map}}),s=await this._getViewportSize(e,n),a=await Promise.all(r);if(!s)return null;const c=a[0];c.snapshot.url.startsWith("http")||(c.snapshot.url="http://playwright.snapshot/");const l=new Map;for(const e of a)for(const[t,n]of e.mapping)l.set(t,n);const h=[];for(let e=1;e<a.length;e++){const t=a[e],n=i[e];if(!l.has(n))continue;const r=t.snapshot;r.url=l.get(n),h.push(r)}return{viewportSize:s,frames:[c.snapshot,...h]}}async _getViewportSize(e,t){return o.runAbortableTask(async t=>{const n=e.viewportSize();if(n)return n;return(await e.mainFrame()._utilityContext()).evaluateInternal(()=>({width:Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),height:Math.max(document.body.offsetHeight,document.documentElement.offsetHeight)}))},t).catch(e=>null)}async _snapshotFrame(e,t,n){if(!e.isRunning())return null;t&&await t.ownerFrame()!==n&&(t=void 0);const i=await n._utilityContext(),r=d.createGuid(),s=!n._page.context()._options.javaScriptEnabled,o=await c.evaluate(i,!1,l.takeSnapshotInFrame,r,s,t);if(!e.isRunning())return null;const a=await o.getProperties(),h=await a.get("data").jsonValue(),p=await a.get("frameElements").getProperties();o.dispose();const m={frameId:n._id,url:u(n.url()),html:h.html,resourceOverrides:[]},f=new Map;for(const{url:e,content:t}of h.resourceOverrides){const n=Buffer.from(t),i=d.calculateSha1(n);this._delegate.onBlob({sha1:i,buffer:n}),m.resourceOverrides.push({url:e,sha1:i})}for(let e=0;e<h.frameUrls.length;e++){const t=p.get(String(e)).asElement();if(!t)continue;const n=await t.contentFrame().catch(e=>null);n&&f.set(n,h.frameUrls[e])}return{snapshot:m,mapping:f}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.takeSnapshotInFrame=void 0,t.takeSnapshotInFrame=function(e,t,n){const i=window,r=i.document,s=new Set(["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","MENUITEM","META","PARAM","SOURCE","TRACK","WBR"]),o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a=e=>e.replace(/[&<>"']/gu,e=>o[e]),c=e=>e.replace(/[&<]/gu,e=>o[e]),l=new Map,d=new Map,u=new Map,h=new Map;let p=0;const m=()=>e+ ++p,f=e=>e.startsWith("javascript:")?"":e,_=e=>e.split(",").map(e=>{const t=(e=e.trim()).lastIndexOf(" ");return-1===t?f(e):f(e.substring(0,t).trim())+e.substring(t)}).join(","),g=e=>{try{for(const t of e.cssRules)t.styleSheet&&g(t.styleSheet);const t=(e=>{const t=[];for(const n of e.cssRules)t.push(n.cssText);return t.join("\n")})(e);if(e.ownerNode&&"STYLE"===e.ownerNode.nodeName)u.set(e.ownerNode,t);else if(null!==e.href){const n=((e,t)=>{if(""===t)return"";try{return new URL(t,e).href}catch(e){return t}})((e=>{let t=e;for(;t.parentStyleSheet;)t=t.parentStyleSheet;return t.ownerNode?t.ownerNode.baseURI:document.baseURI})(e),e.href);h.set(n,t)}}catch(e){}},w=(e,r)=>{const o=e.nodeName,h=e.nodeType;if(h!==Node.DOCUMENT_TYPE_NODE)if(h!==Node.TEXT_NODE){if(h===Node.ELEMENT_NODE||h===Node.DOCUMENT_NODE||h===Node.DOCUMENT_FRAGMENT_NODE){if(h===Node.DOCUMENT_NODE||h===Node.DOCUMENT_FRAGMENT_NODE){const t=e;for(const e of t.styleSheets)g(e)}if("SCRIPT"!==o&&"BASE"!==o&&(!t||"NOSCRIPT"!==o)){if("STYLE"===o){const t=u.get(e)||e.textContent||"";return r.push("<style>"),r.push(t),void r.push("</style>")}if(h===Node.ELEMENT_NODE){const t=e;r.push("<"),r.push(o),e===n&&r.push(' __playwright_target__="true"');for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;let s=t.attributes[e].value;if(("value"!==n||"INPUT"!==o&&"TEXTAREA"!==o)&&("checked"!==n&&"disabled"!==n&&"checked"!==n&&("LINK"!==o||"integrity"!==n))){if("src"!==n||"IFRAME"!==o&&"FRAME"!==o)"src"===n&&"IMG"===o?s=f(s):"srcset"===n&&"IMG"===o||"srcset"===n&&"SOURCE"===o?s=_(s):"href"===n&&"LINK"===o?s=f(s):n.startsWith("on")&&(s="");else{let e=i.location.protocol;e.startsWith("http")||(e="http:"),s=e+"//"+m()+"/",d.set(s,t)}r.push(" "),r.push(n),r.push('="'),r.push(a(s)),r.push('"')}}if("INPUT"===o&&(r.push(' value="'),r.push(a(t.value)),r.push('"')),t.checked&&r.push(" checked"),t.disabled&&r.push(" disabled"),t.readOnly&&r.push(" readonly"),t.shadowRoot){const e=[];w(t.shadowRoot,e);const n=m();l.set(n,e.join("")),r.push(" "),r.push("playwright-shadow-root"),r.push('="'),r.push(n),r.push('"')}r.push(">")}if("HEAD"===o){let t,n=document.baseURI;for(let i=e.firstChild;i;i=i.nextSibling)"BASE"===i.nodeName&&(n=i.href,t=i.target);r.push('<base href="'),r.push(a(n)),r.push('"'),t&&(r.push(' target="'),r.push(a(t)),r.push('"')),r.push(">")}if("TEXTAREA"===o)r.push(c(e.value));else for(let t=e.firstChild;t;t=t.nextSibling)w(t,r);if("BODY"===e.nodeName&&l.size){r.push("<script>");const e=Array.from(l).map(([e,t])=>{return`  ['${e}', '${n=t,n.replace(/'/g,"\\'")}']`;var n}).join(",\n"),t=`\n(${b.toString()})('playwright-shadow-root', new Map([\n${e}\n]))\n`;r.push(t),r.push("<\/script>")}h!==Node.ELEMENT_NODE||s.has(o)||(r.push("</"),r.push(o),r.push(">"))}}}else r.push(c(e.nodeValue||""));else{const t=e;r.push(`<!DOCTYPE ${t.name}>`)}};function b(e,t){const n=i=>{const r=i.querySelectorAll(`[${e}]`);for(let i=0;i<r.length;i++){const s=r[i],o=s.getAttribute(e);s.removeAttribute(e);const a=s.attachShadow({mode:"open"}),c=t.get(o);c&&(a.innerHTML=c,n(a))}};n(document)}const y=[];return w(r,y),{data:{html:y.join(""),frameUrls:Array.from(d.keys()),resourceOverrides:Array.from(h).map(([e,t])=>({url:e,content:t}))},frameElements:Array.from(d.values())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installHarTracer=void 0;const i=n(1),r=n(2),s=n(8),o=n(4),a=n(9),c=r.promisify(i.writeFile.bind(i));t.installHarTracer=function(){s.contextListeners.add(new l)};class l{constructor(){this._contextTracers=new Map}async onContextCreated(e){if(!e._options.recordHar)return;const t=new d(e,e._options.recordHar);this._contextTracers.set(e,t)}async onContextWillDestroy(e){const t=this._contextTracers.get(e);t&&(this._contextTracers.delete(e),await t.flush())}async onContextDidDestroy(e){}}class d{constructor(e,t){this._pageEntries=new Map,this._entries=new Map,this._lastPage=0,this._barrierPromises=new Set,this._options=t,this._log={version:"1.2",creator:{name:"Playwright",version:n(245).version},browser:{name:e._browser._options.name,version:e._browser.version()},pages:[],entries:[]},e.on(s.BrowserContext.Events.Page,e=>this._onPage(e))}_onPage(e){const t={startedDateTime:new Date,id:"page_"+this._lastPage++,title:"",pageTimings:{onContentLoad:-1,onLoad:-1}};this._pageEntries.set(e,t),this._log.pages.push(t),e.on(a.Page.Events.Request,t=>this._onRequest(e,t)),e.on(a.Page.Events.Response,t=>this._onResponse(e,t)),e.on(a.Page.Events.DOMContentLoaded,()=>{const n=e.mainFrame()._evaluateExpression(String(()=>({title:document.title,domContentLoaded:performance.timing.domContentLoadedEventStart})),!0,void 0,"utility").then(e=>{t.title=e.title,t.pageTimings.onContentLoad=e.domContentLoaded}).catch(()=>{});this._addBarrier(e,n)}),e.on(a.Page.Events.Load,()=>{const n=e.mainFrame()._evaluateExpression(String(()=>({title:document.title,loaded:performance.timing.loadEventStart})),!0,void 0,"utility").then(e=>{t.title=e.title,t.pageTimings.onLoad=e.loaded}).catch(()=>{});this._addBarrier(e,n)})}_addBarrier(e,t){const n=Promise.race([new Promise(t=>e.on("close",()=>{this._barrierPromises.delete(n),t()})),t]);this._barrierPromises.add(n)}_onRequest(e,t){const n=this._pageEntries.get(e),i=new URL(t.url()),r={pageref:n.id,startedDateTime:new Date,time:-1,request:{method:t.method(),url:t.url(),httpVersion:"HTTP/1.1",cookies:[],headers:[],queryString:[...i.searchParams].map(e=>({name:e[0],value:e[1]})),postData:void 0,headersSize:-1,bodySize:-1},response:{status:-1,statusText:"",httpVersion:"HTTP/1.1",cookies:[],headers:[],content:{size:-1,mimeType:t.headerValue("content-type")||"application/octet-stream"},headersSize:-1,bodySize:-1,redirectURL:""},cache:{beforeRequest:null,afterRequest:null},timings:{send:-1,wait:-1,receive:-1}};if(t.redirectedFrom()){this._entries.get(t.redirectedFrom()).response.redirectURL=t.url()}this._log.entries.push(r),this._entries.set(t,r)}_onResponse(e,t){const n=this._pageEntries.get(e),i=this._entries.get(t.request()),r=t.request();i.request.headers=r.headers().map(e=>({name:e.name,value:e.value})),i.request.cookies=u(r.headerValue("cookie"),";"),i.request.postData=function(e){const t=e.postDataBuffer();if(!t)return null;const n=e.headerValue("content-type")||"application/octet-stream",i={mimeType:n,text:"application/octet-stream"===n?"":t.toString(),params:[]};if("application/x-www-form-urlencoded"===n){const e=new URLSearchParams(t.toString());for(const[t,n]of e.entries())i.params.push({name:t,value:n})}return i}(r)||void 0,i.response={status:t.status(),statusText:t.statusText(),httpVersion:"HTTP/1.1",cookies:u(t.headerValue("set-cookie"),"\n"),headers:t.headers().map(e=>({name:e.name,value:e.value})),content:{size:-1,mimeType:t.headerValue("content-type")||"application/octet-stream"},headersSize:-1,bodySize:-1,redirectURL:""};const s=t.timing();if(n.startedDateTime.valueOf()>s.startTime&&(n.startedDateTime=new Date(s.startTime)),i.timings={dns:-1!==s.domainLookupEnd?o.helper.millisToRoundishMillis(s.domainLookupEnd-s.domainLookupStart):-1,connect:-1!==s.connectEnd?o.helper.millisToRoundishMillis(s.connectEnd-s.connectStart):-1,ssl:-1!==s.connectEnd?o.helper.millisToRoundishMillis(s.connectEnd-s.secureConnectionStart):-1,send:0,wait:-1!==s.responseStart?o.helper.millisToRoundishMillis(s.responseStart-s.requestStart):-1,receive:-1!==t.request()._responseEndTiming?o.helper.millisToRoundishMillis(t.request()._responseEndTiming-s.responseStart):-1},!this._options.omitContent&&200===t.status()){const n=t.body().then(e=>{i.response.content.text=e.toString("base64"),i.response.content.encoding="base64"}).catch(()=>{});this._addBarrier(e,n)}}async flush(){await Promise.all(this._barrierPromises);for(const e of this._log.pages)e.pageTimings.onContentLoad>=0?e.pageTimings.onContentLoad-=e.startedDateTime.valueOf():e.pageTimings.onContentLoad=-1,e.pageTimings.onLoad>=0?e.pageTimings.onLoad-=e.startedDateTime.valueOf():e.pageTimings.onLoad=-1;await c(this._options.path,JSON.stringify({log:this._log},void 0,2))}}function u(e,t){return e?e.split(t).map(e=>function(e){const t={name:"",value:""};let n=!0;for(const i of e.split(/; */)){const e=i.indexOf("="),r=-1!==e?i.substr(0,e).trim():i.trim(),s=-1!==e?i.substr(e+1,i.length).trim():"";n?(n=!1,t.name=r,t.value=s):("Domain"===r&&(t.domain=s),"Expires"===r&&(t.expires=new Date(s)),"HttpOnly"===r&&(t.httpOnly=!0),"Max-Age"===r&&(t.expires=new Date(Date.now()+1e3*+s)),"Path"===r&&(t.path=s),"SameSite"===r&&(t.sameSite=s),"Secure"===r&&(t.secure=!0))}return t}(e)):[]}},function(e){e.exports=JSON.parse('{"name":"playwright-core","version":"1.8.1","description":"A high-level API to automate web browsers","repository":"github:Microsoft/playwright","engines":{"node":">=10.17.0"},"homepage":"https://playwright.dev","main":"index.js","bin":{"playwright":"./lib/cli/cli.js"},"exports":{".":{"import":"./index.mjs","require":"./index.js"},"./":"./"},"scripts":{"install":"node install.js"},"author":{"name":"Microsoft Corporation"},"license":"Apache-2.0","dependencies":{"commander":"^6.1.0","debug":"^4.1.1","extract-zip":"^2.0.1","https-proxy-agent":"^5.0.0","jpeg-js":"^0.4.2","mime":"^2.4.6","pngjs":"^5.0.0","progress":"^2.0.3","proper-lockfile":"^4.1.1","proxy-from-env":"^1.1.0","rimraf":"^3.0.2","ws":"^7.3.1"}}')},function(e){e.exports=JSON.parse('{"comment":"Do not edit this file, use utils/roll_browser.js","browsers":[{"name":"chromium","revision":"844399","download":false},{"name":"firefox","revision":"1225","download":false},{"name":"webkit","revision":"1423","download":false}]}')},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return void 0===process.env.IS_LOCAL&&["AWS_LAMBDA_FUNCTION_NAME","FUNCTION_NAME","FUNCTION_TARGET"].some(e=>void 0!==process.env[e])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(1);t.default=async function(e){try{return await i.promises.access(e),!0}catch(e){return!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AWS_FONT_DIR=t.AWS_TMP_DIR=void 0;const i=n(1),r=n(3),s=n(124);t.AWS_TMP_DIR="/tmp/aws",t.AWS_FONT_DIR="/tmp/fonts";const o=t.AWS_TMP_DIR+"/lib";t.default=async function(){if(!s.default())return{};const e={};return!process.env.FONTCONFIG_PATH&&i.existsSync(t.AWS_FONT_DIR)?(e.FONTCONFIG_PATH=t.AWS_FONT_DIR,await i.promises.writeFile(r.join(t.AWS_FONT_DIR,"fonts.conf"),`<?xml version="1.0"?>\n<!DOCTYPE fontconfig SYSTEM "fonts.dtd">\n<fontconfig>\n  <dir>${t.AWS_FONT_DIR}</dir>\n  <cachedir>/tmp/fonts-cache/</cachedir>\n  <config></config>\n</fontconfig>`)):e.FONTCONFIG_PATH=t.AWS_TMP_DIR,process.env.LD_LIBRARY_PATH?process.env.LD_LIBRARY_PATH.startsWith(o)||(e.LD_LIBRARY_PATH=[...new Set([o,...process.env.LD_LIBRARY_PATH.split(":")])].join(":")):e.LD_LIBRARY_PATH=o,e}},function(e,t,n){"use strict";(function(t){const i=n(1),r=n(14),s=n(3),o=n(251),a=n(21);class c{static get brotli(){if(void 0!==a.createBrotliDecompress)return a.createBrotliDecompress;if(!0!==this.hasOwnProperty("_brotli")){let e="iltorb";"AWS_Lambda_nodejs8.10"===process.env.AWS_EXECUTION_ENV&&(e=s.join(t,"iltorb"));try{this._brotli=n(271)(e).decompressStream}catch(e){if("MODULE_NOT_FOUND"===e.code)throw new Error("Failed to load 'iltorb' package.");throw e}}return this._brotli}static deflate(e){let t=s.join(r.tmpdir(),[s.basename(e),i.statSync(e).isDirectory()?"tar.gz":"gz"].join("."));return new Promise((n,r)=>{let s=t.endsWith(".tar.gz")?o.pack(e):i.createReadStream(e,{highWaterMark:2**23}),c=i.createWriteStream(t,{mode:420});s.once("error",e=>r(e)),c.once("error",e=>r(e)),c.once("close",()=>n(t)),s.pipe(a.createGzip({chunkSize:2**21})).pipe(c)})}static inflate(e){let t=s.join(r.tmpdir(),s.basename(e).replace(/[.](?:t(?:ar(?:[.](?:br|gz))?|br|gz)|br|gz)$/i,""));return new Promise((n,r)=>{if(!0===i.existsSync(t))return n(t);let s=i.createReadStream(e,{highWaterMark:2**23}),l=null;!0===/[.](?:t(?:ar(?:[.](?:br|gz))?|br|gz))$/i.test(e)?(l=o.extract(t),l.once("finish",()=>n(t))):l=i.createWriteStream(t,{mode:448}),s.once("error",e=>r(e)),l.once("error",e=>r(e)),l.once("close",()=>n(t)),!0===/(?:br|gz)$/i.test(e)?s.pipe(/br$/i.test(e)?c.brotli({chunkSize:2**21}):a.createUnzip({chunkSize:2**21})).pipe(l):s.pipe(l)})}}e.exports=c}).call(this,"/")},function(e,t,n){var i=n(252),r=n(253),s=n(269),o=n(270),a=n(1),c=n(3),l="win32"===n(14).platform(),d=function(){},u=function(e){return e},h=l?function(e){return e.replace(/\\/g,"/").replace(/[:?<>|]/g,"_")}:u,p=function(e,t){return function(n){n.name=n.name.split("/").slice(t).join("/");var i=n.linkname;return i&&("link"===n.type||c.isAbsolute(i))&&(n.linkname=i.split("/").slice(t).join("/")),e(n)}};t.pack=function(e,t){e||(e="."),t||(t={});var n=t.fs||a,i=t.ignore||t.filter||d,o=t.map||d,l=t.mapStream||u,f=function(e,t,n,i,r,s){var o=r||["."];return function(r){if(!o.length)return r();var a=o.shift(),l=c.join(n,a);t(l,(function(t,d){return t?r(t):d.isDirectory()?void e.readdir(l,(function(e,t){if(e)return r(e);s&&t.sort();for(var l=0;l<t.length;l++)i(c.join(n,a,t[l]))||o.push(c.join(a,t[l]));r(null,a,d)})):r(null,a,d)}))}}(n,t.dereference?n.stat:n.lstat,e,i,t.entries,t.sort),_=!1!==t.strict,g="number"==typeof t.umask?~t.umask:~m(),w="number"==typeof t.dmode?t.dmode:0,b="number"==typeof t.fmode?t.fmode:0,y=t.pack||r.pack(),v=t.finish||d;t.strip&&(o=p(o,t.strip)),t.readable&&(w|=parseInt(555,8),b|=parseInt(444,8)),t.writable&&(w|=parseInt(333,8),b|=parseInt(222,8));var x=function(i,r,a){if(i)return y.destroy(i);if(!r)return!1!==t.finalize&&y.finalize(),v(y);if(a.isSocket())return S();var d={name:h(r),mode:(a.mode|(a.isDirectory()?w:b))&g,mtime:a.mtime,size:a.size,type:"file",uid:a.uid,gid:a.gid};if(a.isDirectory())return d.size=0,d.type="directory",d=o(d)||d,y.entry(d,S);if(a.isSymbolicLink())return d.size=0,d.type="symlink",function(t,i){n.readlink(c.join(e,t),(function(e,t){if(e)return y.destroy(e);i.linkname=h(t),y.entry(i,S)}))}(r,d=o(d)||d);if(d=o(d)||d,!a.isFile())return _?y.destroy(new Error("unsupported type for "+r)):S();var u=y.entry(d,S);if(u){var p=l(n.createReadStream(c.join(e,r)),d);p.on("error",(function(e){u.destroy(e)})),s(p,u)}},S=function(e){if(e)return y.destroy(e);f(x)};return S(),y};var m=function(){return process.umask?process.umask():0};function f(e,t,n){o(e,{fs:t.fs},(function(e,r){!e&&r&&t.own?i(r,t.uid,t.gid,n):n(e)}))}t.extract=function(e,t){e||(e="."),t||(t={});var n=t.fs||a,i=t.ignore||t.filter||d,o=t.map||d,_=t.mapStream||u,g=!1!==t.chown&&!l&&0===(process.getuid?process.getuid():-1),w=t.extract||r.extract(),b=[],y=new Date,v="number"==typeof t.umask?~t.umask:~m(),x="number"==typeof t.dmode?t.dmode:0,S="number"==typeof t.fmode?t.fmode:0,k=!1!==t.strict;t.strip&&(o=p(o,t.strip)),t.readable&&(x|=parseInt(555,8),S|=parseInt(444,8)),t.writable&&(x|=parseInt(333,8),S|=parseInt(222,8));var C=function(e,t){for(var i,r;(i=(r=b).length?r[r.length-1]:null)&&e.slice(0,i[0].length)!==i[0];)b.pop();if(!i)return t();n.utimes(i[0],y,i[1],t)};return w.on("entry",(function(r,a,d){(r=o(r)||r).name=h(r.name);var u=c.join(e,c.join("/",r.name));if(i(u,r))return a.resume(),d();var p=function(e){if(e)return d(e);!function(e,i,r){!1===t.utimes?r():"directory"===i.type?n.utimes(e,y,i.mtime,r):"symlink"===i.type?C(e,r):n.utimes(e,y,i.mtime,(function(t){if(t)return r(t);C(e,r)}))}(u,r,(function(e){return e?d(e):l?d():void function(e,t,i){var r="symlink"===t.type,s=r?n.lchmod:n.chmod,o=r?n.lchown:n.chown;if(!s)return i();var a=(t.mode|("directory"===t.type?x:S))&v;s(e,a,(function(n){return n?i(n):g&&o?void o(e,t.uid,t.gid,i):i()}))}(u,r,d)}))},m=function(){var e=n.createWriteStream(u),t=_(a,r);e.on("error",(function(e){t.destroy(e)})),s(t,e,(function(t){if(t)return d(t);e.on("close",p)}))};if("directory"===r.type)return b.push([u,r.mtime]),f(u,{fs:n,own:g,uid:r.uid,gid:r.gid},p);var w=c.dirname(u);!function e(t,n,i,r){if(n===i)return r(null,!0);t.lstat(n,(function(s,o){return s&&"ENOENT"!==s.code?r(s):s||o.isDirectory()?e(t,c.join(n,".."),i,r):void r(null,!1)}))}(n,w,c.join(e,"."),(function(i,s){return i?d(i):s?void f(w,{fs:n,own:g,uid:r.uid,gid:r.gid},(function(i){if(i)return d(i);switch(r.type){case"file":return m();case"link":return function(){if(l)return d();n.unlink(u,(function(){var i=c.join(e,c.join("/",r.linkname));n.link(i,u,(function(e){if(e&&"EPERM"===e.code&&t.hardlinkAsFilesFallback)return a=n.createReadStream(i),m();p(e)}))}))}();case"symlink":return function(){if(l)return d();n.unlink(u,(function(){n.symlink(r.linkname,u,p)}))}()}if(k)return d(new Error("unsupported type for "+u+" ("+r.type+")"));a.resume(),d()})):d(new Error(w+" is not a valid path"))}))})),t.finish&&w.on("finish",t.finish),w}},function(e,t,n){"use strict";const i=n(1),r=n(3),s=i.lchown?"lchown":"chown",o=i.lchownSync?"lchownSync":"chownSync",a=i.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),c=a?(e,t,n,r)=>s=>{s&&"EISDIR"===s.code?i.chown(e,t,n,r):r(s)}:(e,t,n,i)=>i,l=a?(e,t,n)=>{try{return i[o](e,t,n)}catch(r){if("EISDIR"!==r.code)throw r;i.chownSync(e,t,n)}}:i[o],d=process.version;let u=(e,t,n)=>i.readdir(e,t,n);/^v4\./.test(d)&&(u=(e,t,n)=>i.readdir(e,n));const h=(e,t,n,o,a)=>{if("string"==typeof t)return i.lstat(r.resolve(e,t),(i,r)=>{if(i)return a(i);r.name=t,h(e,r,n,o,a)});if(t.isDirectory())p(r.resolve(e,t.name),n,o,l=>{if(l)return a(l);const d=r.resolve(e,t.name);i[s](d,n,o,c(d,n,o,a))});else{const l=r.resolve(e,t.name);i[s](l,n,o,c(l,n,o,a))}},p=(e,t,n,r)=>{u(e,{withFileTypes:!0},(o,a)=>{if(o&&"ENOTDIR"!==o.code&&"ENOTSUP"!==o.code)return r(o);if(o||!a.length)return i[s](e,t,n,c(e,t,n,r));let l=a.length,d=null;const u=o=>{if(!d)return o?r(d=o):0==--l?i[s](e,t,n,c(e,t,n,r)):void 0};a.forEach(i=>h(e,i,t,n,u))})},m=(e,t,n)=>{let s;try{s=((e,t)=>i.readdirSync(e,t))(e,{withFileTypes:!0})}catch(i){if(i&&"ENOTDIR"===i.code&&"ENOTSUP"!==i.code)return l(e,t,n);throw i}return s.length&&s.forEach(s=>((e,t,n,s)=>{if("string"==typeof t){const n=i.lstatSync(r.resolve(e,t));n.name=t,t=n}t.isDirectory()&&m(r.resolve(e,t.name),n,s),l(r.resolve(e,t.name),n,s)})(e,s,t,n)),l(e,t,n)};e.exports=p,p.sync=m},function(e,t,n){t.extract=n(254),t.pack=n(264)},function(e,t,n){var i=n(2),r=n(255),s=n(132),o=n(40).Writable,a=n(40).PassThrough,c=function(){},l=function(e){return(e&=511)&&512-e},d=function(e,t){this._parent=e,this.offset=t,a.call(this)};i.inherits(d,a),d.prototype.destroy=function(e){this._parent.destroy(e)};var u=function(e){if(!(this instanceof u))return new u(e);o.call(this,e),e=e||{},this._offset=0,this._buffer=r(),this._missing=0,this._partial=!1,this._onparse=c,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var t=this,n=t._buffer,i=function(){t._continue()},a=function(e){if(t._locked=!1,e)return t.destroy(e);t._stream||i()},h=function(){t._stream=null;var e=l(t._header.size);e?t._parse(e,p):t._parse(512,w),t._locked||i()},p=function(){t._buffer.consume(l(t._header.size)),t._parse(512,w),i()},m=function(){var e=t._header.size;t._paxGlobal=s.decodePax(n.slice(0,e)),n.consume(e),h()},f=function(){var e=t._header.size;t._pax=s.decodePax(n.slice(0,e)),t._paxGlobal&&(t._pax=Object.assign({},t._paxGlobal,t._pax)),n.consume(e),h()},_=function(){var i=t._header.size;this._gnuLongPath=s.decodeLongPath(n.slice(0,i),e.filenameEncoding),n.consume(i),h()},g=function(){var i=t._header.size;this._gnuLongLinkPath=s.decodeLongPath(n.slice(0,i),e.filenameEncoding),n.consume(i),h()},w=function(){var r,o=t._offset;try{r=t._header=s.decode(n.slice(0,512),e.filenameEncoding)}catch(e){t.emit("error",e)}return n.consume(512),r?"gnu-long-path"===r.type?(t._parse(r.size,_),void i()):"gnu-long-link-path"===r.type?(t._parse(r.size,g),void i()):"pax-global-header"===r.type?(t._parse(r.size,m),void i()):"pax-header"===r.type?(t._parse(r.size,f),void i()):(t._gnuLongPath&&(r.name=t._gnuLongPath,t._gnuLongPath=null),t._gnuLongLinkPath&&(r.linkname=t._gnuLongLinkPath,t._gnuLongLinkPath=null),t._pax&&(t._header=r=function(e,t){return t.path&&(e.name=t.path),t.linkpath&&(e.linkname=t.linkpath),t.size&&(e.size=parseInt(t.size,10)),e.pax=t,e}(r,t._pax),t._pax=null),t._locked=!0,r.size&&"directory"!==r.type?(t._stream=new d(t,o),t.emit("entry",r,t._stream,a),t._parse(r.size,h),void i()):(t._parse(512,w),void t.emit("entry",r,function(e,t){var n=new d(e,t);return n.end(),n}(t,o),a))):(t._parse(512,w),void i())};this._onheader=w,this._parse(512,w)};i.inherits(u,o),u.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.emit("close"))},u.prototype._parse=function(e,t){this._destroyed||(this._offset+=e,this._missing=e,t===this._onheader&&(this._partial=!1),this._onparse=t)},u.prototype._continue=function(){if(!this._destroyed){var e=this._cb;this._cb=c,this._overflow?this._write(this._overflow,void 0,e):e()}},u.prototype._write=function(e,t,n){if(!this._destroyed){var i=this._stream,r=this._buffer,s=this._missing;if(e.length&&(this._partial=!0),e.length<s)return this._missing-=e.length,this._overflow=null,i?i.write(e,n):(r.append(e),n());this._cb=n,this._missing=0;var o=null;e.length>s&&(o=e.slice(s),e=e.slice(0,s)),i?i.end(e):r.append(e),this._overflow=o,this._onparse()}},u.prototype._final=function(e){if(this._partial)return this.destroy(new Error("Unexpected end of data"));e()},e.exports=u},function(e,t,n){"use strict";var i=n(40).Duplex;function r(e){if(!(this instanceof r))return new r(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)}))}else this.append(e);i.call(this)}n(2).inherits(r,i),r.prototype._offset=function(e){var t,n=0,i=0;if(0===e)return[0,0];for(;i<this._bufs.length;i++){if(e<(t=n+this._bufs[i].length)||i==this._bufs.length-1)return[i,e-n];n=t}},r.prototype._reverseOffset=function(e){for(var t=e[0],n=e[1],i=0;i<t;i++)n+=this._bufs[i].length;return n},r.prototype.append=function(e){var t=0;if(Buffer.isBuffer(e))this._appendBuffer(e);else if(Array.isArray(e))for(;t<e.length;t++)this.append(e[t]);else if(e instanceof r)for(;t<e._bufs.length;t++)this.append(e._bufs[t]);else null!=e&&("number"==typeof e&&(e=e.toString()),this._appendBuffer(Buffer.from(e)));return this},r.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},r.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},r.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},r.prototype.end=function(e){i.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype.get=function(e){if(!(e>this.length||e<0)){var t=this._offset(e);return this._bufs[t[0]][t[1]]}},r.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},r.prototype.copy=function(e,t,n,i){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length)return e||Buffer.alloc(0);if(i<=0)return e||Buffer.alloc(0);var r,s,o=!!e,a=this._offset(n),c=i-n,l=c,d=o&&t||0,u=a[1];if(0===n&&i==this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:Buffer.concat(this._bufs,this.length);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(e,d),d+=this._bufs[s].length;return e}if(l<=this._bufs[a[0]].length-u)return o?this._bufs[a[0]].copy(e,t,u,u+l):this._bufs[a[0]].slice(u,u+l);for(o||(e=Buffer.allocUnsafe(c)),s=a[0];s<this._bufs.length;s++){if(!(l>(r=this._bufs[s].length-u))){this._bufs[s].copy(e,d,u,u+l);break}this._bufs[s].copy(e,d,u),d+=r,l-=r,u&&(u=0)}return e},r.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return new r;var n=this._offset(e),i=this._offset(t),s=this._bufs.slice(n[0],i[0]+1);return 0==i[1]?s.pop():s[s.length-1]=s[s.length-1].slice(0,i[1]),0!=n[1]&&(s[0]=s[0].slice(n[1])),new r(s)},r.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},r.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},r.prototype.duplicate=function(){for(var e=0,t=new r;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},r.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},r.prototype.indexOf=function(e,t,n){if(void 0===n&&"string"==typeof t&&(n=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=Buffer.from([e]):"string"==typeof e?e=Buffer.from(e,n):e instanceof r?e=e.slice():Buffer.isBuffer(e)||(e=Buffer.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;for(var i=this._offset(t),s=i[0],o=i[1];s<this._bufs.length;s++){for(var a=this._bufs[s];o<a.length;){if(a.length-o>=e.length){var c=a.indexOf(e,o);if(-1!==c)return this._reverseOffset([s,c]);o=a.length-e.length+1}else{var l=this._reverseOffset([s,o]);if(this._match(l,e))return l;o++}}o=0}return-1},r.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(var n=0;n<t.length;n++)if(this.get(e+n)!==t[n])return!1;return!0},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var t in e)!function(t){r.prototype[t]=null===e[t]?function(e,n){return this.slice(e,e+n)[t](0,n)}:function(n){return this.slice(n,n+e[t])[t](0)}}(t)}(),e.exports=r},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(26).Buffer,s=n(2).inspect,o=s&&s.custom||"inspect";e.exports=function(){function e(){this.head=null,this.tail=null,this.length=0}var t=e.prototype;return t.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},t.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},t.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},t.clear=function(){this.head=this.tail=null,this.length=0},t.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},t.concat=function(e){if(0===this.length)return r.alloc(0);for(var t,n,i,s=r.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,n=s,i=a,r.prototype.copy.call(t,n,i),a+=o.data.length,o=o.next;return s},t.consume=function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n},t.first=function(){return this.head.data},t._getString=function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,s=e>r.length?r.length:e;if(s===r.length?i+=r:i+=r.slice(0,e),0===(e-=s)){s===r.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=r.slice(s));break}++n}return this.length-=n,i},t._getBuffer=function(e){var t=r.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var s=n.data,o=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,o),0===(e-=o)){o===s.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(o));break}++i}return this.length-=i,t},t[o]=function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({},t,{depth:0,customInspect:!1}))},e}()},function(e,t,n){"use strict";var i=new Set;e.exports.emitExperimentalWarning=process.emitWarning?function(e){if(!i.has(e)){var t=e+" is an experimental feature. This feature could change at any time";i.add(e),process.emitWarning(t,"ExperimentalWarning")}}:function(){}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){e.exports=n(2).deprecate},function(e,t,n){var i=n(26),r=i.Buffer;function s(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(s(i,t),t.Buffer=o),o.prototype=Object.create(r.prototype),s(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,n){"use strict";var i;function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(72),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),d=Symbol("lastPromise"),u=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function m(e){var t=e[o];if(null!==t){var n=e[h].read();null!==n&&(e[d]=null,e[o]=null,e[a]=null,t(p(n,!1)))}}function f(e){process.nextTick(m,e)}var _=Object.getPrototypeOf((function(){})),g=Object.setPrototypeOf((r(i={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[l])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise((function(t,n){process.nextTick((function(){e[c]?n(e[c]):t(p(void 0,!0))}))}));var n,i=this[d];if(i)n=new Promise(function(e,t){return function(n,i){e.then((function(){t[l]?n(p(void 0,!0)):t[u](n,i)}),i)}}(i,this));else{var r=this[h].read();if(null!==r)return Promise.resolve(p(r,!1));n=new Promise(this[u])}return this[d]=n,n}},Symbol.asyncIterator,(function(){return this})),r(i,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(p(void 0,!0))}))}))})),i),_);e.exports=function(e){var t,n=Object.create(g,(r(t={},h,{value:e,writable:!0}),r(t,o,{value:null,writable:!0}),r(t,a,{value:null,writable:!0}),r(t,c,{value:null,writable:!0}),r(t,l,{value:e._readableState.endEmitted,writable:!0}),r(t,u,{value:function(e,t){var i=n[h].read();i?(n[d]=null,n[o]=null,n[a]=null,e(p(i,!1))):(n[o]=e,n[a]=t)},writable:!0}),t));return n[d]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[d]=null,n[o]=null,n[a]=null,t(e)),void(n[c]=e)}var i=n[o];null!==i&&(n[d]=null,n[o]=null,n[a]=null,i(p(void 0,!0))),n[l]=!0})),e.on("readable",f.bind(null,n)),n}},function(e,t,n){"use strict";e.exports=r;var i=n(131);function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}n(31)(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var i;var r=n(30).codes,s=r.ERR_MISSING_ARGS,o=r.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(e,t,r,s){s=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(s);var a=!1;e.on("close",(function(){a=!0})),void 0===i&&(i=n(72)),i(e,{readable:t,writable:r},(function(e){if(e)return s(e);a=!0,s()}));var c=!1;return function(t){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void s(t||new o("pipe"))}}function l(e){e()}function d(e,t){return e.pipe(t)}function u(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r=u(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new s("streams");var o=t.map((function(e,n){var s=n<t.length-1;return c(e,s,n>0,(function(e){i||(i=e),e&&o.forEach(l),s||(o.forEach(l),r(i))}))}));return t.reduce(d)}},function(e,t,n){var i=n(265),r=n(133),s=n(31),o=Buffer.alloc,a=n(40).Readable,c=n(40).Writable,l=n(268).StringDecoder,d=n(132),u=parseInt("755",8),h=parseInt("644",8),p=o(1024),m=function(){},f=function(e,t){(t&=511)&&e.push(p.slice(0,512-t))};var _=function(e){c.call(this),this.written=0,this._to=e,this._destroyed=!1};s(_,c),_.prototype._write=function(e,t,n){if(this.written+=e.length,this._to.push(e))return n();this._to._drain=n},_.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var g=function(){c.call(this),this.linkname="",this._decoder=new l("utf-8"),this._destroyed=!1};s(g,c),g.prototype._write=function(e,t,n){this.linkname+=this._decoder.write(e),n()},g.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var w=function(){c.call(this),this._destroyed=!1};s(w,c),w.prototype._write=function(e,t,n){n(new Error("No body allowed for this entry"))},w.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var b=function(e){if(!(this instanceof b))return new b(e);a.call(this,e),this._drain=m,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};s(b,a),b.prototype.entry=function(e,t,n){if(this._stream)throw new Error("already piping an entry");if(!this._finalized&&!this._destroyed){"function"==typeof t&&(n=t,t=null),n||(n=m);var s=this;if(e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&i.S_IFMT){case i.S_IFBLK:return"block-device";case i.S_IFCHR:return"character-device";case i.S_IFDIR:return"directory";case i.S_IFIFO:return"fifo";case i.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?u:h),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=Buffer.from(t)),Buffer.isBuffer(t))return e.size=t.length,this._encode(e),this.push(t),f(s,e.size),process.nextTick(n),new w;if("symlink"===e.type&&!e.linkname){var o=new g;return r(o,(function(t){if(t)return s.destroy(),n(t);e.linkname=o.linkname,s._encode(e),n()})),o}if(this._encode(e),"file"!==e.type&&"contiguous-file"!==e.type)return process.nextTick(n),new w;var a=new _(this);return this._stream=a,r(a,(function(t){return s._stream=null,t?(s.destroy(),n(t)):a.written!==e.size?(s.destroy(),n(new Error("size mismatch"))):(f(s,e.size),s._finalizing&&s.finalize(),void n())})),a}},b.prototype.finalize=function(){this._stream?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(p),this.push(null))},b.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())},b.prototype._encode=function(e){if(!e.pax){var t=d.encode(e);if(t)return void this.push(t)}this._encodePax(e)},b.prototype._encodePax=function(e){var t=d.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),n={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(d.encode(n)),this.push(t),f(this,t.length),n.size=e.size,n.type=e.type,this.push(d.encode(n))},b.prototype._read=function(e){var t=this._drain;this._drain=m,t()},e.exports=b},function(e,t,n){e.exports=n(1).constants||n(266)},function(e,t){e.exports=require("constants")},function(e,t){e.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){i[e]=t[e]})),i;function i(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var i=t.apply(this,e),r=e[e.length-1];return"function"==typeof i&&i!==r&&Object.keys(r).forEach((function(e){i[e]=r[e]})),i}}},function(e,t){e.exports=require("string_decoder")},function(e,t,n){var i=n(134),r=n(133),s=n(1),o=function(){},a=/^v?\.0/.test(process.version),c=function(e){return"function"==typeof e},l=function(e,t,n,l){l=i(l);var d=!1;e.on("close",(function(){d=!0})),r(e,{readable:t,writable:n},(function(e){if(e)return l(e);d=!0,l()}));var u=!1;return function(t){if(!d&&!u)return u=!0,function(e){return!!a&&(!!s&&((e instanceof(s.ReadStream||o)||e instanceof(s.WriteStream||o))&&c(e.close)))}(e)?e.close(o):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void l(t||new Error("stream was destroyed"))}},d=function(e){e()},u=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),n=c(t[t.length-1]||o)&&t.pop()||o;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var i=t.map((function(r,s){var o=s<t.length-1;return l(r,o,s>0,(function(t){e||(e=t),t&&i.forEach(d),o||(i.forEach(d),n(e))}))}));return t.reduce(u)}},function(e,t,n){var i=n(3),r=n(1),s=parseInt("0777",8);function o(e,t,n,a){"function"==typeof t?(n=t,t={}):t&&"object"==typeof t||(t={mode:t});var c=t.mode,l=t.fs||r;void 0===c&&(c=s&~process.umask()),a||(a=null);var d=n||function(){};e=i.resolve(e),l.mkdir(e,c,(function(n){if(!n)return d(null,a=a||e);switch(n.code){case"ENOENT":o(i.dirname(e),t,(function(n,i){n?d(n,i):o(e,t,d,i)}));break;default:l.stat(e,(function(e,t){e||!t.isDirectory()?d(n,a):d(null,a)}))}}))}e.exports=o.mkdirp=o.mkdirP=o,o.sync=function e(t,n,o){n&&"object"==typeof n||(n={mode:n});var a=n.mode,c=n.fs||r;void 0===a&&(a=s&~process.umask()),o||(o=null),t=i.resolve(t);try{c.mkdirSync(t,a),o=o||t}catch(r){switch(r.code){case"ENOENT":o=e(i.dirname(t),n,o),e(t,n,o);break;default:var l;try{l=c.statSync(t)}catch(e){throw r}if(!l.isDirectory())throw r}}return o}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=271}]));